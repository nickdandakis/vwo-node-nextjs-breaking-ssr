/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["pages/index"],{

/***/ "./node_modules/cookie-storage/lib/cookie-storage.js":
/*!***********************************************************!*\
  !*** ./node_modules/cookie-storage/lib/cookie-storage.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.CookieStorage = void 0;\n\nvar format_cookie_1 = __webpack_require__(/*! ./format-cookie */ \"./node_modules/cookie-storage/lib/format-cookie.js\");\n\nvar parse_cookies_1 = __webpack_require__(/*! ./parse-cookies */ \"./node_modules/cookie-storage/lib/parse-cookies.js\");\n\nvar CookieStorage = function () {\n  function CookieStorage(defaultOptions) {\n    _classCallCheck(this, CookieStorage);\n\n    this._defaultOptions = Object.assign({\n      domain: null,\n      expires: null,\n      path: null,\n      secure: false\n    }, defaultOptions);\n    if (typeof Proxy !== \"undefined\") return new Proxy(this, cookieStorageHandler);\n  }\n\n  _createClass(CookieStorage, [{\n    key: \"clear\",\n    value: function clear() {\n      var _this = this;\n\n      var parsed = parse_cookies_1.parseCookies(this._getCookie());\n      var keys = Object.keys(parsed);\n      keys.forEach(function (key) {\n        return _this.removeItem(key);\n      });\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem(key) {\n      var parsed = parse_cookies_1.parseCookies(this._getCookie());\n      return Object.prototype.hasOwnProperty.call(parsed, key) ? parsed[key] : null;\n    }\n  }, {\n    key: \"key\",\n    value: function key(index) {\n      var parsed = parse_cookies_1.parseCookies(this._getCookie());\n      var sortedKeys = Object.keys(parsed).sort();\n      return index < sortedKeys.length ? sortedKeys[index] : null;\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(key, cookieOptions) {\n      var data = \"\";\n      var options = Object.assign(Object.assign(Object.assign({}, this._defaultOptions), cookieOptions), {\n        expires: new Date(0)\n      });\n      var formatted = format_cookie_1.formatCookie(key, data, options);\n\n      this._setCookie(formatted);\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(key, data, options) {\n      var opts = Object.assign(Object.assign({}, this._defaultOptions), options);\n      var formatted = format_cookie_1.formatCookie(key, data, opts);\n\n      this._setCookie(formatted);\n    }\n  }, {\n    key: \"_getCookie\",\n    value: function _getCookie() {\n      return typeof document === \"undefined\" ? \"\" : typeof document.cookie === \"undefined\" ? \"\" : document.cookie;\n    }\n  }, {\n    key: \"_setCookie\",\n    value: function _setCookie(value) {\n      document.cookie = value;\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      var parsed = parse_cookies_1.parseCookies(this._getCookie());\n      var keys = Object.keys(parsed);\n      return keys.length;\n    }\n  }]);\n\n  return CookieStorage;\n}();\n\nexports.CookieStorage = CookieStorage;\nvar cookieStorageHandler = {\n  defineProperty: function defineProperty(target, p, attributes) {\n    target.setItem(p.toString(), String(attributes.value));\n    return true;\n  },\n  deleteProperty: function deleteProperty(target, p) {\n    target.removeItem(p.toString());\n    return true;\n  },\n  get: function get(target, p, _receiver) {\n    if (typeof p === \"string\" && p in target) return target[p];\n    var result = target.getItem(p.toString());\n    return result !== null ? result : undefined;\n  },\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, p) {\n    if (p in target) return undefined;\n    return {\n      configurable: true,\n      enumerable: true,\n      value: target.getItem(p.toString()),\n      writable: true\n    };\n  },\n  has: function has(target, p) {\n    if (typeof p === \"string\" && p in target) return true;\n    return target.getItem(p.toString()) !== null;\n  },\n  ownKeys: function ownKeys(target) {\n    var keys = [];\n\n    for (var i = 0; i < target.length; i++) {\n      var key = target.key(i);\n      if (key !== null) keys.push(key);\n    }\n\n    return keys;\n  },\n  preventExtensions: function preventExtensions(_) {\n    throw new TypeError(\"can't prevent extensions on this proxy object\");\n  },\n  set: function set(target, p, value, _) {\n    target.setItem(p.toString(), String(value));\n    return true;\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY29va2llLXN0b3JhZ2UvbGliL2Nvb2tpZS1zdG9yYWdlLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGtEQUFrRCwwQ0FBMEM7O0FBRTVGLDRDQUE0QyxnQkFBZ0Isa0JBQWtCLE9BQU8sMkJBQTJCLHdEQUF3RCxnQ0FBZ0MsdURBQXVEOztBQUUvUCw4REFBOEQsc0VBQXNFLDhEQUE4RDs7QUFFbE0sOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YscUJBQXFCOztBQUVyQixzQkFBc0IsbUJBQU8sQ0FBQywyRUFBaUI7O0FBRS9DLHNCQUFzQixtQkFBTyxDQUFDLDJFQUFpQjs7QUFFL0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvY29va2llLXN0b3JhZ2UvbGliL2Nvb2tpZS1zdG9yYWdlLmpzPzQ2NzAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuQ29va2llU3RvcmFnZSA9IHZvaWQgMDtcblxudmFyIGZvcm1hdF9jb29raWVfMSA9IHJlcXVpcmUoXCIuL2Zvcm1hdC1jb29raWVcIik7XG5cbnZhciBwYXJzZV9jb29raWVzXzEgPSByZXF1aXJlKFwiLi9wYXJzZS1jb29raWVzXCIpO1xuXG52YXIgQ29va2llU3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ29va2llU3RvcmFnZShkZWZhdWx0T3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb29raWVTdG9yYWdlKTtcblxuICAgIHRoaXMuX2RlZmF1bHRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBkb21haW46IG51bGwsXG4gICAgICBleHBpcmVzOiBudWxsLFxuICAgICAgcGF0aDogbnVsbCxcbiAgICAgIHNlY3VyZTogZmFsc2VcbiAgICB9LCBkZWZhdWx0T3B0aW9ucyk7XG4gICAgaWYgKHR5cGVvZiBQcm94eSAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG5ldyBQcm94eSh0aGlzLCBjb29raWVTdG9yYWdlSGFuZGxlcik7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ29va2llU3RvcmFnZSwgW3tcbiAgICBrZXk6IFwiY2xlYXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgcGFyc2VkID0gcGFyc2VfY29va2llc18xLnBhcnNlQ29va2llcyh0aGlzLl9nZXRDb29raWUoKSk7XG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHBhcnNlZCk7XG4gICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEl0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHtcbiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZV9jb29raWVzXzEucGFyc2VDb29raWVzKHRoaXMuX2dldENvb2tpZSgpKTtcbiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocGFyc2VkLCBrZXkpID8gcGFyc2VkW2tleV0gOiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJrZXlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24ga2V5KGluZGV4KSB7XG4gICAgICB2YXIgcGFyc2VkID0gcGFyc2VfY29va2llc18xLnBhcnNlQ29va2llcyh0aGlzLl9nZXRDb29raWUoKSk7XG4gICAgICB2YXIgc29ydGVkS2V5cyA9IE9iamVjdC5rZXlzKHBhcnNlZCkuc29ydCgpO1xuICAgICAgcmV0dXJuIGluZGV4IDwgc29ydGVkS2V5cy5sZW5ndGggPyBzb3J0ZWRLZXlzW2luZGV4XSA6IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUl0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXksIGNvb2tpZU9wdGlvbnMpIHtcbiAgICAgIHZhciBkYXRhID0gXCJcIjtcbiAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX2RlZmF1bHRPcHRpb25zKSwgY29va2llT3B0aW9ucyksIHtcbiAgICAgICAgZXhwaXJlczogbmV3IERhdGUoMClcbiAgICAgIH0pO1xuICAgICAgdmFyIGZvcm1hdHRlZCA9IGZvcm1hdF9jb29raWVfMS5mb3JtYXRDb29raWUoa2V5LCBkYXRhLCBvcHRpb25zKTtcblxuICAgICAgdGhpcy5fc2V0Q29va2llKGZvcm1hdHRlZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldEl0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SXRlbShrZXksIGRhdGEsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBvcHRzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9kZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgdmFyIGZvcm1hdHRlZCA9IGZvcm1hdF9jb29raWVfMS5mb3JtYXRDb29raWUoa2V5LCBkYXRhLCBvcHRzKTtcblxuICAgICAgdGhpcy5fc2V0Q29va2llKGZvcm1hdHRlZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9nZXRDb29raWVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldENvb2tpZSgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIgPyBcIlwiIDogdHlwZW9mIGRvY3VtZW50LmNvb2tpZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwiXCIgOiBkb2N1bWVudC5jb29raWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9zZXRDb29raWVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3NldENvb2tpZSh2YWx1ZSkge1xuICAgICAgZG9jdW1lbnQuY29va2llID0gdmFsdWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImxlbmd0aFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlX2Nvb2tpZXNfMS5wYXJzZUNvb2tpZXModGhpcy5fZ2V0Q29va2llKCkpO1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwYXJzZWQpO1xuICAgICAgcmV0dXJuIGtleXMubGVuZ3RoO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb29raWVTdG9yYWdlO1xufSgpO1xuXG5leHBvcnRzLkNvb2tpZVN0b3JhZ2UgPSBDb29raWVTdG9yYWdlO1xudmFyIGNvb2tpZVN0b3JhZ2VIYW5kbGVyID0ge1xuICBkZWZpbmVQcm9wZXJ0eTogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwLCBhdHRyaWJ1dGVzKSB7XG4gICAgdGFyZ2V0LnNldEl0ZW0ocC50b1N0cmluZygpLCBTdHJpbmcoYXR0cmlidXRlcy52YWx1ZSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBkZWxldGVQcm9wZXJ0eTogZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwKSB7XG4gICAgdGFyZ2V0LnJlbW92ZUl0ZW0ocC50b1N0cmluZygpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQodGFyZ2V0LCBwLCBfcmVjZWl2ZXIpIHtcbiAgICBpZiAodHlwZW9mIHAgPT09IFwic3RyaW5nXCIgJiYgcCBpbiB0YXJnZXQpIHJldHVybiB0YXJnZXRbcF07XG4gICAgdmFyIHJlc3VsdCA9IHRhcmdldC5nZXRJdGVtKHAudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuIHJlc3VsdCAhPT0gbnVsbCA/IHJlc3VsdCA6IHVuZGVmaW5lZDtcbiAgfSxcbiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwKSB7XG4gICAgaWYgKHAgaW4gdGFyZ2V0KSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHRhcmdldC5nZXRJdGVtKHAudG9TdHJpbmcoKSksXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH07XG4gIH0sXG4gIGhhczogZnVuY3Rpb24gaGFzKHRhcmdldCwgcCkge1xuICAgIGlmICh0eXBlb2YgcCA9PT0gXCJzdHJpbmdcIiAmJiBwIGluIHRhcmdldCkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIHRhcmdldC5nZXRJdGVtKHAudG9TdHJpbmcoKSkgIT09IG51bGw7XG4gIH0sXG4gIG93bktleXM6IGZ1bmN0aW9uIG93bktleXModGFyZ2V0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gdGFyZ2V0LmtleShpKTtcbiAgICAgIGlmIChrZXkgIT09IG51bGwpIGtleXMucHVzaChrZXkpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXlzO1xuICB9LFxuICBwcmV2ZW50RXh0ZW5zaW9uczogZnVuY3Rpb24gcHJldmVudEV4dGVuc2lvbnMoXykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW4ndCBwcmV2ZW50IGV4dGVuc2lvbnMgb24gdGhpcyBwcm94eSBvYmplY3RcIik7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gc2V0KHRhcmdldCwgcCwgdmFsdWUsIF8pIHtcbiAgICB0YXJnZXQuc2V0SXRlbShwLnRvU3RyaW5nKCksIFN0cmluZyh2YWx1ZSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/cookie-storage/lib/cookie-storage.js\n");

/***/ }),

/***/ "./node_modules/cookie-storage/lib/format-cookie.js":
/*!**********************************************************!*\
  !*** ./node_modules/cookie-storage/lib/format-cookie.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.formatCookie = void 0;\n\nvar getSameSiteValue = function getSameSiteValue(o) {\n  var sameSite = o.sameSite;\n  if (typeof sameSite === \"undefined\") return null;\n  if ([\"none\", \"lax\", \"strict\"].indexOf(sameSite.toLowerCase()) >= 0) return sameSite;\n  return null;\n};\n\nvar formatOptions = function formatOptions(o) {\n  var path = o.path,\n      domain = o.domain,\n      expires = o.expires,\n      secure = o.secure;\n  var sameSiteValue = getSameSiteValue(o);\n  return [typeof path === \"undefined\" || path === null ? \"\" : \";path=\" + path, typeof domain === \"undefined\" || domain === null ? \"\" : \";domain=\" + domain, typeof expires === \"undefined\" || expires === null ? \"\" : \";expires=\" + expires.toUTCString(), typeof secure === \"undefined\" || secure === false ? \"\" : \";secure\", sameSiteValue === null ? \"\" : \";SameSite=\" + sameSiteValue].join(\"\");\n};\n\nvar formatCookie = function formatCookie(k, d, o) {\n  return [encodeURIComponent(k), \"=\", encodeURIComponent(d), formatOptions(o)].join(\"\");\n};\n\nexports.formatCookie = formatCookie;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY29va2llLXN0b3JhZ2UvbGliL2Zvcm1hdC1jb29raWUuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysb0JBQW9COztBQUVwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLHlFQUF5RSwrRUFBK0UsOEZBQThGLHlDQUF5QztBQUMvVjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9jb29raWUtc3RvcmFnZS9saWIvZm9ybWF0LWNvb2tpZS5qcz8zNTJhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5mb3JtYXRDb29raWUgPSB2b2lkIDA7XG5cbnZhciBnZXRTYW1lU2l0ZVZhbHVlID0gZnVuY3Rpb24gZ2V0U2FtZVNpdGVWYWx1ZShvKSB7XG4gIHZhciBzYW1lU2l0ZSA9IG8uc2FtZVNpdGU7XG4gIGlmICh0eXBlb2Ygc2FtZVNpdGUgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xuICBpZiAoW1wibm9uZVwiLCBcImxheFwiLCBcInN0cmljdFwiXS5pbmRleE9mKHNhbWVTaXRlLnRvTG93ZXJDYXNlKCkpID49IDApIHJldHVybiBzYW1lU2l0ZTtcbiAgcmV0dXJuIG51bGw7XG59O1xuXG52YXIgZm9ybWF0T3B0aW9ucyA9IGZ1bmN0aW9uIGZvcm1hdE9wdGlvbnMobykge1xuICB2YXIgcGF0aCA9IG8ucGF0aCxcbiAgICAgIGRvbWFpbiA9IG8uZG9tYWluLFxuICAgICAgZXhwaXJlcyA9IG8uZXhwaXJlcyxcbiAgICAgIHNlY3VyZSA9IG8uc2VjdXJlO1xuICB2YXIgc2FtZVNpdGVWYWx1ZSA9IGdldFNhbWVTaXRlVmFsdWUobyk7XG4gIHJldHVybiBbdHlwZW9mIHBhdGggPT09IFwidW5kZWZpbmVkXCIgfHwgcGF0aCA9PT0gbnVsbCA/IFwiXCIgOiBcIjtwYXRoPVwiICsgcGF0aCwgdHlwZW9mIGRvbWFpbiA9PT0gXCJ1bmRlZmluZWRcIiB8fCBkb21haW4gPT09IG51bGwgPyBcIlwiIDogXCI7ZG9tYWluPVwiICsgZG9tYWluLCB0eXBlb2YgZXhwaXJlcyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBleHBpcmVzID09PSBudWxsID8gXCJcIiA6IFwiO2V4cGlyZXM9XCIgKyBleHBpcmVzLnRvVVRDU3RyaW5nKCksIHR5cGVvZiBzZWN1cmUgPT09IFwidW5kZWZpbmVkXCIgfHwgc2VjdXJlID09PSBmYWxzZSA/IFwiXCIgOiBcIjtzZWN1cmVcIiwgc2FtZVNpdGVWYWx1ZSA9PT0gbnVsbCA/IFwiXCIgOiBcIjtTYW1lU2l0ZT1cIiArIHNhbWVTaXRlVmFsdWVdLmpvaW4oXCJcIik7XG59O1xuXG52YXIgZm9ybWF0Q29va2llID0gZnVuY3Rpb24gZm9ybWF0Q29va2llKGssIGQsIG8pIHtcbiAgcmV0dXJuIFtlbmNvZGVVUklDb21wb25lbnQoayksIFwiPVwiLCBlbmNvZGVVUklDb21wb25lbnQoZCksIGZvcm1hdE9wdGlvbnMobyldLmpvaW4oXCJcIik7XG59O1xuXG5leHBvcnRzLmZvcm1hdENvb2tpZSA9IGZvcm1hdENvb2tpZTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/cookie-storage/lib/format-cookie.js\n");

/***/ }),

/***/ "./node_modules/cookie-storage/lib/index.js":
/*!**************************************************!*\
  !*** ./node_modules/cookie-storage/lib/index.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\nvar cookie_storage_1 = __webpack_require__(/*! ./cookie-storage */ \"./node_modules/cookie-storage/lib/cookie-storage.js\");\n\nObject.defineProperty(exports, \"CookieStorage\", ({\n  enumerable: true,\n  get: function get() {\n    return cookie_storage_1.CookieStorage;\n  }\n}));\n\nvar format_cookie_1 = __webpack_require__(/*! ./format-cookie */ \"./node_modules/cookie-storage/lib/format-cookie.js\");\n\nObject.defineProperty(exports, \"formatCookie\", ({\n  enumerable: true,\n  get: function get() {\n    return format_cookie_1.formatCookie;\n  }\n}));\n\nvar parse_cookies_1 = __webpack_require__(/*! ./parse-cookies */ \"./node_modules/cookie-storage/lib/parse-cookies.js\");\n\nObject.defineProperty(exports, \"parseCookies\", ({\n  enumerable: true,\n  get: function get() {\n    return parse_cookies_1.parseCookies;\n  }\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY29va2llLXN0b3JhZ2UvbGliL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQzs7QUFFRix1QkFBdUIsbUJBQU8sQ0FBQyw2RUFBa0I7O0FBRWpELGlEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQzs7QUFFRixzQkFBc0IsbUJBQU8sQ0FBQywyRUFBaUI7O0FBRS9DLGdEQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQzs7QUFFRixzQkFBc0IsbUJBQU8sQ0FBQywyRUFBaUI7O0FBRS9DLGdEQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvY29va2llLXN0b3JhZ2UvbGliL2luZGV4LmpzPzAzNWMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBjb29raWVfc3RvcmFnZV8xID0gcmVxdWlyZShcIi4vY29va2llLXN0b3JhZ2VcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvb2tpZVN0b3JhZ2VcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gY29va2llX3N0b3JhZ2VfMS5Db29raWVTdG9yYWdlO1xuICB9XG59KTtcblxudmFyIGZvcm1hdF9jb29raWVfMSA9IHJlcXVpcmUoXCIuL2Zvcm1hdC1jb29raWVcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImZvcm1hdENvb2tpZVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBmb3JtYXRfY29va2llXzEuZm9ybWF0Q29va2llO1xuICB9XG59KTtcblxudmFyIHBhcnNlX2Nvb2tpZXNfMSA9IHJlcXVpcmUoXCIuL3BhcnNlLWNvb2tpZXNcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInBhcnNlQ29va2llc1wiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBwYXJzZV9jb29raWVzXzEucGFyc2VDb29raWVzO1xuICB9XG59KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/cookie-storage/lib/index.js\n");

/***/ }),

/***/ "./node_modules/cookie-storage/lib/parse-cookies.js":
/*!**********************************************************!*\
  !*** ./node_modules/cookie-storage/lib/parse-cookies.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.parseCookies = void 0;\n\nvar parseCookies = function parseCookies(s) {\n  if (s.length === 0) return {};\n  var parsed = {};\n  var pattern = new RegExp(\"\\\\s*;\\\\s*\");\n  s.split(pattern).forEach(function (i) {\n    var _i$split = i.split(\"=\"),\n        _i$split2 = _slicedToArray(_i$split, 2),\n        encodedKey = _i$split2[0],\n        encodedValue = _i$split2[1];\n\n    var key = decodeURIComponent(encodedKey);\n    var value = decodeURIComponent(encodedValue);\n    parsed[key] = value;\n  });\n  return parsed;\n};\n\nexports.parseCookies = parseCookies;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY29va2llLXN0b3JhZ2UvbGliL3BhcnNlLWNvb2tpZXMuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsa0NBQWtDOztBQUVsQyw4QkFBOEI7O0FBRTlCLGtEQUFrRCxnQkFBZ0IsZ0VBQWdFLHdEQUF3RCw2REFBNkQsc0RBQXNEOztBQUU3Uyx1Q0FBdUMsdURBQXVELHVDQUF1QyxTQUFTLE9BQU8sb0JBQW9COztBQUV6Syx5Q0FBeUMsZ0ZBQWdGLGVBQWUsZUFBZSxnQkFBZ0Isb0JBQW9CLE1BQU0sMENBQTBDLCtCQUErQixhQUFhLHFCQUFxQix1Q0FBdUMsY0FBYyxXQUFXLFlBQVksVUFBVSxNQUFNLG1EQUFtRCxVQUFVLHNCQUFzQjs7QUFFM2QsZ0NBQWdDOztBQUVoQyw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixvQkFBb0I7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLG9CQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvY29va2llLXN0b3JhZ2UvbGliL3BhcnNlLWNvb2tpZXMuanM/ZDVhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucGFyc2VDb29raWVzID0gdm9pZCAwO1xuXG52YXIgcGFyc2VDb29raWVzID0gZnVuY3Rpb24gcGFyc2VDb29raWVzKHMpIHtcbiAgaWYgKHMubGVuZ3RoID09PSAwKSByZXR1cm4ge307XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXFxcXHMqO1xcXFxzKlwiKTtcbiAgcy5zcGxpdChwYXR0ZXJuKS5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgdmFyIF9pJHNwbGl0ID0gaS5zcGxpdChcIj1cIiksXG4gICAgICAgIF9pJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9pJHNwbGl0LCAyKSxcbiAgICAgICAgZW5jb2RlZEtleSA9IF9pJHNwbGl0MlswXSxcbiAgICAgICAgZW5jb2RlZFZhbHVlID0gX2kkc3BsaXQyWzFdO1xuXG4gICAgdmFyIGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkS2V5KTtcbiAgICB2YXIgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFZhbHVlKTtcbiAgICBwYXJzZWRba2V5XSA9IHZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbmV4cG9ydHMucGFyc2VDb29raWVzID0gcGFyc2VDb29raWVzOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/cookie-storage/lib/parse-cookies.js\n");

/***/ }),

/***/ "./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2Fhome%2Frunner%2Fvwo-node-nextjs-breaking-ssr%2Fpages%2Findex.js&page=%2F!":
/*!********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2Fhome%2Frunner%2Fvwo-node-nextjs-breaking-ssr%2Fpages%2Findex.js&page=%2F! ***!
  \********************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return __webpack_require__(/*! ./pages/index.js */ \"./pages/index.js\");\n      }\n    ]);\n    if(true) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWNsaWVudC1wYWdlcy1sb2FkZXIuanM/YWJzb2x1dGVQYWdlUGF0aD0lMkZob21lJTJGcnVubmVyJTJGdndvLW5vZGUtbmV4dGpzLWJyZWFraW5nLXNzciUyRnBhZ2VzJTJGaW5kZXguanMmcGFnZT0lMkYhLmpzIiwibWFwcGluZ3MiOiI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFPLENBQUMsMENBQWtCO0FBQ3pDO0FBQ0E7QUFDQSxPQUFPLElBQVU7QUFDakIsTUFBTSxVQUFVO0FBQ2hCO0FBQ0EsT0FBTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLz83ZGRlIl0sInNvdXJjZXNDb250ZW50IjpbIlxuICAgICh3aW5kb3cuX19ORVhUX1AgPSB3aW5kb3cuX19ORVhUX1AgfHwgW10pLnB1c2goW1xuICAgICAgXCIvXCIsXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZXF1aXJlKFwiLi9wYWdlcy9pbmRleC5qc1wiKTtcbiAgICAgIH1cbiAgICBdKTtcbiAgICBpZihtb2R1bGUuaG90KSB7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuX19ORVhUX1AucHVzaChbXCIvXCJdKVxuICAgICAgfSk7XG4gICAgfVxuICAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2Fhome%2Frunner%2Fvwo-node-nextjs-breaking-ssr%2Fpages%2Findex.js&page=%2F!\n");

/***/ }),

/***/ "./config.js":
/*!*******************!*\
  !*** ./config.js ***!
  \*******************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"VWO_ACCOUNT_ID\": function() { return /* binding */ VWO_ACCOUNT_ID; },\n/* harmony export */   \"VWO_EXPERIMENT_CAMPAIGN_KEY\": function() { return /* binding */ VWO_EXPERIMENT_CAMPAIGN_KEY; },\n/* harmony export */   \"VWO_EXPERIMENT_CONTROL_VARIATION_KEY\": function() { return /* binding */ VWO_EXPERIMENT_CONTROL_VARIATION_KEY; },\n/* harmony export */   \"VWO_EXPERIMENT_TEST_VARIATION_KEY\": function() { return /* binding */ VWO_EXPERIMENT_TEST_VARIATION_KEY; },\n/* harmony export */   \"VWO_SDK_KEY\": function() { return /* binding */ VWO_SDK_KEY; }\n/* harmony export */ });\nvar VWO_ACCOUNT_ID = \"627540\";\nvar VWO_SDK_KEY = \"d6080b7a38521bad7abf9dd393a17a07\";\nvar VWO_EXPERIMENT_CAMPAIGN_KEY = \"Hero-Fast Cash-Left/Centered\";\nvar VWO_EXPERIMENT_CONTROL_VARIATION_KEY = \"Control\";\nvar VWO_EXPERIMENT_TEST_VARIATION_KEY = \"Centered\";\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb25maWcuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxJQUFNQSxjQUFjLEdBQUdDLFFBQXNDLENBQUM7QUFDOUQsSUFBTUcsV0FBVyxHQUFHSCxrQ0FBbUMsQ0FBQztBQUV4RCxJQUFNSywyQkFBMkIsR0FBR0wsOEJBQW1ELENBQUM7QUFDeEYsSUFBTU8sb0NBQW9DLEdBQUdQLFNBQTRELENBQUM7QUFDMUcsSUFBTVMsaUNBQWlDLEdBQUdULFVBQXlELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29uZmlnLmpzP2MyYjMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFZXT19BQ0NPVU5UX0lEID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVldPX0FDQ09VTlRfSUQ7XG5leHBvcnQgY29uc3QgVldPX1NES19LRVkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19WV09fU0RLX0tFWTtcblxuZXhwb3J0IGNvbnN0IFZXT19FWFBFUklNRU5UX0NBTVBBSUdOX0tFWSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1ZXT19FWFBFUklNRU5UX0NBTVBBSUdOX0tFWTtcbmV4cG9ydCBjb25zdCBWV09fRVhQRVJJTUVOVF9DT05UUk9MX1ZBUklBVElPTl9LRVkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19WV09fRVhQRVJJTUVOVF9DT05UUk9MX1ZBUklBVElPTl9LRVk7XG5leHBvcnQgY29uc3QgVldPX0VYUEVSSU1FTlRfVEVTVF9WQVJJQVRJT05fS0VZID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVldPX0VYUEVSSU1FTlRfVEVTVF9WQVJJQVRJT05fS0VZOyJdLCJuYW1lcyI6WyJWV09fQUNDT1VOVF9JRCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19WV09fQUNDT1VOVF9JRCIsIlZXT19TREtfS0VZIiwiTkVYVF9QVUJMSUNfVldPX1NES19LRVkiLCJWV09fRVhQRVJJTUVOVF9DQU1QQUlHTl9LRVkiLCJORVhUX1BVQkxJQ19WV09fRVhQRVJJTUVOVF9DQU1QQUlHTl9LRVkiLCJWV09fRVhQRVJJTUVOVF9DT05UUk9MX1ZBUklBVElPTl9LRVkiLCJORVhUX1BVQkxJQ19WV09fRVhQRVJJTUVOVF9DT05UUk9MX1ZBUklBVElPTl9LRVkiLCJWV09fRVhQRVJJTUVOVF9URVNUX1ZBUklBVElPTl9LRVkiLCJORVhUX1BVQkxJQ19WV09fRVhQRVJJTUVOVF9URVNUX1ZBUklBVElPTl9LRVkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./config.js\n");

/***/ }),

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"__N_SSP\": function() { return /* binding */ __N_SSP; },\n/* harmony export */   \"default\": function() { return /* binding */ IndexPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./config.js\");\n/* harmony import */ var _vwo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../vwo */ \"./vwo.js\");\n\n\n\nvar _s = $RefreshSig$();\nvar __N_SSP = true;\nfunction IndexPage(param) {\n    var userID = param.userID;\n    _s();\n    var ref = (0,_vwo__WEBPACK_IMPORTED_MODULE_2__.useVWOExperiment)({\n        campaignKey: _config__WEBPACK_IMPORTED_MODULE_1__.VWO_EXPERIMENT_CAMPAIGN_KEY,\n        userID: userID\n    }), variation = ref.data;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                children: \"Minimal repro of VWO SDK with broken SSR\"\n            }, void 0, false, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 22,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                children: \"Comment out the lines related to prefetching to get SSR to break.\"\n            }, void 0, false, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 23,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                children: \"View this page's source to see SSR being broken.\"\n            }, void 0, false, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 26,\n                columnNumber: 7\n            }, this),\n            variation === _config__WEBPACK_IMPORTED_MODULE_1__.VWO_EXPERIMENT_CONTROL_VARIATION_KEY ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                style: {\n                    color: \"gray\"\n                },\n                children: [\n                    \"Serving the control \",\n                    variation\n                ]\n            }, void 0, true, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 31,\n                columnNumber: 9\n            }, this) : variation === _config__WEBPACK_IMPORTED_MODULE_1__.VWO_EXPERIMENT_TEST_VARIATION_KEY ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                style: {\n                    color: \"green\"\n                },\n                children: [\n                    \"Serving new variation \",\n                    variation\n                ]\n            }, void 0, true, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 35,\n                columnNumber: 9\n            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                style: {\n                    color: \"red\"\n                },\n                children: \"Serving no experiment\"\n            }, void 0, false, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 39,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                children: \"Configuration\"\n            }, void 0, false, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 44,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dl\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dt\", {\n                        children: \"VWO Account ID\"\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 46,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dd\", {\n                        children: _config__WEBPACK_IMPORTED_MODULE_1__.VWO_ACCOUNT_ID\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 47,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dt\", {\n                        children: \"VWO SDK key\"\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 49,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dd\", {\n                        children: _config__WEBPACK_IMPORTED_MODULE_1__.VWO_SDK_KEY\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 50,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dt\", {\n                        children: \"VWO campaign key\"\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 52,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dd\", {\n                        children: _config__WEBPACK_IMPORTED_MODULE_1__.VWO_EXPERIMENT_CAMPAIGN_KEY\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 53,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dt\", {\n                        children: \"VWO control variation key\"\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 55,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dd\", {\n                        children: _config__WEBPACK_IMPORTED_MODULE_1__.VWO_EXPERIMENT_CONTROL_VARIATION_KEY\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 56,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dt\", {\n                        children: \"VWO experiment variation key\"\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 58,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dd\", {\n                        children: _config__WEBPACK_IMPORTED_MODULE_1__.VWO_EXPERIMENT_TEST_VARIATION_KEY\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 59,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dt\", {\n                        children: [\n                            \"VWO user cookie (ie \",\n                            _vwo__WEBPACK_IMPORTED_MODULE_2__.VWO_UUID_COOKIE_NAME,\n                            \")\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 61,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"dd\", {\n                        children: userID ? userID : \"No cookie found, are you running an adblocker?\"\n                    }, void 0, false, {\n                        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                        lineNumber: 62,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n                lineNumber: 45,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/runner/vwo-node-nextjs-breaking-ssr/pages/index.js\",\n        lineNumber: 21,\n        columnNumber: 5\n    }, this);\n};\n_s(IndexPage, \"hlTRKHDDKQdoFhO3kLdf1882k30=\", false, function() {\n    return [\n        _vwo__WEBPACK_IMPORTED_MODULE_2__.useVWOExperiment\n    ];\n});\n_c = IndexPage;\nvar _c;\n$RefreshReg$(_c, \"IndexPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQVNtQjtBQUtIOzs7QUFFRCxTQUFTTyxTQUFTLENBQUMsS0FBVSxFQUFFO1FBQVosTUFBUSxHQUFSLEtBQVUsQ0FBUkMsTUFBTTs7SUFDeEMsSUFBNEJGLEdBQXNFLEdBQXRFQSxzREFBZ0IsQ0FBQztRQUFFRyxXQUFXLEVBQUVQLGdFQUEyQjtRQUFFTSxNQUFNLEVBQU5BLE1BQU07S0FBRSxDQUFDLEVBQTFGRSxTQUFlLEdBQUtKLEdBQXNFLENBQTFGSSxJQUFJO0lBRVoscUJBQ0UsOERBQUNFLEtBQUc7OzBCQUNGLDhEQUFDQyxJQUFFOzBCQUFDLDBDQUF3Qzs7Ozs7b0JBQUs7MEJBQ2pELDhEQUFDQyxHQUFDOzBCQUFDLG1FQUVIOzs7OztvQkFBSTswQkFDSiw4REFBQ0EsR0FBQzswQkFBQyxrREFFSDs7Ozs7b0JBQUk7WUFFSEgsU0FBUyxLQUFLUix5RUFBb0MsaUJBQ2pELDhEQUFDWSxJQUFFO2dCQUFDQyxLQUFLLEVBQUU7b0JBQUVDLEtBQUssRUFBRSxNQUFNO2lCQUFFOztvQkFBRSxzQkFDUjtvQkFBQ04sU0FBUzs7Ozs7O29CQUMzQixHQUNIQSxTQUFTLEtBQUtQLHNFQUFpQyxpQkFDakQsOERBQUNXLElBQUU7Z0JBQUNDLEtBQUssRUFBRTtvQkFBRUMsS0FBSyxFQUFFLE9BQU87aUJBQUU7O29CQUFFLHdCQUNQO29CQUFDTixTQUFTOzs7Ozs7b0JBQzdCLGlCQUVMLDhEQUFDSSxJQUFFO2dCQUFDQyxLQUFLLEVBQUU7b0JBQUVDLEtBQUssRUFBRSxLQUFLO2lCQUFFOzBCQUFFLHVCQUU3Qjs7Ozs7b0JBQUs7MEJBR1AsOERBQUNDLElBQUU7MEJBQUMsZUFBYTs7Ozs7b0JBQUs7MEJBQ3RCLDhEQUFDQyxJQUFFOztrQ0FDRCw4REFBQ0MsSUFBRTtrQ0FBQyxnQkFBYzs7Ozs7NEJBQUs7a0NBQ3ZCLDhEQUFDQyxJQUFFO2tDQUFFckIsbURBQWM7Ozs7OzRCQUFNO2tDQUV6Qiw4REFBQ29CLElBQUU7a0NBQUMsYUFBVzs7Ozs7NEJBQUs7a0NBQ3BCLDhEQUFDQyxJQUFFO2tDQUFFcEIsZ0RBQVc7Ozs7OzRCQUFNO2tDQUV0Qiw4REFBQ21CLElBQUU7a0NBQUMsa0JBQWdCOzs7Ozs0QkFBSztrQ0FDekIsOERBQUNDLElBQUU7a0NBQUVuQixnRUFBMkI7Ozs7OzRCQUFNO2tDQUV0Qyw4REFBQ2tCLElBQUU7a0NBQUMsMkJBQXlCOzs7Ozs0QkFBSztrQ0FDbEMsOERBQUNDLElBQUU7a0NBQUVsQix5RUFBb0M7Ozs7OzRCQUFNO2tDQUUvQyw4REFBQ2lCLElBQUU7a0NBQUMsOEJBQTRCOzs7Ozs0QkFBSztrQ0FDckMsOERBQUNDLElBQUU7a0NBQUVqQixzRUFBaUM7Ozs7OzRCQUFNO2tDQUU1Qyw4REFBQ2dCLElBQUU7OzRCQUFDLHNCQUFvQjs0QkFBQ2Ysc0RBQW9COzRCQUFDLEdBQUM7Ozs7Ozs0QkFBSztrQ0FDcEQsOERBQUNnQixJQUFFO2tDQUFFYixNQUFNLEdBQUdBLE1BQU0sR0FBRyxnREFBZ0Q7Ozs7OzRCQUFNOzs7Ozs7b0JBQzFFOzs7Ozs7WUFDRCxDQUNQO0NBQ0Y7R0FqRHVCRCxTQUFTOztRQUNIRCxrREFBZ0I7OztBQUR0QkMsS0FBQUEsU0FBUyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9wYWdlcy9pbmRleC5qcz9iZWU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlQ29va2llcyB9IGZyb20gJ2Nvb2tpZS1zdG9yYWdlJztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50LCBkZWh5ZHJhdGUgfSBmcm9tICdyZWFjdC1xdWVyeSc7XG5cbmltcG9ydCB7XG4gIFZXT19BQ0NPVU5UX0lELFxuICBWV09fU0RLX0tFWSxcbiAgVldPX0VYUEVSSU1FTlRfQ0FNUEFJR05fS0VZLFxuICBWV09fRVhQRVJJTUVOVF9DT05UUk9MX1ZBUklBVElPTl9LRVksXG4gIFZXT19FWFBFUklNRU5UX1RFU1RfVkFSSUFUSU9OX0tFWSxcbn0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7XG4gIFZXT19VVUlEX0NPT0tJRV9OQU1FLFxuICB1c2VWV09FeHBlcmltZW50LFxuICBwcmVmZXRjaFZXT0V4cGVyaW1lbnQsXG59IGZyb20gJy4uL3Z3byc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEluZGV4UGFnZSh7IHVzZXJJRCB9KSB7XG4gIGNvbnN0IHsgZGF0YTogdmFyaWF0aW9uIH0gPSB1c2VWV09FeHBlcmltZW50KHsgY2FtcGFpZ25LZXk6IFZXT19FWFBFUklNRU5UX0NBTVBBSUdOX0tFWSwgdXNlcklEIH0pO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGgxPk1pbmltYWwgcmVwcm8gb2YgVldPIFNESyB3aXRoIGJyb2tlbiBTU1I8L2gxPlxuICAgICAgPHA+XG4gICAgICAgIENvbW1lbnQgb3V0IHRoZSBsaW5lcyByZWxhdGVkIHRvIHByZWZldGNoaW5nIHRvIGdldCBTU1IgdG8gYnJlYWsuXG4gICAgICA8L3A+XG4gICAgICA8cD5cbiAgICAgICAgVmlldyB0aGlzIHBhZ2UncyBzb3VyY2UgdG8gc2VlIFNTUiBiZWluZyBicm9rZW4uXG4gICAgICA8L3A+XG5cbiAgICAgIHt2YXJpYXRpb24gPT09IFZXT19FWFBFUklNRU5UX0NPTlRST0xfVkFSSUFUSU9OX0tFWSA/IChcbiAgICAgICAgPGgyIHN0eWxlPXt7IGNvbG9yOiAnZ3JheScgfX0+XG4gICAgICAgICAgU2VydmluZyB0aGUgY29udHJvbCB7dmFyaWF0aW9ufVxuICAgICAgICA8L2gyPlxuICAgICAgKSA6IHZhcmlhdGlvbiA9PT0gVldPX0VYUEVSSU1FTlRfVEVTVF9WQVJJQVRJT05fS0VZID8gKFxuICAgICAgICA8aDIgc3R5bGU9e3sgY29sb3I6ICdncmVlbicgfX0+XG4gICAgICAgICAgU2VydmluZyBuZXcgdmFyaWF0aW9uIHt2YXJpYXRpb259XG4gICAgICAgIDwvaDI+XG4gICAgICApIDogKFxuICAgICAgICA8aDIgc3R5bGU9e3sgY29sb3I6ICdyZWQnIH19PlxuICAgICAgICAgIFNlcnZpbmcgbm8gZXhwZXJpbWVudFxuICAgICAgICA8L2gyPlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgPGgzPkNvbmZpZ3VyYXRpb248L2gzPlxuICAgICAgPGRsPlxuICAgICAgICA8ZHQ+VldPIEFjY291bnQgSUQ8L2R0PlxuICAgICAgICA8ZGQ+e1ZXT19BQ0NPVU5UX0lEfTwvZGQ+XG4gICAgICAgIFxuICAgICAgICA8ZHQ+VldPIFNESyBrZXk8L2R0PlxuICAgICAgICA8ZGQ+e1ZXT19TREtfS0VZfTwvZGQ+XG5cbiAgICAgICAgPGR0PlZXTyBjYW1wYWlnbiBrZXk8L2R0PlxuICAgICAgICA8ZGQ+e1ZXT19FWFBFUklNRU5UX0NBTVBBSUdOX0tFWX08L2RkPlxuXG4gICAgICAgIDxkdD5WV08gY29udHJvbCB2YXJpYXRpb24ga2V5PC9kdD5cbiAgICAgICAgPGRkPntWV09fRVhQRVJJTUVOVF9DT05UUk9MX1ZBUklBVElPTl9LRVl9PC9kZD5cblxuICAgICAgICA8ZHQ+VldPIGV4cGVyaW1lbnQgdmFyaWF0aW9uIGtleTwvZHQ+XG4gICAgICAgIDxkZD57VldPX0VYUEVSSU1FTlRfVEVTVF9WQVJJQVRJT05fS0VZfTwvZGQ+XG5cbiAgICAgICAgPGR0PlZXTyB1c2VyIGNvb2tpZSAoaWUge1ZXT19VVUlEX0NPT0tJRV9OQU1FfSk8L2R0PlxuICAgICAgICA8ZGQ+e3VzZXJJRCA/IHVzZXJJRCA6ICdObyBjb29raWUgZm91bmQsIGFyZSB5b3UgcnVubmluZyBhbiBhZGJsb2NrZXI/J308L2RkPlxuICAgICAgPC9kbD5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHsgcmVxIH0pIHtcbiAgY29uc3QgY29va2llcyA9IHBhcnNlQ29va2llcyhyZXE/LmhlYWRlcnM/LmNvb2tpZSB8fCBbXSk7XG4gIGNvbnN0IHVzZXJJRCA9IGNvb2tpZXNbVldPX1VVSURfQ09PS0lFX05BTUVdO1xuXG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gbmV3IFF1ZXJ5Q2xpZW50KCk7XG5cbiAgY29uc29sZS5sb2coJ3VzZXJJRCcsIHVzZXJJRCk7XG4gIFxuICAvLyBTU1Igb2YgVldPIGNhdXNlcyB0aGUgYXBwIHRvIGNyYXNoIHdpdGggRUNPTk5SRVNFVCxcbiAgLy8gdW5jb21tZW50IGJlbG93IHRvIHJlcHJvZHVjZSB0aGUgY3Jhc2hcbiAgaWYgKHVzZXJJRCkge1xuICAgIGF3YWl0IHByZWZldGNoVldPRXhwZXJpbWVudCh7XG4gICAgICBxdWVyeUNsaWVudCxcbiAgICAgIGNhbXBhaWduS2V5OiBWV09fRVhQRVJJTUVOVF9DQU1QQUlHTl9LRVksXG4gICAgICB1c2VySUQsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHByb3BzOiB7XG4gICAgICB1c2VySUQ6IHVzZXJJRCA/PyAnJyxcbiAgICAgIGRlaHlkcmF0ZWRTdGF0ZTogZGVoeWRyYXRlKHF1ZXJ5Q2xpZW50KSxcbiAgICB9LFxuICB9XG59Il0sIm5hbWVzIjpbIlZXT19BQ0NPVU5UX0lEIiwiVldPX1NES19LRVkiLCJWV09fRVhQRVJJTUVOVF9DQU1QQUlHTl9LRVkiLCJWV09fRVhQRVJJTUVOVF9DT05UUk9MX1ZBUklBVElPTl9LRVkiLCJWV09fRVhQRVJJTUVOVF9URVNUX1ZBUklBVElPTl9LRVkiLCJWV09fVVVJRF9DT09LSUVfTkFNRSIsInVzZVZXT0V4cGVyaW1lbnQiLCJJbmRleFBhZ2UiLCJ1c2VySUQiLCJjYW1wYWlnbktleSIsImRhdGEiLCJ2YXJpYXRpb24iLCJkaXYiLCJoMSIsInAiLCJoMiIsInN0eWxlIiwiY29sb3IiLCJoMyIsImRsIiwiZHQiLCJkZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index.js\n");

/***/ }),

/***/ "./vwo.js":
/*!****************!*\
  !*** ./vwo.js ***!
  \****************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"VWO_UUID_COOKIE_NAME\": function() { return /* binding */ VWO_UUID_COOKIE_NAME; },\n/* harmony export */   \"fetchVWOExperiment\": function() { return /* binding */ fetchVWOExperiment; },\n/* harmony export */   \"getVWOClient\": function() { return /* binding */ getVWOClient; },\n/* harmony export */   \"getVWOExperiment\": function() { return /* binding */ getVWOExperiment; },\n/* harmony export */   \"prefetchVWOExperiment\": function() { return /* binding */ prefetchVWOExperiment; },\n/* harmony export */   \"useVWOExperiment\": function() { return /* binding */ useVWOExperiment; }\n/* harmony export */ });\n/* harmony import */ var _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/next/dist/compiled/regenerator-runtime/runtime.js */ \"./node_modules/next/dist/compiled/regenerator-runtime/runtime.js\");\n/* harmony import */ var _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var vwo_node_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vwo-node-sdk */ \"./node_modules/vwo-node-sdk/dist/vwo-javascript-sdk.js\");\n/* harmony import */ var vwo_node_sdk__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(vwo_node_sdk__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-query */ \"./node_modules/react-query/es/index.js\");\n/* harmony import */ var cookie_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! cookie-storage */ \"./node_modules/cookie-storage/lib/index.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ \"./config.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n        var info = gen[key](arg);\n        var value = info.value;\n    } catch (error) {\n        reject(error);\n        return;\n    }\n    if (info.done) {\n        resolve(value);\n    } else {\n        Promise.resolve(value).then(_next, _throw);\n    }\n}\nfunction _asyncToGenerator(fn) {\n    return function() {\n        var self = this, args = arguments;\n        return new Promise(function(resolve, reject) {\n            var gen = fn.apply(self, args);\n            function _next(value) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n            }\n            function _throw(err) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n            }\n            _next(undefined);\n        });\n    };\n}\n\n\n\n\n\nvar _s = $RefreshSig$();\nvar VWO_UUID_COOKIE_NAME = \"_vwo_uuid_v2\";\nfunction getQueryKey(param) {\n    var campaignKey = param.campaignKey, userID = param.userID;\n    return [\n        \"vwo-experiment\",\n        campaignKey,\n        userID\n    ];\n}\nfunction getVWOClient() {\n    return _getVWOClient.apply(this, arguments);\n}\nfunction _getVWOClient() {\n    _getVWOClient = _asyncToGenerator(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n        var settingsFile, client;\n        return _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n            while(1)switch(_ctx.prev = _ctx.next){\n                case 0:\n                    _ctx.next = 2;\n                    return vwo_node_sdk__WEBPACK_IMPORTED_MODULE_1___default().getSettingsFile(_config__WEBPACK_IMPORTED_MODULE_4__.VWO_ACCOUNT_ID, _config__WEBPACK_IMPORTED_MODULE_4__.VWO_SDK_KEY);\n                case 2:\n                    settingsFile = _ctx.sent;\n                    client = vwo_node_sdk__WEBPACK_IMPORTED_MODULE_1___default().launch({\n                        settingsFile: settingsFile\n                    });\n                    return _ctx.abrupt(\"return\", client);\n                case 5:\n                case \"end\":\n                    return _ctx.stop();\n            }\n        }, _callee);\n    }));\n    return _getVWOClient.apply(this, arguments);\n}\nfunction getVWOExperiment(_) {\n    return _getVWOExperiment.apply(this, arguments);\n}\nfunction _getVWOExperiment() {\n    _getVWOExperiment = _asyncToGenerator(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(param) {\n        var campaignKey, userID, client, variation;\n        return _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n            while(1)switch(_ctx.prev = _ctx.next){\n                case 0:\n                    campaignKey = param.campaignKey, userID = param.userID;\n                    _ctx.next = 3;\n                    return getVWOClient();\n                case 3:\n                    client = _ctx.sent;\n                    console.log(campaignKey, userID);\n                    variation = client.activate(campaignKey, userID);\n                    console.log(variation);\n                    return _ctx.abrupt(\"return\", variation);\n                case 8:\n                case \"end\":\n                    return _ctx.stop();\n            }\n        }, _callee);\n    }));\n    return _getVWOExperiment.apply(this, arguments);\n}\nfunction prefetchVWOExperiment(_) {\n    return _prefetchVWOExperiment.apply(this, arguments);\n}\nfunction _prefetchVWOExperiment() {\n    _prefetchVWOExperiment = _asyncToGenerator(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee1(param) {\n        var queryClient, campaignKey, userID;\n        return _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx1) {\n            while(1)switch(_ctx1.prev = _ctx1.next){\n                case 0:\n                    queryClient = param.queryClient, campaignKey = param.campaignKey, userID = param.userID;\n                    return _ctx1.abrupt(\"return\", queryClient.prefetchQuery(getQueryKey({\n                        campaignKey: campaignKey,\n                        userID: userID\n                    }), _asyncToGenerator(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n                        return _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                            while(1)switch(_ctx.prev = _ctx.next){\n                                case 0:\n                                    return _ctx.abrupt(\"return\", getVWOExperiment({\n                                        campaignKey: campaignKey,\n                                        userID: userID\n                                    }));\n                                case 1:\n                                case \"end\":\n                                    return _ctx.stop();\n                            }\n                        }, _callee);\n                    }))));\n                case 2:\n                case \"end\":\n                    return _ctx1.stop();\n            }\n        }, _callee1);\n    }));\n    return _prefetchVWOExperiment.apply(this, arguments);\n}\nfunction fetchVWOExperiment(_) {\n    return _fetchVWOExperiment.apply(this, arguments);\n}\nfunction _fetchVWOExperiment() {\n    _fetchVWOExperiment = _asyncToGenerator(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee2(param) {\n        var queryClient, campaignKey, userID;\n        return _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx2) {\n            while(1)switch(_ctx2.prev = _ctx2.next){\n                case 0:\n                    queryClient = param.queryClient, campaignKey = param.campaignKey, userID = param.userID;\n                    return _ctx2.abrupt(\"return\", queryClient.fetchQuery(getQueryKey({\n                        campaignKey: campaignKey,\n                        userID: userID\n                    }), _asyncToGenerator(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n                        return _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                            while(1)switch(_ctx.prev = _ctx.next){\n                                case 0:\n                                    return _ctx.abrupt(\"return\", getVWOExperiment({\n                                        campaignKey: campaignKey,\n                                        userID: userID\n                                    }));\n                                case 1:\n                                case \"end\":\n                                    return _ctx.stop();\n                            }\n                        }, _callee);\n                    }))));\n                case 2:\n                case \"end\":\n                    return _ctx2.stop();\n            }\n        }, _callee2);\n    }));\n    return _fetchVWOExperiment.apply(this, arguments);\n}\nfunction useVWOExperiment(param) {\n    var campaignKey = param.campaignKey, userID = param.userID;\n    _s();\n    // to run this experiment serverside, simply call prefetchVWOExperiment, read VWO_UUID_COOKIE_NAME cookie,\n    // and pass through that cookie's value\n    console.log(\"use\", userID);\n    return (0,react_query__WEBPACK_IMPORTED_MODULE_2__.useQuery)(getQueryKey({\n        campaignKey: campaignKey,\n        userID: userID\n    }), _asyncToGenerator(_home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n        return _home_runner_vwo_node_nextjs_breaking_ssr_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n            while(1)switch(_ctx.prev = _ctx.next){\n                case 0:\n                    return _ctx.abrupt(\"return\", getVWOExperiment({\n                        campaignKey: campaignKey,\n                        userID: userID\n                    }));\n                case 1:\n                case \"end\":\n                    return _ctx.stop();\n            }\n        }, _callee);\n    })), {\n        enabled: !!userID && !!campaignKey,\n        staleTime: 5 * 60 * 1000\n    });\n}\n_s(useVWOExperiment, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function() {\n    return [\n        react_query__WEBPACK_IMPORTED_MODULE_2__.useQuery\n    ];\n});\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBRUMsV0FBVyxFQUFYQSxXQUFXO3dCQUFFQyxNQUFNLEVBQU5BLE1BQU07cUJBQUUsQ0FBQyxFQUNwQywwTEFBWTs7OztpRUFDSE0sZ0JBQWdCLENBQUM7d0NBQUVQLFdBQVcsRUFBWEEsV0FBVzt3Q0FBRUMsTUFBTSxFQUFOQSxNQUFNO3FDQUFFLENBQUM7Ozs7OztxQkFDakQsR0FDRjs7Ozs7O0tBQ0Y7V0FYcUJjLG1CQUFrQjs7QUFhakMsU0FBU0UsZ0JBQWdCLENBQUMsS0FBdUIsRUFBRTtRQUF2QmpCLFdBQVcsR0FBYixLQUF1QixDQUFyQkEsV0FBVyxFQUFFQyxNQUFNLEdBQXJCLEtBQXVCLENBQVJBLE1BQU07O0lBQ3BELDBHQUEwRztJQUMxRyx1Q0FBdUM7SUFFdkNRLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLEtBQUssRUFBRVQsTUFBTSxDQUFDO0lBRTFCLE9BQU9QLHFEQUFRLENBQ2JLLFdBQVcsQ0FBQztRQUFFQyxXQUFXLEVBQVhBLFdBQVc7UUFBRUMsTUFBTSxFQUFOQSxNQUFNO0tBQUUsQ0FBQyxFQUNwQzs7OztpREFBWU0sZ0JBQWdCLENBQUM7d0JBQUVQLFdBQVcsRUFBWEEsV0FBVzt3QkFBRUMsTUFBTSxFQUFOQSxNQUFNO3FCQUFFLENBQUM7Ozs7OztLQUFBLElBQ3JEO1FBQ0VpQixPQUFPLEVBQUUsQ0FBQyxDQUFDakIsTUFBTSxJQUFJLENBQUMsQ0FBQ0QsV0FBVztRQUNsQ21CLFNBQVMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUk7S0FDekIsQ0FDRixDQUFDO0NBQ0g7R0FkZUYsZ0JBQWdCOztRQU12QnZCLGlEQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3Z3by5qcz8zYTMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWV08gZnJvbSAndndvLW5vZGUtc2RrJztcbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSAncmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgQ29va2llU3RvcmFnZSB9IGZyb20gJ2Nvb2tpZS1zdG9yYWdlJztcblxuaW1wb3J0IHtcbiAgVldPX0FDQ09VTlRfSUQsXG4gIFZXT19TREtfS0VZLFxufSBmcm9tICcuL2NvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBWV09fVVVJRF9DT09LSUVfTkFNRSA9ICdfdndvX3V1aWRfdjInO1xuXG5mdW5jdGlvbiBnZXRRdWVyeUtleSh7IGNhbXBhaWduS2V5LCB1c2VySUQgfSkge1xuICByZXR1cm4gWyd2d28tZXhwZXJpbWVudCcsIGNhbXBhaWduS2V5LCB1c2VySURdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VldPQ2xpZW50KCkge1xuICBjb25zdCBzZXR0aW5nc0ZpbGUgPSBhd2FpdCBWV08uZ2V0U2V0dGluZ3NGaWxlKFZXT19BQ0NPVU5UX0lELCBWV09fU0RLX0tFWSk7XG4gIGNvbnN0IGNsaWVudCA9IFZXTy5sYXVuY2goe1xuICAgIHNldHRpbmdzRmlsZSxcbiAgfSk7XG5cbiAgcmV0dXJuIGNsaWVudDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFZXT0V4cGVyaW1lbnQoeyBjYW1wYWlnbktleSwgdXNlcklEIH0pIHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0VldPQ2xpZW50KCk7XG4gIGNvbnNvbGUubG9nKGNhbXBhaWduS2V5LCB1c2VySUQpO1xuICBjb25zdCB2YXJpYXRpb24gPSBjbGllbnQuYWN0aXZhdGUoY2FtcGFpZ25LZXksIHVzZXJJRCk7XG4gIGNvbnNvbGUubG9nKHZhcmlhdGlvbik7XG4gIHJldHVybiB2YXJpYXRpb247XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVmZXRjaFZXT0V4cGVyaW1lbnQoe1xuICBxdWVyeUNsaWVudCxcbiAgY2FtcGFpZ25LZXksXG4gIHVzZXJJRCxcbn0pIHtcbiAgcmV0dXJuIHF1ZXJ5Q2xpZW50LnByZWZldGNoUXVlcnkoXG4gICAgZ2V0UXVlcnlLZXkoeyBjYW1wYWlnbktleSwgdXNlcklEIH0pLFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiBnZXRWV09FeHBlcmltZW50KHsgY2FtcGFpZ25LZXksIHVzZXJJRCB9KTtcbiAgICB9XG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFZXT0V4cGVyaW1lbnQoe1xuICBxdWVyeUNsaWVudCxcbiAgY2FtcGFpZ25LZXksXG4gIHVzZXJJRCxcbn0pIHtcbiAgcmV0dXJuIHF1ZXJ5Q2xpZW50LmZldGNoUXVlcnkoXG4gICAgZ2V0UXVlcnlLZXkoeyBjYW1wYWlnbktleSwgdXNlcklEIH0pLFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiBnZXRWV09FeHBlcmltZW50KHsgY2FtcGFpZ25LZXksIHVzZXJJRCB9KTtcbiAgICB9XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VWV09FeHBlcmltZW50KHsgY2FtcGFpZ25LZXksIHVzZXJJRCB9KSB7XG4gIC8vIHRvIHJ1biB0aGlzIGV4cGVyaW1lbnQgc2VydmVyc2lkZSwgc2ltcGx5IGNhbGwgcHJlZmV0Y2hWV09FeHBlcmltZW50LCByZWFkIFZXT19VVUlEX0NPT0tJRV9OQU1FIGNvb2tpZSxcbiAgLy8gYW5kIHBhc3MgdGhyb3VnaCB0aGF0IGNvb2tpZSdzIHZhbHVlXG5cbiAgY29uc29sZS5sb2coJ3VzZScsIHVzZXJJRClcblxuICByZXR1cm4gdXNlUXVlcnkoXG4gICAgZ2V0UXVlcnlLZXkoeyBjYW1wYWlnbktleSwgdXNlcklEIH0pLFxuICAgIGFzeW5jICgpID0+IGdldFZXT0V4cGVyaW1lbnQoeyBjYW1wYWlnbktleSwgdXNlcklEIH0pLFxuICAgIHtcbiAgICAgIGVuYWJsZWQ6ICEhdXNlcklEICYmICEhY2FtcGFpZ25LZXksXG4gICAgICBzdGFsZVRpbWU6IDUgKiA2MCAqIDEwMDAsIC8vIDVtaW5zXG4gICAgfVxuICApO1xufVxuIl0sIm5hbWVzIjpbIlZXTyIsInVzZVF1ZXJ5IiwiQ29va2llU3RvcmFnZSIsIlZXT19BQ0NPVU5UX0lEIiwiVldPX1NES19LRVkiLCJWV09fVVVJRF9DT09LSUVfTkFNRSIsImdldFF1ZXJ5S2V5IiwiY2FtcGFpZ25LZXkiLCJ1c2VySUQiLCJnZXRWV09DbGllbnQiLCJzZXR0aW5nc0ZpbGUiLCJjbGllbnQiLCJnZXRTZXR0aW5nc0ZpbGUiLCJsYXVuY2giLCJnZXRWV09FeHBlcmltZW50IiwidmFyaWF0aW9uIiwiY29uc29sZSIsImxvZyIsImFjdGl2YXRlIiwicHJlZmV0Y2hWV09FeHBlcmltZW50IiwicXVlcnlDbGllbnQiLCJwcmVmZXRjaFF1ZXJ5IiwiZmV0Y2hWV09FeHBlcmltZW50IiwiZmV0Y2hRdWVyeSIsInVzZVZXT0V4cGVyaW1lbnQiLCJlbmFibGVkIiwic3RhbGVUaW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./vwo.js\n");

/***/ }),

/***/ "./node_modules/vwo-node-sdk/dist/vwo-javascript-sdk.js":
/*!**************************************************************!*\
  !*** ./node_modules/vwo-node-sdk/dist/vwo-javascript-sdk.js ***!
  \**************************************************************/
/***/ (function(module) {

eval("/*!\n * vwo-javascript-sdk - v1.32.3\n * URL - https://github.com/wingify/vwo-node-sdk\n * \n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n * \n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * \n *   http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * \n * Dependencies used - \n *  1. murmurhash - ^0.0.2\n *  2. superstruct - ^0.10.12\n *  3. uuid - ^3.3.2\n *  4. vwo-sdk-log-messages - https://github.com/wingify/vwo-sdk-log-messages.git#v0.1.0\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\t// CommonJS2\n\tif(true)\n\t\tmodule.exports = factory();\n\t// AMD\n\telse {}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_1476__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __nested_webpack_require_1476__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__nested_webpack_require_1476__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__nested_webpack_require_1476__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__nested_webpack_require_1476__.d = function(exports, name, getter) {\n/******/ \t\tif(!__nested_webpack_require_1476__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__nested_webpack_require_1476__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__nested_webpack_require_1476__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __nested_webpack_require_1476__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__nested_webpack_require_1476__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __nested_webpack_require_1476__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__nested_webpack_require_1476__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__nested_webpack_require_1476__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__nested_webpack_require_1476__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__nested_webpack_require_1476__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __nested_webpack_require_1476__(__nested_webpack_require_1476__.s = \"./lib/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./lib/VWO.js\":\n/*!********************!*\\\n  !*** ./lib/VWO.js ***!\n  \\********************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_5078__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar api = __nested_webpack_require_5078__(/*! ./api */ \"./lib/api/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_5078__(/*! ./enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar ApiEnum = __nested_webpack_require_5078__(/*! ./enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar DataTypeUtil = __nested_webpack_require_5078__(/*! ./utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar FunctionUtil = __nested_webpack_require_5078__(/*! ./utils/FunctionUtil */ \"./lib/utils/FunctionUtil.js\");\n\nvar EventQueue = __nested_webpack_require_5078__(/*! ./services/EventQueue */ \"./lib/services/EventQueue.js\");\n\nvar SettingsFileService = __nested_webpack_require_5078__(/*! ./services/SettingsFileManager */ \"./lib/services/SettingsFileManager.js\");\n\nvar logging = __nested_webpack_require_5078__(/*! ./services/logging */ \"./lib/services/logging/index.js\");\n\nvar HooksManager = __nested_webpack_require_5078__(/*! ./services/HooksManager */ \"./lib/services/HooksManager.js\");\n\nvar UrlService = __nested_webpack_require_5078__(/*! ./services/UrlService */ \"./lib/services/UrlService.js\");\n\nvar UsageStats = __nested_webpack_require_5078__(/*! ./services/UsageStats */ \"./lib/services/UsageStats.js\");\n\nvar BatchEventsDispatcher;\nvar customEventUtil;\nvar BatchEventsQueue;\n\nif (false) {}\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.VWO;\n\nvar VWO =\n/*#__PURE__*/\nfunction () {\n  // Setting various services on the instance to be accessible by its member functions\n  function VWO() {\n    var _this = this;\n\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, VWO);\n\n    this.getVariation = this.getVariationName; // to be backward compatible\n\n    this.userStorageService = config.userStorageService;\n    this.logger = config.logger;\n    this.returnPromiseFor = config.returnPromiseFor;\n    this.optOut = false;\n    var settingsFileManager = new SettingsFileService(config); // Validate the config file i.e. check if required fields contain appropriate data\n\n    if (!settingsFileManager.isSettingsFileValid()) {\n      this.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.SETTINGS_FILE_INVALID, {\n        file: file\n      }));\n      return;\n    }\n\n    this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_VALID, {\n      file: file\n    })); // Initialize Hooks manager so that callbacks can be invoked\n\n    HooksManager.init(config); // Setup event quque for sending impressions to VWO server\n\n    this.eventQueue = new EventQueue();\n    this.usageStats = new UsageStats();\n    this.SettingsFileManager = settingsFileManager;\n    settingsFileManager.checkAndPoll(); // Checks if pollingInterval is passed then starts polling settingsFile\n\n    if (!config.isDevelopmentMode) {\n      this.usageStats.collectUsageStats(settingsFileManager.getConfig());\n    } // Only for Node.js SDK\n\n\n    if (false) { var sdkKey, accountId; } // Process settingsFile for various things. For eg: assign bucket range to variation, etc.\n\n\n    this.SettingsFileManager.processSettingsFile();\n    this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.SDK_INITIALIZED, {\n      file: file\n    }));\n    this.UrlService = UrlService.init(config.settingsFile);\n  } // PUBLIC METHODS\n\n  /**\n   * This API method: Gets the variation assigned for the user for the campaign and send the metrics to VWO server\n   *\n   * @param {String} campaignKey       unique campaign key specified in VWO app\n   * @param {String} userId            ID assigned to a user\n   * @param {Object} options           optional params - customVariables, variationTargetingVariables\n   *\n   * @return {String|null}             If variation is assigned then variation-name otherwise null in case of user not becoming part\n   */\n\n\n  _createClass(VWO, [{\n    key: \"activate\",\n    value: function activate(campaignKey, userId) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      try {\n        var self = this; // Check if returnPromiseFor is provided. If yes, return a promise instead of value\n        // i.e. wait till the network call is not successful\n\n        if (self.returnPromiseFor && (self.returnPromiseFor.activate || self.returnPromiseFor.all)) {\n          self.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_RETURN_PROMISE, {\n            file: file,\n            method: ApiEnum.ACTIVATE\n          }));\n          return new Promise(function (resolve) {\n            if (_this2.optOut) {\n              _this2.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n                file: file,\n                api: ApiEnum.ACTIVATE\n              }));\n\n              resolve(null);\n            } else {\n              var variationName;\n\n              options.responseCallback = function (_error, _response) {\n                resolve(variationName);\n              };\n\n              variationName = api.activate(self, campaignKey, userId, options); // If we get null from the API i.e. no tracking call was sent\n              // In this case, respponseCallback will not be fired and hence we have to manually resolve the promise\n\n              if (!variationName) {\n                resolve(variationName);\n              } else if (DataTypeUtil.isObject(variationName)) {\n                resolve(variationName.variationName);\n              }\n            }\n          });\n        }\n\n        if (this.optOut) {\n          this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n            file: file,\n            api: ApiEnum.ACTIVATE\n          }));\n          return null;\n        }\n\n        var apiResponse = api.activate(self, campaignKey, userId, options);\n\n        if (DataTypeUtil.isObject(apiResponse)) {\n          return apiResponse.variationName;\n        }\n\n        return apiResponse;\n      } catch (err) {\n        this.logger.log(LogLevelEnum.ERROR, err.message);\n        return null;\n      }\n    }\n    /**\n     * This API method: Gets the variation assigned for the user for the campaign\n     *\n     * @param {String} campaignKey       unique campaign key specified in VWO app\n     * @param {String} userId            ID assigned to a user\n     * @param {Object} options           optional params - customVariables, variationTargetingVariables\n     *\n     * @return {String|null}             If variation is assigned then variation-name otherwise null in case of user not becoming part\n     */\n\n  }, {\n    key: \"getVariationName\",\n    value: function getVariationName(campaignKey, userId) {\n      var _this3 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      try {\n        var self = this; // Check if returnPromiseFor is provided. If yes, return a promise instead of value\n\n        if (self.returnPromiseFor && (self.returnPromiseFor.getVariationName || self.returnPromiseFor.all)) {\n          self.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_RETURN_PROMISE, {\n            file: file,\n            method: ApiEnum.GET_VARIATION_NAME\n          }));\n          return new Promise(function (resolve) {\n            if (_this3.optOut) {\n              _this3.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n                file: file,\n                api: ApiEnum.GET_VARIATION_NAME\n              }));\n\n              resolve(null);\n            } else {\n              // since this API does not send any async call, we can simply resolve the returned value\n              resolve(api.getVariation(self, campaignKey, userId, options));\n            }\n          });\n        }\n\n        if (this.optOut) {\n          this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n            file: file,\n            api: ApiEnum.GET_VARIATION_NAME\n          }));\n          return null;\n        }\n\n        return api.getVariation(self, campaignKey, userId, options);\n      } catch (err) {\n        this.logger.log(LogLevelEnum.ERROR, err.message);\n        return null;\n      }\n    }\n    /**\n     * This API method: Marks the conversion of the campaign for a particular goal\n     *\n     * @param {String/Array<string>/null/undefined} campaignSpecifier campaign keys to track           unique campaignSpecifier\n     * @param {String} userId                ID assigned to a user\n     * @param {String} goalIdentifier         unique campaign's goal identifier\n     * @param {Object} options               optional params - customVariables, variationTargetingVariables, revenueValue\n     */\n\n  }, {\n    key: \"track\",\n    value: function track(campaignSpecifier, userId, goalIdentifier) {\n      var _this4 = this;\n\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      try {\n        var self = this; // Check if returnPromiseFor is provided. If yes, return a promise instead of value\n        // i.e. wait till the network call is not successful\n\n        if (self.returnPromiseFor && (self.returnPromiseFor.track || self.returnPromiseFor.all)) {\n          self.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_RETURN_PROMISE, {\n            file: file,\n            method: ApiEnum.TRACK\n          }));\n          return new Promise(function (resolve) {\n            if (_this4.optOut) {\n              _this4.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n                file: file,\n                api: ApiEnum.TRACK\n              }));\n\n              resolve(null);\n            } else {\n              var trackResponse;\n              var counter = 0;\n\n              options.responseCallback = function (_error, _response) {\n                counter += 1; // In case of global goals, when all campaigns are tracked, then only resolve\n\n                if (counter === FunctionUtil.objectValues(trackResponse).filter(Boolean).length) {\n                  resolve(trackResponse);\n                }\n              };\n\n              trackResponse = api.track(self, campaignSpecifier, userId, goalIdentifier, options); // If we get null/false from the API i.e. no tracking call was sent\n              // In this case, respponseCallback will not be fired and hence we have to manually resolve the promise\n              // Or, in case of global goals, if none campaign got success, manually resolve\n\n              if (!trackResponse || !FunctionUtil.objectValues(trackResponse).some(Boolean)) {\n                resolve(trackResponse);\n              } else if (trackResponse && trackResponse.isDevelopmentMode) {\n                delete trackResponse.isDevelopmentMode;\n                resolve(trackResponse);\n              }\n            }\n          });\n        }\n\n        if (this.optOut) {\n          this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n            file: file,\n            api: ApiEnum.TRACK\n          }));\n          return null;\n        }\n\n        return api.track(self, campaignSpecifier, userId, goalIdentifier, options);\n      } catch (err) {\n        this.logger.log(LogLevelEnum.ERROR, err.message);\n        return null;\n      }\n    }\n    /**\n     * This API method checks: Whether a feature is enabled or not for the given user\n     *\n     * @param {String} campaignKey       Unique key for a campaign\n     * @param {String} userId            Unique identifier for the user\n     * @param {Object} options           optional params - customVariables, variationTargetingVariables\n     *\n     * @return {Boolean}                 true if feature enabled, false otherwise\n     */\n\n  }, {\n    key: \"isFeatureEnabled\",\n    value: function isFeatureEnabled(campaignKey, userId) {\n      var _this5 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      try {\n        var self = this; // Check if returnPromiseFor is provided. If yes, return a promise instead of value\n        // i.e. wait till the network call is not successful\n\n        if (self.returnPromiseFor && (self.returnPromiseFor.isFeatureEnabled || self.returnPromiseFor.all)) {\n          self.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_RETURN_PROMISE, {\n            file: file,\n            method: ApiEnum.IS_FEATURE_ENABLED\n          }));\n          return new Promise(function (resolve) {\n            if (_this5.optOut) {\n              _this5.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n                file: file,\n                api: ApiEnum.IS_FEATURE_ENABLED\n              }));\n\n              resolve(false);\n            } else {\n              var isFeatureEnabledApiResponse;\n\n              options.responseCallback = function (_error, _response) {\n                resolve(!!isFeatureEnabledApiResponse);\n              };\n\n              isFeatureEnabledApiResponse = api.isFeatureEnabled(self, campaignKey, userId, options); // If we get null from the API i.e. no tracking call was sent\n              // In this case, respponseCallback will not be fired and hence we have to manually resolve the promise\n\n              if (DataTypeUtil.isNull(isFeatureEnabledApiResponse)) {\n                resolve(false);\n              } else if (DataTypeUtil.isObject(isFeatureEnabledApiResponse)) {\n                resolve(!!isFeatureEnabledApiResponse.isFeatureEnabled);\n              }\n            }\n          });\n        }\n\n        if (this.optOut) {\n          this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n            file: file,\n            api: ApiEnum.IS_FEATURE_ENABLED\n          }));\n          return false;\n        }\n\n        var apiResponse = api.isFeatureEnabled(self, campaignKey, userId, options);\n\n        if (DataTypeUtil.isObject(apiResponse)) {\n          return !!apiResponse.isFeatureEnabled;\n        }\n\n        return !!apiResponse;\n      } catch (err) {\n        this.logger.log(LogLevelEnum.ERROR, err.message);\n        return false;\n      }\n    }\n    /**\n     * This API method: Return the variable for that variation(if Feature Test),\n     *    otherwise the default values being set in Feature\n     *\n     * @param {String} campaignKey   Unique key for a campaign\n     * @param {String} variableKey   Unique key for a feature's variable\n     * @param {String} userId        Unique identifier for the user\n     * @param {Object} options           optional params - customVariables, variationTargetingVariables\n     *\n     * @return {string|number|double|boolean|null} Variable value as is set in the VWO app i.e.\n     *                                             maintaining the data-type,\n     *                                             null if anything fails like campaign / variable not found\n     */\n\n  }, {\n    key: \"getFeatureVariableValue\",\n    value: function getFeatureVariableValue(campaignKey, variableKey, userId) {\n      var _this6 = this;\n\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      try {\n        var self = this; // Check if returnPromiseFor is provided. If yes, return a promise instead of value\n\n        if (self.returnPromiseFor && (self.returnPromiseFor.getFeatureVariableValue || self.returnPromiseFor.all)) {\n          self.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_RETURN_PROMISE, {\n            file: file,\n            method: ApiEnum.GET_FEATURE_VARIABLE_VALUE\n          }));\n          return new Promise(function (resolve) {\n            if (_this6.optOut) {\n              _this6.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n                file: file,\n                api: ApiEnum.GET_FEATURE_VARIABLE_VALUE\n              }));\n\n              resolve(null);\n            } else {\n              // since this API does not send any async call, we can simply resolve the returned value\n              resolve(api.getFeatureVariableValue(self, campaignKey, variableKey, userId, options));\n            }\n          });\n        }\n\n        if (this.optOut) {\n          this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n            file: file,\n            api: ApiEnum.GET_FEATURE_VARIABLE_VALUE\n          }));\n          return null;\n        }\n\n        return api.getFeatureVariableValue(self, campaignKey, variableKey, userId, options);\n      } catch (err) {\n        this.logger.log(LogLevelEnum.ERROR, err.message);\n        return null;\n      }\n    }\n    /**\n     * This API method: Pushes the key-value tag pair for a particular user\n     *\n     * @param {String} tagKey                    tag key\n     * @param {String} tagValue                  tag Value\n     * @param {String} userId                    ID assigned to a user\n     *\n     * @return {Boolean}                    true if request is pushed to eventQueue, false if params are invalid or settings file is unavailable\n     */\n\n  }, {\n    key: \"push\",\n    value: function push(tagKey, tagValue, userId) {\n      var _this7 = this;\n\n      try {\n        var self = this;\n        var customDimensionMap;\n\n        if (arguments.length === 2) {\n          // Argument reshuffling.\n          customDimensionMap = tagKey;\n          userId = tagValue;\n          tagKey = ' ';\n          tagValue = ' ';\n        } else if (arguments.length === 3) {\n          customDimensionMap = {};\n        } else {\n          this.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_BAD_PARAMETERS, {\n            file: file,\n            api: ApiEnum.PUSH\n          }));\n          return false;\n        } // Check if returnPromiseFor is provided. If yes, return a promise instead of value\n        // i.e. wait till the network call is not successful\n\n\n        if (self.returnPromiseFor && (self.returnPromiseFor.push || self.returnPromiseFor.all)) {\n          self.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_RETURN_PROMISE, {\n            file: file,\n            method: ApiEnum.PUSH\n          }));\n          return new Promise(function (resolve) {\n            if (_this7.optOut) {\n              _this7.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n                file: file,\n                api: ApiEnum.PUSH\n              }));\n\n              resolve(null);\n            } else {\n              var apiResponse;\n              var counter = 0;\n              var options = {\n                responseCallback: function responseCallback(_error, _response) {\n                  counter += 1; // In case of multiple custom dimensions, when all are tracked, then only resolve\n\n                  if (counter === FunctionUtil.objectValues(apiResponse).filter(Boolean).length) {\n                    resolve(apiResponse);\n                  }\n                }\n              };\n              apiResponse = api.push(self, tagKey, tagValue, userId, customDimensionMap, options); // If we get false from the API i.e. no tracking call was sent\n              // In this case, respponseCallback will not be fired and hence we have to manually resolve the promise\n\n              if (!apiResponse) {\n                resolve(false);\n              } else if (apiResponse && apiResponse.isDevelopmentMode) {\n                delete apiResponse.isDevelopmentMode;\n                resolve(apiResponse);\n              }\n            }\n          });\n        }\n\n        if (this.optOut) {\n          this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n            file: file,\n            api: ApiEnum.PUSH\n          }));\n          return null;\n        }\n\n        return api.push(self, tagKey, tagValue, userId, customDimensionMap);\n      } catch (err) {\n        this.logger.log(LogLevelEnum.ERROR, err.message);\n        return false;\n      }\n    }\n  }, {\n    key: \"setOptOut\",\n    value: function setOptOut() {\n      var _this8 = this;\n\n      this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.OPT_OUT_API_CALLED, {\n        file: file\n      }));\n\n      if (this.returnPromiseFor && (this.returnPromiseFor.optOut || this.returnPromiseFor.all)) {\n        return new Promise(function (resolve) {\n          _this8._destroyInstanceVariables();\n\n          if (_this8.batchEventsQueue) {\n            _this8.flushEvents().then(function () {\n              _this8.batchEventsQueue = undefined;\n              resolve(true);\n            });\n          } else {\n            resolve(true);\n          }\n        });\n      }\n\n      if (this.batchEventsQueue) {\n        this.flushEvents().then(function () {\n          _this8.batchEventsQueue = undefined;\n        });\n      }\n\n      this._destroyInstanceVariables();\n\n      return true;\n    }\n    /**\n     * Manually flush impression events to VWO which are queued in batch queue as per batchEvents config\n     */\n\n  }, {\n    key: \"flushEvents\",\n    value: function flushEvents() {\n      var _this9 = this;\n\n      var accountId = this.SettingsFileManager.getSettingsFile().accountId;\n\n      if (false) {}\n    }\n    /**\n     * Fetch latest settings-file and update so that vwoClientInstance could use latest settings\n     * Helpful especially when using webhooks\n     *\n     * @param {Number} accountId\n     * @param {String} sdkKey\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"getAndUpdateSettingsFile\",\n    value: function getAndUpdateSettingsFile(accountId, sdkKey) {\n      if (this.optOut) {\n        this.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.API_NOT_ENABLED, {\n          file: file,\n          api: 'getAndUpdateSettingsFile'\n        }));\n        return new Promise(function (resolve) {\n          resolve(null);\n        });\n      }\n\n      return this.SettingsFileManager.getAndUpdateSettingsFile(accountId, sdkKey);\n    }\n  }, {\n    key: \"_destroyInstanceVariables\",\n    value: function _destroyInstanceVariables() {\n      this.userStorageService = undefined;\n      this.SettingsFileManager = undefined;\n      this.usageStats = undefined;\n      this.eventQueue = undefined;\n      this.optOut = true;\n    }\n  }]);\n\n  return VWO;\n}();\n\nmodule.exports = VWO;\n\n/***/ }),\n\n/***/ \"./lib/api/activate.js\":\n/*!*****************************!*\\\n  !*** ./lib/api/activate.js ***!\n  \\*****************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_29158__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Constants = __nested_webpack_require_29158__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar ApiEnum = __nested_webpack_require_29158__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar DecisionUtil = __nested_webpack_require_29158__(/*! ../utils/DecisionUtil */ \"./lib/utils/DecisionUtil.js\");\n\nvar CampaignUtil = __nested_webpack_require_29158__(/*! ../utils/CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar ImpressionUtil = __nested_webpack_require_29158__(/*! ../utils/ImpressionUtil */ \"./lib/utils/ImpressionUtil.js\");\n\nvar ValidateUtil = __nested_webpack_require_29158__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_29158__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar logging = __nested_webpack_require_29158__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_29158__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar EventEnum = __nested_webpack_require_29158__(/*! ../enums/EventEnum */ \"./lib/enums/EventEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.Activate;\n/**\n * This API method: Gets the variation assigned for the user for the campaign and send the metrics to VWO server\n *\n * 1. Validates the arguments being passed\n * 2. Checks if user is eligible to get bucketed into the campaign,\n * 3. Assigns the determinitic variation to the user(based on userId), if user becomes part of campaign\n *    If userStorageService is used, it will look into it for the variation and if found, no further processing is done\n * 4. Sends an impression call to VWO server to track user\n *\n * @param {Object} vwoInstance       VWO instance which has logger, settingsFile etc.\n * @param {String} campaignKey       unique campaign key specified in VWO app\n * @param {String} userId            ID assigned to a user\n * @param {Object} options           Optional params\n *\n * @return {String|null}             If variation is assigned then variation-name otherwise null in case of user not becoming part\n */\n\nfunction activate(vwoInstance, campaignKey, userId) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var api = ApiEnum.ACTIVATE;\n  var areParamsValid = false;\n\n  if (DataTypeUtil.isObject(options)) {\n    var customVariables = options.customVariables,\n        variationTargetingVariables = options.variationTargetingVariables,\n        userStorageData = options.userStorageData,\n        shouldTrackReturningUser = options.shouldTrackReturningUser,\n        metaData = options.metaData,\n        responseCallback = options.responseCallback; // Check if arguments have valid data-type\n\n    if (ValidateUtil.areValidParamsForAPIMethod({\n      method: ApiEnum.ACTIVATE,\n      campaignKey: campaignKey,\n      userId: userId,\n      customVariables: customVariables,\n      variationTargetingVariables: variationTargetingVariables,\n      userStorageData: userStorageData,\n      shouldTrackReturningUser: shouldTrackReturningUser,\n      metaData: metaData,\n      responseCallback: responseCallback\n    })) {\n      areParamsValid = true;\n    }\n  }\n\n  if (areParamsValid === false) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_BAD_PARAMETERS, {\n      file: file,\n      api: ApiEnum.ACTIVATE\n    }));\n    return null;\n  } // Get the cached configuration\n\n\n  var config = vwoInstance.SettingsFileManager.getConfig();\n  var settingsFile = vwoInstance.SettingsFileManager.getSettingsFile(api); // If no settings are found, simply return no variation\n\n  if (!settingsFile) {\n    return null;\n  }\n\n  shouldTrackReturningUser = shouldTrackReturningUser || config.shouldTrackReturningUser || false; // Get the campaign settings based on campaignKey from the settings\n\n  var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey); // If matching campaign is not found with campaignKey or if found but is in not RUNNING state, simply return no variation\n\n  if (!campaign || campaign.status !== Constants.STATUS_RUNNING) {\n    vwoInstance.logger.log(LogLevelEnum.WARN, LogMessageUtil.build(LogMessageEnum.WARNING_MESSAGES.CAMPAIGN_NOT_RUNNING, {\n      file: file,\n      campaignKey: campaignKey,\n      api: api\n    }));\n    return null;\n  }\n\n  if (!CampaignUtil.isAbCampaign(campaign)) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_NOT_APPLICABLE, {\n      file: file,\n      campaignKey: campaignKey,\n      campaignType: campaign.type,\n      userId: userId,\n      api: api\n    }));\n    return null;\n  } // Once the matching RUNNING campaign is found, assign the deterministic variation to the userId provided\n\n\n  var _DecisionUtil$getVari = DecisionUtil.getVariation(config, settingsFile, campaign, campaignKey, userId, customVariables, variationTargetingVariables, userStorageData, metaData, true, undefined, api),\n      variationId = _DecisionUtil$getVari.variationId,\n      variationName = _DecisionUtil$getVari.variationName,\n      isStoredVariation = _DecisionUtil$getVari.isStoredVariation; // Check if variation-name has been assigned to the userId. If not, return no variation\n\n\n  if (!ValidateUtil.isValidValue(variationName)) {\n    vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.DECISION_NO_VARIATION_ALLOTED, {\n      file: file,\n      userId: userId,\n      campaignKey: campaignKey\n    }));\n    return null;\n  } // check if variation found from storage. return it without sending a call to VWO server\n\n\n  if (isStoredVariation && !shouldTrackReturningUser) {\n    vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CAMPAIGN_USER_ALREADY_TRACKED, {\n      file: file,\n      userId: userId,\n      campaignKey: campaignKey,\n      api: api\n    }));\n    return {\n      variationName: variationName\n    };\n  } // Variation found...let VWO server knows about it to show report stats\n\n\n  if (config.batchEvents) {\n    var properties = ImpressionUtil.buildBatchEventForTrackingUser(settingsFile, campaign.id, variationId, userId);\n    vwoInstance.batchEventsQueue.enqueue(properties);\n  } else if (settingsFile.isEventArchEnabled) {\n    var _properties = ImpressionUtil.getEventsBaseProperties(settingsFile, EventEnum.VWO_VARIATION_SHOWN, vwoInstance.usageStats.getUsageStats());\n\n    var payload = ImpressionUtil.getTrackUserPayloadData(settingsFile, userId, EventEnum.VWO_VARIATION_SHOWN, campaign.id, variationId);\n    vwoInstance.eventQueue.process(config, _properties, vwoInstance, {\n      payload: payload,\n      responseCallback: responseCallback\n    });\n  } else {\n    var _properties2 = ImpressionUtil.buildEventForTrackingUser(settingsFile, campaign.id, variationId, userId, vwoInstance.usageStats.getUsageStats());\n\n    vwoInstance.eventQueue.process(config, _properties2, vwoInstance, {\n      responseCallback: responseCallback\n    });\n  }\n\n  if (config.isDevelopmentMode) {\n    return {\n      variationName: variationName\n    };\n  }\n\n  return variationName;\n}\n\nmodule.exports = activate;\n\n/***/ }),\n\n/***/ \"./lib/api/getFeatureVariableValue.js\":\n/*!********************************************!*\\\n  !*** ./lib/api/getFeatureVariableValue.js ***!\n  \\********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_37167__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Constants = __nested_webpack_require_37167__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar ApiEnum = __nested_webpack_require_37167__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar DecisionUtil = __nested_webpack_require_37167__(/*! ../utils/DecisionUtil */ \"./lib/utils/DecisionUtil.js\");\n\nvar CampaignUtil = __nested_webpack_require_37167__(/*! ../utils/CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar ValidateUtil = __nested_webpack_require_37167__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar FeatureUtil = __nested_webpack_require_37167__(/*! ../utils/FeatureUtil */ \"./lib/utils/FeatureUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_37167__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar ObjectUtil = __nested_webpack_require_37167__(/*! ../utils/ObjectUtil */ \"./lib/utils/ObjectUtil.js\");\n\nvar logging = __nested_webpack_require_37167__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_37167__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.GetFeatureVariableValue;\n/**\n * This API method:\n *\n * 1. Validates the arguments being passed\n * 2. Checks if user is eligible for campaign and check if feature is enabled for the user.\n * 4. If feature enabled, return the variable for that variation(if Feature Test),\n *    otherwise the default values being set in Feature\n *\n * @param {Object} vwoInstance   VWO instance which has logger, settingsFile etc.\n * @param {String} campaignKey   Unique key for a campaign\n * @param {String} variableKey   Unique key for a feature's variable\n * @param {String} userId        Unique identifier for the user\n * @param {Object} options           Optional params\n *\n * @return {string|number|double|boolean|null} Variable value as is set in the VWO app i.e.\n *                                             maintaining the data-type,\n *                                             null if anything fails like campaign / variable not found\n */\n\nfunction getFeatureVariableValue(vwoInstance, campaignKey, variableKey, userId) {\n  var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n  try {\n    var api = ApiEnum.GET_FEATURE_VARIABLE_VALUE;\n    var areParamsValid = false;\n\n    if (DataTypeUtil.isObject(options)) {\n      var customVariables = options.customVariables,\n          variationTargetingVariables = options.variationTargetingVariables,\n          userStorageData = options.userStorageData,\n          metaData = options.metaData; // Check if arguments have valid data-type\n\n      if (ValidateUtil.areValidParamsForAPIMethod({\n        method: ApiEnum.GET_FEATURE_VARIABLE_VALUE,\n        campaignKey: campaignKey,\n        variableKey: variableKey,\n        userId: userId,\n        customVariables: customVariables,\n        variationTargetingVariables: variationTargetingVariables,\n        userStorageData: userStorageData,\n        metaData: metaData\n      })) {\n        areParamsValid = true;\n      }\n    }\n\n    if (areParamsValid === false) {\n      vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_BAD_PARAMETERS, {\n        file: file,\n        api: ApiEnum.GetFeatureVariableValue\n      }));\n      return null;\n    } // Get the cached configuration\n\n\n    var config = vwoInstance.SettingsFileManager.getConfig();\n    var settingsFile = vwoInstance.SettingsFileManager.getSettingsFile(api);\n    config.apiName = api; // If no settings are found, simply return no variation\n\n    if (!settingsFile) {\n      return null;\n    }\n\n    var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey);\n\n    if (!campaign || campaign.status !== Constants.STATUS_RUNNING) {\n      vwoInstance.logger.log(LogLevelEnum.WARN, LogMessageUtil.build(LogMessageEnum.WARNING_MESSAGES.CAMPAIGN_NOT_RUNNING, {\n        file: file,\n        campaignKey: campaignKey,\n        api: api\n      }));\n      return null;\n    }\n\n    if (CampaignUtil.isAbCampaign(campaign)) {\n      // API not allowed for full-stack AB campaigns\n      vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_NOT_APPLICABLE, {\n        file: file,\n        campaignKey: campaignKey,\n        campaignType: campaign.type,\n        userId: userId,\n        api: api\n      }));\n      return null;\n    }\n\n    var variable;\n\n    var _DecisionUtil$getVari = DecisionUtil.getVariation(config, settingsFile, campaign, campaignKey, userId, customVariables, variationTargetingVariables, userStorageData, metaData, false, undefined, api),\n        variation = _DecisionUtil$getVari.variation,\n        variationName = _DecisionUtil$getVari.variationName;\n\n    if (!variationName) {\n      vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.FEATURE_STATUS, {\n        file: file,\n        campaignKey: campaignKey,\n        userId: userId,\n        status: 'disabled'\n      }));\n      return null;\n    }\n\n    if (CampaignUtil.isFeatureRolloutCampaign(campaign)) {\n      variable = FeatureUtil.getVariableForFeature(campaign, variableKey);\n    } else if (CampaignUtil.isFeatureTestCampaign(campaign)) {\n      variable = FeatureUtil.getVariableValueForVariation(campaign, variation, variableKey);\n\n      if (ObjectUtil.areObjectKeys(variable) && variation.isFeatureEnabled) {\n        vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.FEATURE_VARIABLE_VALUE, {\n          file: file,\n          variableKey: variableKey,\n          campaignKey: campaign.key,\n          variableValue: variable.value,\n          userId: userId\n        }));\n      } else if (ObjectUtil.areObjectKeys(variable) && !variation.isFeatureEnabled) {\n        vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.FEATURE_VARIABLE_DEFAULT_VALUE, {\n          file: file,\n          variableKey: variableKey,\n          variationName: variationName\n        }));\n      }\n    }\n\n    if (!ObjectUtil.areObjectKeys(variable)) {\n      vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.VARIABLE_NOT_FOUND, {\n        file: file,\n        variableKey: variableKey,\n        userId: userId\n      }));\n      return null;\n    }\n\n    var variableValue = variable.value;\n    var typeCastedValue = FeatureUtil.getTypeCastVariableValue(variableValue, variable.type);\n    return typeCastedValue;\n  } catch (err) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, err.message);\n    return null;\n  }\n}\n\nmodule.exports = getFeatureVariableValue;\n\n/***/ }),\n\n/***/ \"./lib/api/getVariation.js\":\n/*!*********************************!*\\\n  !*** ./lib/api/getVariation.js ***!\n  \\*********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_44654__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Constants = __nested_webpack_require_44654__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar ApiEnum = __nested_webpack_require_44654__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar DecisionUtil = __nested_webpack_require_44654__(/*! ../utils/DecisionUtil */ \"./lib/utils/DecisionUtil.js\");\n\nvar CampaignUtil = __nested_webpack_require_44654__(/*! ../utils/CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar ValidateUtil = __nested_webpack_require_44654__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_44654__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar logging = __nested_webpack_require_44654__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_44654__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.GetVariation;\n/**\n * This API method: Gets the variation assigned for the user for the campaign\n *\n * 1. Validates the arguments being passed\n * 2. Checks if user is eligible to get bucketed into the campaign,\n * 3. Assigns the determinitic variation to the user(based on userId), if user becomes part of campaign\n *    If userStorageService is used, it will look into it for the variation and if found, no further processing is done\n *\n * @param {Object} vwoInstance       VWO instance which has logger, settingsFile etc.\n * @param {String} campaignKey       unique campaign key specified in VWO app\n * @param {String} userId            ID assigned to a user\n * @param {Object} options           Optional params\n *\n * @return {String|null}             If variation is assigned then variation-name otherwise null in case of user not becoming part\n */\n\nfunction getVariation(vwoInstance, campaignKey, userId) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var api = ApiEnum.GET_VARIATION_NAME;\n  var areParamsValid = false;\n\n  if (DataTypeUtil.isObject(options)) {\n    var customVariables = options.customVariables,\n        variationTargetingVariables = options.variationTargetingVariables,\n        userStorageData = options.userStorageData,\n        metaData = options.metaData; // Check if arguments have valid data-type\n\n    if (ValidateUtil.areValidParamsForAPIMethod({\n      method: ApiEnum.GET_VARIATION_NAME,\n      campaignKey: campaignKey,\n      userId: userId,\n      customVariables: customVariables,\n      variationTargetingVariables: variationTargetingVariables,\n      userStorageData: userStorageData,\n      metaData: metaData\n    })) {\n      areParamsValid = true;\n    }\n  }\n\n  if (areParamsValid === false) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_BAD_PARAMETERS, {\n      file: file,\n      api: ApiEnum.GET_VARIATION_NAME\n    }));\n    return null;\n  } // Get the cached configuration\n\n\n  var config = vwoInstance.SettingsFileManager.getConfig();\n  var settingsFile = vwoInstance.SettingsFileManager.getSettingsFile(api);\n  config.apiName = api; // If no settings are found, simply return no variation\n\n  if (!settingsFile) {\n    return null;\n  } // Get the campaign settings based on campaignKey from the settings\n\n\n  var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey); // If matching campaign is not found with campaignKey or if found but is in not RUNNING state, simply return no variation\n\n  if (!campaign || campaign.status !== Constants.STATUS_RUNNING) {\n    vwoInstance.logger.log(LogLevelEnum.WARN, LogMessageUtil.build(LogMessageEnum.WARNING_MESSAGES.CAMPAIGN_NOT_RUNNING, {\n      file: file,\n      campaignKey: campaignKey,\n      api: api\n    }));\n    return null;\n  }\n\n  if (CampaignUtil.isFeatureRolloutCampaign(campaign)) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_NOT_APPLICABLE, {\n      file: file,\n      campaignKey: campaignKey,\n      campaignType: campaign.type,\n      userId: userId,\n      api: api\n    }));\n    return null;\n  }\n\n  var _DecisionUtil$getVari = DecisionUtil.getVariation(config, settingsFile, campaign, campaignKey, userId, customVariables, variationTargetingVariables, userStorageData, metaData, false, undefined, api),\n      variationName = _DecisionUtil$getVari.variationName;\n\n  if (!variationName) {\n    return null;\n  }\n\n  return variationName;\n}\n\nmodule.exports = getVariation;\n\n/***/ }),\n\n/***/ \"./lib/api/index.js\":\n/*!**************************!*\\\n  !*** ./lib/api/index.js ***!\n  \\**************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_49937__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar activate = __nested_webpack_require_49937__(/*! ./activate */ \"./lib/api/activate.js\");\n\nvar getVariation = __nested_webpack_require_49937__(/*! ./getVariation */ \"./lib/api/getVariation.js\");\n\nvar track = __nested_webpack_require_49937__(/*! ./track */ \"./lib/api/track.js\");\n\nvar isFeatureEnabled = __nested_webpack_require_49937__(/*! ./isFeatureEnabled */ \"./lib/api/isFeatureEnabled.js\");\n\nvar getFeatureVariableValue = __nested_webpack_require_49937__(/*! ./getFeatureVariableValue */ \"./lib/api/getFeatureVariableValue.js\");\n\nvar push = __nested_webpack_require_49937__(/*! ./push */ \"./lib/api/push.js\");\n\nmodule.exports = {\n  activate: activate,\n  getVariation: getVariation,\n  track: track,\n  isFeatureEnabled: isFeatureEnabled,\n  getFeatureVariableValue: getFeatureVariableValue,\n  push: push\n};\n\n/***/ }),\n\n/***/ \"./lib/api/isFeatureEnabled.js\":\n/*!*************************************!*\\\n  !*** ./lib/api/isFeatureEnabled.js ***!\n  \\*************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_51552__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Constants = __nested_webpack_require_51552__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar ApiEnum = __nested_webpack_require_51552__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar DecisionUtil = __nested_webpack_require_51552__(/*! ../utils/DecisionUtil */ \"./lib/utils/DecisionUtil.js\");\n\nvar CampaignUtil = __nested_webpack_require_51552__(/*! ../utils/CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar ImpressionUtil = __nested_webpack_require_51552__(/*! ../utils/ImpressionUtil */ \"./lib/utils/ImpressionUtil.js\");\n\nvar ValidateUtil = __nested_webpack_require_51552__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_51552__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar logging = __nested_webpack_require_51552__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_51552__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar EventEnum = __nested_webpack_require_51552__(/*! ../enums/EventEnum */ \"./lib/enums/EventEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.IsFeatureEnabled;\n/**\n * This API checks: Whether a feature is enabled or not for the given user\n *\n * 1. Validates the arguments being passed\n * 2. Checks if user is eligible for campaign and check if feature is enabled for the user.\n * 4. If feature enabled, sends a call to VWO server for tracking visitor\n *\n * @param {Object} vwoInstance       VWO instance which has logger, settingsFile etc.\n * @param {String} campaignKey       Unique key for a campaign\n * @param {String} userId            Unique identifier for the user\n * @param {Object} options           Optional params\n *\n * @return {Boolean}                 true if feature enabled, false otherwise\n */\n\nfunction isFeatureEnabled(vwoInstance, campaignKey, userId) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var api = ApiEnum.IS_FEATURE_ENABLED;\n  var areParamsValid = false;\n\n  if (DataTypeUtil.isObject(options)) {\n    var customVariables = options.customVariables,\n        variationTargetingVariables = options.variationTargetingVariables,\n        userStorageData = options.userStorageData,\n        shouldTrackReturningUser = options.shouldTrackReturningUser,\n        metaData = options.metaData,\n        responseCallback = options.responseCallback; // Check if arguments have valid data-type\n\n    if (ValidateUtil.areValidParamsForAPIMethod({\n      method: ApiEnum.IS_FEATURE_ENABLED,\n      campaignKey: campaignKey,\n      userId: userId,\n      customVariables: customVariables,\n      variationTargetingVariables: variationTargetingVariables,\n      userStorageData: userStorageData,\n      shouldTrackReturningUser: shouldTrackReturningUser,\n      metaData: metaData,\n      responseCallback: responseCallback\n    })) {\n      areParamsValid = true;\n    }\n  }\n\n  if (areParamsValid === false) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_BAD_PARAMETERS, {\n      file: file,\n      api: ApiEnum.isFeatureEnabled\n    }));\n    return null;\n  } // Get the cached configuration\n\n\n  var config = vwoInstance.SettingsFileManager.getConfig();\n  var settingsFile = vwoInstance.SettingsFileManager.getSettingsFile(api); // If no settings are found, simply log and return false\n\n  if (!settingsFile) {\n    return null;\n  }\n\n  shouldTrackReturningUser = shouldTrackReturningUser || config.shouldTrackReturningUser || false; // Get the campaign settings based on campaignKey from the settings\n\n  var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey);\n\n  if (!campaign || campaign.status !== Constants.STATUS_RUNNING) {\n    vwoInstance.logger.log(LogLevelEnum.WARN, LogMessageUtil.build(LogMessageEnum.WARNING_MESSAGES.CAMPAIGN_NOT_RUNNING, {\n      file: file,\n      campaignKey: campaignKey,\n      api: api\n    }));\n    return null;\n  }\n\n  if (CampaignUtil.isAbCampaign(campaign)) {\n    // API not allowed for full-stack AB campaigns\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_NOT_APPLICABLE, {\n      file: file,\n      campaignKey: campaignKey,\n      campaignType: campaign.type,\n      userId: userId,\n      api: api\n    }));\n    return null;\n  }\n\n  var _DecisionUtil$getVari = DecisionUtil.getVariation(config, settingsFile, campaign, campaignKey, userId, customVariables, variationTargetingVariables, userStorageData, metaData, true, undefined, api),\n      variation = _DecisionUtil$getVari.variation,\n      variationName = _DecisionUtil$getVari.variationName,\n      variationId = _DecisionUtil$getVari.variationId,\n      isStoredVariation = _DecisionUtil$getVari.isStoredVariation;\n\n  var isFeatureEnabled = false;\n\n  if (variationName) {\n    isFeatureEnabled = CampaignUtil.isFeatureRolloutCampaign(campaign) || variation.isFeatureEnabled;\n\n    if (isStoredVariation && !shouldTrackReturningUser) {\n      vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CAMPAIGN_USER_ALREADY_TRACKED, {\n        file: file,\n        userId: userId,\n        campaignKey: campaignKey,\n        api: api\n      }));\n    } else {\n      // Variation found...let VWO server knows about it to show report stats\n      if (config.batchEvents) {\n        var properties = ImpressionUtil.buildBatchEventForTrackingUser(settingsFile, campaign.id, variationId, userId);\n        vwoInstance.batchEventsQueue.enqueue(properties);\n      } else if (settingsFile.isEventArchEnabled) {\n        var _properties = ImpressionUtil.getEventsBaseProperties(settingsFile, EventEnum.VWO_VARIATION_SHOWN, vwoInstance.usageStats.getUsageStats());\n\n        var payload = ImpressionUtil.getTrackUserPayloadData(settingsFile, userId, EventEnum.VWO_VARIATION_SHOWN, campaign.id, variationId);\n        vwoInstance.eventQueue.process(config, _properties, vwoInstance, {\n          payload: payload,\n          responseCallback: responseCallback\n        });\n      } else {\n        var _properties2 = ImpressionUtil.buildEventForTrackingUser(settingsFile, campaign.id, variationId, userId, vwoInstance.usageStats.getUsageStats());\n\n        vwoInstance.eventQueue.process(config, _properties2, vwoInstance, {\n          responseCallback: responseCallback\n        });\n      }\n\n      vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.FEATURE_STATUS, {\n        file: file,\n        campaignKey: campaignKey,\n        userId: userId,\n        status: isFeatureEnabled ? 'enabled' : 'disabled'\n      }));\n\n      if (config.isDevelopmentMode) {\n        return {\n          isFeatureEnabled: isFeatureEnabled\n        };\n      }\n\n      return isFeatureEnabled;\n    }\n  }\n\n  vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.FEATURE_STATUS, {\n    file: file,\n    campaignKey: campaignKey,\n    userId: userId,\n    status: isFeatureEnabled ? 'enabled' : 'disabled'\n  }));\n\n  if (isStoredVariation || config.isDevelopmentMode) {\n    return {\n      isFeatureEnabled: isFeatureEnabled\n    };\n  }\n\n  return {\n    isFeatureEnabled: isFeatureEnabled\n  };\n}\n\nmodule.exports = isFeatureEnabled;\n\n/***/ }),\n\n/***/ \"./lib/api/push.js\":\n/*!*************************!*\\\n  !*** ./lib/api/push.js ***!\n  \\*************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_59586__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ApiEnum = __nested_webpack_require_59586__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar logging = __nested_webpack_require_59586__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_59586__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar EventEnum = __nested_webpack_require_59586__(/*! ../enums/EventEnum */ \"./lib/enums/EventEnum.js\");\n\nvar ValidateUtil = __nested_webpack_require_59586__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar ImpressionUtil = __nested_webpack_require_59586__(/*! ../utils/ImpressionUtil */ \"./lib/utils/ImpressionUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_59586__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar BatchEventsDispatcher;\n\nif (false) {}\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.Push;\n/**\n * This API method: Pushes the key-value tag pair for a particular user\n *\n * 1. validates the arguments being passed\n * 2. Sends a call to VWO push api\n *\n * @param {Object} vwoInstance               VWO instance which has logger, settingsFile etc.\n * @param {String} tagKey                    tag key\n * @param {String} tagValue                  tag Value\n * @param {String} userId                    ID assigned to a user\n *\n * @return {Boolean}                         true if request is pushed to eventQueue, false if params are invalid or settings file is unavailable\n */\n\nfunction push(vwoInstance, tagKey, tagValue, userId, customDimensionMap) {\n  var _ref = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {},\n      responseCallback = _ref.responseCallback;\n\n  var api = ApiEnum.PUSH;\n\n  if (!ValidateUtil.areValidParamsForAPIMethod({\n    method: ApiEnum.PUSH,\n    tagKey: tagKey,\n    tagValue: tagValue,\n    userId: userId,\n    customDimensionMap: customDimensionMap,\n    responseCallback: responseCallback\n  })) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.PUSH_INVALID_PARAMS, {\n      file: file,\n      method: api\n    }));\n    return false;\n  }\n\n  if (tagKey.length > 255) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.TAG_KEY_LENGTH_EXCEEDED, {\n      file: file,\n      tagKey: tagKey,\n      userId: userId\n    }));\n    return false;\n  }\n\n  if (tagValue.length > 255) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.TAG_VALUE_LENGTH_EXCEEDED, {\n      file: file,\n      tagKey: tagKey,\n      userId: userId,\n      tagValue: tagValue\n    }));\n    return false;\n  }\n\n  if (tagKey === ' ' && tagValue === ' ' && (!customDimensionMap || Object.keys(customDimensionMap).length === 0)) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.PUSH_INVALID_PARAMS, {\n      file: file,\n      method: api\n    }));\n    return false;\n  }\n\n  if (tagKey !== ' ' && tagValue !== ' ') {\n    customDimensionMap[tagKey] = tagValue;\n  } // Get the cached configuration\n\n\n  var config = vwoInstance.SettingsFileManager.getConfig();\n  var settingsFile = vwoInstance.SettingsFileManager.getSettingsFile(api); // If no settings are found, simply false\n\n  if (!settingsFile) {\n    return false;\n  }\n\n  var result = {};\n\n  if (config.batchEvents) {\n    Object.keys(customDimensionMap).forEach(function (key) {\n      var tagValue = DataTypeUtil.isString(customDimensionMap[key]) ? customDimensionMap[key] : JSON.stringify(customDimensionMap[key]);\n      var properties = ImpressionUtil.buildBatchEventForPushing(settingsFile, key, tagValue, userId);\n      vwoInstance.batchEventsQueue.enqueue(properties);\n      result[key] = true;\n    });\n  } else if (settingsFile.isEventArchEnabled) {\n    var properties = ImpressionUtil.getEventsBaseProperties(settingsFile, EventEnum.VWO_SYNC_VISITOR_PROP);\n    var payload = ImpressionUtil.getPushPayloadData(settingsFile, userId, EventEnum.VWO_SYNC_VISITOR_PROP, customDimensionMap);\n    vwoInstance.eventQueue.process(config, properties, vwoInstance, {\n      payload: payload,\n      responseCallback: responseCallback\n    });\n    result.success = true;\n  } else {\n    var events = [];\n    var customDimensionKeys = Object.keys(customDimensionMap);\n    customDimensionKeys.forEach(function (key) {\n      var properties;\n      var tagValue = DataTypeUtil.isString(customDimensionMap[key]) ? customDimensionMap[key] : JSON.stringify(customDimensionMap[key]);\n\n      if (true) {\n        properties = ImpressionUtil.buildEventForPushing(settingsFile, key, tagValue, userId);\n        vwoInstance.eventQueue.process(config, properties, vwoInstance, {\n          responseCallback: responseCallback\n        });\n      } else {}\n\n      events.push(properties);\n      result[key] = true;\n    });\n\n    if (false) {}\n  }\n\n  if (config.isDevelopmentMode) {\n    return Object.assign({}, result, {\n      isDevelopmentMode: config.isDevelopmentMode\n    });\n  }\n\n  return result;\n}\n\nmodule.exports = push;\n\n/***/ }),\n\n/***/ \"./lib/api/track.js\":\n/*!**************************!*\\\n  !*** ./lib/api/track.js ***!\n  \\**************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_65456__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Constants = __nested_webpack_require_65456__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar GoalTypeEnum = __nested_webpack_require_65456__(/*! ../enums/GoalTypeEnum */ \"./lib/enums/GoalTypeEnum.js\");\n\nvar ApiEnum = __nested_webpack_require_65456__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar DecisionUtil = __nested_webpack_require_65456__(/*! ../utils/DecisionUtil */ \"./lib/utils/DecisionUtil.js\");\n\nvar CampaignUtil = __nested_webpack_require_65456__(/*! ../utils/CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar _require = __nested_webpack_require_65456__(/*! ../utils/ObjectUtil */ \"./lib/utils/ObjectUtil.js\"),\n    objectValues = _require.objectValues;\n\nvar ImpressionUtil = __nested_webpack_require_65456__(/*! ../utils/ImpressionUtil */ \"./lib/utils/ImpressionUtil.js\");\n\nvar ValidateUtil = __nested_webpack_require_65456__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_65456__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar logging = __nested_webpack_require_65456__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_65456__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.Track;\nvar GOAL_TYPE_TO_TRACK_DEFAULT = GoalTypeEnum.ALL;\nvar GOAL_IDENTIFIER_SEPERATOR = '_vwo_';\nvar api = ApiEnum.TRACK;\nvar BatchEventsDispatcher;\n\nif (false) {}\n/**\n * This API method: Marks the conversion of the campaign for a particular goal\n *\n * 1. validates the arguments being passed\n * 2. Checks if user is eligible to get bucketed into the campaign,\n * 3. Gets the assigned determinitic variation to the user(based on userId), if user becomes part of campaign\n * 4. Sends an impression call to VWO server to track goal data\n *\n * @param {Object} vwoInstance               VWO instance which has logger, settingsFile etc.\n * @param {Number} campaignKey               unique campaign test key\n * @param {String} userId                    ID assigned to a user\n * @param {String} goalIdentifier             unique campaign's goal identifier\n * @param {Object} options                   Optional params\n */\n\n\nfunction track(vwoInstance, campaignKey, userId, goalIdentifier) {\n  var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var areParamsValid = false;\n\n  if (DataTypeUtil.isObject(options)) {\n    var revenueValue = options.revenueValue,\n        customVariables = options.customVariables,\n        variationTargetingVariables = options.variationTargetingVariables,\n        userStorageData = options.userStorageData,\n        goalTypeToTrack = options.goalTypeToTrack,\n        shouldTrackReturningUser = options.shouldTrackReturningUser,\n        metaData = options.metaData,\n        responseCallback = options.responseCallback; // Check if arguments have valid data-type\n\n    if (ValidateUtil.areValidParamsForAPIMethod({\n      method: ApiEnum.TRACK,\n      campaignKey: campaignKey,\n      userId: userId,\n      goalIdentifier: goalIdentifier,\n      customVariables: customVariables,\n      variationTargetingVariables: variationTargetingVariables,\n      userStorageData: userStorageData,\n      goalTypeToTrack: goalTypeToTrack,\n      shouldTrackReturningUser: shouldTrackReturningUser,\n      metaData: metaData,\n      responseCallback: responseCallback\n    }) && (!goalTypeToTrack || goalTypeToTrack && objectValues(GoalTypeEnum).includes(goalTypeToTrack))) {\n      areParamsValid = true;\n    }\n  }\n\n  if (areParamsValid === false) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_BAD_PARAMETERS, {\n      file: file,\n      api: ApiEnum.TRACK\n    }));\n    return null;\n  } // Get the cached configuration\n\n\n  var config = vwoInstance.SettingsFileManager.getConfig();\n  var settingsFile = vwoInstance.SettingsFileManager.getSettingsFile(api);\n  config.apiName = api;\n  var revenuePropList = new Set(); // If no settings are found, simply do not track goal and return false\n\n  if (!settingsFile) {\n    return null;\n  }\n\n  var campaigns = [];\n  goalTypeToTrack = goalTypeToTrack || config.goalTypeToTrack || GOAL_TYPE_TO_TRACK_DEFAULT; // priority order - options > launchConfig > default\n\n  if (DataTypeUtil.isUndefined(shouldTrackReturningUser)) {\n    // if shouldTrackReturningUser is not given in options\n    if (DataTypeUtil.isBoolean(config.shouldTrackReturningUser)) {\n      // if shouldTrackReturningUser is given in config at launch\n      shouldTrackReturningUser = config.shouldTrackReturningUser;\n    } else {\n      shouldTrackReturningUser = false;\n    }\n  }\n\n  if (!DataTypeUtil.isString(campaignKey)) {\n    if (DataTypeUtil.isArray(campaignKey)) {\n      campaigns = CampaignUtil.getCampaignsForKeys(settingsFile, campaignKey);\n    } else {\n      campaigns = CampaignUtil.getCampaignsForGoal(settingsFile, goalIdentifier, goalTypeToTrack);\n    }\n  } else {\n    // Get the campaign settings based on campaignKey from the settings\n    var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey);\n    campaigns.push(campaign || {\n      key: campaignKey\n    });\n  }\n\n  var result = {};\n  var metricMap = {};\n  var events = [];\n  var areGlobalGoals =   true ? false : 0;\n  campaigns.forEach(function (campaign) {\n    return result[campaign.key] = trackCampaignGoal(vwoInstance, campaign, campaign.key, userId, settingsFile, goalIdentifier, revenueValue, config, customVariables, variationTargetingVariables, userStorageData, goalTypeToTrack, shouldTrackReturningUser, metaData, metricMap, revenuePropList, events, areGlobalGoals);\n  });\n\n  if (!Object.keys(result).length) {\n    return null;\n  }\n\n  if (true) {\n    if (events && events.length) {\n      for (var k = 0; k < events.length; k++) {\n        vwoInstance.eventQueue.process(config, events[k], vwoInstance, {\n          responseCallback: responseCallback\n        });\n      }\n    }\n  } else {}\n\n  if (settingsFile.isEventArchEnabled && Object.keys(metricMap).length > 0) {\n    var properties = ImpressionUtil.getEventsBaseProperties(settingsFile, goalIdentifier);\n    var payload = ImpressionUtil.getTrackGoalPayloadData(settingsFile, userId, goalIdentifier, metricMap, revenueValue, revenuePropList);\n    vwoInstance.eventQueue.process(config, properties, vwoInstance, {\n      payload: payload,\n      responseCallback: responseCallback\n    });\n    Object.keys(metricMap).forEach(function (key) {\n      DecisionUtil._saveUserData(config, metricMap[key].campaign, metricMap[key].variationName, metricMap[key].userId, metricMap[key].metaData, goalIdentifier);\n    });\n  }\n\n  if (config.isDevelopmentMode) {\n    return Object.assign({}, result, {\n      isDevelopmentMode: config.isDevelopmentMode\n    });\n  }\n\n  return result;\n}\n\nfunction trackCampaignGoal(vwoInstance, campaign, campaignKey, userId, settingsFile, goalIdentifier, revenueValue, config, customVariables, variationTargetingVariables, userStorageData, goalTypeToTrack, shouldTrackReturningUser, metaData, metricMap, revenuePropList, events, areGlobalGoals) {\n  // If matching campaign is not found with campaignKey or if found but is in not RUNNING state, simply return no variation\n  if (!campaign || campaign.status !== Constants.STATUS_RUNNING) {\n    vwoInstance.logger.log(LogLevelEnum.WARN, LogMessageUtil.build(LogMessageEnum.WARNING_MESSAGES.CAMPAIGN_NOT_RUNNING, {\n      file: file,\n      campaignKey: campaignKey,\n      api: api\n    }));\n    return false;\n  }\n\n  if (CampaignUtil.isFeatureRolloutCampaign(campaign)) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_NOT_APPLICABLE, {\n      file: file,\n      campaignKey: campaignKey,\n      campaignType: campaign.type,\n      userId: userId,\n      api: api\n    }));\n    return false;\n  }\n\n  var campaignId = campaign.id; // Get the campaign goal settings based on goalIdentifier\n\n  var goal = CampaignUtil.getCampaignGoal(settingsFile, campaign.key, goalIdentifier);\n\n  if (!goal) {\n    // If no goal is found, something is wrong with the goalIdentifier\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.TRACK_API_GOAL_NOT_FOUND, {\n      file: file,\n      userId: userId,\n      goalIdentifier: goalIdentifier,\n      campaignKey: campaignKey\n    }));\n    return false;\n  } else if (goalTypeToTrack !== GOAL_TYPE_TO_TRACK_DEFAULT && goal.type !== goalTypeToTrack) {\n    return false;\n  } else if (goal.type === GoalTypeEnum.REVENUE && !ValidateUtil.isValidValue(revenueValue)) {\n    vwoInstance.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.TRACK_API_REVENUE_NOT_PASSED_FOR_REVENUE_GOAL, {\n      file: file,\n      userId: userId,\n      goalIdentifier: goalIdentifier,\n      campaignKey: campaignKey\n    }));\n    return false;\n  }\n\n  if (goal.type === GoalTypeEnum.REVENUE && goal.revenueProp) {\n    revenuePropList.add(goal.revenueProp);\n  }\n\n  var _DecisionUtil$getVari = DecisionUtil.getVariation(config, settingsFile, campaign, campaignKey, userId, customVariables, variationTargetingVariables, userStorageData, metaData, false, goalIdentifier, api),\n      variationId = _DecisionUtil$getVari.variationId,\n      variationName = _DecisionUtil$getVari.variationName,\n      storedGoalIdentifier = _DecisionUtil$getVari.storedGoalIdentifier; // Is User is a part of Campaign and has been decided to be a part of particular variation\n\n\n  if (variationName) {\n    if (storedGoalIdentifier) {\n      var identifiers = storedGoalIdentifier.split(GOAL_IDENTIFIER_SEPERATOR);\n\n      if (!identifiers.includes(goalIdentifier)) {\n        storedGoalIdentifier += GOAL_IDENTIFIER_SEPERATOR + goalIdentifier;\n\n        DecisionUtil._saveUserData(config, campaign, variationName, userId, metaData, storedGoalIdentifier);\n      } else if (!shouldTrackReturningUser) {\n        vwoInstance.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CAMPAIGN_GOAL_ALREADY_TRACKED, {\n          file: file,\n          userId: userId,\n          goalIdentifier: goalIdentifier,\n          campaignKey: campaignKey\n        }));\n        return false;\n      }\n    } // If goal is found, send an impression to VWO server for report stats\n\n\n    if (config.batchEvents) {\n      var properties = ImpressionUtil.buildBatchEventForTrackingGoal(settingsFile, campaignId, variationId, userId, goal, revenueValue);\n      vwoInstance.batchEventsQueue.enqueue(properties);\n    } else if (settingsFile.isEventArchEnabled) {\n      metricMap[campaign.id] = {\n        config: config,\n        campaign: campaign,\n        variationName: variationName,\n        userId: userId,\n        metaData: metaData,\n        goal: goal\n      };\n      return true;\n    } else {\n      var _properties = {};\n\n      if (areGlobalGoals) {\n        _properties = ImpressionUtil.buildBatchEventForTrackingGoal(settingsFile, campaignId, variationId, userId, goal, revenueValue);\n      } else {\n        _properties = ImpressionUtil.buildEventForTrackingGoal(settingsFile, campaignId, variationId, userId, goal, revenueValue);\n      }\n\n      events.push(_properties);\n    }\n\n    DecisionUtil._saveUserData(config, campaign, variationName, userId, metaData, goalIdentifier);\n\n    return true;\n  }\n\n  return false;\n}\n\nmodule.exports = track;\n\n/***/ }),\n\n/***/ \"./lib/constants/index.js\":\n/*!********************************!*\\\n  !*** ./lib/constants/index.js ***!\n  \\********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global SDK_NAME, SDK_VERSION */\nvar packageFile = {}; // For javascript-sdk, to keep the build size low\n// avoid adding the whole package file in the file\n\nif (true) {\n  packageFile = {\n    name: \"vwo-javascript-sdk\",\n    version: \"1.32.3\"\n  };\n} else {}\n\nmodule.exports = {\n  SDK_NAME: packageFile.name,\n  SDK_VERSION: packageFile.version,\n  PLATFORM: 'server',\n  SEED_VALUE: 1,\n  MAX_TRAFFIC_PERCENT: 100,\n  MAX_TRAFFIC_VALUE: 10000,\n  MAX_EVENTS_PER_REQUEST: 5000,\n  DEFAULT_EVENTS_PER_REQUEST: 100,\n  DEFAULT_REQUEST_TIME_INTERVAL: 600,\n  // 10 * 60(secs) = 600 secs i.e. 10 minutes\n  STATUS_RUNNING: 'RUNNING',\n  SEED_URL: 'https://vwo.com',\n  HTTP_PROTOCOL: 'http://',\n  HTTPS_PROTOCOL: 'https://',\n  SDK_QUERY_PARAM: 'sdk',\n  SDK_VERSION_QUERY_PARAM: 'sdk-v'\n};\n\n/***/ }),\n\n/***/ \"./lib/core/BucketingService.js\":\n/*!**************************************!*\\\n  !*** ./lib/core/BucketingService.js ***!\n  \\**************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_79273__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Hasher = __nested_webpack_require_79273__(/*! murmurhash */ \"./node_modules/murmurhash/murmurhash.js\");\n\nvar Constants = __nested_webpack_require_79273__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar ValidateUtil = __nested_webpack_require_79273__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar logging = __nested_webpack_require_79273__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_79273__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar CampaignUtil = __nested_webpack_require_79273__(/*! ../utils/CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\nvar file = FileNameEnum.BucketingService;\nvar BucketingService = {\n  /**\n   * Generates Bucket Value of the User by hashing the User ID by murmurHash\n   * and scaling it down.\n   *\n   * @param {Number} hashValue the hashValue generated after hashing\n   * @param {Number} maxValue the value up-to which hashValue needs to be scaled\n   * @param {Number} multiplier multiplier in case the traffic allocation is less than 100\n   *\n   * @return {Number} bucket Value of the User\n   */\n  _generateBucketValue: function _generateBucketValue(hashValue, maxValue) {\n    var multiplier = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var ratio = hashValue / Math.pow(2, 32);\n    var multipliedValue = (maxValue * ratio + 1) * multiplier;\n    var value = Math.floor(multipliedValue);\n    return value;\n  },\n\n  /**\n   * Returns the Variation by checking the Start and End Bucket Allocations of each Variation\n   *\n   * @param {Object} campaign which contains the variations\n   * @param {Number} bucketValue the bucket Value of the user\n   *\n   * @return {Object|null} variation data allotted to the user or null if not\n   */\n  _getVariation: function _getVariation(variations, bucketValue) {\n    for (var i = 0; i < Object.keys(variations).length; i++) {\n      var variation = variations[i];\n\n      if (bucketValue >= variation.startVariationAllocation && bucketValue <= variation.endVariationAllocation) {\n        return variation;\n      }\n    }\n\n    return null;\n  },\n\n  /**\n   * Validates the User ID and generates Bucket Value of the User by hashing the userId by murmurHash and scaling it down.\n   *\n   * @param {String} userId the unique ID assigned to User\n   *\n   * @return {Number} the bucket Value allotted to User (between 1 to $this->$MAX_TRAFFIC_PERCENT)\n   */\n  _getBucketValueForUser: function _getBucketValueForUser(seed, userId, disableLog) {\n    var hashValue = Hasher.v3(seed, Constants.SEED_VALUE);\n\n    var bucketValue = BucketingService._generateBucketValue(hashValue, Constants.MAX_TRAFFIC_PERCENT);\n\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.USER_HASH_BUCKET_VALUE, {\n      file: file,\n      hashValue: hashValue,\n      bucketValue: bucketValue,\n      userId: userId\n    }), disableLog);\n    return bucketValue;\n  },\n\n  /**\n   * Calculate if this user should become part of the campaign or not\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {Object} campaign fot getting the value of traffic allotted to the campaign\n   *\n   * @return {Boolean} if User is a part of Campaign or not\n   */\n  isUserPartOfCampaign: function isUserPartOfCampaign(userId, campaign) {\n    var disableLog = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (!campaign) {\n      return false;\n    }\n\n    var trafficAllocation = campaign.percentTraffic;\n\n    var valueAssignedToUser = BucketingService._getBucketValueForUser(CampaignUtil.getBucketingSeed(userId, campaign), userId, disableLog);\n\n    var isUserPart = valueAssignedToUser !== 0 && valueAssignedToUser <= trafficAllocation;\n    logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.USER_CAMPAIGN_ELIGIBILITY, {\n      file: file,\n      userId: userId,\n      campaignKey: campaign.key,\n      status: isUserPart ? 'eligible' : 'not eligible'\n    }), disableLog);\n    return isUserPart;\n  },\n\n  /**\n   * Validates the User ID and generates Variation into which the User is bucketed in.\n   *\n   * @param {String} userId the unique ID assigned to User\n   * @param {Object} campaign the Campaign of which User is a part of\n   *\n   * @return {Object|null} variation data into which user is bucketed in or null if not\n   */\n  bucketUserToVariation: function bucketUserToVariation(userId, campaign) {\n    var multiplier;\n\n    if (!ValidateUtil.isValidValue(userId)) {\n      return null;\n    }\n\n    if (!campaign) {\n      return null;\n    }\n\n    if (campaign.percentTraffic) {\n      multiplier = Constants.MAX_TRAFFIC_VALUE / campaign.percentTraffic / 100;\n    }\n\n    var hashValue = BucketingService._generateHashValue(campaign.isBucketingSeedEnabled ? \"\".concat(campaign.id, \"_\").concat(userId) : userId);\n\n    var bucketValue = BucketingService._generateBucketValue(hashValue, Constants.MAX_TRAFFIC_VALUE, multiplier);\n\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.USER_CAMPAIGN_BUCKET_VALUES, {\n      file: file,\n      userId: userId,\n      campaignKey: campaign.key,\n      percentTraffic: campaign.percentTraffic,\n      bucketValue: bucketValue,\n      hashValue: hashValue\n    }));\n    return BucketingService._getVariation(campaign.variations, bucketValue);\n  },\n  calculateBucketValue: function calculateBucketValue(seed) {\n    var multiplier = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    var hashValue = BucketingService._generateHashValue(seed);\n\n    return BucketingService._generateBucketValue(hashValue, Constants.MAX_TRAFFIC_VALUE, multiplier);\n  },\n  _generateHashValue: function _generateHashValue(userId) {\n    return Hasher.v3(userId, Constants.SEED_VALUE);\n  }\n};\nmodule.exports = BucketingService;\n\n/***/ }),\n\n/***/ \"./lib/core/SegmentEvaluator.js\":\n/*!**************************************!*\\\n  !*** ./lib/core/SegmentEvaluator.js ***!\n  \\**************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_86098__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SegmentEnum = __nested_webpack_require_86098__(/*! ../enums/segment */ \"./lib/enums/segment/index.js\");\n\nvar _require = __nested_webpack_require_86098__(/*! ../utils/ObjectUtil */ \"./lib/utils/ObjectUtil.js\"),\n    getKeyValue = _require.getKeyValue;\n\nvar _require2 = __nested_webpack_require_86098__(/*! ../utils/SegmentUtil */ \"./lib/utils/SegmentUtil.js\"),\n    operandCustomVariablesParser = _require2.operandCustomVariablesParser,\n    operandUserParser = _require2.operandUserParser;\n\nvar logging = __nested_webpack_require_86098__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar DataTypeUtil = __nested_webpack_require_86098__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar FileNameEnum = __nested_webpack_require_86098__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar _SegmentEnum$SegmentO = SegmentEnum.SegmentOperatorTypes,\n    AND = _SegmentEnum$SegmentO.AND,\n    OR = _SegmentEnum$SegmentO.OR,\n    NOT = _SegmentEnum$SegmentO.NOT;\nvar _SegmentEnum$SegmentO2 = SegmentEnum.SegmentOperandTypes,\n    CUSTOM_VARIABLE = _SegmentEnum$SegmentO2.CUSTOM_VARIABLE,\n    USER = _SegmentEnum$SegmentO2.USER;\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.SegmentEvaluator;\nvar logger = logging.getLogger();\nmodule.exports = SegmentEvaluator;\n/**\n * This method: A parser which recursively evaluates the expression tree represented by dsl\n *\n * @param {Object} dsl                     The segments defined in the campaing\n * @param {Object} customVariables         Key/value pair of custom_attributs properties\n *\n * @return {Boolean}                       true if user is to be made part of campaign, else false\n */\n\nfunction evaluator(dsl, customVariables) {\n  var _getKeyValue = getKeyValue(dsl),\n      key = _getKeyValue.key,\n      value = _getKeyValue.value;\n\n  var operator = key;\n  var subDsl = value;\n\n  if (operator === NOT) {\n    return !evaluator(subDsl, customVariables);\n  } else if (operator === AND) {\n    var list = [];\n\n    for (var i = 0; i < subDsl.length; i++) {\n      list.push(evaluator(subDsl[i], customVariables));\n    }\n\n    return list.every(function (val) {\n      return val;\n    });\n  } else if (operator === OR) {\n    var _list = [];\n\n    for (var _i = 0; _i < subDsl.length; _i++) {\n      _list.push(evaluator(subDsl[_i], customVariables));\n    }\n\n    return _list.some(function (val) {\n      return val;\n    });\n  } else if (operator === CUSTOM_VARIABLE) {\n    return operandCustomVariablesParser(subDsl, customVariables);\n  } else if (operator === USER) {\n    return operandUserParser(subDsl, customVariables);\n  }\n}\n\nfunction SegmentEvaluator(dsl) {\n  var customVariables = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var campaignKey = arguments.length > 2 ? arguments[2] : undefined;\n  var userId = arguments.length > 3 ? arguments[3] : undefined;\n  var variation = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';\n  var disableLogs = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n  try {\n    if (DataTypeUtil.isObject(dsl) && !Object.keys(dsl).length) {\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.SEGMENTATION_SKIPPED, {\n        campaignKey: campaignKey,\n        userId: userId,\n        file: file\n      }), disableLogs);\n      return true;\n    }\n\n    if (DataTypeUtil.isObject(dsl) && Object.keys(dsl).length) {\n      return evaluator(dsl, customVariables);\n    }\n\n    return true;\n  } catch (err) {\n    logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.SEGMENTATION_ERROR, {\n      campaignKey: campaignKey,\n      userId: userId,\n      customVariables: JSON.stringify(customVariables),\n      file: file,\n      err: err,\n      variation: variation\n    }), disableLogs);\n    return false;\n  }\n}\n\n/***/ }),\n\n/***/ \"./lib/core/VariationDecider.js\":\n/*!**************************************!*\\\n  !*** ./lib/core/VariationDecider.js ***!\n  \\**************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_90860__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ValidateUtil = __nested_webpack_require_90860__(/*! ../utils/ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar Bucketer = __nested_webpack_require_90860__(/*! ./BucketingService */ \"./lib/core/BucketingService.js\");\n\nvar logging = __nested_webpack_require_90860__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_90860__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\nvar file = FileNameEnum.VariationDecider;\nvar VariationDecider = {\n  /**\n   * Returns the Variation Allotted to User\n   *\n   * @param {String} userId the unique ID assigned to User\n   * @param {Object} campaign\n   *\n   * @return {Object} Variation object allotted to User\n   */\n  getVariationAllotted: function getVariationAllotted(userId, campaign) {\n    var response = {\n      variation: null,\n      variationId: null,\n      variationName: null\n    };\n\n    if (!ValidateUtil.isValidValue(userId)) {\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.USER_ID_INVALID, {\n        file: file,\n        userId: userId\n      }));\n      return response;\n    }\n\n    if (Bucketer.isUserPartOfCampaign(userId, campaign)) {\n      var variation = VariationDecider.getVariationOfCampaignForUser(userId, campaign) || {};\n      response.variation = variation;\n      response.variationId = variation.id;\n      response.variationName = variation.name;\n    } else {\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.USER_NOT_PART_OF_CAMPAIGN, {\n        file: file,\n        userId: userId,\n        campaignKey: campaign.key\n      }));\n    }\n\n    return response;\n  },\n\n  /**\n   * Assigns random variation ID to a particular user depending on the PercentTraffic.\n   * Makes user a part of campaign if user's included in Traffic.\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {Object} campaign the Campaign of which user is to be made a part of\n   *\n   * @return {Object|null} Variation allotted to User\n   */\n  getVariationOfCampaignForUser: function getVariationOfCampaignForUser(userId, campaign) {\n    if (!campaign) {\n      return null;\n    }\n\n    var variation = Bucketer.bucketUserToVariation(userId, campaign);\n\n    if (variation && variation.name) {\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.USER_VARIATION_STATUS, {\n        file: file,\n        userId: userId,\n        campaignKey: campaign.key,\n        status: \"got Varation:\".concat(variation.name)\n      }));\n      return {\n        variation: variation,\n        name: variation.name,\n        id: variation.id\n      };\n    }\n\n    logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.USER_VARIATION_STATUS, {\n      file: file,\n      userId: userId,\n      campaignKey: campaign.key,\n      status: 'got no variation'\n    }));\n    return null;\n  }\n};\nmodule.exports = VariationDecider;\n\n/***/ }),\n\n/***/ \"./lib/enums/AnsiColorEnum.js\":\n/*!************************************!*\\\n  !*** ./lib/enums/AnsiColorEnum.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AnsiColorEnum = {\n  BOLD: '\\x1b[1m',\n  CYAN: '\\x1b[36m',\n  GREEN: '\\x1b[32m',\n  LIGHTBLUE: '\\x1b[94m',\n  RED: '\\x1b[31m',\n  RESET: '\\x1b[0m',\n  WHITE: '\\x1b[30m',\n  YELLOW: '\\x1b[33m'\n};\nmodule.exports = AnsiColorEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/ApiEnum.js\":\n/*!******************************!*\\\n  !*** ./lib/enums/ApiEnum.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ApiEnum = {\n  LAUNCH: 'launch',\n  ACTIVATE: 'activate',\n  GET_VARIATION_NAME: 'getVariation',\n  TRACK: 'track',\n  IS_FEATURE_ENABLED: 'isFeatureEnabled',\n  GET_FEATURE_VARIABLE_VALUE: 'getFeatureVariableValue',\n  PUSH: 'push'\n};\nmodule.exports = ApiEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/CampaignTypeEnum.js\":\n/*!***************************************!*\\\n  !*** ./lib/enums/CampaignTypeEnum.js ***!\n  \\***************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CampaignTypeEnum = {\n  FEATURE_TEST: 'FEATURE_TEST',\n  FEATURE_ROLLOUT: 'FEATURE_ROLLOUT',\n  AB: 'VISUAL_AB'\n};\nmodule.exports = CampaignTypeEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/DataTypeEnum.js\":\n/*!***********************************!*\\\n  !*** ./lib/enums/DataTypeEnum.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DataTypeEnum = {\n  NUMBER: 'number',\n  STRING: 'string',\n  // FUNCTION: 'function',\n  BOOLEAN: 'boolean',\n  OBJECT: 'object'\n};\nmodule.exports = DataTypeEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/EventEnum.js\":\n/*!********************************!*\\\n  !*** ./lib/enums/EventEnum.js ***!\n  \\********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar EventEnum = {\n  VWO_VARIATION_SHOWN: 'vwo_variationShown',\n  VWO_SYNC_VISITOR_PROP: 'vwo_syncVisitorProp'\n};\nmodule.exports = EventEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/FeatureVariableTypeEnum.js\":\n/*!**********************************************!*\\\n  !*** ./lib/enums/FeatureVariableTypeEnum.js ***!\n  \\**********************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar FeatureVariableTypeEnum = {\n  BOOLEAN: 'boolean',\n  DOUBLE: 'double',\n  INTEGER: 'integer',\n  STRING: 'string',\n  JSON: 'json'\n};\nmodule.exports = FeatureVariableTypeEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/FileNameEnum.js\":\n/*!***********************************!*\\\n  !*** ./lib/enums/FileNameEnum.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar LIB_PATH = 'lib';\nvar CORE_PATH = 'lib/core';\nvar UTIL_PATH = 'lib/util';\nvar SERVICES_PATH = 'lib/services';\nmodule.exports = {\n  INDEX: \"\".concat(LIB_PATH, \"/index\"),\n  VWO: \"\".concat(LIB_PATH, \"/VWO\"),\n  API: \"\".concat(LIB_PATH, \"/api/index\"),\n  Activate: \"\".concat(LIB_PATH, \"/api/activate\"),\n  GetVariation: \"\".concat(LIB_PATH, \"/api/getVariation\"),\n  Track: \"\".concat(LIB_PATH, \"/api/track\"),\n  IsFeatureEnabled: \"\".concat(LIB_PATH, \"/api/isFeatureEnabled\"),\n  GetFeatureVariableValue: \"\".concat(LIB_PATH, \"/api/getFeatureVariableValue\"),\n  Push: \"\".concat(LIB_PATH, \"/api/push\"),\n  SegmentEvaluator: \"\".concat(CORE_PATH, \"/SegmentEvaluator\"),\n  BucketingService: \"\".concat(CORE_PATH, \"/BucketingService\"),\n  VariationDecider: \"\".concat(CORE_PATH, \"/VariationDecider\"),\n  ConsoleLogManager: \"\".concat(SERVICES_PATH, \"/ConsoleLogManager\"),\n  EventQueue: \"\".concat(SERVICES_PATH, \"/EventQueue\"),\n  LoggingManager: \"\".concat(SERVICES_PATH, \"/LoggingManager\"),\n  SettingsFileManager: \"\".concat(SERVICES_PATH, \"/SettingsFileManager\"),\n  BatchEventsQueue: \"\".concat(SERVICES_PATH, \"/BatchEventsQueue\"),\n  CampaignUtil: \"\".concat(UTIL_PATH, \"/CampaignUtil\"),\n  DataTypeUtil: \"\".concat(UTIL_PATH, \"/DataTypeUtil\"),\n  EventDispatcher: \"\".concat(UTIL_PATH, \"/EventDispatcher\"),\n  EventDispatcherUtil: \"\".concat(UTIL_PATH, \"/EventDispatcherUtil\"),\n  FeatureUtil: \"\".concat(UTIL_PATH, \"/FeatureUtil\"),\n  Functionutil: \"\".concat(UTIL_PATH, \"/Functionutil\"),\n  ImpressionUtil: \"\".concat(UTIL_PATH, \"/ImpressionUtil\"),\n  UuidUtil: \"\".concat(UTIL_PATH, \"/UuidUtil\"),\n  ValidateUtil: \"\".concat(UTIL_PATH, \"/ValidateUtil\"),\n  DecisionUtil: \"\".concat(UTIL_PATH, \"/DecisionUtils\"),\n  HttpHandlerUtil: \"\".concat(UTIL_PATH, \"/HttpHandlerUtil\"),\n  HttpImageUtil: \"\".concat(UTIL_PATH, \"/HttpImageUtil\"),\n  UsageStatsUtil: \"\".concat(SERVICES_PATH, \"/UsageStats\")\n};\n\n/***/ }),\n\n/***/ \"./lib/enums/GoalTypeEnum.js\":\n/*!***********************************!*\\\n  !*** ./lib/enums/GoalTypeEnum.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar GoalTypeEnum = {\n  REVENUE: 'REVENUE_TRACKING',\n  CUSTOM: 'CUSTOM_GOAL',\n  ALL: 'ALL'\n};\nmodule.exports = GoalTypeEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/HooksEnum.js\":\n/*!********************************!*\\\n  !*** ./lib/enums/HooksEnum.js ***!\n  \\********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar HooksEnum = {\n  DECISION_TYPES: {\n    CAMPAIGN_DECISION: 'CAMPAIGN_DECISION'\n  }\n};\nmodule.exports = HooksEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/LogLevelEnum.js\":\n/*!***********************************!*\\\n  !*** ./lib/enums/LogLevelEnum.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_105696__) {\n\nvar _LogLevelColorInfoEnu, _LogLevelInfoEnum;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AnsiColorEnum = __nested_webpack_require_105696__(/*! ./AnsiColorEnum */ \"./lib/enums/AnsiColorEnum.js\");\n\nvar LogNumberLevel = {\n  _0: 'NOTSET',\n  _1: 'DEBUG',\n  _2: 'INFO',\n  _3: 'WARN',\n  _4: 'ERROR'\n};\nvar LogLevelEnum = {\n  NOTSET: 0,\n  DEBUG: 1,\n  INFO: 2,\n  WARN: 3,\n  ERROR: 4\n};\nvar LogLevelColorInfoEnum = (_LogLevelColorInfoEnu = {}, _defineProperty(_LogLevelColorInfoEnu, LogLevelEnum.NOTSET, \"\".concat(AnsiColorEnum.BOLD).concat(AnsiColorEnum.WHITE, \"[NOTSET]:\").concat(AnsiColorEnum.RESET)), _defineProperty(_LogLevelColorInfoEnu, LogLevelEnum.DEBUG, \"\".concat(AnsiColorEnum.BOLD).concat(AnsiColorEnum.LIGHTBLUE, \"[DEBUG]: \").concat(AnsiColorEnum.RESET)), _defineProperty(_LogLevelColorInfoEnu, LogLevelEnum.INFO, \"\".concat(AnsiColorEnum.BOLD).concat(AnsiColorEnum.CYAN, \"[INFO]:  \").concat(AnsiColorEnum.RESET)), _defineProperty(_LogLevelColorInfoEnu, LogLevelEnum.WARN, \"\".concat(AnsiColorEnum.BOLD).concat(AnsiColorEnum.YELLOW, \"[WARN]:  \").concat(AnsiColorEnum.RESET)), _defineProperty(_LogLevelColorInfoEnu, LogLevelEnum.ERROR, \"\".concat(AnsiColorEnum.BOLD).concat(AnsiColorEnum.RED, \"[ERROR]: \").concat(AnsiColorEnum.RESET)), _LogLevelColorInfoEnu);\nvar LogLevelInfoEnum = (_LogLevelInfoEnum = {}, _defineProperty(_LogLevelInfoEnum, LogLevelEnum.NOTSET, \"[NOTSET]:\"), _defineProperty(_LogLevelInfoEnum, LogLevelEnum.DEBUG, \"[DEBUG]: \"), _defineProperty(_LogLevelInfoEnum, LogLevelEnum.INFO, \"[INFO]:  \"), _defineProperty(_LogLevelInfoEnum, LogLevelEnum.WARN, \"[WARN]:  \"), _defineProperty(_LogLevelInfoEnum, LogLevelEnum.ERROR, \"[ERROR]: \"), _LogLevelInfoEnum);\nmodule.exports = {\n  LogLevelEnum: LogLevelEnum,\n  LogNumberLevel: LogNumberLevel,\n  LogLevelInfoEnum: LogLevelInfoEnum,\n  LogLevelColorInfoEnum: LogLevelColorInfoEnum\n};\n\n/***/ }),\n\n/***/ \"./lib/enums/StatusEnum.js\":\n/*!*********************************!*\\\n  !*** ./lib/enums/StatusEnum.js ***!\n  \\*********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nmodule.exports = {\n  PASSED: 'passed',\n  FAILED: 'failed'\n};\n\n/***/ }),\n\n/***/ \"./lib/enums/UrlEnum.js\":\n/*!******************************!*\\\n  !*** ./lib/enums/UrlEnum.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar UrlEnum = {\n  BASE_URL: 'dev.visualwebsiteoptimizer.com',\n  SETTINGS_URL: '/server-side/settings',\n  WEBHOOK_SETTINGS_URL: '/server-side/pull',\n  TRACK_USER: '/server-side/track-user',\n  TRACK_GOAL: '/server-side/track-goal',\n  PUSH: '/server-side/push',\n  BATCH_EVENTS: '/server-side/batch-events',\n  EVENTS: '/events/t'\n};\nmodule.exports = UrlEnum;\n\n/***/ }),\n\n/***/ \"./lib/enums/segment/SegmentOperandTypesEnum.js\":\n/*!******************************************************!*\\\n  !*** ./lib/enums/segment/SegmentOperandTypesEnum.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nmodule.exports = {\n  CUSTOM_VARIABLE: 'custom_variable',\n  USER: 'user'\n};\n\n/***/ }),\n\n/***/ \"./lib/enums/segment/SegmentOperandValueTypeRegexesEnum.js\":\n/*!*****************************************************************!*\\\n  !*** ./lib/enums/segment/SegmentOperandValueTypeRegexesEnum.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nmodule.exports = {\n  LOWER: /^lower/,\n  LOWER_MATCH: /^lower\\((.*)\\)/,\n  WILDCARD: /^wildcard/,\n  WILDCARD_MATCH: /^wildcard\\((.*)\\)/,\n  REGEX: /^regex/,\n  REGEX_MATCH: /^regex\\((.*)\\)/,\n  STARTING_STAR: /^\\*/,\n  ENDING_STAR: /\\*$/\n};\n\n/***/ }),\n\n/***/ \"./lib/enums/segment/SegmentOperandValuesEnum.js\":\n/*!*******************************************************!*\\\n  !*** ./lib/enums/segment/SegmentOperandValuesEnum.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nmodule.exports = {\n  LOWER_VALUE: 1,\n  STARTING_ENDING_STAR_VALUE: 2,\n  STARTING_STAR_VALUE: 3,\n  ENDING_STAR_VALUE: 4,\n  REGEX_VALUE: 5,\n  EQUAL_VALUE: 6\n};\n\n/***/ }),\n\n/***/ \"./lib/enums/segment/SegmentOperatorTypesEnum.js\":\n/*!*******************************************************!*\\\n  !*** ./lib/enums/segment/SegmentOperatorTypesEnum.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nmodule.exports = {\n  AND: 'and',\n  NOT: 'not',\n  OR: 'or'\n};\n\n/***/ }),\n\n/***/ \"./lib/enums/segment/index.js\":\n/*!************************************!*\\\n  !*** ./lib/enums/segment/index.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_114966__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SegmentOperandTypes = __nested_webpack_require_114966__(/*! ./SegmentOperandTypesEnum */ \"./lib/enums/segment/SegmentOperandTypesEnum.js\");\n\nvar SegmentOperatorTypes = __nested_webpack_require_114966__(/*! ./SegmentOperatorTypesEnum */ \"./lib/enums/segment/SegmentOperatorTypesEnum.js\");\n\nvar SegmentOperandValueTypeRegexes = __nested_webpack_require_114966__(/*! ./SegmentOperandValueTypeRegexesEnum */ \"./lib/enums/segment/SegmentOperandValueTypeRegexesEnum.js\");\n\nvar SegmentOperandValues = __nested_webpack_require_114966__(/*! ./SegmentOperandValuesEnum */ \"./lib/enums/segment/SegmentOperandValuesEnum.js\");\n\nvar SegmentEnum = {\n  SegmentOperandTypes: SegmentOperandTypes,\n  SegmentOperatorTypes: SegmentOperatorTypes,\n  SegmentOperandValueTypeRegexes: SegmentOperandValueTypeRegexes,\n  SegmentOperandValues: SegmentOperandValues\n};\nmodule.exports = SegmentEnum;\n\n/***/ }),\n\n/***/ \"./lib/index.js\":\n/*!**********************!*\\\n  !*** ./lib/index.js ***!\n  \\**********************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_116605__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar VWO = __nested_webpack_require_116605__(/*! ./VWO */ \"./lib/VWO.js\");\n\nvar DataTypeUtil = __nested_webpack_require_116605__(/*! ./utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar FunctionUtil = __nested_webpack_require_116605__(/*! ./utils/FunctionUtil */ \"./lib/utils/FunctionUtil.js\");\n\nvar _require = __nested_webpack_require_116605__(/*! ./utils/ObjectUtil */ \"./lib/utils/ObjectUtil.js\"),\n    objectValues = _require.objectValues;\n\nvar SettingsFileUtil = __nested_webpack_require_116605__(/*! ./utils/SettingsFileUtil */ \"./lib/utils/SettingsFileUtil.js\");\n\nvar GoalTypeEnum = __nested_webpack_require_116605__(/*! ./enums/GoalTypeEnum */ \"./lib/enums/GoalTypeEnum.js\");\n\nvar _require2 = __nested_webpack_require_116605__(/*! ./constants */ \"./lib/constants/index.js\"),\n    MAX_EVENTS_PER_REQUEST = _require2.MAX_EVENTS_PER_REQUEST;\n\nvar logging = __nested_webpack_require_116605__(/*! ./services/logging */ \"./lib/services/logging/index.js\");\n\nvar ApiEnum = __nested_webpack_require_116605__(/*! ./enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar FileNameEnum = __nested_webpack_require_116605__(/*! ./enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar file = FileNameEnum.INDEX;\nvar setLogHandler = logging.setLogHandler,\n    setLogLevel = logging.setLogLevel,\n    LogLevelEnum = logging.LogLevelEnum,\n    LogNumberLevel = logging.LogNumberLevel,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger(); // By default, all ERRORS should be logged\n\nlogging.setLogLevel(LogLevelEnum.ERROR);\n\nfunction logError() {\n  var parameter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var log = LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.CONFIG_PARAMETER_INVALID, {\n    file: file,\n    parameter: parameter,\n    type: type,\n    api: ApiEnum.LAUNCH\n  });\n  throw new Error(logger.log(LogLevelEnum.ERROR, log));\n}\n\nfunction logInfo() {\n  var parameter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var log = LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CONFIG_PARAMETER_USED, {\n    file: file,\n    parameter: parameter,\n    type: type\n  });\n  console.info(\"VWO-SDK - [INFO]:   \".concat(FunctionUtil.getCurrentTime(), \" \").concat(log));\n}\n\nmodule.exports = {\n  logging: logging,\n  setLogger: setLogHandler,\n  setLogLevel: setLogLevel,\n  getSettingsFile: SettingsFileUtil.get,\n  GoalTypeEnum: GoalTypeEnum,\n  LogLevelEnum: LogLevelEnum,\n\n  /**\n   * Initializes the SDK and parses the settingsfile\n   *\n   * @param {Object} config configuration for the SDK\n   */\n  launch: function launch(sdkConfig) {\n    var config = {};\n\n    try {\n      // validating config schema\n      FunctionUtil.cloneObject(sdkConfig);\n\n      if (!DataTypeUtil.isUndefined(sdkConfig.shouldTrackReturningUser) && !DataTypeUtil.isBoolean(sdkConfig.shouldTrackReturningUser)) {\n        logError('shouldTrackReturningUser', 'boolean');\n      } else if (!DataTypeUtil.isUndefined(sdkConfig.shouldTrackReturningUser)) {\n        logInfo('shouldTrackReturningUser', 'boolean');\n      }\n\n      if (!DataTypeUtil.isUndefined(sdkConfig.isDevelopmentMode) && !DataTypeUtil.isBoolean(sdkConfig.isDevelopmentMode)) {\n        logError('isDevelopmentMode', 'boolean');\n      } else if (!DataTypeUtil.isUndefined(sdkConfig.isDevelopmentMode)) {\n        logInfo('isDevelopmentMode', 'boolean');\n      }\n\n      if (sdkConfig.goalTypeToTrack && !objectValues(GoalTypeEnum).includes(sdkConfig.goalTypeToTrack)) {\n        logError('goalTypeToTrack', 'string(REVENUE_TRACKING, CUSTOM_GOAL, ALL)');\n      } else if (sdkConfig.goalTypeToTrack) {\n        logInfo('goalTypeToTrack', 'string(REVENUE_TRACKING, CUSTOM_GOAL, ALL)');\n      }\n\n      if (sdkConfig.logging && sdkConfig.logging.level && !objectValues(LogLevelEnum).includes(sdkConfig.logging.level)) {\n        logError('logLevel', 'number(1,2,3,4)');\n      } else if (sdkConfig.logging && sdkConfig.logging.level) {\n        logInfo('logLevel', 'number(1,2,3,4)');\n      }\n\n      if (sdkConfig.pollingInterval && !DataTypeUtil.isNumber(sdkConfig.pollingInterval)) {\n        logError('pollingInterval', 'number(in miliiseconds)');\n      } else if (sdkConfig.pollingInterval) {\n        logInfo('pollingInterval', 'number(in miliiseconds)');\n      }\n\n      if (sdkConfig.pollingInterval && DataTypeUtil.isUndefined(sdkConfig.sdkKey)) {\n        logError();\n      }\n\n      if (sdkConfig.pollingInterval && !DataTypeUtil.isString(sdkConfig.sdkKey)) {\n        logError('sdkKey', 'string');\n      }\n\n      if (!DataTypeUtil.isUndefined(sdkConfig.batchEvents) && !DataTypeUtil.isObject(sdkConfig.batchEvents)) {\n        logError('batchEvents', 'object');\n      } else if (!DataTypeUtil.isUndefined(sdkConfig.batchEvents)) {\n        logInfo('batchEvents', 'object');\n      }\n\n      if (!DataTypeUtil.isUndefined(sdkConfig.returnPromiseFor) && !DataTypeUtil.isObject(sdkConfig.returnPromiseFor)) {\n        logError('returnPromiseFor', 'object');\n      } else if (!DataTypeUtil.isUndefined(sdkConfig.returnPromiseFor)) {\n        logInfo('returnPromiseFor', 'object');\n      }\n\n      if (!DataTypeUtil.isUndefined(sdkConfig.integrations) && !DataTypeUtil.isObject(sdkConfig.integrations)) {\n        logError('integrations', 'object');\n      } else if (!DataTypeUtil.isUndefined(sdkConfig.integrations)) {\n        logInfo('integrations', 'object');\n      }\n\n      if (!DataTypeUtil.isUndefined(sdkConfig.userStorageService) && !DataTypeUtil.isObject(sdkConfig.userStorageService)) {\n        logError('userStorageService', 'object');\n      } else if (!DataTypeUtil.isUndefined(sdkConfig.userStorageService)) {\n        logInfo('userStorageService', 'object');\n      } // For JavaScript SDK, batching is not required and is not available\n\n\n      if (DataTypeUtil.isObject(sdkConfig.batchEvents) && \"undefined\" === 'undefined') {\n        sdkConfig.batchEvents = null;\n      } // For Node.js SDK\n\n\n      if (false) {}\n\n      config = sdkConfig;\n    } catch (err) {\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.CONFIG_CORRUPTED, {\n        file: file,\n        api: ApiEnum.LAUNCH\n      }));\n      config = {};\n    } // If DEV mode, set colorful logs to true\n\n\n    if (config.isDevelopmentMode) {\n      logging.setLogColorMode(true);\n    } // If logging is enabled, use the logger and logLevel defined by the client\n\n\n    if (config.logging && DataTypeUtil.isObject(config.logging)) {\n      if (config.logging.haveColoredLogs !== undefined) {\n        logging.setLogColorMode(config.logging.haveColoredLogs);\n      }\n\n      if (config.logging.logger && DataTypeUtil.isObject(config.logging.logger) && DataTypeUtil.isFunction(config.logging.logger.log)) {\n        logging.setLogHandler(config.logging.logger);\n        logging.setLogLevel(logging.LogLevelEnum.NOTSET);\n        logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.CONFIG_CUSTOM_LOGGER_USED, {\n          file: file\n        }));\n      } else if (config.logging.logger) {\n        logError('logging.logger', 'object');\n      }\n\n      if (config.logging.level !== undefined) {\n        logging.setLogLevel(config.logging.level);\n        logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.CONFIG_LOG_LEVEL_SET, {\n          file: file,\n          level: LogNumberLevel['_' + config.logging.level]\n        }));\n      }\n    } // DEBUG log for knowing whether it's DEV mode\n\n\n    if (config.isDevelopmentMode) {\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.CONFIG_DEVELOPMENT_MODE_STATUS, {\n        file: file\n      }));\n    } // Set logger on config Obkect, to be required later\n\n\n    config.logger = config.logging && config.logging.logger || logger; // Create an instance of VWO class which exposes API methods\n\n    return new VWO(config);\n  }\n};\n\n/***/ }),\n\n/***/ \"./lib/schemas/SettingsFileSchema.js\":\n/*!*******************************************!*\\\n  !*** ./lib/schemas/SettingsFileSchema.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_125426__) {\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _require = __nested_webpack_require_125426__(/*! superstruct */ \"./node_modules/superstruct/lib/index.es.js\"),\n    validate = _require.validate,\n    number = _require.number,\n    string = _require.string,\n    _boolean = _require[\"boolean\"],\n    array = _require.array,\n    object = _require.object,\n    optional = _require.optional,\n    union = _require.union,\n    type = _require.type,\n    record = _require.record;\n\nvar campaignGoalSchema = type({\n  id: union([number(), string()]),\n  identifier: string(),\n  type: string(),\n  revenueProp: optional(string())\n});\nvar variableObjectSchema = type({\n  id: union([number(), string()]),\n  type: string(),\n  key: string(),\n  value: union([number(), string(), _boolean()])\n});\nvar campaignVariationSchema = type({\n  id: union([number(), string()]),\n  name: string(),\n  weight: union([number(), string()]),\n  changes: optional(object()),\n  segments: optional(object()),\n  variables: optional(union([object(), array(variableObjectSchema)])),\n  isFeatureEnabled: optional(_boolean()),\n  startVariationAllocation: optional(number()),\n  endVariationAllocation: optional(number())\n});\nvar campaignObjectSchema = type({\n  id: union([number(), string()]),\n  type: string(),\n  key: string(),\n  status: string(),\n  name: string(),\n  isBucketingSeedEnabled: optional(_boolean()),\n  percentTraffic: number(),\n  goals: union([object(), array(campaignGoalSchema)]),\n  variations: union([object(), array(campaignVariationSchema)]),\n  variables: optional(union([object(), array(variableObjectSchema)])),\n  segments: object(),\n  isForcedVariationEnabled: optional(_boolean()),\n  isUserListEnabled: optional(_boolean())\n});\nvar groupSchema = type({\n  groupName: string(),\n  campaigns: array(number())\n});\nvar settingsFileSchema = type({\n  sdkKey: optional(string()),\n  version: union([number(), string()]),\n  accountId: union([number(), string()]),\n  campaigns: array(campaignObjectSchema),\n  campaignGroups: optional(record(string(), number())),\n  isEventArchEnabled: optional(_boolean()),\n  collectionPrefix: optional(string()),\n  groups: optional(union([object(), record(string(), groupSchema)]))\n});\n\nvar validateSettingsFile = function validateSettingsFile(settings) {\n  var _validate = validate(settings, settingsFileSchema),\n      _validate2 = _slicedToArray(_validate, 1),\n      error = _validate2[0];\n\n  return !error;\n};\n\nmodule.exports = validateSettingsFile;\n\n/***/ }),\n\n/***/ \"./lib/services/EventQueue.js\":\n/*!************************************!*\\\n  !*** ./lib/services/EventQueue.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_129520__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DataTypeUtil = __nested_webpack_require_129520__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar EventDispatcher = __nested_webpack_require_129520__(/*! ../utils/EventDispatcherUtil */ \"./lib/utils/EventDispatcherUtil.js\");\n\nvar logging = __nested_webpack_require_129520__(/*! ./logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_129520__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\nvar file = FileNameEnum.EventQueue;\n\nvar EventQueue =\n/*#__PURE__*/\nfunction () {\n  function EventQueue() {\n    _classCallCheck(this, EventQueue);\n\n    this.running = false;\n    this.queue = [];\n  }\n\n  _createClass(EventQueue, [{\n    key: \"process\",\n    value: function process(config, properties, vwoInstance) {\n      var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n          payload = _ref.payload,\n          responseCallback = _ref.responseCallback;\n\n      if (config && config.isDevelopmentMode) {\n        logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.CONFIG_DEVELOPMENT_MODE_STATUS, {\n          file: file\n        }));\n        return;\n      }\n\n      this.enqueue(properties, vwoInstance, {\n        payload: payload,\n        responseCallback: responseCallback\n      });\n    }\n  }, {\n    key: \"enqueue\",\n    value: function enqueue(properties, vwoInstance, _ref2) {\n      var payload = _ref2.payload,\n          responseCallback = _ref2.responseCallback;\n      this.queue.push({\n        eventName: properties.eventName,\n        properties: properties,\n        callback: function callback() {\n          if (payload) {\n            EventDispatcher.dispatchPostCall(properties, payload, {\n              responseCallback: responseCallback\n            });\n          } else {\n            EventDispatcher.dispatchGetCall(properties, {\n              responseCallback: responseCallback\n            });\n          }\n        }\n      });\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.EVENT_QUEUE, {\n        file: file,\n        queueType: 'normal',\n        event: 'VWO_MASKED_PAYLOAD'\n      }));\n      vwoInstance.eventQueue.executeNext(properties);\n\n      if (!this.running) {\n        // if nothing is running, then start the engines!\n        this.executeNext(properties);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"executeNext\",\n    value: function executeNext(properties) {\n      this.running = false; // get the first element off the queue\n\n      if (this.queue && this.queue.length) {\n        var event = this.queue.shift();\n\n        if (event) {\n          this.running = true;\n\n          if (event.callback && DataTypeUtil.isFunction(event.callback)) {\n            event.callback(properties);\n          }\n        }\n      }\n    }\n  }]);\n\n  return EventQueue;\n}();\n\nmodule.exports = EventQueue;\n\n/***/ }),\n\n/***/ \"./lib/services/HooksManager.js\":\n/*!**************************************!*\\\n  !*** ./lib/services/HooksManager.js ***!\n  \\**************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_134075__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DataTypeUtil = __nested_webpack_require_134075__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n/**\n * Hooks Manager is responsible for triggering callbacks useful to the end-user based on certain lifecycle events.\n * Possible use with integrations when the user intends to send an event when a visitor is part of the experiment.\n */\n\n\nvar HooksManager = {\n  /**\n   * Initializes with configuration from VWO Object.\n   * @param {Object} config\n   */\n  init: function init() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.callback = config.integrations && config.integrations.callback;\n  },\n\n  /**\n   * Executes the callback\n   * @param {Object} properties Properties from the callback\n   */\n  execute: function execute(properties) {\n    if (DataTypeUtil.isFunction(this.callback)) {\n      this.callback(properties);\n    }\n  }\n};\nmodule.exports = HooksManager;\n\n/***/ }),\n\n/***/ \"./lib/services/SettingsFileManager.js\":\n/*!*********************************************!*\\\n  !*** ./lib/services/SettingsFileManager.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_135906__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CampaignUtil = __nested_webpack_require_135906__(/*! ../utils/CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar FunctionUtil = __nested_webpack_require_135906__(/*! ../utils/FunctionUtil */ \"./lib/utils/FunctionUtil.js\");\n\nvar SettingsFileUtil = __nested_webpack_require_135906__(/*! ../utils/SettingsFileUtil */ \"./lib/utils/SettingsFileUtil.js\");\n\nvar logging = __nested_webpack_require_135906__(/*! ./logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_135906__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar validateSettingsFile = __nested_webpack_require_135906__(/*! ../schemas/SettingsFileSchema */ \"./lib/schemas/SettingsFileSchema.js\");\n\nvar _require = __nested_webpack_require_135906__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\"),\n    isObject = _require.isObject;\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar file = FileNameEnum.SettingsFileManager;\n\nvar SettingsFileManager =\n/*#__PURE__*/\nfunction () {\n  // PRIVATE METHODS\n  function SettingsFileManager(config) {\n    _classCallCheck(this, SettingsFileManager);\n\n    if (config) {\n      if (config.settingsFile && isObject(config.settingsFile.campaigns) || config.settingsFile && !config.settingsFile.campaigns) {\n        config.settingsFile.campaigns = [];\n      }\n\n      this._configObj = config;\n      this._clonedSettingsFile = config.settingsFile ? FunctionUtil.cloneObject(config.settingsFile) : null;\n    } else {\n      this._configObj = null;\n      this._clonedSettingsFile = null;\n    }\n  }\n\n  _createClass(SettingsFileManager, [{\n    key: \"_setVariationBucketing\",\n    value: function _setVariationBucketing(campaign) {\n      CampaignUtil.setVariationAllocation(campaign);\n    } // PUBLIC METHODS\n\n  }, {\n    key: \"isSettingsFileValid\",\n    value: function isSettingsFileValid() {\n      if (!this._configObj || !this._clonedSettingsFile) {\n        return false;\n      }\n\n      var isValidSettingsFile = validateSettingsFile(this._clonedSettingsFile);\n\n      if (!isValidSettingsFile) {\n        this._configObj.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.SETTINGS_FILE_CORRUPTED, {\n          file: file\n        }));\n\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"checkAndPoll\",\n    value: function checkAndPoll() {\n      var _this = this;\n\n      if (!this._configObj.pollingInterval || !this._configObj.sdkKey) {\n        return;\n      }\n\n      var lastSettingsFile = JSON.stringify(this._clonedSettingsFile);\n      setInterval(function () {\n        SettingsFileUtil.get(_this._clonedSettingsFile.accountId, _this._configObj.sdkKey).then(function (latestSettingsFile) {\n          _this._configObj.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.POLLING_SUCCESS, {\n            file: file,\n            accountId: _this._clonedSettingsFile.accountId\n          }));\n\n          var stringifiedLatestSettingsFile = JSON.stringify(latestSettingsFile);\n\n          if (stringifiedLatestSettingsFile !== lastSettingsFile) {\n            lastSettingsFile = stringifiedLatestSettingsFile;\n\n            _this.updateSettingsFile(latestSettingsFile);\n\n            _this._configObj.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.POLLING_SETTINGS_FILE_UPDATED, {\n              file: file,\n              accountId: _this._clonedSettingsFile.accountId\n            }));\n          } else {\n            _this._configObj.logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.POLLING_SETTINGS_FILE_NOT_UPDATED, {\n              file: file,\n              accountId: _this._clonedSettingsFile.accountId\n            }));\n          }\n        })[\"catch\"](function (_e) {\n          _this._configObj.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.POLLING_FAILED, {\n            file: file,\n            accountId: _this._clonedSettingsFile.accountId\n          }));\n        });\n      }, this._configObj.pollingInterval);\n\n      this._configObj.logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.POLLING_SETTINGS_FILE_REGISTERED, {\n        file: file,\n        pollingInterval: this._configObj.pollingInterval\n      }));\n    }\n  }, {\n    key: \"processSettingsFile\",\n    value: function processSettingsFile() {\n      var settingsFile = this._clonedSettingsFile;\n\n      for (var i = 0; i < settingsFile.campaigns.length; i++) {\n        var campaign = settingsFile.campaigns[i];\n\n        this._setVariationBucketing(campaign);\n      }\n\n      this._configObj.logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.SETTINGS_FILE_PROCESSED, {\n        file: file,\n        accountId: this._clonedSettingsFile.accountId\n      }));\n\n      return settingsFile;\n    }\n    /**\n     * Fetch latest settings-file and update so that vwoClientInstance could use latest settings\n     * Helpful especially when using webhooks\n     *\n     * @param {Number} accountId\n     * @param {String} sdkKey\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"getAndUpdateSettingsFile\",\n    value: function getAndUpdateSettingsFile() {\n      var _this2 = this;\n\n      var accountId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._clonedSettingsFile.accountId;\n      var sdkKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._clonedSettingsFile.sdkKey;\n      return new Promise(function (resolve, _reject) {\n        SettingsFileUtil.get(accountId, sdkKey, null, {\n          isViaWebhook: true\n        }).then(function (settings) {\n          _this2.updateSettingsFile(settings);\n\n          resolve(settings);\n        })[\"catch\"](function (_err) {});\n      });\n    }\n    /**\n     * Update the settings-file on the instance so that latest settings could be used from next hit onwards\n     * @param {Object} settings\n     */\n\n  }, {\n    key: \"updateSettingsFile\",\n    value: function updateSettingsFile(settings) {\n      this._clonedSettingsFile = FunctionUtil.cloneObject(settings);\n      this.processSettingsFile();\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this._configObj;\n    }\n  }, {\n    key: \"getSettingsFile\",\n    value: function getSettingsFile(api) {\n      if (!this._clonedSettingsFile) {\n        this._configObj.logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.API_HAS_CORRUPTED_SETTINGS_FILE, {\n          file: file,\n          api: api\n        }));\n      }\n\n      return this._clonedSettingsFile;\n    }\n  }]);\n\n  return SettingsFileManager;\n}();\n\nmodule.exports = SettingsFileManager;\n\n/***/ }),\n\n/***/ \"./lib/services/UrlService.js\":\n/*!************************************!*\\\n  !*** ./lib/services/UrlService.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_144130__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar UrlEnum = __nested_webpack_require_144130__(/*! ../enums/UrlEnum */ \"./lib/enums/UrlEnum.js\");\n\nvar _require = __nested_webpack_require_144130__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\"),\n    isString = _require.isString;\n\nvar UrlService = {\n  init: function init() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        collectionPrefix = _ref.collectionPrefix;\n\n    if (collectionPrefix && isString(collectionPrefix)) {\n      UrlService.collectionPrefix = collectionPrefix;\n    }\n\n    return UrlService;\n  },\n  getBaseUrl: function getBaseUrl() {\n    var baseUrl = UrlEnum.BASE_URL;\n\n    if (UrlService.collectionPrefix) {\n      return \"\".concat(baseUrl, \"/\").concat(UrlService.collectionPrefix);\n    }\n\n    return baseUrl;\n  }\n};\nmodule.exports = UrlService;\n\n/***/ }),\n\n/***/ \"./lib/services/UsageStats.js\":\n/*!************************************!*\\\n  !*** ./lib/services/UsageStats.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_145806__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _require = __nested_webpack_require_145806__(/*! ./logging */ \"./lib/services/logging/index.js\"),\n    LogManager = _require.LogManager;\n\nvar UsageStats =\n/*#__PURE__*/\nfunction () {\n  function UsageStats() {\n    _classCallCheck(this, UsageStats);\n\n    this.data = {};\n  }\n  /**\n   * Collect the usage stats from the params passed at the time of instantiating VWO and send them to VWO Server\n   * @param {Object} config    config passed at the time of instantiation.\n   */\n\n\n  _createClass(UsageStats, [{\n    key: \"collectUsageStats\",\n    value: function collectUsageStats(config) {\n      this.data['eb'] = Number(!!config.batchEvents);\n      this.data['ig'] = Number(!!config.integrations);\n      this.data['ss'] = Number(!!config.userStorageService);\n      this.data['cl'] = Number(!(config.logger instanceof LogManager));\n      this.data['ll'] = Number(config.logging && config.logging.level);\n      this.data['tr'] = Number(config.shouldTrackReturningUser);\n      this.data['gt'] = Number(!!config.goalTypeToTrack);\n      this.data['pi'] = Number(!!config.pollingInterval);\n      Object.keys(this.data).forEach(function (key) {\n        if (!this.data[key]) {\n          delete this.data[key];\n        }\n      }, this);\n    }\n    /**\n     * Get the collected usage stats.\n     * @returns     collected usage stats data\n     */\n\n  }, {\n    key: \"getUsageStats\",\n    value: function getUsageStats() {\n      if (Object.keys(this.data).length > 0) {\n        this.data['_l'] = 1;\n      }\n\n      return this.data;\n    }\n  }]);\n\n  return UsageStats;\n}();\n\nmodule.exports = UsageStats;\n\n/***/ }),\n\n/***/ \"./lib/services/logging/ConsoleLogManager.js\":\n/*!***************************************************!*\\\n  !*** ./lib/services/logging/ConsoleLogManager.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_149004__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _require = __nested_webpack_require_149004__(/*! ../../utils/FunctionUtil */ \"./lib/utils/FunctionUtil.js\"),\n    getCurrentTime = _require.getCurrentTime;\n\nvar _require2 = __nested_webpack_require_149004__(/*! ../../enums/LogLevelEnum */ \"./lib/enums/LogLevelEnum.js\"),\n    LogLevelEnum = _require2.LogLevelEnum,\n    LogLevelInfoEnum = _require2.LogLevelInfoEnum,\n    LogLevelColorInfoEnum = _require2.LogLevelColorInfoEnum;\n\nvar ConsoleLogManager =\n/*#__PURE__*/\nfunction () {\n  function ConsoleLogManager() {\n    _classCallCheck(this, ConsoleLogManager);\n\n    this.logLevel = LogLevelEnum.NOTSET;\n    this.prefix = \"VWO-SDK\";\n    this.isColoredLogEnabled = false;\n  }\n\n  _createClass(ConsoleLogManager, [{\n    key: \"log\",\n    value: function log(level, message) {\n      if (!this.shouldLog(level)) {\n        return;\n      }\n\n      var logMessage;\n\n      if (this.isColoredLogEnabled) {\n        logMessage = \"\".concat(this.prefix, \" - \").concat(LogLevelColorInfoEnum[level], \" \").concat(getCurrentTime(), \" \").concat(message);\n      } else {\n        logMessage = \"\".concat(this.prefix, \" - \").concat(LogLevelInfoEnum[level], \" \").concat(getCurrentTime(), \" \").concat(message);\n      }\n\n      this.consoleLog(level, [logMessage]);\n    }\n  }, {\n    key: \"shouldLog\",\n    value: function shouldLog(targetLogLevel) {\n      return targetLogLevel >= this.logLevel;\n    }\n  }, {\n    key: \"setLogLevel\",\n    value: function setLogLevel(level) {\n      if (level === undefined) {\n        this.logLevel = LogLevelEnum.ERROR;\n      } else {\n        this.logLevel = level;\n      }\n    }\n  }, {\n    key: \"consoleLog\",\n    value: function consoleLog(level, logArguments) {\n      switch (level) {\n        case LogLevelEnum.INFO:\n          console.info.apply(console, logArguments);\n          break;\n\n        case LogLevelEnum.WARN:\n          console.warn.apply(console, logArguments);\n          break;\n\n        case LogLevelEnum.ERROR:\n          console.error.apply(console, logArguments);\n          break;\n\n        default:\n          console.log.apply(console, logArguments);\n          break;\n      }\n    }\n  }]);\n\n  return ConsoleLogManager;\n}();\n\nmodule.exports = ConsoleLogManager;\n\n/***/ }),\n\n/***/ \"./lib/services/logging/LoggingManager.js\":\n/*!************************************************!*\\\n  !*** ./lib/services/logging/LoggingManager.js ***!\n  \\************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_152768__) {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Took reference from: \"loglevel\" - https://github.com/pimterry/loglevel\n *\n * Name: loglevel\n * Published Name: loglevel\n * URL: https://github.com/pimterry/loglevel\n * Description: Minimal lightweight logging for JavaScript, adding reliable log level methods to wrap any available console.log methods\n * Author: Tim Perry (https://github.com/pimterry)\n * LICENSE: MIT License\n * Local Modifications: This library is not used as a dependency. Source code was referenced and is modified as per requirements.\n *\n */\n// TODO: change path\nvar LogMessageEnum = {\n  DEBUG_MESSAGES: __nested_webpack_require_152768__(/*! vwo-sdk-log-messages/src/debug-messages.json */ \"./node_modules/vwo-sdk-log-messages/src/debug-messages.json\"),\n  INFO_MESSAGES: __nested_webpack_require_152768__(/*! vwo-sdk-log-messages/src/info-messages.json */ \"./node_modules/vwo-sdk-log-messages/src/info-messages.json\"),\n  WARNING_MESSAGES: __nested_webpack_require_152768__(/*! vwo-sdk-log-messages/src/warning-messages.json */ \"./node_modules/vwo-sdk-log-messages/src/warning-messages.json\"),\n  ERROR_MESSAGES: __nested_webpack_require_152768__(/*! vwo-sdk-log-messages/src/error-messages.json */ \"./node_modules/vwo-sdk-log-messages/src/error-messages.json\")\n};\n\nvar _require = __nested_webpack_require_152768__(/*! ../../enums/LogLevelEnum */ \"./lib/enums/LogLevelEnum.js\"),\n    LogLevelEnum = _require.LogLevelEnum,\n    LogNumberLevel = _require.LogNumberLevel;\n\nvar LogMessageUtil = __nested_webpack_require_152768__(/*! ../../utils/LogMessageUtil */ \"./lib/utils/LogMessageUtil.js\");\n\nvar ConsoleLogManager = __nested_webpack_require_152768__(/*! ./ConsoleLogManager */ \"./lib/services/logging/ConsoleLogManager.js\");\n\nvar globalLogLevel = LogLevelEnum.NOTSET;\nvar isColoredLogEnabled = false;\nvar globalLogHandler = new ConsoleLogManager();\n\nvar LogManager =\n/*#__PURE__*/\nfunction () {\n  function LogManager(name) {\n    _classCallCheck(this, LogManager);\n\n    this.name = name;\n    this.isColoredLogEnabled = isColoredLogEnabled;\n  }\n\n  _createClass(LogManager, [{\n    key: \"_customLog\",\n    value: function _customLog(level, message) {\n      if (level < globalLogLevel) {\n        return;\n      }\n\n      globalLogHandler.log(level, message);\n    }\n  }, {\n    key: \"log\",\n    value: function log(level, message) {\n      var disableLogs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (disableLogs) {\n        return;\n      }\n\n      try {\n        this._customLog(level, message);\n      } catch (err) {\n        console.error('VWO: Could not log.', err);\n      }\n    }\n  }, {\n    key: \"info\",\n    value: function info(message) {\n      this._customLog(LogLevelEnum.INFO, message);\n    }\n  }, {\n    key: \"debug\",\n    value: function debug(message) {\n      this._customLog(LogLevelEnum.DEBUG, message);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message) {\n      this._customLog(LogLevelEnum.WARN, message);\n    }\n  }, {\n    key: \"error\",\n    value: function error(message) {\n      this._customLog(LogLevelEnum.ERROR, message);\n    }\n  }]);\n\n  return LogManager;\n}();\n\nfunction getLogger(name) {\n  return new LogManager(name);\n}\n\nfunction setLogHandler(logger) {\n  globalLogHandler = logger;\n}\n\nfunction setLogLevel(level) {\n  if (level === undefined) {\n    globalLogLevel = LogLevelEnum.ERROR;\n  } else {\n    globalLogLevel = level;\n  }\n}\n\nfunction getLogLevel() {\n  return globalLogLevel;\n}\n\nfunction setLogColorMode(value) {\n  isColoredLogEnabled = value;\n  globalLogHandler.isColoredLogEnabled = isColoredLogEnabled;\n}\n\nfunction getLogColorMode() {\n  return isColoredLogEnabled;\n}\n\nmodule.exports = {\n  LogLevelEnum: LogLevelEnum,\n  LogNumberLevel: LogNumberLevel,\n  LogMessageUtil: LogMessageUtil,\n  LogMessageEnum: LogMessageEnum,\n  getLogger: getLogger,\n  setLogHandler: setLogHandler,\n  setLogLevel: setLogLevel,\n  getLogLevel: getLogLevel,\n  LogManager: LogManager,\n  setLogColorMode: setLogColorMode,\n  getLogColorMode: getLogColorMode,\n  globalLogHandler: globalLogHandler\n};\n\n/***/ }),\n\n/***/ \"./lib/services/logging/index.js\":\n/*!***************************************!*\\\n  !*** ./lib/services/logging/index.js ***!\n  \\***************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_158267__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar logging = __nested_webpack_require_158267__(/*! ./LoggingManager */ \"./lib/services/logging/LoggingManager.js\");\n\nmodule.exports = logging;\n\n/***/ }),\n\n/***/ \"./lib/utils/CampaignUtil.js\":\n/*!***********************************!*\\\n  !*** ./lib/utils/CampaignUtil.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_159271__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ValidateUtil = __nested_webpack_require_159271__(/*! ./ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar Constants = __nested_webpack_require_159271__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar logging = __nested_webpack_require_159271__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_159271__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar GoalTypeEnum = __nested_webpack_require_159271__(/*! ../enums/GoalTypeEnum */ \"./lib/enums/GoalTypeEnum.js\");\n\nvar CampaignTypeEnum = __nested_webpack_require_159271__(/*! ../enums/CampaignTypeEnum */ \"./lib/enums/CampaignTypeEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\nvar CampaignUtil = {\n  /**\n   * Returns the bucket size of variation.\n   *\n   * @param {Number/Float} - weight of variation\n   *\n   * @return {Number} bucket start range of Variation\n   */\n  _getVariationBucketRange: function _getVariationBucketRange(variationWeight) {\n    if (!variationWeight || variationWeight === 0) {\n      return 0;\n    }\n\n    var startRange = Math.ceil(variationWeight * 100);\n    return Math.min(startRange, Constants.MAX_TRAFFIC_VALUE);\n  },\n\n  /**\n   * Get the campaign on the basis of campaign id\n   *\n   * @param {Object} settingsFile\n   * @param {Number} campaignId\n   *\n   * @returns {Object} campaign object\n   */\n  getCampaignBasedOnId: function getCampaignBasedOnId(settingsFile, campaignId) {\n    var campaign;\n\n    for (var i = 0; i < settingsFile.campaigns.length; i++) {\n      if (parseInt(settingsFile.campaigns[i].id, 10) === parseInt(campaignId, 10)) {\n        campaign = settingsFile.campaigns[i];\n        break;\n      }\n    }\n\n    return campaign;\n  },\n\n  /**\n   * It extracts the weights from all the variations inside the campaign\n      and scales them so that the total sum of eligible variations' weights become 100%\n       1. variations\n   */\n  scaleVariationWeights: function scaleVariationWeights(variations) {\n    var totalWeight = variations.reduce(function (acc, variation) {\n      return acc + variation.weight;\n    }, 0);\n\n    if (!totalWeight) {\n      var weight = 100 / variations.length;\n      variations.forEach(function (variation) {\n        return variation.weight = weight;\n      });\n    } else {\n      variations.forEach(function (variation) {\n        return variation.weight = variation.weight / totalWeight * 100;\n      });\n    }\n  },\n  getCampaign: function getCampaign(settingsFile, campaignKey) {\n    var campaign;\n\n    for (var i = 0; i < settingsFile.campaigns.length; i++) {\n      if (settingsFile.campaigns[i].key === campaignKey) {\n        campaign = settingsFile.campaigns[i];\n        break;\n      }\n    }\n\n    return campaign;\n  },\n\n  /**\n   * Gets campaigns for corresponding campaignKeys\n   *\n   * @param {Object} settingsFile\n   * @param {Array} campaignKeys\n   *\n   * @return {Array} Campaigns\n   */\n  getCampaignsForKeys: function getCampaignsForKeys(settingsFile, campaignKeys) {\n    var campaigns = [];\n    campaignKeys.forEach(function (key) {\n      var campaign = CampaignUtil.getCampaign(settingsFile, key);\n\n      if (campaign) {\n        campaigns.push(campaign);\n      } else {\n        campaigns.push({\n          key: key\n        });\n      }\n    });\n    return campaigns;\n  },\n\n  /**\n   * Gets campaigns which have the goalIdentifier present\n   *\n   * @param {settingsFile}\n   * @param {String} goalIdentifier\n   * @param {String} goalTypeToTrack type of goal to track\n   *\n   * @return {Array} Campaigns\n   */\n  getCampaignsForGoal: function getCampaignsForGoal(settingsFile, goalIdentifier, goalTypeToTrack) {\n    var campaigns = [];\n    settingsFile.campaigns.forEach(function (campaign) {\n      var goal = CampaignUtil.getCampaignGoal(settingsFile, campaign.key, goalIdentifier);\n\n      if (goal && (goalTypeToTrack === GoalTypeEnum.ALL || goal.type === goalTypeToTrack)) {\n        campaigns.push(campaign);\n      }\n    });\n\n    if (!campaigns.length) {\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.CAMPAIGN_NOT_FOUND_FOR_GOAL, {\n        file: FileNameEnum.CampaignUtil,\n        goalIdentifier: goalIdentifier\n      }));\n    }\n\n    return campaigns;\n  },\n  getCampaignStatus: function getCampaignStatus(settingsFile, campaignKey) {\n    var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey);\n\n    if (!campaign || !campaign.status) {\n      // log error\n      return '';\n    }\n\n    return campaign.status.toLowerCase();\n  },\n  isCampaignRunning: function isCampaignRunning(settingsFile, campaignKey) {\n    return CampaignUtil.getCampaignStatus(settingsFile, campaignKey) === 'running';\n  },\n\n  /**\n   * Validates the campaign\n   *\n   * @param {Campaign} campaign the campaign to be validated\n   *\n   * @return {Boolean} true is campaign is valid\n   */\n  validateCampaign: function validateCampaign(campaign) {\n    return ValidateUtil.isValidValue(campaign) && campaign.variations && Object.keys(campaign.variations).length > 0;\n  },\n\n  /**\n   * Assigns the buckets to the Variations of the campaign\n   * depending on the traffic allocation\n   *\n   * @param {Campaign} campaign whose Variations are to be allocated\n   */\n  setVariationAllocation: function setVariationAllocation(campaign) {\n    var numberOfVariations = campaign.variations.length;\n    var stepFactor = 0;\n\n    for (var i = 0, currentAllocation = 0; i < numberOfVariations; i++) {\n      var variation = campaign.variations[i];\n      stepFactor = CampaignUtil.assignRangeValues(variation, currentAllocation);\n      currentAllocation += stepFactor;\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.VARIATION_RANGE_ALLOCATION, {\n        file: FileNameEnum.CampaignUtil,\n        campaignKey: campaign.key,\n        variationName: variation.name,\n        variationWeight: variation.weight,\n        start: variation.startVariationAllocation,\n        end: variation.endVariationAllocation\n      }));\n    }\n  },\n\n  /**\n   * Assign range allocation to the campaigns in the list to decide which campaign to choose out of the Mutually Exclusive group\n   *\n   * @param {Array} campaigns\n   */\n  setCampaignAllocation: function setCampaignAllocation(campaigns) {\n    var stepFactor = 0;\n\n    for (var i = 0, currentAllocation = 0; i < campaigns.length; i++) {\n      var campaign = campaigns[i];\n      stepFactor = CampaignUtil.assignRangeValues(campaign, currentAllocation);\n      currentAllocation += stepFactor;\n    }\n  },\n  assignRangeValues: function assignRangeValues(variation, currentAllocation) {\n    var stepFactor;\n    stepFactor = CampaignUtil._getVariationBucketRange(variation.weight);\n\n    if (stepFactor) {\n      variation.startVariationAllocation = currentAllocation + 1;\n      variation.endVariationAllocation = currentAllocation + stepFactor;\n    } else {\n      variation.startVariationAllocation = -1;\n      variation.endVariationAllocation = -1;\n    }\n\n    return stepFactor;\n  },\n  getCampaignGoal: function getCampaignGoal(settingsFile, campaignKey, goalIdentifier) {\n    var desiredCampaignGoal = null;\n\n    if (!settingsFile || !campaignKey || !goalIdentifier) {\n      return desiredCampaignGoal;\n    }\n\n    var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey);\n\n    if (!campaign) {\n      return desiredCampaignGoal;\n    }\n\n    for (var i = 0; i < campaign.goals.length; i++) {\n      var goal = campaign.goals[i];\n\n      if (goal.identifier === goalIdentifier) {\n        desiredCampaignGoal = goal;\n        break;\n      }\n    }\n\n    return desiredCampaignGoal;\n  },\n  getCampaignVariation: function getCampaignVariation(settingsFile, campaignKey, variationName) {\n    var desiredVariation = null;\n\n    if (!settingsFile || !campaignKey || !variationName) {\n      return desiredVariation;\n    }\n\n    var campaign = CampaignUtil.getCampaign(settingsFile, campaignKey);\n\n    if (!campaign) {\n      return desiredVariation;\n    }\n\n    for (var i = 0; i < campaign.variations.length; i++) {\n      var variation = campaign.variations[i];\n\n      if (variation.name === variationName) {\n        desiredVariation = variation;\n        break;\n      }\n    }\n\n    return desiredVariation;\n  },\n  getControlForCampaign: function getControlForCampaign(campaign) {\n    var control = {};\n\n    if (!campaign || !campaign.variations) {\n      return control;\n    }\n\n    for (var i = 0; i < campaign.variations.length; i++) {\n      if (campaign.variations[i].id === 1) {\n        control = campaign.variations[i];\n        break;\n      }\n    }\n\n    return control;\n  },\n  isFeatureTestCampaign: function isFeatureTestCampaign(campaign) {\n    if (campaign && campaign.type === CampaignTypeEnum.FEATURE_TEST) {\n      return true;\n    }\n\n    return false;\n  },\n  isFeatureRolloutCampaign: function isFeatureRolloutCampaign(campaign) {\n    if (campaign && campaign.type === CampaignTypeEnum.FEATURE_ROLLOUT) {\n      return true;\n    }\n\n    return false;\n  },\n  isAbCampaign: function isAbCampaign(campaign) {\n    if (campaign && campaign.type === CampaignTypeEnum.AB) {\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\n   * Check if the campaign is a part of mutually exclusive group\n   *\n   * @param {Object} settingsFile\n   * @param {Number} campaignId\n   *\n   * @returns {Number} group id of the campaign.\n   */\n  isPartOfGroup: function isPartOfGroup(settingsFile, campaignId) {\n    if (settingsFile.campaignGroups && Object.prototype.hasOwnProperty.call(settingsFile.campaignGroups, campaignId)) {\n      return {\n        groupId: settingsFile.campaignGroups[campaignId],\n        groupName: settingsFile.groups[settingsFile.campaignGroups[campaignId]].name\n      };\n    }\n\n    return {};\n  },\n\n  /**\n   * Get the list of campaigns on the basis of their id\n   *\n   * @param {Object} settingsFile\n   * @param {Number} groupId\n   *\n   * @returns {Array} list of campaigns\n   */\n  getGroupCampaigns: function getGroupCampaigns(settingsFile, groupId) {\n    var campaigns = [];\n\n    if (Object.prototype.hasOwnProperty.call(settingsFile.groups, groupId)) {\n      settingsFile.groups[groupId].campaigns.forEach(function (campaignId) {\n        var campaign = CampaignUtil.getCampaignBasedOnId(settingsFile, campaignId);\n\n        if (campaign) {\n          campaigns.push(campaign);\n        }\n      });\n    }\n\n    return campaigns;\n  },\n\n  /**\n   * Decide the Seed for murmurhash to bucket user.\n   * @param {string} userId\n   * @param {object} campaign\n   * @param {number} groupId\n   *\n   * @returns {string} Seed value\n   */\n  getBucketingSeed: function getBucketingSeed(userId, campaign, groupId) {\n    if (groupId) {\n      return \"\".concat(groupId, \"_\").concat(userId);\n    }\n\n    if (campaign && campaign.isBucketingSeedEnabled) {\n      return \"\".concat(campaign.id, \"_\").concat(userId);\n    } else {\n      return userId;\n    }\n  }\n};\nmodule.exports = CampaignUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/DataTypeUtil.js\":\n/*!***********************************!*\\\n  !*** ./lib/utils/DataTypeUtil.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DataTypeUtil = {\n  _toStringValue: function _toStringValue(val) {\n    return Object.prototype.toString.call(val);\n  },\n  isNumber: function isNumber(val) {\n    return DataTypeUtil._toStringValue(val) === '[object Number]';\n  },\n  isString: function isString(val) {\n    return DataTypeUtil._toStringValue(val) === '[object String]';\n  },\n  isObject: function isObject(val) {\n    return DataTypeUtil._toStringValue(val) === '[object Object]';\n  },\n  isFunction: function isFunction(val) {\n    return DataTypeUtil._toStringValue(val) === '[object Function]';\n  },\n  isBoolean: function isBoolean(val) {\n    return DataTypeUtil._toStringValue(val) === '[object Boolean]';\n  },\n  isUndefined: function isUndefined(val) {\n    return DataTypeUtil._toStringValue(val) === '[object Undefined]';\n  },\n  isNull: function isNull(val) {\n    return DataTypeUtil._toStringValue(val) === '[object Null]';\n  },\n  isArray: function isArray(val) {\n    return DataTypeUtil._toStringValue(val) === '[object Array]';\n  }\n};\nmodule.exports = DataTypeUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/DecisionUtil.js\":\n/*!***********************************!*\\\n  !*** ./lib/utils/DecisionUtil.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_172913__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar VariationDecider = __nested_webpack_require_172913__(/*! ../core/VariationDecider */ \"./lib/core/VariationDecider.js\");\n\nvar BucketingService = __nested_webpack_require_172913__(/*! ../core/BucketingService */ \"./lib/core/BucketingService.js\");\n\nvar CampaignUtil = __nested_webpack_require_172913__(/*! ./CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_172913__(/*! ./DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar FunctionUtil = __nested_webpack_require_172913__(/*! ./FunctionUtil */ \"./lib/utils/FunctionUtil.js\");\n\nvar logging = __nested_webpack_require_172913__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_172913__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar StatusEnum = __nested_webpack_require_172913__(/*! ../enums/StatusEnum */ \"./lib/enums/StatusEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\n\nvar SegmentEvaluator = __nested_webpack_require_172913__(/*! ../core/SegmentEvaluator */ \"./lib/core/SegmentEvaluator.js\");\n\nvar HooksManager = __nested_webpack_require_172913__(/*! ../services/HooksManager */ \"./lib/services/HooksManager.js\");\n\nvar HooksEnum = __nested_webpack_require_172913__(/*! ../enums/HooksEnum */ \"./lib/enums/HooksEnum.js\");\n\nvar UuidUtil = __nested_webpack_require_172913__(/*! ./UuidUtil */ \"./lib/utils/UuidUtil.js\");\n\nvar Constants = __nested_webpack_require_172913__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar CampaignTypeEnum = __nested_webpack_require_172913__(/*! ../enums/CampaignTypeEnum */ \"./lib/enums/CampaignTypeEnum.js\");\n\nvar ApiEnum = __nested_webpack_require_172913__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar file = FileNameEnum.DecisionUtil;\nvar SegmentationTypeEnum = {\n  WHITELISTING: 'whitelisting',\n  PRE_SEGMENTATION: 'pre-segmentation'\n};\nvar DecisionUtil = {\n  // PUBLIC METHODS\n\n  /**\n   *  1. Checks if there is a variation stored in userStorage, returns it\n   *  2. If Whitelisting is applicable, evaluate it, if any eligible variation is found, store it in User Storage service and return, otherwise skip it.\n   *  3. Check if the campaign is part of mutually exclusive group, if yes, get the winner campaign using campaign traffic normalization.\n   *  4. If Pre-segmentation is applied and passes then go further otherwise return early and no further processing\n   *  5. If no user storage value, no whitelisted variation and pre-segmentation evaluates to true, get variation using hashing logic if campaign traffic passes for that userId\n   *\n   *\n   *  @param {Object} config\n   *  @param {Object} settingsFile\n   *  @param {Object} campaign\n   *  @param {Object} campaignKey\n   *  @param {String} userId\n   *  @param {Object} customVariables\n   *  @param {Object} variationTargetingVariables\n   *\n   *  @return {Object|null} - Object if a variation is assigned, otherwise null\n   */\n  getVariation: function getVariation(config, settingsFile, campaign, campaignKey, userId, customVariables) {\n    var variationTargetingVariables = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n    var userStorageData = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : {};\n    var metaData = arguments.length > 8 ? arguments[8] : undefined;\n    var isTrackUserAPI = arguments.length > 9 ? arguments[9] : undefined;\n    var newGoalIdentifier = arguments.length > 10 ? arguments[10] : undefined;\n    var api = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : '';\n    var vwoUserId = UuidUtil.generateFor(userId, settingsFile.accountId);\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.USER_UUID, {\n      file: FileNameEnum.UuidUtil,\n      userId: userId,\n      accountId: settingsFile.accountId,\n      uuid: vwoUserId\n    }));\n    var decision = {\n      // campaign info\n      campaignId: campaign.id,\n      campaignKey: campaignKey,\n      campaignType: campaign.type,\n      campaignName: campaign.name,\n      // campaign segmentation conditions\n      customVariables: customVariables,\n      // event name\n      event: HooksEnum.DECISION_TYPES.CAMPAIGN_DECISION,\n      // goal tracked in case of track API\n      goalIdentifier: newGoalIdentifier,\n      // campaign whitelisting flag\n      isForcedVariationEnabled: campaign.isForcedVariationEnabled,\n      sdkVersion: Constants.SDK_VERSION,\n      // API name which triggered the event\n      source: api,\n      // Passed in API\n      userId: userId,\n      // Campaign Whitelisting conditions\n      variationTargetingVariables: variationTargetingVariables,\n      // VWO generated UUID based on passed UserId and Account ID\n      vwoUserId: vwoUserId\n    }; // check if the campaign is a part of group\n\n    var _CampaignUtil$isPartO = CampaignUtil.isPartOfGroup(settingsFile, campaign.id),\n        groupId = _CampaignUtil$isPartO.groupId,\n        groupName = _CampaignUtil$isPartO.groupName;\n\n    if (groupId) {\n      // append groupId and groupName, if campaign is a part of group\n      decision['groupId'] = groupId;\n      decision['groupName'] = groupName;\n    }\n\n    variationTargetingVariables = Object.assign({}, variationTargetingVariables, {\n      _vwoUserId: campaign.isUserListEnabled ? vwoUserId : userId\n    }); // check if tbe campaign satisfies the whitelisting before checking for the group\n\n    var whitelistedVariation = DecisionUtil._checkForWhitelisting(campaign, campaignKey, userId, variationTargetingVariables, decision);\n\n    if (whitelistedVariation) {\n      return whitelistedVariation;\n    } // check if the campaign is present in the storage before checking for the group\n\n\n    var storedVariation = DecisionUtil._checkForUserStorage(config, settingsFile, campaign, campaignKey, userId, userStorageData, isTrackUserAPI, decision);\n\n    if (storedVariation) {\n      return storedVariation;\n    } // check if the called campaign satisfies the pre-segmentatin before further proccessing.\n\n\n    if (!(DecisionUtil._checkForPreSegmentation(campaign, campaignKey, userId, customVariables, decision) && BucketingService.isUserPartOfCampaign(userId, campaign, true))) {\n      return {};\n    }\n\n    if (groupId) {\n      // mutually exclusive group exists\n      // get the list of the all the campaigns in a group\n      var campaignList = CampaignUtil.getGroupCampaigns(settingsFile, groupId);\n\n      if (campaignList.length === 0) {\n        // return if no campaigns are active in a group\n        return {};\n      } // checking other campaigns for whitelisting and user storage.\n\n\n      var isWhitelistedOrStoredVariation = DecisionUtil._checkForStorageAndWhitelisting(config, settingsFile, groupName, campaignList, campaign, userId, userStorageData, variationTargetingVariables, isTrackUserAPI);\n\n      if (isWhitelistedOrStoredVariation) {\n        // other campaigns satisfy the whitelisting or storage, therfore returning\n        logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.MEG_CALLED_CAMPAIGN_NOT_WINNER, {\n          userId: userId,\n          groupName: groupName,\n          file: file,\n          campaignKey: campaignKey\n        }));\n        return {};\n      } // none of the group campaigns satisfy whitelisting or user storage\n      // check each campaign for pre-segmentation and traffic allocation.\n\n\n      var inEligibleCampaignKeys = '';\n      var eligibleCampaignKeys = '';\n\n      var _DecisionUtil$getElig = DecisionUtil.getEligbleCampaigns(campaignList, userId, customVariables),\n          eligibleCampaigns = _DecisionUtil$getElig.eligibleCampaigns,\n          inEligibleCampaigns = _DecisionUtil$getElig.inEligibleCampaigns;\n\n      inEligibleCampaigns.forEach(function (campaign) {\n        inEligibleCampaignKeys = inEligibleCampaignKeys + campaign.key + ',';\n      });\n      eligibleCampaigns.forEach(function (campaign) {\n        eligibleCampaignKeys = eligibleCampaignKeys + campaign.key + ',';\n      });\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.MEG_ELIGIBLE_CAMPAIGNS, {\n        userId: userId,\n        groupName: groupName,\n        file: file,\n        eligibleCampaignKeys: eligibleCampaignKeys.slice(0, -1),\n        inEligibleText: inEligibleCampaignKeys === '' ? 'no campaigns' : \"campaigns: \".concat(inEligibleCampaignKeys.slice(0, -1))\n      }));\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.MEG_ELIGIBLE_CAMPAIGNS, {\n        userId: userId,\n        groupName: groupName,\n        file: file,\n        noOfEligibleCampaigns: eligibleCampaigns.length,\n        noOfGroupCampaigns: inEligibleCampaigns.length + eligibleCampaigns.length\n      }));\n\n      if (eligibleCampaigns.length === 1) {\n        // if the called campaign is the only winner.\n        return DecisionUtil.evaluateTrafficAndGetVariation(config, eligibleCampaigns[0], eligibleCampaigns[0].key, userId, metaData, newGoalIdentifier, decision);\n      } else {\n        // normalize the eligible campaigns and decide winner\n        return DecisionUtil._normalizeAndFindWinningCampaign(config, campaign, eligibleCampaigns, userId, groupName, groupId, metaData, newGoalIdentifier, decision);\n      }\n    } else {\n      // campaign is not a part of mutually exclusive group\n      // check if the user is eligible to become part of the campaign and assign variation.\n      return DecisionUtil.evaluateTrafficAndGetVariation(config, campaign, campaignKey, userId, metaData, newGoalIdentifier, decision);\n    }\n  },\n  // PRIVATE METHODS\n  _evaluateWhitelisting: function _evaluateWhitelisting(campaign, campaignKey, userId, variationTargetingVariables) {\n    var disableLogs = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    var whitelistedVariation;\n    var status;\n    var targetedVariations = [];\n    campaign.variations.forEach(function (variation) {\n      if (DataTypeUtil.isObject(variation.segments) && !Object.keys(variation.segments).length) {\n        logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.SEGMENTATION_SKIPPED, {\n          campaignKey: campaignKey,\n          userId: userId,\n          file: file,\n          variation: campaign.type === CampaignTypeEnum.FEATURE_ROLLOUT ? '' : \", for \".concat(variation.name)\n        }), disableLogs);\n        return;\n      }\n\n      if (DataTypeUtil.isObject(variation.segments) && SegmentEvaluator(variation.segments, variationTargetingVariables, campaignKey, userId, variation.name)) {\n        status = StatusEnum.PASSED;\n        targetedVariations.push(FunctionUtil.cloneObject(variation));\n      } else {\n        status = StatusEnum.FAILED;\n      }\n\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.SEGMENTATION_STATUS, {\n        campaignKey: campaignKey,\n        userId: userId,\n        customVariables: JSON.stringify(variationTargetingVariables),\n        file: file,\n        status: status,\n        segmentationType: SegmentationTypeEnum.WHITELISTING,\n        variation: campaign.type === CampaignTypeEnum.FEATURE_ROLLOUT && status === StatusEnum.PASSED ? 'and becomes part of the rollout' : \"for \".concat(variation.name)\n      }), disableLogs);\n    });\n\n    if (targetedVariations.length > 1) {\n      CampaignUtil.scaleVariationWeights(targetedVariations);\n\n      for (var i = 0, currentAllocation = 0, stepFactor = 0; i < targetedVariations.length; i++) {\n        stepFactor = CampaignUtil.assignRangeValues(targetedVariations[i], currentAllocation);\n        currentAllocation += stepFactor;\n      }\n\n      whitelistedVariation = BucketingService._getVariation(targetedVariations, BucketingService.calculateBucketValue(CampaignUtil.getBucketingSeed(userId, campaign)));\n    } else {\n      whitelistedVariation = targetedVariations[0];\n    }\n\n    if (whitelistedVariation) {\n      return {\n        variation: whitelistedVariation,\n        variationName: whitelistedVariation.name,\n        variationId: whitelistedVariation.id\n      };\n    }\n  },\n\n  /**\n   * If userStorageService is provided and variation was stored, get the stored variation\n   *\n   * @param {Object} config\n   * @param {Object} settingsFile - cloned settingsFile\n   * @param {String} campaignKey\n   * @param {String} userId\n   *\n   * @return {Object|null} - if found then variation and goalIdentifier settings object otherwise null\n   */\n  _getStoredVariationAndGoalIdentifiers: function _getStoredVariationAndGoalIdentifiers(config, settingsFile, campaignKey, userId, userStorageData) {\n    var disableLogs = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n    var userData = DecisionUtil._getStoredUserData(config, userId, campaignKey, userStorageData, disableLogs);\n\n    var variationName = userData.variationName,\n        goalIdentifier = userData.goalIdentifier;\n\n    if (userData && userData.campaignKey && variationName) {\n      return {\n        storedVariation: CampaignUtil.getCampaignVariation(settingsFile, campaignKey, variationName),\n        goalIdentifier: goalIdentifier\n      };\n    } // Log if stored variation is not found even after implementing UserStorageService\n\n\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.USER_STORAGE_SERVICE_NO_STORED_DATA, {\n      file: file,\n      campaignKey: campaignKey,\n      userId: userId\n    }), disableLogs);\n    return null;\n  },\n\n  /**\n   * If userStorageService is provided and variation was stored, get the stored variation\n   *\n   * @param {Object} config\n   * @param {Object} settingsFile - cloned settingsFile\n   * @param {String} campaignKey\n   * @param {String} userId\n   *\n   * @return {Object|null} - if found then variation settings object otherwise null\n   */\n  _getStoredVariation: function _getStoredVariation(config, settingsFile, campaignKey, userId, userStorageData) {\n    var data = DecisionUtil._getStoredVariationAndGoalIdentifiers(config, settingsFile, campaignKey, userId, userStorageData);\n\n    if (data && data.storedVariation) {\n      return data.storedVariation;\n    }\n\n    return null;\n  },\n\n  /**\n   * Get the User Variation mapping by calling get method of UserStorageService being provided\n   *\n   * @param {Object} config\n   * @param {String} UserID\n   * @param {String} campaignKey\n   *\n   * @return {Object} - User Campaign Mapping\n   */\n  _getStoredUserData: function _getStoredUserData(config, userId, campaignKey, userStorageData, disableLogs) {\n    var userStorageMap = {\n      userId: userId,\n      variationName: null,\n      campaignKey: campaignKey,\n      goalIdentifier: null\n    };\n\n    if (!config.userStorageService) {\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.USER_STORAGE_SERVICE_NOT_CONFIGURED, {\n        file: file\n      }), disableLogs);\n      return userStorageMap;\n    }\n\n    try {\n      var data = config.userStorageService.get(userId, campaignKey) || {}; // if data found\n\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.GETTING_DATA_USER_STORAGE_SERVICE, {\n        file: file,\n        userId: userId,\n        campaignKey: campaignKey\n      }), disableLogs);\n      return Object.assign({}, data, userStorageData);\n    } catch (err) {\n      // if no data found\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.USER_STORAGE_SERVICE_GET_FAILED, {\n        file: file,\n        userId: userId,\n        error: err\n      }), disableLogs);\n    }\n  },\n\n  /**\n   * If UserStorageService is provided and variation was stored, save the assigned variation\n   *\n   * @param {Object} campaign\n   * @param {String} variationName\n   * @param {String} userId\n   *\n   * @return {Boolean} - true if found otherwise false\n   */\n  _saveUserData: function _saveUserData(config, campaign, variationName, userId, metaData, goalIdentifier) {\n    var isSaved = false;\n\n    if (!config.userStorageService) {\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.USER_STORAGE_SERVICE_NOT_CONFIGURED, {\n        file: file\n      }));\n      return isSaved;\n    }\n\n    try {\n      var properties = {\n        userId: userId,\n        variationName: variationName,\n        campaignKey: campaign.key\n      };\n\n      if (!DataTypeUtil.isUndefined(goalIdentifier)) {\n        properties.goalIdentifier = goalIdentifier;\n      }\n\n      if (!DataTypeUtil.isUndefined(metaData)) {\n        properties.metaData = metaData;\n      }\n\n      config.userStorageService.set(properties);\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.SETTING_DATA_USER_STORAGE_SERVICE, {\n        file: file,\n        userId: userId,\n        campaignKey: campaign.key\n      }));\n      isSaved = true;\n    } catch (err) {\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.USER_STORAGE_SERVICE_SET_FAILED, {\n        file: file,\n        userId: userId,\n        error: err\n      }));\n      isSaved = false;\n    }\n\n    return isSaved;\n  },\n\n  /**\n   * Evaluate the campaign for whitelisting and store\n   * This method would be run only for MEG campaigns\n   *\n   * @param {Object} config\n   * @param {Object} settingsFile\n   * @param {Array} campaignList\n   * @param {Object} calledCampaign\n   * @param {String} userId\n   * @param {Object} userStorageData\n   * @param {Object} variationTargetingVariables\n   * @param {Boolean} isTrackUserAPI\n   *\n   * @returns {Boolean} - true, if whitelisting/storage is satisfied for any campaign\n   */\n  _checkForStorageAndWhitelisting: function _checkForStorageAndWhitelisting(config, settingsFile, groupName, campaignList, calledCampaign, userId, userStorageData, variationTargetingVariables, isTrackUserAPI) {\n    var otherCampaignWinner = false;\n    campaignList.some(function (groupCampaign) {\n      if (groupCampaign.id === calledCampaign.id) {\n        return;\n      } // create a local copy of the campaigns\n      // groupCampaign = FunctionUtil.cloneObject(groupCampaign);\n      // checking other campaigns for whitelisting or user storage.\n\n\n      var whitelistedVariation = DecisionUtil._checkForWhitelisting(groupCampaign, groupCampaign.key, userId, variationTargetingVariables);\n\n      if (whitelistedVariation) {\n        // other campaign satisfy the whitelisting\n        otherCampaignWinner = true;\n        logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.OTHER_CAMPAIGN_SATISFIES_WHITELISTING_STORAGE, {\n          file: file,\n          campaignKey: groupCampaign.key,\n          groupName: groupName,\n          userId: userId,\n          type: 'whitelisting'\n        }));\n        return true;\n      }\n\n      var storedVariation = DecisionUtil._checkForUserStorage(config, settingsFile, groupCampaign, groupCampaign.key, userId, userStorageData, isTrackUserAPI);\n\n      if (storedVariation && DataTypeUtil.isObject(storedVariation) && Object.keys(storedVariation).length > 0) {\n        // other campaign sastisfy the user storage\n        otherCampaignWinner = true;\n        logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.OTHER_CAMPAIGN_SATISFIES_WHITELISTING_STORAGE, {\n          file: file,\n          campaignKey: groupCampaign.key,\n          groupName: groupName,\n          userId: userId,\n          type: 'user storage'\n        }));\n        return true;\n      }\n    });\n    return otherCampaignWinner;\n  },\n\n  /**\n   * Evaluate a campaign for pre-segmentation.\n   *\n   * @param {Object} campaign\n   * @param {String} campaignKey\n   * @param {String} userId\n   * @param {Object} customVariables\n   * @param {Object} decision\n   *\n   * @returns {Boolean} true, if the pre-segmentation is satisfied.\n   */\n  _checkForPreSegmentation: function _checkForPreSegmentation(campaign, campaignKey, userId, customVariables, decision) {\n    var status;\n\n    if (DataTypeUtil.isObject(campaign.segments) && !Object.keys(campaign.segments).length) {\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.SEGMENTATION_SKIPPED, {\n        campaignKey: campaignKey,\n        userId: userId,\n        file: file\n      }), !decision);\n      return true;\n    } else {\n      var preSegmentationResult = SegmentEvaluator(campaign.segments, customVariables, campaignKey, userId, !decision);\n\n      if (!preSegmentationResult) {\n        status = StatusEnum.FAILED;\n      } else {\n        status = StatusEnum.PASSED;\n      }\n\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.SEGMENTATION_STATUS, {\n        campaignKey: campaignKey,\n        userId: userId,\n        customVariables: JSON.stringify(customVariables || {}),\n        file: file,\n        status: status,\n        segmentationType: SegmentationTypeEnum.PRE_SEGMENTATION,\n        variation: ''\n      }), !decision);\n\n      if (status === StatusEnum.FAILED) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n  /**\n   * Check if user is eligible for the camapign based on traffic percentage and assign variation.\n   * @param {Object} config\n   * @param {Object} campaign\n   * @param {String} campaignKey\n   * @param {String} userId\n   * @param {Object} metaData\n   * @param {String} newGoalIdentifier\n   * @param {Object} decision\n   * @returns {Object} variation assigned to the user\n   */\n  evaluateTrafficAndGetVariation: function evaluateTrafficAndGetVariation(config, campaign, campaignKey, userId, metaData, newGoalIdentifier, decision) {\n    var variation, variationName, variationId; // Use our core's VariationDecider utility to get the deterministic variation assigned to the userId for that campaign\n\n    var _VariationDecider$get = VariationDecider.getVariationAllotted(userId, campaign);\n\n    variation = _VariationDecider$get.variation;\n    variationName = _VariationDecider$get.variationName;\n    variationId = _VariationDecider$get.variationId;\n    logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.USER_VARIATION_ALLOCATION_STATUS, {\n      file: file,\n      campaignKey: campaignKey,\n      userId: userId,\n      status: variationName ? \"got variation:\".concat(variationName) : 'did not get any variation'\n    })); // Check if variation-name has been assigned to the userId. If not, return no variation\n\n    if (variationName) {\n      // If userStorageService is provided, look into it for the saved variation for the campaign and userId\n      DecisionUtil._saveUserData(config, campaign, variationName, userId, metaData, newGoalIdentifier);\n    } // Executing the callback when SDK makes the decision\n\n\n    HooksManager.execute(Object.assign({\n      fromUserStorageService: false,\n      isUserWhitelisted: false\n    }, campaign.type === CampaignTypeEnum.FEATURE_ROLLOUT ? {\n      isFeatureEnabled: !!variationName\n    } : {\n      variationName: variationName,\n      variationId: variationId\n    }, decision));\n    return {\n      variation: variation && variation.variation,\n      variationName: variationName,\n      variationId: variationId\n    };\n  },\n\n  /**\n   * Evaluate a campaign for whitelisting\n   *\n   * @param {Object} campaign\n   * @param {String} campaignKey\n   * @param {String} userId\n   * @param {Object} variationTargetingVariables\n   * @param {Object} decision\n   *\n   * @returns {Object} whitelisted variation\n   */\n  _checkForWhitelisting: function _checkForWhitelisting(campaign, campaignKey, userId, variationTargetingVariables, decision) {\n    var status;\n    var variationName, variationId;\n\n    if (campaign.isForcedVariationEnabled) {\n      var whitelistingResult = DecisionUtil._evaluateWhitelisting(campaign, campaignKey, userId, variationTargetingVariables, !decision);\n\n      var variationString;\n\n      if (whitelistingResult) {\n        status = StatusEnum.PASSED;\n        variationString = whitelistingResult.variationName;\n      } else {\n        status = StatusEnum.FAILED;\n        variationString = '';\n      }\n\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.SEGMENTATION_STATUS, {\n        campaignKey: campaignKey,\n        userId: userId,\n        customVariables: JSON.stringify(variationTargetingVariables),\n        file: file,\n        status: status,\n        segmentationType: SegmentationTypeEnum.WHITELISTING,\n        variation: campaign.type === CampaignTypeEnum.FEATURE_ROLLOUT ? '' : \"for variation: \".concat(variationString)\n      }), !decision);\n\n      if (whitelistingResult) {\n        variationName = whitelistingResult.variationName;\n        variationId = whitelistingResult.variationId; // Executing the callback when SDK has made a decision in case of whitelisting\n\n        if (decision) {\n          HooksManager.execute(Object.assign({\n            fromUserStorageService: false,\n            isUserWhitelisted: !!variationName\n          }, campaign.type === CampaignTypeEnum.FEATURE_ROLLOUT ? {\n            isFeatureEnabled: !!variationName\n          } : {\n            variationName: variationName,\n            variationId: variationId\n          }, decision));\n        }\n\n        return whitelistingResult;\n      }\n    } else {\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.WHITELISTING_SKIPPED, {\n        campaignKey: campaignKey,\n        userId: userId,\n        file: file\n      }), !decision);\n    }\n  },\n\n  /**\n   * Check if the variation is present in the user storage\n   *\n   * @param {Object} config\n   * @param {Object} settingsFile\n   * @param {Object} campaign\n   * @param {String} campaignKey\n   * @param {String} userId\n   * @param {Object} userStorageData\n   * @param {Boolean} isTrackUserAPI\n   * @param {Object} decision\n   *\n   * @returns {Object} stored variaition\n   */\n  _checkForUserStorage: function _checkForUserStorage(config, settingsFile, campaign, campaignKey, userId, userStorageData, isTrackUserAPI, decision) {\n    var variationName, variationId;\n    var storedVariation, goalIdentifier; // If userStorageService is used, get the variation from the stored data\n\n    var _ref = DecisionUtil._getStoredVariationAndGoalIdentifiers(config, settingsFile, campaign.key, userId, userStorageData, !decision) || {};\n\n    storedVariation = _ref.storedVariation;\n    goalIdentifier = _ref.goalIdentifier;\n\n    // If stored variation is found, simply return the same\n    if (storedVariation) {\n      variationName = storedVariation.name;\n      variationId = storedVariation.id;\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.GOT_STORED_VARIATION, {\n        file: file,\n        campaignKey: campaignKey,\n        userId: userId,\n        variationName: storedVariation.name\n      }), !decision); // Executing the callback when SDK gets the decision from user storage service\n\n      if (decision) {\n        HooksManager.execute(Object.assign({\n          fromUserStorageService: !!variationName,\n          isUserWhitelisted: false\n        }, campaign.type === CampaignTypeEnum.FEATURE_ROLLOUT ? {\n          isFeatureEnabled: !!variationName\n        } : {\n          variationName: variationName,\n          variationId: variationId\n        }, decision));\n      }\n\n      return {\n        variation: storedVariation,\n        variationName: storedVariation.name,\n        variationId: storedVariation.id,\n        storedGoalIdentifier: goalIdentifier,\n        isStoredVariation: true\n      };\n    } else if (!DataTypeUtil.isUndefined(config.userStorageService) && !isTrackUserAPI && DataTypeUtil.isUndefined(storedVariation)) {\n      logger.log(LogLevelEnum.WARN, LogMessageUtil.build(LogMessageEnum.WARNING_MESSAGES.CAMPAIGN_NOT_ACTIVATED, {\n        file: file,\n        campaignKey: campaignKey,\n        userId: userId,\n        api: config.apiName\n      }), !decision);\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.CAMPAIGN_NOT_ACTIVATED, {\n        file: file,\n        campaignKey: campaignKey,\n        userId: userId,\n        reason: config.apiName === ApiEnum.TRACK ? 'track it' : 'get the decision/value'\n      }), !decision);\n      return {};\n    }\n  },\n\n  /**\n   * Evaluate the list of campaigns for pre-segmentation and campaign traffic allocation and assign variation to the user.\n   * This method will be used for MEG campaigns\n   *\n   * @param {Object} config\n   * @param {Array} campaignList\n   * @param {String} userId\n   * @param {Object} customVariables\n   * @param {Object} metaData\n   * @param {String} newGoalIdentifier\n   *\n   * @returns {Array} list of campaigns which satisfies the conditions.\n   */\n  getEligbleCampaigns: function getEligbleCampaigns(campaignList, userId, customVariables) {\n    var eligibleCampaigns = [];\n    var inEligibleCampaigns = [];\n    campaignList.forEach(function (groupCampaign) {\n      var isPartOfCampaign = DecisionUtil._checkForPreSegmentation(groupCampaign, groupCampaign.key, userId, customVariables) && BucketingService.isUserPartOfCampaign(userId, groupCampaign, true);\n\n      if (isPartOfCampaign) {\n        groupCampaign = FunctionUtil.cloneObject(groupCampaign); // campaign satisfies the pre-segmentation\n\n        eligibleCampaigns.push(groupCampaign);\n      } else {\n        inEligibleCampaigns.push(groupCampaign);\n      }\n    });\n    return {\n      eligibleCampaigns: eligibleCampaigns,\n      inEligibleCampaigns: inEligibleCampaigns\n    };\n  },\n\n  /**\n   * Equally distribute the traffic of campaigns and assign a winner campaign by murmur hash.\n   *\n   * @param {Object} config\n   * @param {Object} calledCampaign\n   * @param {Array} shortlistedCampaigns\n   * @param {String} userId\n   * @param {Object} metaData\n   * @param {String} newGoalIdentifier\n   * @param {Object} decision\n   *\n   * @returns {Object} variation of the winner campaign\n   */\n  _normalizeAndFindWinningCampaign: function _normalizeAndFindWinningCampaign(config, calledCampaign, shortlistedCampaigns, userId, groupName, groupId, metaData, newGoalIdentifier, decision) {\n    // normalise the weights of all the shortlisted campaigns\n    shortlistedCampaigns.forEach(function (campaign) {\n      campaign.weight = Math.floor(100 / shortlistedCampaigns.length);\n    }); // re-distribute the traffic for each camapign\n\n    CampaignUtil.setCampaignAllocation(shortlistedCampaigns);\n\n    var winnerCampaign = BucketingService._getVariation(shortlistedCampaigns, BucketingService.calculateBucketValue(CampaignUtil.getBucketingSeed(userId, undefined, groupId)));\n\n    logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.MEG_GOT_WINNER_CAMPAIGN, {\n      userId: userId,\n      groupName: groupName,\n      file: file,\n      campaignKey: winnerCampaign.key\n    }));\n\n    if (winnerCampaign.id === calledCampaign.id) {\n      // if called campaign is the winner campaign, get the variation for the campaign\n      return DecisionUtil.evaluateTrafficAndGetVariation(config, winnerCampaign, winnerCampaign.key, userId, metaData, newGoalIdentifier, decision);\n    } else {\n      // if winning campaign not the called camapaign, return\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.MEG_CALLED_CAMPAIGN_NOT_WINNER, {\n        userId: userId,\n        groupName: groupName,\n        file: file,\n        campaignKey: calledCampaign.key\n      }));\n      return {};\n    }\n  }\n};\nmodule.exports = DecisionUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/EventDispatcherUtil.js\":\n/*!******************************************!*\\\n  !*** ./lib/utils/EventDispatcherUtil.js ***!\n  \\******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_204977__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar logging = __nested_webpack_require_204977__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_204977__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\n\nvar FunctionUtil = __nested_webpack_require_204977__(/*! ./FunctionUtil */ \"./lib/utils/FunctionUtil.js\");\n\nvar EventEnum = __nested_webpack_require_204977__(/*! ../enums/EventEnum */ \"./lib/enums/EventEnum.js\");\n\nvar excludedProperties = ['url'];\nvar file = FileNameEnum.EventDispatcherUtil;\nvar EventDispatcher = {\n  dispatchGetCall: function dispatchGetCall(properties, _ref) {\n    var _this = this;\n\n    var responseCallback = _ref.responseCallback;\n    var parsedUrl;\n    var queryParams = '?';\n    queryParams += FunctionUtil.convertObjectKeysToString(properties, excludedProperties);\n\n    try {\n      // Require files only if required in respective Engine i.e. Node / Browser\n      if (true) {\n        parsedUrl = new URL(properties.url);\n\n        __nested_webpack_require_204977__(/*! ./HttpImageUtil */ \"./lib/utils/HttpImageUtil.js\").sendCall(parsedUrl, queryParams, {\n          successCallback: responseCallback\n        });\n      } else { var url; }\n    } catch (err) {\n      var endPoint = properties.url;\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.IMPRESSION_FAILED, {\n        file: FileNameEnum.EventDispatcher,\n        endPoint: endPoint,\n        err: err\n      }));\n    }\n\n    return false;\n  },\n  handleGetResponse: function handleGetResponse(properties, error, response) {\n    if (error) {\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.IMPRESSION_FAILED, {\n        file: file,\n        endPoint: response.endPoint,\n        err: error\n      }));\n      return false;\n    } else {\n      var baseParams = {\n        file: file,\n        endPoint: response.endPoint,\n        accountId: properties && properties.account_id\n      };\n      var params = {};\n\n      if (baseParams.endPoint.includes('push')) {\n        var customVariables = JSON.parse(properties.tags).u;\n        params = Object.assign({}, baseParams, {\n          customVariables: customVariables\n        });\n        params.mainKeys = \"customDimension:\".concat(JSON.stringify(params.customVariables));\n      } else {\n        params = Object.assign({}, baseParams, {\n          campaignId: properties && properties.experiment_id,\n          variationId: properties && properties.combination\n        });\n        params.mainKeys = \"campaignId:\".concat(params.campaignId, \" and variationId:\").concat(params.variationId);\n      }\n\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.IMPRESSION_SUCCESS, params));\n      return true;\n    }\n  },\n  dispatchPostCall: function dispatchPostCall(properties, payload, _ref2) {\n    var _this2 = this;\n\n    var responseCallback = _ref2.responseCallback;\n    var parsedUrl;\n    var queryParams = '?';\n    queryParams += FunctionUtil.convertObjectKeysToString(properties, excludedProperties);\n\n    try {\n      // Require files only if required in respective Engine i.e. Node / Browser\n      if (true) {\n        __nested_webpack_require_204977__(/*! ./XhrUtil */ \"./lib/utils/XhrUtil.js\").send({\n          method: 'POST',\n          url: \"\".concat(properties.url).concat(queryParams),\n          payload: payload\n        }).then(function () {\n          _this2.handlePostResponse(properties, payload);\n\n          if (responseCallback) {\n            responseCallback(null, {\n              status: 'success'\n            });\n          }\n        })[\"catch\"](function (error) {\n          _this2.handlePostResponse(properties, payload, error);\n\n          responseCallback(error, {\n            status: 'failure'\n          });\n        });\n      } else { var url; }\n    } catch (err) {\n      var endPoint = properties.url;\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.IMPRESSION_FAILED, {\n        file: FileNameEnum.EventDispatcherUtil,\n        endPoint: endPoint,\n        err: err\n      }));\n    }\n\n    return false;\n  },\n  handlePostResponse: function handlePostResponse(properties, payload, error) {\n    var endPoint = properties.url;\n\n    if (error) {\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.IMPRESSION_FAILED, {\n        file: file,\n        endPoint: endPoint,\n        err: error\n      }));\n      return false;\n    } else {\n      var event = \"\".concat(properties.en, \" event\");\n\n      if (properties.en === EventEnum.VWO_SYNC_VISITOR_PROP) {\n        delete payload.d.visitor.props.vwo_fs_environment;\n        event = \"visitor property:\".concat(JSON.stringify(payload.d.visitor.props));\n      }\n\n      logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.IMPRESSION_SUCCESS_FOR_EVENT_ARCH, {\n        file: file,\n        endPoint: endPoint,\n        accountId: properties.a,\n        event: event\n      }));\n      return true;\n    }\n  }\n};\nmodule.exports = EventDispatcher;\n\n/***/ }),\n\n/***/ \"./lib/utils/FeatureUtil.js\":\n/*!**********************************!*\\\n  !*** ./lib/utils/FeatureUtil.js ***!\n  \\**********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_210958__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CampaignUtil = __nested_webpack_require_210958__(/*! ./CampaignUtil */ \"./lib/utils/CampaignUtil.js\");\n\nvar DataTypeUtil = __nested_webpack_require_210958__(/*! ./DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar FeatureVariableTypeEnum = __nested_webpack_require_210958__(/*! ../enums/FeatureVariableTypeEnum */ \"./lib/enums/FeatureVariableTypeEnum.js\");\n\nvar logging = __nested_webpack_require_210958__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_210958__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\nvar file = FileNameEnum.FeatureUtil;\nvar FeatureUtil = {\n  getVariableForFeature: function getVariableForFeature(campaign, variableKey) {\n    var variableData = {};\n\n    if (CampaignUtil.isFeatureRolloutCampaign(campaign)) {\n      var variables = campaign.variables || [];\n\n      for (var i = 0; i < variables.length; i++) {\n        if (variables[i].key === variableKey) {\n          variableData = variables[i];\n          break;\n        }\n      }\n\n      return variableData;\n    }\n\n    return variableData;\n  },\n  getVariableValueForVariation: function getVariableValueForVariation(campaign, variation, variableKey) {\n    var variationVariable = {};\n\n    if (CampaignUtil.isFeatureTestCampaign(campaign)) {\n      if (!variation || !variation || !variation.variables) {\n        return variationVariable;\n      }\n\n      if (!variation.isFeatureEnabled) {\n        variation = CampaignUtil.getControlForCampaign(campaign);\n      }\n\n      for (var i = 0; i < variation.variables.length; i++) {\n        var variable = variation.variables[i];\n\n        if (variableKey === variable.key) {\n          variationVariable = variable;\n          break;\n        }\n      }\n    }\n\n    return variationVariable;\n  },\n  getTypeCastVariableValue: function getTypeCastVariableValue(variableValue, variableType) {\n    var typeCastedValue;\n\n    switch (variableType) {\n      case FeatureVariableTypeEnum.INTEGER:\n        typeCastedValue = parseInt(variableValue, 10);\n\n        if (!DataTypeUtil.isNumber(typeCastedValue) || isNaN(typeCastedValue)) {\n          logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE, {\n            file: file,\n            variableValue: variableValue,\n            variableType: variableType\n          }));\n          typeCastedValue = null;\n        }\n\n        break;\n\n      case FeatureVariableTypeEnum.DOUBLE:\n        typeCastedValue = parseFloat(variableValue);\n\n        if (!DataTypeUtil.isNumber(typeCastedValue) || isNaN(typeCastedValue)) {\n          logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE, {\n            file: file,\n            variableValue: variableValue,\n            variableType: variableType\n          }));\n          typeCastedValue = null;\n        }\n\n        break;\n\n      case FeatureVariableTypeEnum.BOOLEAN:\n        if (!DataTypeUtil.isBoolean(variableValue)) {\n          logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE, {\n            file: file,\n            variableValue: variableValue,\n            variableType: variableType\n          }));\n          typeCastedValue = null;\n        } else {\n          typeCastedValue = variableValue;\n        }\n\n        break;\n\n      case FeatureVariableTypeEnum.JSON:\n        if (!DataTypeUtil.isObject(variableValue)) {\n          logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE, {\n            file: file,\n            variableValue: variableValue,\n            variableType: variableType\n          }));\n          typeCastedValue = null;\n        } else {\n          typeCastedValue = variableValue;\n        }\n\n        break;\n\n      default:\n        typeCastedValue = variableValue;\n        break;\n    }\n\n    return typeCastedValue;\n  }\n};\nmodule.exports = FeatureUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/FunctionUtil.js\":\n/*!***********************************!*\\\n  !*** ./lib/utils/FunctionUtil.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_215865__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar FunctionUtil = {\n  cloneObject: function cloneObject(obj) {\n    if (!obj) {\n      return obj;\n    }\n\n    var clonedObj = JSON.parse(JSON.stringify(obj));\n    return clonedObj;\n  },\n  getRandomNumber: function getRandomNumber() {\n    return Math.random();\n  },\n  getCurrentUnixTimestamp: function getCurrentUnixTimestamp() {\n    return Math.ceil(+new Date() / 1000);\n  },\n  getCurrentUnixTimestampInMillis: function getCurrentUnixTimestampInMillis() {\n    return +new Date();\n  },\n  matchWithRegex: function matchWithRegex(string, regex) {\n    try {\n      return string.match(new RegExp(regex));\n    } catch (err) {\n      var logging = __nested_webpack_require_215865__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\n      var FileNameEnum = __nested_webpack_require_215865__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\n      var logger = logging.getLogger();\n      var LogLevelEnum = logging.LogLevelEnum,\n          LogMessageEnum = logging.LogMessageEnum,\n          LogMessageUtil = logging.LogMessageUtil;\n      var file = FileNameEnum.FunctionUtil;\n      logger.log(LogLevelEnum.ERROR, LogMessageUtil.build(LogMessageEnum.ERROR_MESSAGES.SEGMENTATION_REGEX_CREATION_FAILED, {\n        file: file,\n        regex: regex\n      }));\n      return null;\n    }\n  },\n  getCurrentTime: function getCurrentTime() {\n    return new Date().toISOString();\n  },\n  convertObjectKeysToString: function convertObjectKeysToString(properties, excludedProperties) {\n    var queryParams = '';\n    excludedProperties = excludedProperties || [];\n\n    for (var prop in properties) {\n      if (properties.hasOwnProperty(prop)) {\n        if (excludedProperties.indexOf(prop) === -1) {\n          queryParams += prop + '=' + properties[prop] + '&';\n        }\n      }\n    }\n\n    return queryParams;\n  },\n  objectValues: function objectValues(obj) {\n    var values = [];\n\n    for (var prop in obj) {\n      values.push(obj[prop]);\n    }\n\n    return values;\n  }\n};\nmodule.exports = FunctionUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/HttpImageUtil.js\":\n/*!************************************!*\\\n  !*** ./lib/utils/HttpImageUtil.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_218718__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar logging = __nested_webpack_require_218718__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_218718__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\nvar file = FileNameEnum.HttpImageUtil;\n\nvar noop = function noop() {};\n\nvar printLog = function printLog(url, queryParams) {\n  var properties = new URLSearchParams(queryParams);\n  var baseParams = {\n    file: file,\n    endPoint: \"https://\".concat(url.host).concat(url.pathname),\n    accountId: properties && properties.get('account_id')\n  };\n  var params = {};\n\n  if (baseParams.endPoint.includes('push')) {\n    var customVariables = JSON.parse(properties.get('tags')).u;\n    params = Object.assign({}, baseParams, {\n      customVariables: customVariables\n    });\n    params.mainKeys = \"customDimension:\".concat(JSON.stringify(params.customVariables));\n  } else {\n    params = Object.assign({}, baseParams, {\n      campaignId: properties && properties.get('experiment_id'),\n      variationId: properties && properties.get('combination')\n    });\n    params.mainKeys = \"campaignId:\".concat(params.campaignId, \" and variationId:\").concat(params.variationId);\n  }\n\n  logger.log(LogLevelEnum.INFO, LogMessageUtil.build(LogMessageEnum.INFO_MESSAGES.IMPRESSION_SUCCESS, params));\n};\n\nvar HttpImageUtil = {\n  sendCall: function sendCall(url, queryParams) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var endPoint = \"https://\".concat(url.host).concat(url.pathname).concat(queryParams);\n    var successCallback = options.successCallback,\n        errorCallback = options.errorCallback;\n    errorCallback = errorCallback || successCallback;\n    var isCallbackCalled = false;\n    var img = new Image();\n    this.handleGetCall(url, queryParams, img, successCallback, errorCallback, endPoint, isCallbackCalled);\n  },\n  handleGetCall: function handleGetCall(url, queryParams, img, successCallback, errorCallback, endPoint, isCallbackCalled) {\n    successCallback = successCallback || noop;\n    errorCallback = errorCallback || noop;\n\n    img.onload = function () {\n      if (isCallbackCalled) {\n        return;\n      }\n\n      isCallbackCalled = true;\n      successCallback(null, {\n        status: 'success'\n      });\n      printLog(url, queryParams);\n    };\n\n    img.onerror = function () {\n      if (isCallbackCalled) {\n        return;\n      }\n\n      isCallbackCalled = true;\n      errorCallback(null, {\n        status: 'success'\n      });\n      printLog(url, queryParams);\n    };\n\n    img.src = endPoint;\n    return img;\n  }\n};\nmodule.exports = HttpImageUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/ImpressionUtil.js\":\n/*!*************************************!*\\\n  !*** ./lib/utils/ImpressionUtil.js ***!\n  \\*************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_222361__) {\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Constants = __nested_webpack_require_222361__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar UrlEnum = __nested_webpack_require_222361__(/*! ../enums/UrlEnum */ \"./lib/enums/UrlEnum.js\");\n\nvar GoalTypeEnum = __nested_webpack_require_222361__(/*! ../enums/GoalTypeEnum */ \"./lib/enums/GoalTypeEnum.js\");\n\nvar UuidUtil = __nested_webpack_require_222361__(/*! ./UuidUtil */ \"./lib/utils/UuidUtil.js\");\n\nvar ValidateUtil = __nested_webpack_require_222361__(/*! ./ValidateUtil */ \"./lib/utils/ValidateUtil.js\");\n\nvar FunctionUtil = __nested_webpack_require_222361__(/*! ./FunctionUtil */ \"./lib/utils/FunctionUtil.js\");\n\nvar logging = __nested_webpack_require_222361__(/*! ../services/logging */ \"./lib/services/logging/index.js\");\n\nvar FileNameEnum = __nested_webpack_require_222361__(/*! ../enums/FileNameEnum */ \"./lib/enums/FileNameEnum.js\");\n\nvar DataTypeUtil = __nested_webpack_require_222361__(/*! ./DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar LogLevelEnum = logging.LogLevelEnum,\n    LogMessageEnum = logging.LogMessageEnum,\n    LogMessageUtil = logging.LogMessageUtil;\nvar logger = logging.getLogger();\n\nvar UrlService = __nested_webpack_require_222361__(/*! ../services/UrlService */ \"./lib/services/UrlService.js\");\n/**\n * Return primary properties required for every network call to VWO server\n * @param {Object} configObj\n * @param {String} userId\n *\n * @returns primary properties\n */\n\n\nfunction getPrimaryProperties(configObj, userId) {\n  return {\n    sId: FunctionUtil.getCurrentUnixTimestamp(),\n    u: UuidUtil.generateFor(userId, configObj.accountId)\n  };\n}\n/**\n * Return base properties required for every network call to VWO server\n * @param {Object} configObj\n * @param {String} userId\n *\n * @returns base properties\n */\n\n\nfunction getBaseProperties(configObj, userId) {\n  var accountId = configObj.accountId;\n  return Object.assign({}, getPrimaryProperties(configObj, userId), ImpressionUtil.getReportingProperties(configObj), {\n    account_id: accountId,\n    random: FunctionUtil.getRandomNumber(),\n    ap: Constants.PLATFORM\n  });\n}\n\nvar ImpressionUtil = {\n  /**\n   * Build properties for the impression event\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {String} tagKey the tag name\n   * @param {String} tagValue the tag value\n   */\n  buildEventForPushing: function buildEventForPushing(configObj, tagKey, tagValue, userId) {\n    var properties = Object.assign({}, getBaseProperties(configObj, userId));\n    properties.url = Constants.HTTPS_PROTOCOL + UrlService.getBaseUrl() + UrlEnum.PUSH;\n    properties.tags = JSON.stringify({\n      u: _defineProperty({}, encodeURIComponent(tagKey), encodeURIComponent(tagValue))\n    });\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.IMPRESSION_FOR_PUSH, {\n      file: FileNameEnum.ImpressionUtil,\n      properties: this._getStringifiedLogProperties(properties)\n    }));\n    return properties;\n  },\n\n  /**\n   * Build properties for the bulk impression event\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {String} tagKey the tag name\n   * @param {String} tagValue the tag value\n   */\n  buildBatchEventForPushing: function buildBatchEventForPushing(configObj, tagKey, tagValue, userId) {\n    if (false) { var properties; }\n  },\n\n  /**\n   * Build properties for the impression event\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {String} campaignKey, the Campaign ID\n   * @param {Number} variationId, the Variation ID\n   *\n   * @return null if campaign ID or variation ID is invalid\n   */\n  buildEventForTrackingUser: function buildEventForTrackingUser(configObj, campaignKey, variationId, userId, usageStats) {\n    var properties = Object.assign({\n      experiment_id: campaignKey,\n      combination: variationId\n    }, getBaseProperties(configObj, userId), usageStats);\n    properties.ed = JSON.stringify({\n      p: 'server'\n    });\n    properties.url = Constants.HTTPS_PROTOCOL + UrlService.getBaseUrl() + UrlEnum.TRACK_USER;\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.IMPRESSION_FOR_TRACK_USER, {\n      file: FileNameEnum.ImpressionUtil,\n      properties: this._getStringifiedLogProperties(properties)\n    }));\n    return properties;\n  },\n\n  /**\n   * Build properties for the bulk impression event\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {String} campaignKey, the Campaign ID\n   * @param {Number} variationId, the Variation ID\n   *\n   * @return null if campaign ID or variation ID is invalid\n   */\n  buildBatchEventForTrackingUser: function buildBatchEventForTrackingUser(configObj, campaignKey, variationId, userId) {\n    if (false) { var properties; }\n  },\n\n  /**\n   * Build properties for the impression event\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {String} campaignKey, the Campaign ID\n   * @param {Number} variationId, the Variation ID\n   * @param {String} goalId, the Goal ID\n   * @param {String} revenue, the revenue generated on conversion\n   *\n   * @return null if campaign ID or variation ID is invalid\n   */\n  buildEventForTrackingGoal: function buildEventForTrackingGoal(configObj, campaignKey, variationId, userId) {\n    var goal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    var revenue = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    var goalId = goal.id;\n    var properties = Object.assign({\n      experiment_id: campaignKey,\n      combination: variationId\n    }, getBaseProperties(configObj, userId));\n    properties.url = Constants.HTTPS_PROTOCOL + UrlService.getBaseUrl() + UrlEnum.TRACK_GOAL;\n    properties['goal_id'] = goalId;\n\n    if (goal.type === GoalTypeEnum.REVENUE && ValidateUtil.isValidValue(revenue)) {\n      properties['r'] = revenue;\n    }\n\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.IMPRESSION_FOR_TRACK_GOAL, {\n      file: FileNameEnum.ImpressionUtil,\n      properties: this._getStringifiedLogProperties(properties)\n    }));\n    return properties;\n  },\n\n  /**\n   * Build properties for the bulk impression event\n   *\n   * @param {String} userId the unique ID assigned to a user\n   * @param {String} campaignKey, the Campaign ID\n   * @param {Number} variationId, the Variation ID\n   * @param {String} goalId, the Goal ID\n   * @param {String} revenue, the revenue generated on conversion\n   *\n   * @return null if campaign ID or variation ID is invalid\n   */\n  buildBatchEventForTrackingGoal: function buildBatchEventForTrackingGoal(configObj, campaignKey, variationId, userId) {\n    var goal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    var revenue = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n\n    if (false) { var properties; }\n  },\n\n  /**\n   * Return an object containing properties required for segmenting reports\n   * @param {Object} configObj\n   * @returns reporting properties\n   */\n  getReportingProperties: function getReportingProperties(configObj) {\n    var _ref;\n\n    var sdkKey = configObj.sdkKey;\n    return _ref = {}, _defineProperty(_ref, Constants.SDK_QUERY_PARAM, Constants.SDK_NAME), _defineProperty(_ref, Constants.SDK_VERSION_QUERY_PARAM, Constants.SDK_VERSION), _defineProperty(_ref, \"env\", sdkKey), _ref;\n  },\n\n  /**\n   * Builds generic properties for different tracking calls required by VWO servers.\n   * @param {Object} configObj\n   * @param {String} eventName\n   * @returns properties\n   */\n  getEventsBaseProperties: function getEventsBaseProperties(config, eventName) {\n    var usageStats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var sdkKey = config.sdkKey;\n    var properties = Object.assign({\n      en: eventName,\n      a: config.accountId,\n      env: sdkKey,\n      eTime: FunctionUtil.getCurrentUnixTimestampInMillis(),\n      random: FunctionUtil.getRandomNumber(),\n      p: 'FS'\n    }, usageStats);\n    properties.url = Constants.HTTPS_PROTOCOL + UrlService.getBaseUrl() + UrlEnum.EVENTS;\n    return properties;\n  },\n\n  /**\n   * Builds generic payload required by all the different tracking calls.\n   * @param {Object} configObj\n   * @param {String} userId\n   * @param {String} eventName\n   * @param {Object} usageStats\n   * @returns properties\n   */\n  getEventBasePayload: function getEventBasePayload(configObj, userId, eventName) {\n    var uuid = UuidUtil.generateFor(userId, configObj.accountId);\n    var sdkKey = configObj.sdkKey;\n    var props = {\n      sdkName: Constants.SDK_NAME,\n      sdkVersion: Constants.SDK_VERSION,\n      $visitor: {\n        props: {\n          vwo_fs_environment: sdkKey\n        }\n      }\n    }; // if (usageStats) {\n    //   props = Object.assign({}, props, usageStats);\n    // }\n\n    var properties = {\n      d: {\n        msgId: \"\".concat(uuid, \"-\").concat(FunctionUtil.getCurrentUnixTimestamp()),\n        visId: uuid,\n        sessionId: FunctionUtil.getCurrentUnixTimestamp(),\n        event: {\n          props: props,\n          name: eventName,\n          time: FunctionUtil.getCurrentUnixTimestampInMillis()\n        },\n        visitor: {\n          props: {\n            vwo_fs_environment: sdkKey\n          }\n        }\n      }\n    };\n    return properties;\n  },\n\n  /**\n   * Builds payload to track the visitor.\n   * @param {Object} configObj\n   * @param {String} userId\n   * @param {String} eventName\n   * @param {String} campaignId\n   * @param {Number} variationId\n   * @returns track-user payload\n   */\n  getTrackUserPayloadData: function getTrackUserPayloadData(configObj, userId, eventName, campaignId, variationId) {\n    var properties = this.getEventBasePayload(configObj, userId, eventName);\n    properties.d.event.props.id = campaignId;\n    properties.d.event.props.variation = variationId; // this is currently required by data-layer team, we can make changes on DACDN and remove it from here\n\n    properties.d.event.props.isFirst = 1;\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.IMPRESSION_FOR_EVENT_ARCH_TRACK_USER, {\n      file: FileNameEnum.ImpressionUtil,\n      accountId: configObj.accountId,\n      userId: userId,\n      campaignId: campaignId\n    }));\n    return properties;\n  },\n\n  /**\n   * Builds payload to track the Goal.\n   * @param {Object} configObj\n   * @param {String} userId\n   * @param {String} eventName\n   * @param {Object} metricMap\n   * @param {String} revenueValue\n   * @returns track-goal payload\n   */\n  getTrackGoalPayloadData: function getTrackGoalPayloadData(configObj, userId, eventName, metricMap, revenueValue, revenuePropList) {\n    var properties = this.getEventBasePayload(configObj, userId, eventName);\n    var metric = {};\n    Object.keys(metricMap).forEach(function (key) {\n      metric[\"id_\".concat(key)] = [\"g_\".concat(metricMap[key].goal.id)];\n      logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.IMPRESSION_FOR_EVENT_ARCH_TRACK_GOAL, {\n        file: FileNameEnum.ImpressionUtil,\n        goalName: eventName,\n        accountId: configObj.accountId,\n        u: userId,\n        campaignId: key\n      }));\n    });\n    properties.d.event.props.vwoMeta = {\n      metric: metric\n    };\n\n    if (revenuePropList && revenueValue && revenuePropList.size > 0) {\n      revenuePropList.forEach(function (revenueProp) {\n        properties.d.event.props.vwoMeta[revenueProp] = revenueValue;\n      });\n    }\n\n    properties.d.event.props.isCustomEvent = true;\n    return properties;\n  },\n\n  /**\n   * Builds payload to appply post segmentation on VWO campaign reports.\n   * @param {Object} configObj\n   * @param {String} userId\n   * @param {String} eventName\n   * @param {Object} customDimensionMap\n   * @returns push payload\n   */\n  getPushPayloadData: function getPushPayloadData(configObj, userId, eventName, customDimensionMap) {\n    var properties = this.getEventBasePayload(configObj, userId, eventName);\n    properties.d.event.props.isCustomEvent = true;\n    Object.keys(customDimensionMap).forEach(function (key) {\n      var tagValue = DataTypeUtil.isString(customDimensionMap[key]) ? customDimensionMap[key] : JSON.stringify(customDimensionMap[key]);\n      properties.d.event.props.$visitor.props[key] = tagValue;\n      properties.d.visitor.props[key] = tagValue;\n    });\n    logger.log(LogLevelEnum.DEBUG, LogMessageUtil.build(LogMessageEnum.DEBUG_MESSAGES.IMPRESSION_FOR_EVENT_ARCH_PUSH, {\n      file: FileNameEnum.ImpressionUtil,\n      accountId: configObj.accountId,\n      userId: userId,\n      property: JSON.stringify(customDimensionMap)\n    }));\n    return properties;\n  },\n\n  /**\n   * Remove the sensitive keys from the properties to te displayed in the log.\n   * @param {Object} properties\n   * @returns properties without sensitive keys\n   */\n  _getStringifiedLogProperties: function _getStringifiedLogProperties(properties) {\n    var logProperties = Object.assign({}, properties);\n    delete logProperties.env;\n    return JSON.stringify(logProperties);\n  }\n};\nmodule.exports = ImpressionUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/LogMessageUtil.js\":\n/*!*************************************!*\\\n  !*** ./lib/utils/LogMessageUtil.js ***!\n  \\*************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_236381__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DataTypeUtil = __nested_webpack_require_236381__(/*! ./DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar nargs = /\\{([0-9a-zA-Z_]+)\\}/g;\nvar LogMessageUtil = {\n  /**\n   * Took reference from: string-template\n   *\n   * Name: string-template\n   * Published Name: string-template\n   * URL: https://github.com/Matt-Esch/string-template\n   * Description: A lightweight string replace engine for text-based templates\n   * Author: Matt-Esch (https://github.com/Matt-Esch)\n   * License: MIT License\n   * Local Modifications: This library is not used as a dependency.\n   *       Source code was referenced and is modified as per requirements.\n   */\n  build: function build(template, data) {\n    try {\n      return template.replace(nargs, function (match, key, index) {\n        var result;\n        var isKey;\n\n        if (template[index - 1] === '{' && template[index + match.length] === '}') {\n          return key;\n        } else {\n          isKey = data.hasOwnProperty(key);\n\n          if (isKey) {\n            var value = data[key];\n\n            if (DataTypeUtil.isFunction(value)) {\n              value = data[key]();\n            }\n\n            result = value;\n          } else {\n            result = null;\n          }\n\n          if (result === null || result === undefined) {\n            return '';\n          }\n\n          return result;\n        }\n      });\n    } catch (err) {\n      return template;\n    }\n  }\n};\nmodule.exports = LogMessageUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/ObjectUtil.js\":\n/*!*********************************!*\\\n  !*** ./lib/utils/ObjectUtil.js ***!\n  \\*********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ObjectUtil = {\n  areObjectKeys: function areObjectKeys() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return Object.keys(obj).length;\n  },\n  getKeyValue: function getKeyValue(obj) {\n    if (!ObjectUtil.areObjectKeys(obj)) {\n      return;\n    }\n\n    var key = Object.keys(obj)[0];\n    var value = obj[key];\n    return {\n      key: key,\n      value: value\n    };\n  },\n  objectValues: function objectValues(obj) {\n    return Object.keys(obj).map(function (key) {\n      return obj[key];\n    });\n  }\n};\nmodule.exports = ObjectUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/SegmentUtil.js\":\n/*!**********************************!*\\\n  !*** ./lib/utils/SegmentUtil.js ***!\n  \\**********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_240109__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DataTypeUtil = __nested_webpack_require_240109__(/*! ../utils/DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar _require = __nested_webpack_require_240109__(/*! ../utils/FunctionUtil */ \"./lib/utils/FunctionUtil.js\"),\n    matchWithRegex = _require.matchWithRegex;\n\nvar _require2 = __nested_webpack_require_240109__(/*! ../utils/ObjectUtil */ \"./lib/utils/ObjectUtil.js\"),\n    getKeyValue = _require2.getKeyValue;\n\nvar SegmentEnum = __nested_webpack_require_240109__(/*! ../enums/segment */ \"./lib/enums/segment/index.js\");\n\nvar _SegmentEnum$SegmentO = SegmentEnum.SegmentOperandValueTypeRegexes,\n    LOWER_MATCH = _SegmentEnum$SegmentO.LOWER_MATCH,\n    WILDCARD_MATCH = _SegmentEnum$SegmentO.WILDCARD_MATCH,\n    REGEX_MATCH = _SegmentEnum$SegmentO.REGEX_MATCH,\n    STARTING_STAR = _SegmentEnum$SegmentO.STARTING_STAR,\n    ENDING_STAR = _SegmentEnum$SegmentO.ENDING_STAR;\nvar _SegmentEnum$SegmentO2 = SegmentEnum.SegmentOperandValues,\n    LOWER_VALUE = _SegmentEnum$SegmentO2.LOWER_VALUE,\n    STARTING_ENDING_STAR_VALUE = _SegmentEnum$SegmentO2.STARTING_ENDING_STAR_VALUE,\n    STARTING_STAR_VALUE = _SegmentEnum$SegmentO2.STARTING_STAR_VALUE,\n    ENDING_STAR_VALUE = _SegmentEnum$SegmentO2.ENDING_STAR_VALUE,\n    REGEX_VALUE = _SegmentEnum$SegmentO2.REGEX_VALUE,\n    EQUAL_VALUE = _SegmentEnum$SegmentO2.EQUAL_VALUE;\n\nfunction extractOperandValue(operand, regex) {\n  return matchWithRegex(operand, regex) && matchWithRegex(operand, regex)[1];\n}\n\nfunction processValues(operandValue, tagValue) {\n  // this is atomic, either both will be processed or none\n  var processedOperandValue = parseFloat(operandValue, 10);\n  var processedTagValue = parseFloat(tagValue, 10);\n\n  if (!processedOperandValue || !processedTagValue) {\n    return {\n      operandValue: operandValue,\n      tagValue: tagValue\n    };\n  } // now we have surity that both are numbers\n  // now we can convert them independently to int type if they\n  // are int rather than floats\n\n\n  if (processedOperandValue === Math.floor(processedOperandValue)) {\n    processedOperandValue = parseInt(processedOperandValue, 10);\n  }\n\n  if (processedTagValue === Math.floor(processedTagValue)) {\n    processedTagValue = parseInt(processedTagValue, 10);\n  } // convert it back to string and return\n\n\n  return {\n    operandValue: processedOperandValue.toString(),\n    tagValue: processedTagValue.toString()\n  };\n}\n\nfunction preProcessTagValue(tagValue) {\n  if (tagValue === undefined) {\n    tagValue = '';\n  }\n\n  if (DataTypeUtil.isBoolean(tagValue)) {\n    if (tagValue) {\n      tagValue = true;\n    } else {\n      tagValue = false;\n    }\n  }\n\n  if (tagValue !== null) {\n    tagValue = tagValue.toString();\n  }\n\n  return tagValue;\n}\n\nfunction preProcessOperandValue(operand) {\n  var operandType;\n  var operandValue;\n  var startingStar;\n  var endingStar; // Pre process operand value\n\n  if (matchWithRegex(operand, LOWER_MATCH)) {\n    operandType = LOWER_VALUE;\n    operandValue = extractOperandValue(operand, LOWER_MATCH);\n  } else if (matchWithRegex(operand, WILDCARD_MATCH)) {\n    operandValue = extractOperandValue(operand, WILDCARD_MATCH);\n    startingStar = matchWithRegex(operandValue, STARTING_STAR);\n    endingStar = matchWithRegex(operandValue, ENDING_STAR); // In case of wildcard, the operand type is further divided into contains, startswith and endswith\n\n    if (startingStar && endingStar) {\n      operandType = STARTING_ENDING_STAR_VALUE;\n    } else if (startingStar) {\n      operandType = STARTING_STAR_VALUE;\n    } else if (endingStar) {\n      operandType = ENDING_STAR_VALUE;\n    }\n\n    operandValue = operandValue.replace(STARTING_STAR, '').replace(ENDING_STAR, '');\n  } else if (matchWithRegex(operand, REGEX_MATCH)) {\n    operandType = REGEX_VALUE;\n    operandValue = extractOperandValue(operand, REGEX_MATCH);\n  } else {\n    operandType = EQUAL_VALUE;\n    operandValue = operand;\n  }\n\n  return {\n    operandType: operandType,\n    operandValue: operandValue\n  };\n}\n\nfunction operandCustomVariablesParser(operand, customVariables) {\n  // Extract custom_variable_key and custom_variable_value from operand\n  var _getKeyValue = getKeyValue(operand),\n      key = _getKeyValue.key,\n      value = _getKeyValue.value;\n\n  var operandKey = key;\n  operand = value;\n\n  if (!customVariables.hasOwnProperty(key)) {\n    // For handling \".*\" regex case when key is not present in customVariables and matches regex is used.\n    return false;\n  }\n\n  var tagValue = customVariables[operandKey]; // Pre process tag value\n\n  tagValue = preProcessTagValue(tagValue);\n\n  var _preProcessOperandVal = preProcessOperandValue(operand),\n      operandType = _preProcessOperandVal.operandType,\n      operandValue = _preProcessOperandVal.operandValue; // Process both operand and tag values\n\n\n  var processedValues = processValues(operandValue, tagValue);\n  tagValue = processedValues.tagValue;\n  return extractResult(operandType, processedValues.operandValue, tagValue);\n}\n\nfunction operandUserParser(operand, customVariables) {\n  var users = operand.split(',');\n\n  for (var i = 0; i < users.length; i++) {\n    if (users[i].trim() === customVariables._vwoUserId) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction extractResult(operandType, operandValue, tagValue) {\n  var result;\n\n  switch (operandType) {\n    case LOWER_VALUE:\n      if (tagValue !== null) {\n        result = operandValue.toLowerCase() === tagValue.toLowerCase();\n      }\n\n      break;\n\n    case STARTING_ENDING_STAR_VALUE:\n      if (tagValue !== null) {\n        result = tagValue.indexOf(operandValue) > -1;\n      }\n\n      break;\n\n    case STARTING_STAR_VALUE:\n      if (tagValue !== null) {\n        result = tagValue.endsWith(operandValue);\n      }\n\n      break;\n\n    case ENDING_STAR_VALUE:\n      if (tagValue !== null) {\n        result = tagValue.startsWith(operandValue);\n      }\n\n      break;\n\n    case REGEX_VALUE:\n      try {\n        var pattern = new RegExp(operandValue, 'g');\n        result = !!pattern.test(tagValue);\n      } catch (err) {\n        result = false;\n      }\n\n      break;\n\n    default:\n      result = tagValue === operandValue;\n  }\n\n  return result;\n}\n\nmodule.exports = {\n  extractOperandValue: extractOperandValue,\n  processValues: processValues,\n  preProcessTagValue: preProcessTagValue,\n  preProcessOperandValue: preProcessOperandValue,\n  operandCustomVariablesParser: operandCustomVariablesParser,\n  operandUserParser: operandUserParser\n};\n\n/***/ }),\n\n/***/ \"./lib/utils/SettingsFileUtil.js\":\n/*!***************************************!*\\\n  !*** ./lib/utils/SettingsFileUtil.js ***!\n  \\***************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_247335__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Constants = __nested_webpack_require_247335__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar UrlEnum = __nested_webpack_require_247335__(/*! ../enums/UrlEnum */ \"./lib/enums/UrlEnum.js\");\n\nvar _require = __nested_webpack_require_247335__(/*! ./FunctionUtil */ \"./lib/utils/FunctionUtil.js\"),\n    getRandomNumber = _require.getRandomNumber,\n    getCurrentTime = _require.getCurrentTime;\n\nvar SettingsFileUtil = {\n  get: function get(accountId, sdkKey, userStorageService) {\n    var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    if (!accountId || !sdkKey) {\n      console.error('AccountId and sdkKey are required for fetching account settings. Aborting!');\n      return;\n    }\n\n    var protocol = 'https';\n    var port;\n    var hostname = UrlEnum.BASE_URL;\n    var path = UrlEnum.SETTINGS_URL;\n\n    if (config.isViaWebhook) {\n      path = UrlEnum.WEBHOOK_SETTINGS_URL;\n    }\n\n    path += \"?a=\".concat(accountId, \"&\") + \"i=\".concat(sdkKey, \"&\") + \"r=\".concat(getRandomNumber(), \"&\") + \"platform=\".concat(Constants.PLATFORM, \"&\") + \"\".concat(Constants.SDK_QUERY_PARAM, \"=\").concat(Constants.SDK_NAME, \"&\") + \"\".concat(Constants.SDK_VERSION_QUERY_PARAM, \"=\").concat(Constants.SDK_VERSION);\n\n    if (config.hostname && config.path) {\n      protocol = config.protocol;\n      port = config.port;\n      hostname = config.hostname || hostname;\n      path = config.path || path;\n    }\n\n    if (true) {\n      return __nested_webpack_require_247335__(/*! ./XhrUtil */ \"./lib/utils/XhrUtil.js\").send({\n        method: 'GET',\n        url: \"\".concat(protocol, \"://\").concat(hostname).concat(path),\n        userStorageService: userStorageService\n      });\n    } else { var https, http; }\n  },\n  handleHttpRequest: function handleHttpRequest(res, resolve, reject) {\n    var statusCode = res.statusCode;\n    var contentType = res.headers['content-type'];\n    var error;\n    var rawData = '';\n\n    if (!/^application\\/json/.test(contentType)) {\n      error = \"Invalid content-type.\\nExpected application/json but received \".concat(contentType);\n    }\n\n    if (error) {\n      console.error(error.message); // Consume response data to free up memory\n\n      res.resume();\n      reject(error);\n      return;\n    }\n\n    res.setEncoding('utf8');\n    res.on('data', function (chunk) {\n      rawData += chunk;\n    });\n    res.on('end', function () {\n      SettingsFileUtil.handleHttpResponse(statusCode, rawData, resolve, reject);\n    });\n  },\n  handleHttpResponse: function handleHttpResponse(statusCode, rawData, resolve, reject) {\n    try {\n      var parsedData = JSON.parse(rawData);\n\n      if (statusCode !== 200) {\n        var error = \"VWO-SDK - [ERROR]: \".concat(getCurrentTime(), \" Request failed for fetching account settings. Got Status Code: \").concat(statusCode, \" and message: \").concat(rawData);\n        console.error(error);\n        reject(error);\n        return;\n      }\n\n      resolve(parsedData);\n    } catch (err) {\n      console.error(\"VWO-SDK - [ERROR]: \".concat(getCurrentTime(), \" Request failed for fetching account settings - \").concat(err.message));\n      reject(err);\n    }\n  }\n};\nmodule.exports = SettingsFileUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/UuidUtil.js\":\n/*!*******************************!*\\\n  !*** ./lib/utils/UuidUtil.js ***!\n  \\*******************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_251303__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar uuidv5 = __nested_webpack_require_251303__(/*! uuid/v5 */ \"./node_modules/uuid/v5.js\");\n\nvar Constants = __nested_webpack_require_251303__(/*! ../constants */ \"./lib/constants/index.js\");\n\nvar VWO_NAMESPACE = uuidv5(Constants.SEED_URL, uuidv5.URL);\nvar UuidUtil = {\n  generateFor: function generateFor(userId, accountId) {\n    userId = \"\".concat(userId); // type-cast\n\n    var hash = \"\".concat(accountId);\n    var userIdNamespace = UuidUtil.generate(hash, VWO_NAMESPACE);\n    var uuidForUserIdAccountId = UuidUtil.generate(userId, userIdNamespace);\n    var desiredUuid = uuidForUserIdAccountId.replace(/-/gi, '').toUpperCase();\n    return desiredUuid;\n  },\n  generate: function generate(name, namespace) {\n    if (!name || !namespace) {\n      return;\n    }\n\n    return uuidv5(name, namespace);\n  }\n};\nmodule.exports = UuidUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/ValidateUtil.js\":\n/*!***********************************!*\\\n  !*** ./lib/utils/ValidateUtil.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_252981__) {\n\nvar _APIMethodArgumentsVa;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DataTypeUtil = __nested_webpack_require_252981__(/*! ./DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\");\n\nvar DataTypeEnum = __nested_webpack_require_252981__(/*! ../enums/DataTypeEnum */ \"./lib/enums/DataTypeEnum.js\");\n\nvar ApiEnum = __nested_webpack_require_252981__(/*! ../enums/ApiEnum */ \"./lib/enums/ApiEnum.js\");\n\nvar GoalTypeEnum = __nested_webpack_require_252981__(/*! ../enums/GoalTypeEnum */ \"./lib/enums/GoalTypeEnum.js\");\n\nvar APIMethodArgumentsValidationEnum = (_APIMethodArgumentsVa = {}, _defineProperty(_APIMethodArgumentsVa, ApiEnum.ACTIVATE, function (_ref) {\n  var campaignKey = _ref.campaignKey,\n      userId = _ref.userId,\n      _ref$customVariables = _ref.customVariables,\n      customVariables = _ref$customVariables === void 0 ? {} : _ref$customVariables,\n      _ref$variationTargeti = _ref.variationTargetingVariables,\n      variationTargetingVariables = _ref$variationTargeti === void 0 ? {} : _ref$variationTargeti,\n      _ref$userStorageData = _ref.userStorageData,\n      userStorageData = _ref$userStorageData === void 0 ? {} : _ref$userStorageData,\n      _ref$shouldTrackRetur = _ref.shouldTrackReturningUser,\n      shouldTrackReturningUser = _ref$shouldTrackRetur === void 0 ? false : _ref$shouldTrackRetur,\n      _ref$metaData = _ref.metaData,\n      metaData = _ref$metaData === void 0 ? {} : _ref$metaData;\n  return [{\n    key: 'campaignKey',\n    value: campaignKey,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'userId',\n    value: userId,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'customVariables',\n    value: customVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'variationTargetingVariables',\n    value: variationTargetingVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'userStorageData',\n    value: userStorageData,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'shouldTrackReturningUser',\n    value: shouldTrackReturningUser,\n    type: DataTypeEnum.BOOLEAN\n  }, {\n    key: 'metaData',\n    value: metaData,\n    type: DataTypeEnum.OBJECT\n  }];\n}), _defineProperty(_APIMethodArgumentsVa, ApiEnum.TRACK, function (_ref2) {\n  var campaignKey = _ref2.campaignKey,\n      userId = _ref2.userId,\n      goalIdentifier = _ref2.goalIdentifier,\n      _ref2$customVariables = _ref2.customVariables,\n      customVariables = _ref2$customVariables === void 0 ? {} : _ref2$customVariables,\n      _ref2$variationTarget = _ref2.variationTargetingVariables,\n      variationTargetingVariables = _ref2$variationTarget === void 0 ? {} : _ref2$variationTarget,\n      _ref2$userStorageData = _ref2.userStorageData,\n      userStorageData = _ref2$userStorageData === void 0 ? {} : _ref2$userStorageData,\n      _ref2$goalTypeToTrack = _ref2.goalTypeToTrack,\n      goalTypeToTrack = _ref2$goalTypeToTrack === void 0 ? GoalTypeEnum.ALL : _ref2$goalTypeToTrack,\n      _ref2$shouldTrackRetu = _ref2.shouldTrackReturningUser,\n      shouldTrackReturningUser = _ref2$shouldTrackRetu === void 0 ? false : _ref2$shouldTrackRetu,\n      _ref2$metaData = _ref2.metaData,\n      metaData = _ref2$metaData === void 0 ? {} : _ref2$metaData;\n  return [{\n    key: 'campaignKey',\n    value: campaignKey,\n    type: DataTypeEnum.STRING_NULL_UNDEFINED_ARRAY\n  }, {\n    key: 'userId',\n    value: userId,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'goalIdentifier',\n    value: goalIdentifier,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'customVariables',\n    value: customVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'variationTargetingVariables',\n    value: variationTargetingVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'userStorageData',\n    value: userStorageData,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'goalTypeToTrack',\n    value: goalTypeToTrack,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'shouldTrackReturningUser',\n    value: shouldTrackReturningUser,\n    type: DataTypeEnum.BOOLEAN\n  }, {\n    key: 'metaData',\n    value: metaData,\n    type: DataTypeEnum.OBJECT\n  }];\n}), _defineProperty(_APIMethodArgumentsVa, ApiEnum.IS_FEATURE_ENABLED, function (_ref3) {\n  var campaignKey = _ref3.campaignKey,\n      userId = _ref3.userId,\n      _ref3$customVariables = _ref3.customVariables,\n      customVariables = _ref3$customVariables === void 0 ? {} : _ref3$customVariables,\n      _ref3$variationTarget = _ref3.variationTargetingVariables,\n      variationTargetingVariables = _ref3$variationTarget === void 0 ? {} : _ref3$variationTarget,\n      _ref3$userStorageData = _ref3.userStorageData,\n      userStorageData = _ref3$userStorageData === void 0 ? {} : _ref3$userStorageData,\n      _ref3$shouldTrackRetu = _ref3.shouldTrackReturningUser,\n      shouldTrackReturningUser = _ref3$shouldTrackRetu === void 0 ? false : _ref3$shouldTrackRetu,\n      _ref3$metaData = _ref3.metaData,\n      metaData = _ref3$metaData === void 0 ? {} : _ref3$metaData;\n  return [{\n    key: 'campaignKey',\n    value: campaignKey,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'userId',\n    value: userId,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'customVariables',\n    value: customVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'variationTargetingVariables',\n    value: variationTargetingVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'userStorageData',\n    value: userStorageData,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'shouldTrackReturningUser',\n    value: shouldTrackReturningUser,\n    type: DataTypeEnum.BOOLEAN\n  }, {\n    key: 'metaData',\n    value: metaData,\n    type: DataTypeEnum.OBJECT\n  }];\n}), _defineProperty(_APIMethodArgumentsVa, ApiEnum.GET_FEATURE_VARIABLE_VALUE, function (_ref4) {\n  var campaignKey = _ref4.campaignKey,\n      variableKey = _ref4.variableKey,\n      userId = _ref4.userId,\n      _ref4$customVariables = _ref4.customVariables,\n      customVariables = _ref4$customVariables === void 0 ? {} : _ref4$customVariables,\n      _ref4$variationTarget = _ref4.variationTargetingVariables,\n      variationTargetingVariables = _ref4$variationTarget === void 0 ? {} : _ref4$variationTarget,\n      _ref4$userStorageData = _ref4.userStorageData,\n      userStorageData = _ref4$userStorageData === void 0 ? {} : _ref4$userStorageData,\n      _ref4$metaData = _ref4.metaData,\n      metaData = _ref4$metaData === void 0 ? {} : _ref4$metaData;\n  return [{\n    key: 'campaignKey',\n    value: campaignKey,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'variableKey',\n    value: variableKey,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'userId',\n    value: userId,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'customVariables',\n    value: customVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'variationTargetingVariables',\n    value: variationTargetingVariables,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'userStorageData',\n    value: userStorageData,\n    type: DataTypeEnum.OBJECT\n  }, {\n    key: 'metaData',\n    value: metaData,\n    type: DataTypeEnum.OBJECT\n  }];\n}), _defineProperty(_APIMethodArgumentsVa, ApiEnum.PUSH, function (_ref5) {\n  var tagKey = _ref5.tagKey,\n      tagValue = _ref5.tagValue,\n      userId = _ref5.userId,\n      customDimensionMap = _ref5.customDimensionMap;\n  return [{\n    key: 'tagKey',\n    value: tagKey,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'tagValue',\n    value: tagValue,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'userId',\n    value: userId,\n    type: DataTypeEnum.STRING\n  }, {\n    key: 'customDimensionMap',\n    value: customDimensionMap,\n    type: DataTypeEnum.OBJECT\n  }];\n}), _APIMethodArgumentsVa); // both have same\n\nAPIMethodArgumentsValidationEnum[ApiEnum.GET_VARIATION_NAME] = APIMethodArgumentsValidationEnum[ApiEnum.ACTIVATE];\nvar ValidateUtil = {\n  isValidValue: function isValidValue(value) {\n    return !!(value !== undefined && value);\n  },\n  isValidString: function isValidString(value) {\n    return ValidateUtil.isValidValue(value) && DataTypeUtil.isString(value);\n  },\n  isValidNumber: function isValidNumber(value) {\n    return ValidateUtil.isValidValue(value) && DataTypeUtil.isNumber(value);\n  },\n  isValidFunction: function isValidFunction(value) {\n    return ValidateUtil.isValidValue(value) && DataTypeUtil.isFunction(value);\n  },\n  isValidBoolean: function isValidBoolean(value) {\n    return value !== undefined && DataTypeUtil.isBoolean(value);\n  },\n  isValidObject: function isValidObject(value) {\n    return value !== undefined && DataTypeUtil.isObject(value);\n  },\n  areValidParamsForAPIMethod: function areValidParamsForAPIMethod(argsObj) {\n    var isValid = false;\n    var args = APIMethodArgumentsValidationEnum[argsObj.method](argsObj);\n    var validators = [];\n\n    for (var i = 0; i < args.length; i++) {\n      var argConfig = args[i];\n      var argValue = argConfig.value;\n      var dataType = argConfig.type; // let value;\n\n      switch (dataType) {\n        case DataTypeEnum.NUMBER:\n          validators.push(ValidateUtil.isValidNumber(argValue));\n          break;\n\n        case DataTypeEnum.STRING:\n          validators.push(ValidateUtil.isValidString(argValue));\n          break;\n\n        case DataTypeEnum.BOOLEAN:\n          validators.push(ValidateUtil.isValidBoolean(argValue));\n          break;\n        // case DataTypeEnum.FUNCTION:\n        //   validators.push(ValidateUtil.isValidFunction(argValue));\n        //   break;\n\n        case DataTypeEnum.OBJECT:\n          validators.push(ValidateUtil.isValidObject(argValue));\n          break;\n\n        case DataTypeEnum.STRING_NULL_UNDEFINED_ARRAY:\n          var value = ValidateUtil.isValidString(argValue) || DataTypeUtil.isUndefined(argValue) || DataTypeUtil.isNull(argValue) || DataTypeUtil.isArray(argValue);\n          validators.push(value);\n          break;\n        // case DataTypeEnum.NUMBER_STRING:\n        //   value = ValidateUtil.isValidNumber(argValue) || ValidateUtil.isValidString(argValue);\n        //   validators.push(value);\n        //   break;\n      }\n    }\n\n    isValid = validators.every(function (val) {\n      return val;\n    });\n    return isValid;\n  }\n};\nmodule.exports = ValidateUtil;\n\n/***/ }),\n\n/***/ \"./lib/utils/XhrUtil.js\":\n/*!******************************!*\\\n  !*** ./lib/utils/XhrUtil.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_263962__) {\n\n/**\n * Copyright 2019-2022 Wingify Software Pvt. Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _require = __nested_webpack_require_263962__(/*! ./FunctionUtil */ \"./lib/utils/FunctionUtil.js\"),\n    getCurrentTime = _require.getCurrentTime;\n\nvar _require2 = __nested_webpack_require_263962__(/*! ./DataTypeUtil */ \"./lib/utils/DataTypeUtil.js\"),\n    isObject = _require2.isObject,\n    isFunction = _require2.isFunction;\n\nvar XhrUtil = {\n  _getStoredSettings: function _getStoredSettings(userStorageService) {\n    var isStoredData = false;\n    var parsedSettings;\n\n    if (userStorageService && isObject(userStorageService) && isFunction(userStorageService.getSettings)) {\n      try {\n        var settings = userStorageService.getSettings();\n        parsedSettings = JSON.parse(settings);\n\n        if (parsedSettings && isObject(parsedSettings) && Object.keys(parsedSettings).length > 3) {\n          var info = \"VWO-SDK - [INFO]: \".concat(getCurrentTime(), \" VWO settings found in Storage Service.\");\n          console.info(info);\n          isStoredData = true;\n        } else if (parsedSettings) {\n          var error = \"VWO-SDK - [ERROR]: \".concat(getCurrentTime(), \" VWO settings found in Storage Service is not valid.\");\n          console.error(error);\n        } else {\n          var warning = \"VWO-SDK - [WARNING]: \".concat(getCurrentTime(), \" VWO settings is empty in Storage Service.\");\n          console.warn(warning);\n        }\n      } catch (err) {\n        var _error = \"VWO-SDK - [ERROR]: \".concat(getCurrentTime(), \" VWO settings found in Storage Service is not valid. \").concat(err);\n\n        console.error(_error);\n        isStoredData = false;\n      }\n    }\n\n    return {\n      isStoredData: isStoredData,\n      parsedSettings: parsedSettings\n    };\n  },\n  send: function send() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        method = _ref.method,\n        url = _ref.url,\n        payload = _ref.payload,\n        userStorageService = _ref.userStorageService;\n\n    if (!url || !method) {\n      return;\n    }\n\n    return new Promise(function (resolve, reject) {\n      var _XhrUtil$_getStoredSe = XhrUtil._getStoredSettings(userStorageService),\n          isStoredData = _XhrUtil$_getStoredSe.isStoredData,\n          parsedSettings = _XhrUtil$_getStoredSe.parsedSettings;\n\n      if (isStoredData) {\n        resolve(parsedSettings);\n      } else {\n        var xhr = new XMLHttpRequest();\n\n        _this.xhrHandler(xhr, method, url, payload, userStorageService, resolve, reject);\n      }\n    });\n  },\n  xhrHandler: function xhrHandler(xhr, method, url, payload, userStorageService, resolve, reject) {\n    var _this2 = this;\n\n    if (method === 'GET') {\n      xhr.onload = function () {\n        _this2.xhrOnLoad(xhr, userStorageService, resolve);\n      };\n\n      xhr.onerror = function () {\n        _this2.xhrOnError(xhr, reject);\n      };\n\n      xhr.open(method, url);\n      xhr.send();\n    } else if (method === 'POST') {\n      xhr.onload = function () {\n        resolve();\n      };\n\n      xhr.onerror = function () {\n        reject('Something went wrong');\n      };\n\n      xhr.open(method, url, true);\n      xhr.send(JSON.stringify(payload));\n    }\n  },\n  xhrOnLoad: function xhrOnLoad(xhr, userStorageService, resolve) {\n    try {\n      var parsedXhrResponse = JSON.parse(xhr.response);\n\n      if (userStorageService && isObject(userStorageService) && isFunction(userStorageService.setSettings)) {\n        userStorageService.setSettings(xhr.response);\n      }\n\n      resolve(parsedXhrResponse);\n    } catch (err) {\n      console.error(err);\n    }\n  },\n  xhrOnError: function xhrOnError(xhr, reject) {\n    var error = \"VWO-SDK - [ERROR]: \".concat(getCurrentTime(), \" Request failed for fetching account settings. Got Status Code: \").concat(xhr.status);\n    console.error(error);\n    reject(error);\n  }\n};\nmodule.exports = XhrUtil;\n\n/***/ }),\n\n/***/ \"./node_modules/murmurhash/murmurhash.js\":\n/*!***********************************************!*\\\n  !*** ./node_modules/murmurhash/murmurhash.js ***!\n  \\***********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function(){\n  var _global = this;\n\n  /**\n   * JS Implementation of MurmurHash2\n   *\n   * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n   * @see http://github.com/garycourt/murmurhash-js\n   * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n   * @see http://sites.google.com/site/murmurhash/\n   *\n   * @param {string} str ASCII only\n   * @param {number} seed Positive integer only\n   * @return {number} 32-bit positive integer hash\n   */\n  function MurmurHashV2(str, seed) {\n    var\n      l = str.length,\n      h = seed ^ l,\n      i = 0,\n      k;\n\n    while (l >= 4) {\n      k =\n        ((str.charCodeAt(i) & 0xff)) |\n        ((str.charCodeAt(++i) & 0xff) << 8) |\n        ((str.charCodeAt(++i) & 0xff) << 16) |\n        ((str.charCodeAt(++i) & 0xff) << 24);\n\n      k = (((k & 0xffff) * 0x5bd1e995) + ((((k >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n      k ^= k >>> 24;\n      k = (((k & 0xffff) * 0x5bd1e995) + ((((k >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n\n    h = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16)) ^ k;\n\n      l -= 4;\n      ++i;\n    }\n\n    switch (l) {\n    case 3: h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n    case 2: h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n    case 1: h ^= (str.charCodeAt(i) & 0xff);\n            h = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n    }\n\n    h ^= h >>> 13;\n    h = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n    h ^= h >>> 15;\n\n    return h >>> 0;\n  };\n\n  /**\n   * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)\n   *\n   * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n   * @see http://github.com/garycourt/murmurhash-js\n   * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n   * @see http://sites.google.com/site/murmurhash/\n   *\n   * @param {string} key ASCII only\n   * @param {number} seed Positive integer only\n   * @return {number} 32-bit positive integer hash\n   */\n  function MurmurHashV3(key, seed) {\n    var remainder, bytes, h1, h1b, c1, c1b, c2, c2b, k1, i;\n\n    remainder = key.length & 3; // key.length % 4\n    bytes = key.length - remainder;\n    h1 = seed;\n    c1 = 0xcc9e2d51;\n    c2 = 0x1b873593;\n    i = 0;\n\n    while (i < bytes) {\n        k1 =\n          ((key.charCodeAt(i) & 0xff)) |\n          ((key.charCodeAt(++i) & 0xff) << 8) |\n          ((key.charCodeAt(++i) & 0xff) << 16) |\n          ((key.charCodeAt(++i) & 0xff) << 24);\n      ++i;\n\n      k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;\n      k1 = (k1 << 15) | (k1 >>> 17);\n      k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;\n\n      h1 ^= k1;\n          h1 = (h1 << 13) | (h1 >>> 19);\n      h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;\n      h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));\n    }\n\n    k1 = 0;\n\n    switch (remainder) {\n      case 3: k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;\n      case 2: k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;\n      case 1: k1 ^= (key.charCodeAt(i) & 0xff);\n\n      k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;\n      k1 = (k1 << 15) | (k1 >>> 17);\n      k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;\n      h1 ^= k1;\n    }\n\n    h1 ^= key.length;\n\n    h1 ^= h1 >>> 16;\n    h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;\n    h1 ^= h1 >>> 13;\n    h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;\n    h1 ^= h1 >>> 16;\n\n    return h1 >>> 0;\n  }\n\n  var murmur = MurmurHashV3;\n  murmur.v2 = MurmurHashV2;\n  murmur.v3 = MurmurHashV3;\n\n  if (true) {\n    module.exports = murmur;\n  } else { var _previousRoot; }\n}());\n\n\n/***/ }),\n\n/***/ \"./node_modules/superstruct/lib/index.es.js\":\n/*!**************************************************!*\\\n  !*** ./node_modules/superstruct/lib/index.es.js ***!\n  \\**************************************************/\n/*! exports provided: Struct, StructError, any, array, assert, boolean, coerce, coercion, date, defaulted, dynamic, empty, enums, func, instance, intersection, is, lazy, length, literal, map, masked, never, nullable, number, object, optional, partial, pattern, record, refinement, set, string, struct, tuple, type, union, validate */\n/***/ (function(module, __webpack_exports__, __nested_webpack_require_273172__) {\n\n\"use strict\";\n__nested_webpack_require_273172__.r(__webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"Struct\", function() { return Struct; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"StructError\", function() { return StructError; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"any\", function() { return any; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"array\", function() { return array; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"assert\", function() { return assert; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"boolean\", function() { return boolean; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"coerce\", function() { return coerce; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"coercion\", function() { return coercion; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"date\", function() { return date; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"defaulted\", function() { return defaulted; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"dynamic\", function() { return dynamic; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"empty\", function() { return empty; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"enums\", function() { return enums; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"func\", function() { return func; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"instance\", function() { return instance; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"intersection\", function() { return intersection; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"is\", function() { return is; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"lazy\", function() { return lazy; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"length\", function() { return length; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"literal\", function() { return literal; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"map\", function() { return map; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"masked\", function() { return masked; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"never\", function() { return never; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"nullable\", function() { return nullable; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"number\", function() { return number; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"object\", function() { return object; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"optional\", function() { return optional; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"partial\", function() { return partial; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"pattern\", function() { return pattern; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"record\", function() { return record; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"refinement\", function() { return refinement; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"set\", function() { return set; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"string\", function() { return string; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"struct\", function() { return struct; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"tuple\", function() { return tuple; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"type\", function() { return type; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"union\", function() { return union; });\n/* harmony export (binding) */ __nested_webpack_require_273172__.d(__webpack_exports__, \"validate\", function() { return validate; });\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n/**\n * Convert a validation result to an iterable of failures.\n */\nfunction* toFailures(result, context) {\n  if (result === true) ; else if (result === false) {\n    yield context.fail();\n  } else {\n    yield* result;\n  }\n}\n/**\n * Shifts (removes and returns) the first value from the `input` iterator.\n * Like `Array.prototype.shift()` but for an `Iterator`.\n */\n\nfunction iteratorShift(input) {\n  const {\n    done,\n    value\n  } = input.next();\n  return done ? undefined : value;\n}\n\n/**\n * `Struct` objects encapsulate the schema for a specific data type (with\n * optional coercion). You can then use the `assert`, `is` or `validate` helpers\n * to validate unknown data against a struct.\n */\n\nclass Struct {\n  constructor(props) {\n    const {\n      type,\n      schema,\n      coercer = value => value,\n      validator = () => [],\n      refiner = () => []\n    } = props;\n    this.type = type;\n    this.schema = schema;\n    this.coercer = coercer;\n    this.validator = validator;\n    this.refiner = refiner;\n  }\n\n}\n/**\n * `StructError` objects are thrown (or returned) by Superstruct when its\n * validation fails. The error represents the first error encountered during\n * validation. But they also have an `error.failures` property that holds\n * information for all of the failures encountered.\n */\n\nclass StructError extends TypeError {\n  constructor(failure, moreFailures) {\n    const {\n      path,\n      value,\n      type,\n      branch\n    } = failure,\n          rest = _objectWithoutProperties(failure, [\"path\", \"value\", \"type\", \"branch\"]);\n\n    const message = `Expected a value of type \\`${type}\\`${path.length ? ` for \\`${path.join('.')}\\`` : ''} but received \\`${JSON.stringify(value)}\\`.`;\n    let failuresResult;\n\n    function failures() {\n      if (!failuresResult) {\n        failuresResult = [failure, ...moreFailures];\n      }\n\n      return failuresResult;\n    }\n\n    super(message);\n    this.value = value;\n    Object.assign(this, rest);\n    this.type = type;\n    this.path = path;\n    this.branch = branch;\n    this.failures = failures;\n    this.stack = new Error().stack;\n    this.__proto__ = StructError.prototype;\n  }\n\n}\n/**\n * Assert that a value passes a `Struct`, throwing if it doesn't.\n */\n\nfunction assert(value, struct) {\n  const result = validate(value, struct);\n\n  if (result[0]) {\n    throw result[0];\n  }\n}\n/**\n * Coerce a value with the coercion logic of `Struct` and validate it.\n */\n\nfunction coerce(value, struct) {\n  const ret = struct.coercer(value);\n  assert(ret, struct);\n  return ret;\n}\n/**\n * Check if a value passes a `Struct`.\n */\n\nfunction is(value, struct) {\n  const result = validate(value, struct);\n  return !result[0];\n}\n/**\n * Validate a value against a `Struct`, returning an error if invalid.\n */\n\nfunction validate(value, struct, coercing = false) {\n  if (coercing) {\n    value = struct.coercer(value);\n  }\n\n  const failures = check(value, struct);\n  const failure = iteratorShift(failures);\n\n  if (failure) {\n    const error = new StructError(failure, failures);\n    return [error, undefined];\n  } else {\n    return [undefined, value];\n  }\n}\n/**\n * Check a value against a `Struct`, returning an iterable of failures.\n */\n\nfunction* check(value, struct, path = [], branch = []) {\n  const {\n    type\n  } = struct;\n  const ctx = {\n    value,\n    type,\n    branch,\n    path,\n\n    fail(props = {}) {\n      return _objectSpread2({\n        value,\n        type,\n        path,\n        branch: [...branch, value]\n      }, props);\n    },\n\n    check(v, s, parent, key) {\n      const p = parent !== undefined ? [...path, key] : path;\n      const b = parent !== undefined ? [...branch, parent] : branch;\n      return check(v, s, p, b);\n    }\n\n  };\n  const failures = toFailures(struct.validator(value, ctx), ctx);\n  const failure = iteratorShift(failures);\n\n  if (failure) {\n    yield failure;\n    yield* failures;\n  } else {\n    yield* toFailures(struct.refiner(value, ctx), ctx);\n  }\n}\n\n/**\n * Augment a `Struct` to add an additional coercion step to its input.\n */\n\nfunction coercion(struct, coercer) {\n  const fn = struct.coercer;\n  return new Struct(_objectSpread2(_objectSpread2({}, struct), {}, {\n    coercer: value => {\n      return fn(coercer(value));\n    }\n  }));\n}\n/**\n * Augment a struct to coerce a default value for missing values.\n *\n * Note: You must use `coerce(value, Struct)` on the value before validating it\n * to have the value defaulted!\n */\n\nfunction defaulted(S, fallback, strict) {\n  return coercion(S, x => {\n    const f = typeof fallback === 'function' ? fallback() : fallback;\n\n    if (x === undefined) {\n      return f;\n    }\n\n    if (strict !== true && isPlainObject(x) && isPlainObject(f)) {\n      const ret = _objectSpread2({}, x);\n\n      let changed = false;\n\n      for (const key in f) {\n        if (ret[key] === undefined) {\n          ret[key] = f[key];\n          changed = true;\n        }\n      }\n\n      if (changed) {\n        return ret;\n      }\n    }\n\n    return x;\n  });\n}\n/**\n * Coerce a value to mask its properties to only that defined in the struct.\n */\n\nfunction masked(S) {\n  return coercion(S, x => {\n    if (!isPlainObject(x)) {\n      return x;\n    }\n\n    const ret = {};\n\n    for (const key in S.schema) {\n      ret[key] = x[key];\n    }\n\n    return ret;\n  });\n}\n/**\n * Check if a value is a plain object.\n */\n\nfunction isPlainObject(value) {\n  if (Object.prototype.toString.call(value) !== '[object Object]') {\n    return false;\n  }\n\n  const prototype = Object.getPrototypeOf(value);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Augment a string or array struct to constrain its length to zero.\n */\n\nfunction empty(S) {\n  return refinement(S, `${S.type} & Empty`, value => {\n    return value.length === 0;\n  });\n}\n/**\n * Augment a string or array struct to constrain its length to being between a\n * minimum and maximum size.\n */\n\nfunction length(S, min, max) {\n  return refinement(S, `${S.type} & Length<${min},${max}>`, value => {\n    return min < value.length && value.length < max;\n  });\n}\n/**\n * Refine a string struct to match a specific regexp pattern.\n */\n\nfunction pattern(S, regexp) {\n  return refinement(S, `${S.type} & Pattern<${regexp.source}>`, value => {\n    return regexp.test(value);\n  });\n}\n/**\n * Augment a `Struct` to add an additional refinement to the validation.\n */\n\nfunction refinement(struct, type, refiner) {\n  const fn = struct.refiner;\n  return new Struct(_objectSpread2(_objectSpread2({}, struct), {}, {\n    type,\n\n    *refiner(value, fail) {\n      yield* toFailures(fn(value, fail), fail);\n      yield* toFailures(refiner(value, fail), fail);\n    }\n\n  }));\n}\n\n/**\n * Validate any value.\n */\n\nfunction any() {\n  return struct('any', () => true);\n}\nfunction array(Element) {\n  return new Struct({\n    type: `Array<${Element ? Element.type : 'unknown'}>`,\n    schema: Element,\n    coercer: value => {\n      return Element && Array.isArray(value) ? value.map(v => coerce(v, Element)) : value;\n    },\n\n    *validator(value, ctx) {\n      if (!Array.isArray(value)) {\n        yield ctx.fail();\n        return;\n      }\n\n      if (Element) {\n        for (const [i, v] of value.entries()) {\n          yield* ctx.check(v, Element, value, i);\n        }\n      }\n    }\n\n  });\n}\n/**\n * Validate that boolean values.\n */\n\nfunction boolean() {\n  return struct('boolean', value => {\n    return typeof value === 'boolean';\n  });\n}\n/**\n * Validate that `Date` values.\n *\n * Note: this also ensures that the value is *not* an invalid `Date` object,\n * which can occur when parsing a date fails but still returns a `Date`.\n */\n\nfunction date() {\n  return struct('Date', value => {\n    return value instanceof Date && !isNaN(value.getTime());\n  });\n}\n/**\n * Validate that a value dynamically, determing which struct to use at runtime.\n */\n\nfunction dynamic(fn) {\n  return struct('Dynamic<...>', (value, ctx) => {\n    return ctx.check(value, fn(value, ctx));\n  });\n}\nfunction enums(values) {\n  return struct(`Enum<${values.map(toLiteralString)}>`, value => {\n    return values.includes(value);\n  });\n}\n/**\n * Validate that a value is a function.\n */\n\nfunction func() {\n  return struct('Function', value => {\n    return typeof value === 'function';\n  });\n}\n/**\n * Validate that a value is an instance of a class.\n */\n\nfunction instance(Class) {\n  return struct(`InstanceOf<${Class.name}>`, value => {\n    return value instanceof Class;\n  });\n}\nfunction intersection(Structs) {\n  return struct(Structs.map(s => s.type).join(' & '), function* (value, ctx) {\n    for (const S of Structs) {\n      yield* ctx.check(value, S);\n    }\n  });\n}\n/**\n * Validate a value lazily, by constructing the struct right before the first\n * validation. This is useful for cases where you want to have self-referential\n * structs for nested data structures.\n */\n\nfunction lazy(fn) {\n  let S;\n  return struct('Lazy<...>', (value, ctx) => {\n    if (!S) {\n      S = fn();\n    }\n\n    return ctx.check(value, S);\n  });\n}\nfunction literal(constant) {\n  return struct(`Literal<${toLiteralString(constant)}>`, value => {\n    return value === constant;\n  });\n}\n/**\n * Validate that a value is a map with specific key and value entries.\n */\n\nfunction map(Key, Value) {\n  return struct(`Map<${Key.type},${Value.type}>`, function* (value, ctx) {\n    if (!(value instanceof Map)) {\n      yield ctx.fail();\n      return;\n    }\n\n    for (const [k, v] of value.entries()) {\n      yield* ctx.check(k, Key, value, k);\n      yield* ctx.check(v, Value, value, k);\n    }\n  });\n}\n/**\n * Validate that a value always fails.\n */\n\nfunction never() {\n  return struct('never', () => false);\n}\n/**\n * Augment a struct to make it accept `null` values.\n */\n\nfunction nullable(S) {\n  return new Struct({\n    type: `${S.type} | null`,\n    schema: S.schema,\n    validator: (value, ctx) => {\n      return value === null || ctx.check(value, S);\n    }\n  });\n}\n/**\n * Validate that a value is a number.\n */\n\nfunction number() {\n  return struct(`number`, value => {\n    return typeof value === 'number' && !isNaN(value);\n  });\n}\nfunction object(Structs) {\n  const knowns = Structs ? Object.keys(Structs) : [];\n  const Never = never();\n  return new Struct({\n    type: Structs ? `Object<{${knowns.join(',')}}>` : 'Object',\n    schema: Structs ? Structs : null,\n    coercer: Structs ? createObjectCoercer(Structs) : x => x,\n\n    *validator(value, ctx) {\n      if (typeof value !== 'object' || value == null) {\n        yield ctx.fail();\n        return;\n      }\n\n      if (Structs) {\n        const unknowns = new Set(Object.keys(value));\n\n        for (const key of knowns) {\n          unknowns.delete(key);\n          const Value = Structs[key];\n          const v = value[key];\n          yield* ctx.check(v, Value, value, key);\n        }\n\n        for (const key of unknowns) {\n          const v = value[key];\n          yield* ctx.check(v, Never, value, key);\n        }\n      }\n    }\n\n  });\n}\n/**\n * Augment a struct to make it optionally accept `undefined` values.\n */\n\nfunction optional(S) {\n  return new Struct({\n    type: `${S.type}?`,\n    schema: S.schema,\n    validator: (value, ctx) => {\n      return value === undefined || ctx.check(value, S);\n    }\n  });\n}\n/**\n * Validate that a partial object with specific entry values.\n */\n\nfunction partial(Structs) {\n  if (Structs instanceof Struct) {\n    Structs = Structs.schema;\n  }\n\n  const knowns = Object.keys(Structs);\n  const Never = never();\n  return new Struct({\n    type: `Partial<{${knowns.join(',')}}>`,\n    schema: Structs,\n    coercer: createObjectCoercer(Structs),\n\n    *validator(value, ctx) {\n      if (typeof value !== 'object' || value == null) {\n        yield ctx.fail();\n        return;\n      }\n\n      const unknowns = new Set(Object.keys(value));\n\n      for (const key of knowns) {\n        unknowns.delete(key);\n\n        if (!(key in value)) {\n          continue;\n        }\n\n        const Value = Structs[key];\n        const v = value[key];\n        yield* ctx.check(v, Value, value, key);\n      }\n\n      for (const key of unknowns) {\n        const v = value[key];\n        yield* ctx.check(v, Never, value, key);\n      }\n    }\n\n  });\n}\n/**\n * Validate that a value is a record with specific key and\n * value entries.\n */\n\nfunction record(Key, Value) {\n  return struct(`Record<${Key.type},${Value.type}>`, function* (value, ctx) {\n    if (typeof value !== 'object' || value == null) {\n      yield ctx.fail();\n      return;\n    }\n\n    for (const k in value) {\n      const v = value[k];\n      yield* ctx.check(k, Key, value, k);\n      yield* ctx.check(v, Value, value, k);\n    }\n  });\n}\n/**\n * Validate that a set of values matches a specific type.\n */\n\nfunction set(Element) {\n  return struct(`Set<${Element.type}>`, (value, ctx) => {\n    if (!(value instanceof Set)) {\n      return false;\n    }\n\n    for (const val of value) {\n      const [failure] = ctx.check(val, Element);\n\n      if (failure) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n}\n/**\n * Validate that a value is a string.\n */\n\nfunction string() {\n  return struct('string', value => {\n    return typeof value === 'string';\n  });\n}\n/**\n * Define a `Struct` instance with a type and validation function.\n */\n\nfunction struct(name, validator) {\n  return new Struct({\n    type: name,\n    validator,\n    schema: null\n  });\n}\nfunction tuple(Elements) {\n  const Never = never();\n  return struct(`[${Elements.map(s => s.type).join(',')}]`, function* (value, ctx) {\n    if (!Array.isArray(value)) {\n      yield ctx.fail();\n      return;\n    }\n\n    for (const [index, Element] of Elements.entries()) {\n      const v = value[index];\n      yield* ctx.check(v, Element, value, index);\n    }\n\n    if (value.length > Elements.length) {\n      const index = Elements.length;\n      const v = value[index];\n      yield* ctx.check(v, Never, value, index);\n    }\n  });\n}\n/**\n * Validate that a value matches a specific strutural interface, like the\n * structural typing that TypeScript uses.\n */\n\nfunction type(Structs) {\n  const keys = Object.keys(Structs);\n  return struct(`Type<{${keys.join(',')}}>`, function* (value, ctx) {\n    if (typeof value !== 'object' || value == null) {\n      yield ctx.fail();\n      return;\n    }\n\n    for (const key of keys) {\n      const Value = Structs[key];\n      const v = value[key];\n      yield* ctx.check(v, Value, value, key);\n    }\n  });\n}\nfunction union(Structs) {\n  return struct(`${Structs.map(s => s.type).join(' | ')}`, function* (value, ctx) {\n    for (const S of Structs) {\n      const [...failures] = ctx.check(value, S);\n\n      if (failures.length === 0) {\n        return;\n      }\n    }\n\n    yield ctx.fail();\n  });\n}\n/**\n * Convert a value to a literal string.\n */\n\nfunction toLiteralString(value) {\n  return typeof value === 'string' ? `\"${value.replace(/\"/g, '\"')}\"` : `${value}`;\n}\n/**\n * Coerce the values of an object-like struct.\n */\n\n\nfunction createObjectCoercer(Structs) {\n  const knowns = Object.keys(Structs);\n  return value => {\n    if (typeof value !== 'object' || value == null) {\n      return value;\n    }\n\n    const ret = {};\n    const unknowns = new Set(Object.keys(value));\n\n    for (const key of knowns) {\n      unknowns.delete(key);\n      const Value = Structs[key];\n      const v = value[key];\n      ret[key] = coerce(v, Value);\n    }\n\n    for (const key of unknowns) {\n      ret[key] = value[key];\n    }\n\n    return ret;\n  };\n}\n\n\n//# sourceMappingURL=index.es.js.map\n\n\n/***/ }),\n\n/***/ \"./node_modules/uuid/lib/bytesToUuid.js\":\n/*!**********************************************!*\\\n  !*** ./node_modules/uuid/lib/bytesToUuid.js ***!\n  \\**********************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n\n\n/***/ }),\n\n/***/ \"./node_modules/uuid/lib/sha1-browser.js\":\n/*!***********************************************!*\\\n  !*** ./node_modules/uuid/lib/sha1-browser.js ***!\n  \\***********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\n\n\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0: return (x & y) ^ (~x & z);\n    case 1: return x ^ y ^ z;\n    case 2: return (x & y) ^ (x & z) ^ (y & z);\n    case 3: return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return (x << n) | (x>>> (32 - n));\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof(bytes) == 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n    bytes = new Array(msg.length);\n    for (var i = 0; i < msg.length; i++) bytes[i] = msg.charCodeAt(i);\n  }\n\n  bytes.push(0x80);\n\n  var l = bytes.length/4 + 2;\n  var N = Math.ceil(l/16);\n  var M = new Array(N);\n\n  for (var i=0; i<N; i++) {\n    M[i] = new Array(16);\n    for (var j=0; j<16; j++) {\n      M[i][j] =\n        bytes[i * 64 + j * 4] << 24 |\n        bytes[i * 64 + j * 4 + 1] << 16 |\n        bytes[i * 64 + j * 4 + 2] << 8 |\n        bytes[i * 64 + j * 4 + 3];\n    }\n  }\n\n  M[N - 1][14] = ((bytes.length - 1) * 8) /\n    Math.pow(2, 32); M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = ((bytes.length - 1) * 8) & 0xffffffff;\n\n  for (var i=0; i<N; i++) {\n    var W = new Array(80);\n\n    for (var t=0; t<16; t++) W[t] = M[i][t];\n    for (var t=16; t<80; t++) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var t=0; t<80; t++) {\n      var s = Math.floor(t/20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = (H[0] + a) >>> 0;\n    H[1] = (H[1] + b) >>> 0;\n    H[2] = (H[2] + c) >>> 0;\n    H[3] = (H[3] + d) >>> 0;\n    H[4] = (H[4] + e) >>> 0;\n  }\n\n  return [\n    H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff,\n    H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff,\n    H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff,\n    H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff,\n    H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff\n  ];\n}\n\nmodule.exports = sha1;\n\n\n/***/ }),\n\n/***/ \"./node_modules/uuid/lib/v35.js\":\n/*!**************************************!*\\\n  !*** ./node_modules/uuid/lib/v35.js ***!\n  \\**************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_299044__) {\n\nvar bytesToUuid = __nested_webpack_require_299044__(/*! ./bytesToUuid */ \"./node_modules/uuid/lib/bytesToUuid.js\");\n\nfunction uuidToBytes(uuid) {\n  // Note: We assume we're being passed a valid uuid string\n  var bytes = [];\n  uuid.replace(/[a-fA-F0-9]{2}/g, function(hex) {\n    bytes.push(parseInt(hex, 16));\n  });\n\n  return bytes;\n}\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n  var bytes = new Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    bytes[i] = str.charCodeAt(i);\n  }\n  return bytes;\n}\n\nmodule.exports = function(name, version, hashfunc) {\n  var generateUUID = function(value, namespace, buf, offset) {\n    var off = buf && offset || 0;\n\n    if (typeof(value) == 'string') value = stringToBytes(value);\n    if (typeof(namespace) == 'string') namespace = uuidToBytes(namespace);\n\n    if (!Array.isArray(value)) throw TypeError('value must be an array of bytes');\n    if (!Array.isArray(namespace) || namespace.length !== 16) throw TypeError('namespace must be uuid string or an Array of 16 byte values');\n\n    // Per 4.3\n    var bytes = hashfunc(namespace.concat(value));\n    bytes[6] = (bytes[6] & 0x0f) | version;\n    bytes[8] = (bytes[8] & 0x3f) | 0x80;\n\n    if (buf) {\n      for (var idx = 0; idx < 16; ++idx) {\n        buf[off+idx] = bytes[idx];\n      }\n    }\n\n    return buf || bytesToUuid(bytes);\n  };\n\n  // Function#name is not settable on some platforms (#270)\n  try {\n    generateUUID.name = name;\n  } catch (err) {\n  }\n\n  // Pre-defined namespaces, per Appendix C\n  generateUUID.DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\n  generateUUID.URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\n\n  return generateUUID;\n};\n\n\n/***/ }),\n\n/***/ \"./node_modules/uuid/v5.js\":\n/*!*********************************!*\\\n  !*** ./node_modules/uuid/v5.js ***!\n  \\*********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __nested_webpack_require_300976__) {\n\nvar v35 = __nested_webpack_require_300976__(/*! ./lib/v35.js */ \"./node_modules/uuid/lib/v35.js\");\nvar sha1 = __nested_webpack_require_300976__(/*! ./lib/sha1 */ \"./node_modules/uuid/lib/sha1-browser.js\");\nmodule.exports = v35('v5', 0x50, sha1);\n\n\n/***/ }),\n\n/***/ \"./node_modules/vwo-sdk-log-messages/src/debug-messages.json\":\n/*!*******************************************************************!*\\\n  !*** ./node_modules/vwo-sdk-log-messages/src/debug-messages.json ***!\n  \\*******************************************************************/\n/*! exports provided: CONFIG_BATCH_EVENT_LIMIT_EXCEEDED, CONFIG_LOG_LEVEL_SET, CONFIG_CUSTOM_LOGGER_USED, CONFIG_DEVELOPMENT_MODE_STATUS, POLLING_SETTINGS_FILE_REGISTERED, SETTINGS_FILE_PROCESSED, IMPRESSION_FOR_TRACK_USER, IMPRESSION_FOR_TRACK_GOAL, IMPRESSION_FOR_PUSH, IMPRESSION_FOR_EVENT_ARCH_TRACK_USER, IMPRESSION_FOR_EVENT_ARCH_TRACK_GOAL, IMPRESSION_FOR_EVENT_ARCH_PUSH, EVENT_BATCH_BEFORE_FLUSHING, EVENT_BATCH_FLUSH, USER_STORAGE_SERVICE_NOT_CONFIGURED, USER_STORAGE_SERVICE_NO_STORED_DATA, VARIATION_RANGE_ALLOCATION, MEG_ELIGIBLE_CAMPAIGNS, SEGMENTATION_SKIPPED, SEGMENTATION_STATUS, WHITELISTING_SKIPPED, USER_UUID, USER_HASH_BUCKET_VALUE, USER_CAMPAIGN_BUCKET_VALUES, default */\n/***/ (function(module) {\n\nmodule.exports = JSON.parse(\"{\\\"CONFIG_BATCH_EVENT_LIMIT_EXCEEDED\\\":\\\"({file}): Impression event - {endPoint} failed due to exceeding payload size. Parameter eventsPerRequest in batchEvents config in launch API has value:{eventsPerRequest} for account ID:{accountId}. Please read the official documentation for knowing the size limits\\\",\\\"CONFIG_LOG_LEVEL_SET\\\":\\\"({file}): Log level set to {level}\\\",\\\"CONFIG_CUSTOM_LOGGER_USED\\\":\\\"({file}): Custom logger used\\\",\\\"CONFIG_DEVELOPMENT_MODE_STATUS\\\":\\\"({file}): DEVELOPMENT mode is ON. No tracking call will be made to VWO Server\\\",\\\"POLLING_SETTINGS_FILE_REGISTERED\\\":\\\"({file}): Polling of settings-file is registered with a periodic interval of {pollingInterval} ms\\\",\\\"SETTINGS_FILE_PROCESSED\\\":\\\"({file}): settings-file matches the schema, validated and properly processed for the Account ID:{accountId}\\\",\\\"IMPRESSION_FOR_TRACK_USER\\\":\\\"({file}): Impression built for tracking user - {properties}\\\",\\\"IMPRESSION_FOR_TRACK_GOAL\\\":\\\"({file}): Impression built for tracking goal - {properties}\\\",\\\"IMPRESSION_FOR_PUSH\\\":\\\"({file}): Impression built for pushing custom dimension - {properties}\\\",\\\"IMPRESSION_FOR_EVENT_ARCH_TRACK_USER\\\":\\\"({file}): Impression built for vwo_variationShown event for Account ID:{accountId}, User ID:{userId}, and Campaign ID:{campaignId}\\\",\\\"IMPRESSION_FOR_EVENT_ARCH_TRACK_GOAL\\\":\\\"({file}): Impression built for {goalName} event for Account ID:{accountId}, User ID:{userId}, and Campaign ID:{campaignId}\\\",\\\"IMPRESSION_FOR_EVENT_ARCH_PUSH\\\":\\\"({file}): Impression built for visitor-property:{property} for Account ID:{accountId} and User ID:{userId}\\\",\\\"EVENT_BATCH_BEFORE_FLUSHING\\\":\\\"({file}): flushing event queue {manually} having {length} events for Account ID:{accountId}. {timer}\\\",\\\"EVENT_BATCH_FLUSH\\\":\\\"{{file}}: Manually flushing batch events for Account ID:{accountId} having {queueLength} events\\\",\\\"USER_STORAGE_SERVICE_NOT_CONFIGURED\\\":\\\"({file}): User Storage Service is not configured to get/set the data\\\",\\\"USER_STORAGE_SERVICE_NO_STORED_DATA\\\":\\\"({file}): No stored variation for User ID:{userId} for Campaign:{campaignKey} found in User Storage Service\\\",\\\"VARIATION_RANGE_ALLOCATION\\\":\\\"({file}): Variation:{variationName} of Campaign:{campaignKey} having weight:{variationWeight} got bucketing range: ( {start} - {end} )\\\",\\\"MEG_ELIGIBLE_CAMPAIGNS\\\":\\\"({file}): Campaigns: {eligibleCampaignKeys} are eligible, {inEligibleText} are ineligible from the Group:{groupName} for the User ID:{userId}\\\",\\\"SEGMENTATION_SKIPPED\\\":\\\"({file}): Segmentation is not used for Campaign:{campaignKey}, hence skipping evaluating segmentation{variation} for User ID:{userId}\\\",\\\"SEGMENTATION_STATUS\\\":\\\"({file}): User ID:{userId} for Campaign:{campaignKey} with variables:{customVariables} {status} {segmentationType} {variation}\\\",\\\"WHITELISTING_SKIPPED\\\":\\\"({file}): Whitelisting is not used for Campaign:{campaignKey}, hence skipping evaluating whitelisting for User ID:{userId}\\\",\\\"USER_UUID\\\":\\\"({file}): VWO UUID generated for Account Id:{accountId} and User ID:{userId} is {uuid}\\\",\\\"USER_HASH_BUCKET_VALUE\\\":\\\"({file}): User ID:{userId} having hash:{hashValue} got bucketValue:{bucketValue}\\\",\\\"USER_CAMPAIGN_BUCKET_VALUES\\\":\\\"({file}): User ID:{userId} for Campaign:{campaignKey} having percent-traffic:{percentTraffic} got hash-value:{hashValue} and bucket-value:{bucketValue}\\\"}\");\n\n/***/ }),\n\n/***/ \"./node_modules/vwo-sdk-log-messages/src/error-messages.json\":\n/*!*******************************************************************!*\\\n  !*** ./node_modules/vwo-sdk-log-messages/src/error-messages.json ***!\n  \\*******************************************************************/\n/*! exports provided: CONFIG_PARAMETER_INVALID, CONFIG_POLLING_SDK_KEY_NOT_PROVIVED, CONFIG_CORRUPTED, SETTINGS_FILE_INVALID, SETTINGS_FILE_CORRUPTED, BATCH_QUEUE_EMPTY, API_HAS_CORRUPTED_SETTINGS_FILE, API_BAD_PARAMETERS, API_NOT_APPLICABLE, USER_ID_INVALID, CAMPAIGN_NOT_FOUND_FOR_GOAL, POLLING_FAILED, SEGMENTATION_REGEX_CREATION_FAILED, SEGMENTATION_ERROR, USER_STORAGE_SERVICE_GET_FAILED, USER_STORAGE_SERVICE_SET_FAILED, IMPRESSION_FAILED, TAG_KEY_LENGTH_EXCEEDED, TAG_VALUE_LENGTH_EXCEEDED, TRACK_API_GOAL_NOT_FOUND, TRACK_API_REVENUE_NOT_PASSED_FOR_REVENUE_GOAL, UNABLE_TO_CAST_VALUE, VARIABLE_NOT_FOUND, default */\n/***/ (function(module) {\n\nmodule.exports = JSON.parse(\"{\\\"CONFIG_PARAMETER_INVALID\\\":\\\"({file}): {parameter} paased in {api} API is not correct. It should be of type:{type}\\\",\\\"CONFIG_POLLING_SDK_KEY_NOT_PROVIVED\\\":\\\"({file}): SDK Key is required along with pollingInterval to poll the settings-file\\\",\\\"CONFIG_CORRUPTED\\\":\\\"({file}): Config passed to {api} API is invalid. Please refer developer docs\\\",\\\"SETTINGS_FILE_INVALID\\\":\\\"({file}): Settings file passed while instantiating SDK instance is invalid\\\",\\\"SETTINGS_FILE_CORRUPTED\\\":\\\"({file}): Fetched settings-file doesn't match the desired schema. Please contact VWO Support for help\\\",\\\"BATCH_QUEUE_EMPTY\\\":\\\"{{file}}: No batch queue present for account:{accountId} when calling flushEvents API. Check batchEvents config in launch API\\\",\\\"API_HAS_CORRUPTED_SETTINGS_FILE\\\":\\\"({file}): {api} API has corrupted settings-file. Please check or reach out to VWO support\\\",\\\"API_BAD_PARAMETERS\\\":\\\"({file}): {api} API got bad parameters. Refer the developer docs\\\",\\\"API_NOT_APPLICABLE\\\":\\\"({file}): {api} API is not valid for Campaign:{campaignKey} having type:{campaignType} for User ID:{userId}\\\",\\\"USER_ID_INVALID\\\":\\\"({file}): Invalid User Id:{userId} passed to the API\\\",\\\"CAMPAIGN_NOT_FOUND_FOR_GOAL\\\":\\\"({file}): No such campaign found corresponding to goalIdentifier:{goalIdentifier}. Please verify from VWO app\\\",\\\"POLLING_FAILED\\\":\\\"({file}): Fetching of settings-file failed via polling for the accountId:{accountId}\\\",\\\"SEGMENTATION_REGEX_CREATION_FAILED\\\":\\\"({file}): Regular expression:{regex} used for targeting cound not be evaluated\\\",\\\"SEGMENTATION_ERROR\\\":\\\"({file}): Could not segment the User ID:{userId} for Campaign:{campaignKey}{variation} with customVariables:{customVariables}. Error message: {err}\\\",\\\"USER_STORAGE_SERVICE_GET_FAILED\\\":\\\"({file}): Getting data from User Storage Service failed for User ID:{userId}. Error: {error}\\\",\\\"USER_STORAGE_SERVICE_SET_FAILED\\\":\\\"({file}): Saving data into User Storage Service failed for User ID:{userId}. Error: {error}\\\",\\\"IMPRESSION_FAILED\\\":\\\"({file}): Impression event could not be sent to VWO - {endPoint}. Reason: {err}\\\",\\\"TAG_KEY_LENGTH_EXCEEDED\\\":\\\"({file}): Length of custom dimension key:{tagKey} for User Id:{userId} can not be greater than 255\\\",\\\"TAG_VALUE_LENGTH_EXCEEDED\\\":\\\"({file}): Length of custom dimension value:{tagValue} of tagKey:{tagKey} for User Id:{userId} can not be greater than 255\\\",\\\"TRACK_API_GOAL_NOT_FOUND\\\":\\\"({file}): Goal:{goalIdentifier} not found for Campaign:{campaignKey} and User Id:{userId}\\\",\\\"TRACK_API_REVENUE_NOT_PASSED_FOR_REVENUE_GOAL\\\":\\\"({file}): Revenue value should be passed for revenue goal:{goalIdentifier} for Campaign:{campaignKey} and User Id:{userId}\\\",\\\"UNABLE_TO_CAST_VALUE\\\":\\\"({file}): Unable to cast value:{variableValue} to type:{variableType}, returning null\\\",\\\"VARIABLE_NOT_FOUND\\\":\\\"({file}): Variable:{variableKey} for User ID:{userId} is not found in settings-file, returning null\\\"}\");\n\n/***/ }),\n\n/***/ \"./node_modules/vwo-sdk-log-messages/src/info-messages.json\":\n/*!******************************************************************!*\\\n  !*** ./node_modules/vwo-sdk-log-messages/src/info-messages.json ***!\n  \\******************************************************************/\n/*! exports provided: CONFIG_VALID, CONFIG_PARAMETER_USED, CONFIG_RETURN_PROMISE, SDK_INITIALIZED, POLLING_SUCCESS, POLLING_SETTINGS_FILE_UPDATED, POLLING_SETTINGS_FILE_NOT_UPDATED, DECISION_NO_VARIATION_ALLOTED, EVENT_BATCH_DEFAULTS, EVENT_QUEUE, EVENT_BATCH_After_FLUSHING, CAMPAIGN_NOT_ACTIVATED, CAMPAIGN_USER_ALREADY_TRACKED, CAMPAIGN_GOAL_ALREADY_TRACKED, GOT_STORED_VARIATION, GETTING_DATA_USER_STORAGE_SERVICE, SETTING_DATA_USER_STORAGE_SERVICE, IMPRESSION_SUCCESS, IMPRESSION_SUCCESS_FOR_EVENT_ARCH, IMPRESSION_BATCH_SUCCESS, IMPRESSION_BATCH_FAILED, MEG_ELIGIBLE_CAMPAIGNS, OTHER_CAMPAIGN_SATISFIES_WHITELISTING_STORAGE, SEGMENTATION_STATUS, MEG_CALLED_CAMPAIGN_NOT_WINNER, MEG_GOT_WINNER_CAMPAIGN, FEATURE_STATUS, FEATURE_VARIABLE_VALUE, FEATURE_VARIABLE_DEFAULT_VALUE, USER_NOT_PART_OF_CAMPAIGN, USER_VARIATION_STATUS, USER_CAMPAIGN_ELIGIBILITY, USER_VARIATION_ALLOCATION_STATUS, OPT_OUT_API_CALLED, API_NOT_ENABLED, default */\n/***/ (function(module) {\n\nmodule.exports = JSON.parse(\"{\\\"CONFIG_VALID\\\":\\\"({file}): SDK configuration and account settings-file are valid\\\",\\\"CONFIG_PARAMETER_USED\\\":\\\"({file}): {parameter} paased in launch API having type:{type}\\\",\\\"CONFIG_RETURN_PROMISE\\\":\\\"({file}): {method} API returns a promise as returnPromiseFor is set to true for this API\\\",\\\"SDK_INITIALIZED\\\":\\\"({file}): SDK is properly initialzed with the passed configuration\\\",\\\"POLLING_SUCCESS\\\":\\\"({file}): settings-file fetched successfully via polling for the accountId:{accountId}\\\",\\\"POLLING_SETTINGS_FILE_UPDATED\\\":\\\"({file}): SDK instance is updated with the latest settings-file for the accountId:{accountId}\\\",\\\"POLLING_SETTINGS_FILE_NOT_UPDATED\\\":\\\"{{file}}: settings-file fetched via polling is same as earlier fetched settings\\\",\\\"DECISION_NO_VARIATION_ALLOTED\\\":\\\"({file}): Variation was not assigned to the User ID:{userId} for Campaign:{campaignKey}\\\",\\\"EVENT_BATCH_DEFAULTS\\\":\\\"({file}): {parameter} not passed in SDK configuration, setting it default to {defaultValue}\\\",\\\"EVENT_QUEUE\\\":\\\"({file}): Event with payload:{event} pushed to the {queueType} queue\\\",\\\"EVENT_BATCH_After_FLUSHING\\\":\\\"({file}): Event queue having {length} events has been flushed {manually}\\\",\\\"CAMPAIGN_NOT_ACTIVATED\\\":\\\"({file}): Activate the campaign:{campaignKey} first for User ID:{userId} to {reason}\\\",\\\"CAMPAIGN_USER_ALREADY_TRACKED\\\":\\\"({file}): User ID:{userId} for Campaign:{campaignKey} has already been tracked earlier for \\\\\\\"{api}\\\\\\\" API. No tracking call is made to VWO server\\\",\\\"CAMPAIGN_GOAL_ALREADY_TRACKED\\\":\\\"({file}): Goal:{goalIdentifier} of Campaign:{campaignKey} for User ID:{userId} has already been tracked earlier. No tracking call is made to VWO server\\\",\\\"GOT_STORED_VARIATION\\\":\\\"({file}): Got stored variation from User Storage Service for User ID:{userId} for Campaign:{campaignKey} as Variation:{variationName}\\\",\\\"GETTING_DATA_USER_STORAGE_SERVICE\\\":\\\"({file}): Read data from User Storage Service for User ID:{userId} and Campaign:{campaignKey}\\\",\\\"SETTING_DATA_USER_STORAGE_SERVICE\\\":\\\"({file}): Set data into User Storage Service for User ID:{userId} and Campaign:{campaignKey}\\\",\\\"IMPRESSION_SUCCESS\\\":\\\"({file}): Impression event - {endPoint} was successfully received by VWO having main keys: Account ID:{accountId}, {mainKeys}\\\",\\\"IMPRESSION_SUCCESS_FOR_EVENT_ARCH\\\":\\\"({file}): Impression for {event} - {endPoint} was successfully received by VWO for Account ID:{accountId}\\\",\\\"IMPRESSION_BATCH_SUCCESS\\\":\\\"({file}): Impression event - {endPoint} was successfully received by VWO having Account ID:{accountId}\\\",\\\"IMPRESSION_BATCH_FAILED\\\":\\\"({file}): Batch events couldn\\\\\\\"t be received by VWO. Calling Flush Callback with error and data\\\",\\\"MEG_ELIGIBLE_CAMPAIGNS\\\":\\\"({file}): Got {noOfEligibleCampaigns} eligible winners out of {noOfGroupCampaigns} campaigns from the Group:{groupName} and for User ID:{userId}\\\",\\\"OTHER_CAMPAIGN_SATISFIES_WHITELISTING_STORAGE\\\":\\\"({file}): Campaign:{campaignKey} of Group:{groupName} satisfies {type} for User ID:{userId}\\\",\\\"SEGMENTATION_STATUS\\\":\\\"({file}): User ID:{userId} for Campaign:{campaignKey} with variables:{customVariables} {status} {segmentationType} {variation}\\\",\\\"MEG_CALLED_CAMPAIGN_NOT_WINNER\\\":\\\"({file}): Campaign:{campaignKey} does not qualify from the mutually exclusive group:{groupName} for User ID:{userId}\\\",\\\"MEG_GOT_WINNER_CAMPAIGN\\\":\\\"({file}): Campaign:{campaignKey} is selected from the mutually exclusive group:{groupName} for the User ID:{userId}\\\",\\\"FEATURE_STATUS\\\":\\\"({file}): Campaign:{campaignKey} is {status} for user ID:{userId}\\\",\\\"FEATURE_VARIABLE_VALUE\\\":\\\"({file}): For User ID:{userId}, value for variable:{variableKey} of feature:{campaignKey} is:{variableValue}\\\",\\\"FEATURE_VARIABLE_DEFAULT_VALUE\\\":\\\"({file}): Feature is not enabled for variation:{variationName}. Returning default value for the variable:{variableKey}\\\",\\\"USER_NOT_PART_OF_CAMPAIGN\\\":\\\"({file}): User ID:{userId} did not qualify for Campaign:{campaignKey}\\\",\\\"USER_VARIATION_STATUS\\\":\\\"({file}): User ID:{userId} for Campaign:{campaignKey} {status}\\\",\\\"USER_CAMPAIGN_ELIGIBILITY\\\":\\\"({file}): User ID:{userId} for Campaign:{campaignKey} is {status} to become part of campaign\\\",\\\"USER_VARIATION_ALLOCATION_STATUS\\\":\\\"({file}): User ID:{userId} for Campaign:{campaignKey} {status}\\\",\\\"OPT_OUT_API_CALLED\\\":\\\"({file}): You have opted out for not tracking i.e. all API calls will stop functioning and will simply early return\\\",\\\"API_NOT_ENABLED\\\":\\\"({file}): {api} API is disabled as you opted out for tracking. Reinitialize the SDK to enable the normal functioning of all APIs.\\\"}\");\n\n/***/ }),\n\n/***/ \"./node_modules/vwo-sdk-log-messages/src/warning-messages.json\":\n/*!*********************************************************************!*\\\n  !*** ./node_modules/vwo-sdk-log-messages/src/warning-messages.json ***!\n  \\*********************************************************************/\n/*! exports provided: CAMPAIGN_NOT_RUNNING, CAMPAIGN_NOT_ACTIVATED, default */\n/***/ (function(module) {\n\nmodule.exports = JSON.parse(\"{\\\"CAMPAIGN_NOT_RUNNING\\\":\\\"({file}): {api} API called with Campaign:{campaignKey} but the campaign is not RUNNING. Please verify from VWO App\\\",\\\"CAMPAIGN_NOT_ACTIVATED\\\":\\\"({file}): Campaign:{campaignKey} for User ID:{userId} is not yet activated for API:{api}. Use activate API to activate A/B test or isFeatureEnabled API to activate Feature Test\\\"}\");\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=vwo-javascript-sdk.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdndvLW5vZGUtc2RrL2Rpc3QvdndvLWphdmFzY3JpcHQtc2RrLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQXlEO0FBQzdEO0FBQ0E7QUFDQSxNQUFNLEVBT3VCO0FBQzdCLENBQUM7QUFDRCxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsK0JBQW1CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLCtCQUFtQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0JBQW1CO0FBQzdCO0FBQ0E7QUFDQSxVQUFVLCtCQUFtQjtBQUM3QjtBQUNBO0FBQ0EsVUFBVSwrQkFBbUI7QUFDN0IsZUFBZSwrQkFBbUI7QUFDbEMsbURBQW1ELCtCQUErQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0JBQW1CO0FBQzdCO0FBQ0EsaUVBQWlFLGlCQUFpQjtBQUNsRjtBQUNBLDBEQUEwRCxhQUFhO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQkFBbUI7QUFDN0IsZ0NBQWdDLCtCQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUFtQjtBQUM5QixrREFBa0QsZ0NBQWdDO0FBQ2xGLDBFQUEwRSwrQkFBbUIsNEJBQTRCLG9CQUFvQjtBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0JBQW1CO0FBQzdCO0FBQ0Esb0NBQW9DLDRCQUE0QjtBQUNoRSwwQ0FBMEM7QUFD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QUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxpQ0FBbUI7O0FBRXBEOztBQUVBLDRDQUE0QyxrQkFBa0Isa0NBQWtDLG9FQUFvRSxLQUFLLE9BQU8sb0JBQW9COztBQUVwTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUNBQW1COztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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aEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsOERBQThEO0FBQzlEO0FBQ0EsMEVBQTBFO0FBQzFFO0FBQ0EsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFD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YUFBYSxhQUFhLFFBQVEsOEJBQThCLElBQUksMkZBQTJGOztBQUU5WCxPQUFPOztBQUVQLFVBQVU7QUFDVixDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3Z3by1ub2RlLXNkay9kaXN0L3Z3by1qYXZhc2NyaXB0LXNkay5qcz9jYWRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogdndvLWphdmFzY3JpcHQtc2RrIC0gdjEuMzIuM1xuICogVVJMIC0gaHR0cHM6Ly9naXRodWIuY29tL3dpbmdpZnkvdndvLW5vZGUtc2RrXG4gKiBcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqIFxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICogXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICogXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogXG4gKiBEZXBlbmRlbmNpZXMgdXNlZCAtIFxuICogIDEuIG11cm11cmhhc2ggLSBeMC4wLjJcbiAqICAyLiBzdXBlcnN0cnVjdCAtIF4wLjEwLjEyXG4gKiAgMy4gdXVpZCAtIF4zLjMuMlxuICogIDQuIHZ3by1zZGstbG9nLW1lc3NhZ2VzIC0gaHR0cHM6Ly9naXRodWIuY29tL3dpbmdpZnkvdndvLXNkay1sb2ctbWVzc2FnZXMuZ2l0I3YwLjEuMFxuICovXG4oZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHQvLyBDb21tb25KUzJcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHQvLyBBTURcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0Ly8gQ29tbW9uSlNcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInZ3b1Nka1wiXSA9IGZhY3RvcnkoKTtcblx0Ly8gUm9vdFxuXHRlbHNlXG5cdFx0cm9vdFtcInZ3b1Nka1wiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4vKioqKioqLyBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vKioqKioqLyBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbi8qKioqKiovIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuLyoqKioqKi8gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbi8qKioqKiovIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuLyoqKioqKi8gXHRcdHJldHVybiBucztcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL2xpYi9pbmRleC5qc1wiKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKHtcblxuLyoqKi8gXCIuL2xpYi9WV08uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL1ZXTy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIGFwaSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYXBpICovIFwiLi9saWIvYXBpL2luZGV4LmpzXCIpO1xuXG52YXIgRmlsZU5hbWVFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBBcGlFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbnVtcy9BcGlFbnVtICovIFwiLi9saWIvZW51bXMvQXBpRW51bS5qc1wiKTtcblxudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMvRGF0YVR5cGVVdGlsICovIFwiLi9saWIvdXRpbHMvRGF0YVR5cGVVdGlsLmpzXCIpO1xuXG52YXIgRnVuY3Rpb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91dGlscy9GdW5jdGlvblV0aWwgKi8gXCIuL2xpYi91dGlscy9GdW5jdGlvblV0aWwuanNcIik7XG5cbnZhciBFdmVudFF1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zZXJ2aWNlcy9FdmVudFF1ZXVlICovIFwiLi9saWIvc2VydmljZXMvRXZlbnRRdWV1ZS5qc1wiKTtcblxudmFyIFNldHRpbmdzRmlsZVNlcnZpY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NlcnZpY2VzL1NldHRpbmdzRmlsZU1hbmFnZXIgKi8gXCIuL2xpYi9zZXJ2aWNlcy9TZXR0aW5nc0ZpbGVNYW5hZ2VyLmpzXCIpO1xuXG52YXIgbG9nZ2luZyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBIb29rc01hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NlcnZpY2VzL0hvb2tzTWFuYWdlciAqLyBcIi4vbGliL3NlcnZpY2VzL0hvb2tzTWFuYWdlci5qc1wiKTtcblxudmFyIFVybFNlcnZpY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NlcnZpY2VzL1VybFNlcnZpY2UgKi8gXCIuL2xpYi9zZXJ2aWNlcy9VcmxTZXJ2aWNlLmpzXCIpO1xuXG52YXIgVXNhZ2VTdGF0cyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc2VydmljZXMvVXNhZ2VTdGF0cyAqLyBcIi4vbGliL3NlcnZpY2VzL1VzYWdlU3RhdHMuanNcIik7XG5cbnZhciBCYXRjaEV2ZW50c0Rpc3BhdGNoZXI7XG52YXIgY3VzdG9tRXZlbnRVdGlsO1xudmFyIEJhdGNoRXZlbnRzUXVldWU7XG5cbmlmIChmYWxzZSkge31cblxudmFyIExvZ0xldmVsRW51bSA9IGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5WV087XG5cbnZhciBWV08gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICAvLyBTZXR0aW5nIHZhcmlvdXMgc2VydmljZXMgb24gdGhlIGluc3RhbmNlIHRvIGJlIGFjY2Vzc2libGUgYnkgaXRzIG1lbWJlciBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gVldPKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWV08pO1xuXG4gICAgdGhpcy5nZXRWYXJpYXRpb24gPSB0aGlzLmdldFZhcmlhdGlvbk5hbWU7IC8vIHRvIGJlIGJhY2t3YXJkIGNvbXBhdGlibGVcblxuICAgIHRoaXMudXNlclN0b3JhZ2VTZXJ2aWNlID0gY29uZmlnLnVzZXJTdG9yYWdlU2VydmljZTtcbiAgICB0aGlzLmxvZ2dlciA9IGNvbmZpZy5sb2dnZXI7XG4gICAgdGhpcy5yZXR1cm5Qcm9taXNlRm9yID0gY29uZmlnLnJldHVyblByb21pc2VGb3I7XG4gICAgdGhpcy5vcHRPdXQgPSBmYWxzZTtcbiAgICB2YXIgc2V0dGluZ3NGaWxlTWFuYWdlciA9IG5ldyBTZXR0aW5nc0ZpbGVTZXJ2aWNlKGNvbmZpZyk7IC8vIFZhbGlkYXRlIHRoZSBjb25maWcgZmlsZSBpLmUuIGNoZWNrIGlmIHJlcXVpcmVkIGZpZWxkcyBjb250YWluIGFwcHJvcHJpYXRlIGRhdGFcblxuICAgIGlmICghc2V0dGluZ3NGaWxlTWFuYWdlci5pc1NldHRpbmdzRmlsZVZhbGlkKCkpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLlNFVFRJTkdTX0ZJTEVfSU5WQUxJRCwge1xuICAgICAgICBmaWxlOiBmaWxlXG4gICAgICB9KSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkNPTkZJR19WQUxJRCwge1xuICAgICAgZmlsZTogZmlsZVxuICAgIH0pKTsgLy8gSW5pdGlhbGl6ZSBIb29rcyBtYW5hZ2VyIHNvIHRoYXQgY2FsbGJhY2tzIGNhbiBiZSBpbnZva2VkXG5cbiAgICBIb29rc01hbmFnZXIuaW5pdChjb25maWcpOyAvLyBTZXR1cCBldmVudCBxdXF1ZSBmb3Igc2VuZGluZyBpbXByZXNzaW9ucyB0byBWV08gc2VydmVyXG5cbiAgICB0aGlzLmV2ZW50UXVldWUgPSBuZXcgRXZlbnRRdWV1ZSgpO1xuICAgIHRoaXMudXNhZ2VTdGF0cyA9IG5ldyBVc2FnZVN0YXRzKCk7XG4gICAgdGhpcy5TZXR0aW5nc0ZpbGVNYW5hZ2VyID0gc2V0dGluZ3NGaWxlTWFuYWdlcjtcbiAgICBzZXR0aW5nc0ZpbGVNYW5hZ2VyLmNoZWNrQW5kUG9sbCgpOyAvLyBDaGVja3MgaWYgcG9sbGluZ0ludGVydmFsIGlzIHBhc3NlZCB0aGVuIHN0YXJ0cyBwb2xsaW5nIHNldHRpbmdzRmlsZVxuXG4gICAgaWYgKCFjb25maWcuaXNEZXZlbG9wbWVudE1vZGUpIHtcbiAgICAgIHRoaXMudXNhZ2VTdGF0cy5jb2xsZWN0VXNhZ2VTdGF0cyhzZXR0aW5nc0ZpbGVNYW5hZ2VyLmdldENvbmZpZygpKTtcbiAgICB9IC8vIE9ubHkgZm9yIE5vZGUuanMgU0RLXG5cblxuICAgIGlmIChmYWxzZSkgeyB2YXIgc2RrS2V5LCBhY2NvdW50SWQ7IH0gLy8gUHJvY2VzcyBzZXR0aW5nc0ZpbGUgZm9yIHZhcmlvdXMgdGhpbmdzLiBGb3IgZWc6IGFzc2lnbiBidWNrZXQgcmFuZ2UgdG8gdmFyaWF0aW9uLCBldGMuXG5cblxuICAgIHRoaXMuU2V0dGluZ3NGaWxlTWFuYWdlci5wcm9jZXNzU2V0dGluZ3NGaWxlKCk7XG4gICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLlNES19JTklUSUFMSVpFRCwge1xuICAgICAgZmlsZTogZmlsZVxuICAgIH0pKTtcbiAgICB0aGlzLlVybFNlcnZpY2UgPSBVcmxTZXJ2aWNlLmluaXQoY29uZmlnLnNldHRpbmdzRmlsZSk7XG4gIH0gLy8gUFVCTElDIE1FVEhPRFNcblxuICAvKipcbiAgICogVGhpcyBBUEkgbWV0aG9kOiBHZXRzIHRoZSB2YXJpYXRpb24gYXNzaWduZWQgZm9yIHRoZSB1c2VyIGZvciB0aGUgY2FtcGFpZ24gYW5kIHNlbmQgdGhlIG1ldHJpY3MgdG8gVldPIHNlcnZlclxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXkgICAgICAgdW5pcXVlIGNhbXBhaWduIGtleSBzcGVjaWZpZWQgaW4gVldPIGFwcFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkICAgICAgICAgICAgSUQgYXNzaWduZWQgdG8gYSB1c2VyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zICAgICAgICAgICBvcHRpb25hbCBwYXJhbXMgLSBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlc1xuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH0gICAgICAgICAgICAgSWYgdmFyaWF0aW9uIGlzIGFzc2lnbmVkIHRoZW4gdmFyaWF0aW9uLW5hbWUgb3RoZXJ3aXNlIG51bGwgaW4gY2FzZSBvZiB1c2VyIG5vdCBiZWNvbWluZyBwYXJ0XG4gICAqL1xuXG5cbiAgX2NyZWF0ZUNsYXNzKFZXTywgW3tcbiAgICBrZXk6IFwiYWN0aXZhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWN0aXZhdGUoY2FtcGFpZ25LZXksIHVzZXJJZCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOyAvLyBDaGVjayBpZiByZXR1cm5Qcm9taXNlRm9yIGlzIHByb3ZpZGVkLiBJZiB5ZXMsIHJldHVybiBhIHByb21pc2UgaW5zdGVhZCBvZiB2YWx1ZVxuICAgICAgICAvLyBpLmUuIHdhaXQgdGlsbCB0aGUgbmV0d29yayBjYWxsIGlzIG5vdCBzdWNjZXNzZnVsXG5cbiAgICAgICAgaWYgKHNlbGYucmV0dXJuUHJvbWlzZUZvciAmJiAoc2VsZi5yZXR1cm5Qcm9taXNlRm9yLmFjdGl2YXRlIHx8IHNlbGYucmV0dXJuUHJvbWlzZUZvci5hbGwpKSB7XG4gICAgICAgICAgc2VsZi5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkNPTkZJR19SRVRVUk5fUFJPTUlTRSwge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIG1ldGhvZDogQXBpRW51bS5BQ1RJVkFURVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpczIub3B0T3V0KSB7XG4gICAgICAgICAgICAgIF90aGlzMi5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkFQSV9OT1RfRU5BQkxFRCwge1xuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICAgICAgYXBpOiBBcGlFbnVtLkFDVElWQVRFXG4gICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHZhcmlhdGlvbk5hbWU7XG5cbiAgICAgICAgICAgICAgb3B0aW9ucy5yZXNwb25zZUNhbGxiYWNrID0gZnVuY3Rpb24gKF9lcnJvciwgX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh2YXJpYXRpb25OYW1lKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICB2YXJpYXRpb25OYW1lID0gYXBpLmFjdGl2YXRlKHNlbGYsIGNhbXBhaWduS2V5LCB1c2VySWQsIG9wdGlvbnMpOyAvLyBJZiB3ZSBnZXQgbnVsbCBmcm9tIHRoZSBBUEkgaS5lLiBubyB0cmFja2luZyBjYWxsIHdhcyBzZW50XG4gICAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgcmVzcHBvbnNlQ2FsbGJhY2sgd2lsbCBub3QgYmUgZmlyZWQgYW5kIGhlbmNlIHdlIGhhdmUgdG8gbWFudWFsbHkgcmVzb2x2ZSB0aGUgcHJvbWlzZVxuXG4gICAgICAgICAgICAgIGlmICghdmFyaWF0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodmFyaWF0aW9uTmFtZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoRGF0YVR5cGVVdGlsLmlzT2JqZWN0KHZhcmlhdGlvbk5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh2YXJpYXRpb25OYW1lLnZhcmlhdGlvbk5hbWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRPdXQpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuQVBJX05PVF9FTkFCTEVELCB7XG4gICAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgICAgYXBpOiBBcGlFbnVtLkFDVElWQVRFXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFwaVJlc3BvbnNlID0gYXBpLmFjdGl2YXRlKHNlbGYsIGNhbXBhaWduS2V5LCB1c2VySWQsIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChEYXRhVHlwZVV0aWwuaXNPYmplY3QoYXBpUmVzcG9uc2UpKSB7XG4gICAgICAgICAgcmV0dXJuIGFwaVJlc3BvbnNlLnZhcmlhdGlvbk5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXBpUmVzcG9uc2U7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBBUEkgbWV0aG9kOiBHZXRzIHRoZSB2YXJpYXRpb24gYXNzaWduZWQgZm9yIHRoZSB1c2VyIGZvciB0aGUgY2FtcGFpZ25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbktleSAgICAgICB1bmlxdWUgY2FtcGFpZ24ga2V5IHNwZWNpZmllZCBpbiBWV08gYXBwXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCAgICAgICAgICAgIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zICAgICAgICAgICBvcHRpb25hbCBwYXJhbXMgLSBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlc1xuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfG51bGx9ICAgICAgICAgICAgIElmIHZhcmlhdGlvbiBpcyBhc3NpZ25lZCB0aGVuIHZhcmlhdGlvbi1uYW1lIG90aGVyd2lzZSBudWxsIGluIGNhc2Ugb2YgdXNlciBub3QgYmVjb21pbmcgcGFydFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VmFyaWF0aW9uTmFtZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYXJpYXRpb25OYW1lKGNhbXBhaWduS2V5LCB1c2VySWQpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpczsgLy8gQ2hlY2sgaWYgcmV0dXJuUHJvbWlzZUZvciBpcyBwcm92aWRlZC4gSWYgeWVzLCByZXR1cm4gYSBwcm9taXNlIGluc3RlYWQgb2YgdmFsdWVcblxuICAgICAgICBpZiAoc2VsZi5yZXR1cm5Qcm9taXNlRm9yICYmIChzZWxmLnJldHVyblByb21pc2VGb3IuZ2V0VmFyaWF0aW9uTmFtZSB8fCBzZWxmLnJldHVyblByb21pc2VGb3IuYWxsKSkge1xuICAgICAgICAgIHNlbGYubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5DT05GSUdfUkVUVVJOX1BST01JU0UsIHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICBtZXRob2Q6IEFwaUVudW0uR0VUX1ZBUklBVElPTl9OQU1FXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgaWYgKF90aGlzMy5vcHRPdXQpIHtcbiAgICAgICAgICAgICAgX3RoaXMzLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuQVBJX05PVF9FTkFCTEVELCB7XG4gICAgICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgICAgICBhcGk6IEFwaUVudW0uR0VUX1ZBUklBVElPTl9OQU1FXG4gICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gc2luY2UgdGhpcyBBUEkgZG9lcyBub3Qgc2VuZCBhbnkgYXN5bmMgY2FsbCwgd2UgY2FuIHNpbXBseSByZXNvbHZlIHRoZSByZXR1cm5lZCB2YWx1ZVxuICAgICAgICAgICAgICByZXNvbHZlKGFwaS5nZXRWYXJpYXRpb24oc2VsZiwgY2FtcGFpZ25LZXksIHVzZXJJZCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0T3V0KSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkFQSV9OT1RfRU5BQkxFRCwge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIGFwaTogQXBpRW51bS5HRVRfVkFSSUFUSU9OX05BTUVcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXBpLmdldFZhcmlhdGlvbihzZWxmLCBjYW1wYWlnbktleSwgdXNlcklkLCBvcHRpb25zKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIEFQSSBtZXRob2Q6IE1hcmtzIHRoZSBjb252ZXJzaW9uIG9mIHRoZSBjYW1wYWlnbiBmb3IgYSBwYXJ0aWN1bGFyIGdvYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nL0FycmF5PHN0cmluZz4vbnVsbC91bmRlZmluZWR9IGNhbXBhaWduU3BlY2lmaWVyIGNhbXBhaWduIGtleXMgdG8gdHJhY2sgICAgICAgICAgIHVuaXF1ZSBjYW1wYWlnblNwZWNpZmllclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgICAgICAgICAgICAgICAgSUQgYXNzaWduZWQgdG8gYSB1c2VyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGdvYWxJZGVudGlmaWVyICAgICAgICAgdW5pcXVlIGNhbXBhaWduJ3MgZ29hbCBpZGVudGlmaWVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICBvcHRpb25hbCBwYXJhbXMgLSBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgcmV2ZW51ZVZhbHVlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ0cmFja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFjayhjYW1wYWlnblNwZWNpZmllciwgdXNlcklkLCBnb2FsSWRlbnRpZmllcikge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOyAvLyBDaGVjayBpZiByZXR1cm5Qcm9taXNlRm9yIGlzIHByb3ZpZGVkLiBJZiB5ZXMsIHJldHVybiBhIHByb21pc2UgaW5zdGVhZCBvZiB2YWx1ZVxuICAgICAgICAvLyBpLmUuIHdhaXQgdGlsbCB0aGUgbmV0d29yayBjYWxsIGlzIG5vdCBzdWNjZXNzZnVsXG5cbiAgICAgICAgaWYgKHNlbGYucmV0dXJuUHJvbWlzZUZvciAmJiAoc2VsZi5yZXR1cm5Qcm9taXNlRm9yLnRyYWNrIHx8IHNlbGYucmV0dXJuUHJvbWlzZUZvci5hbGwpKSB7XG4gICAgICAgICAgc2VsZi5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkNPTkZJR19SRVRVUk5fUFJPTUlTRSwge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIG1ldGhvZDogQXBpRW51bS5UUkFDS1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpczQub3B0T3V0KSB7XG4gICAgICAgICAgICAgIF90aGlzNC5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkFQSV9OT1RfRU5BQkxFRCwge1xuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICAgICAgYXBpOiBBcGlFbnVtLlRSQUNLXG4gICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHRyYWNrUmVzcG9uc2U7XG4gICAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcblxuICAgICAgICAgICAgICBvcHRpb25zLnJlc3BvbnNlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoX2Vycm9yLCBfcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb3VudGVyICs9IDE7IC8vIEluIGNhc2Ugb2YgZ2xvYmFsIGdvYWxzLCB3aGVuIGFsbCBjYW1wYWlnbnMgYXJlIHRyYWNrZWQsIHRoZW4gb25seSByZXNvbHZlXG5cbiAgICAgICAgICAgICAgICBpZiAoY291bnRlciA9PT0gRnVuY3Rpb25VdGlsLm9iamVjdFZhbHVlcyh0cmFja1Jlc3BvbnNlKS5maWx0ZXIoQm9vbGVhbikubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKHRyYWNrUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICB0cmFja1Jlc3BvbnNlID0gYXBpLnRyYWNrKHNlbGYsIGNhbXBhaWduU3BlY2lmaWVyLCB1c2VySWQsIGdvYWxJZGVudGlmaWVyLCBvcHRpb25zKTsgLy8gSWYgd2UgZ2V0IG51bGwvZmFsc2UgZnJvbSB0aGUgQVBJIGkuZS4gbm8gdHJhY2tpbmcgY2FsbCB3YXMgc2VudFxuICAgICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIHJlc3Bwb25zZUNhbGxiYWNrIHdpbGwgbm90IGJlIGZpcmVkIGFuZCBoZW5jZSB3ZSBoYXZlIHRvIG1hbnVhbGx5IHJlc29sdmUgdGhlIHByb21pc2VcbiAgICAgICAgICAgICAgLy8gT3IsIGluIGNhc2Ugb2YgZ2xvYmFsIGdvYWxzLCBpZiBub25lIGNhbXBhaWduIGdvdCBzdWNjZXNzLCBtYW51YWxseSByZXNvbHZlXG5cbiAgICAgICAgICAgICAgaWYgKCF0cmFja1Jlc3BvbnNlIHx8ICFGdW5jdGlvblV0aWwub2JqZWN0VmFsdWVzKHRyYWNrUmVzcG9uc2UpLnNvbWUoQm9vbGVhbikpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRyYWNrUmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYWNrUmVzcG9uc2UgJiYgdHJhY2tSZXNwb25zZS5pc0RldmVsb3BtZW50TW9kZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFja1Jlc3BvbnNlLmlzRGV2ZWxvcG1lbnRNb2RlO1xuICAgICAgICAgICAgICAgIHJlc29sdmUodHJhY2tSZXNwb25zZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdE91dCkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5BUElfTk9UX0VOQUJMRUQsIHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICBhcGk6IEFwaUVudW0uVFJBQ0tcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXBpLnRyYWNrKHNlbGYsIGNhbXBhaWduU3BlY2lmaWVyLCB1c2VySWQsIGdvYWxJZGVudGlmaWVyLCBvcHRpb25zKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIEFQSSBtZXRob2QgY2hlY2tzOiBXaGV0aGVyIGEgZmVhdHVyZSBpcyBlbmFibGVkIG9yIG5vdCBmb3IgdGhlIGdpdmVuIHVzZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbktleSAgICAgICBVbmlxdWUga2V5IGZvciBhIGNhbXBhaWduXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCAgICAgICAgICAgIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zICAgICAgICAgICBvcHRpb25hbCBwYXJhbXMgLSBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlc1xuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgIHRydWUgaWYgZmVhdHVyZSBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImlzRmVhdHVyZUVuYWJsZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNGZWF0dXJlRW5hYmxlZChjYW1wYWlnbktleSwgdXNlcklkKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7IC8vIENoZWNrIGlmIHJldHVyblByb21pc2VGb3IgaXMgcHJvdmlkZWQuIElmIHllcywgcmV0dXJuIGEgcHJvbWlzZSBpbnN0ZWFkIG9mIHZhbHVlXG4gICAgICAgIC8vIGkuZS4gd2FpdCB0aWxsIHRoZSBuZXR3b3JrIGNhbGwgaXMgbm90IHN1Y2Nlc3NmdWxcblxuICAgICAgICBpZiAoc2VsZi5yZXR1cm5Qcm9taXNlRm9yICYmIChzZWxmLnJldHVyblByb21pc2VGb3IuaXNGZWF0dXJlRW5hYmxlZCB8fCBzZWxmLnJldHVyblByb21pc2VGb3IuYWxsKSkge1xuICAgICAgICAgIHNlbGYubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5DT05GSUdfUkVUVVJOX1BST01JU0UsIHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICBtZXRob2Q6IEFwaUVudW0uSVNfRkVBVFVSRV9FTkFCTEVEXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgaWYgKF90aGlzNS5vcHRPdXQpIHtcbiAgICAgICAgICAgICAgX3RoaXM1LmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuQVBJX05PVF9FTkFCTEVELCB7XG4gICAgICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgICAgICBhcGk6IEFwaUVudW0uSVNfRkVBVFVSRV9FTkFCTEVEXG4gICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBpc0ZlYXR1cmVFbmFibGVkQXBpUmVzcG9uc2U7XG5cbiAgICAgICAgICAgICAgb3B0aW9ucy5yZXNwb25zZUNhbGxiYWNrID0gZnVuY3Rpb24gKF9lcnJvciwgX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSghIWlzRmVhdHVyZUVuYWJsZWRBcGlSZXNwb25zZSk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgaXNGZWF0dXJlRW5hYmxlZEFwaVJlc3BvbnNlID0gYXBpLmlzRmVhdHVyZUVuYWJsZWQoc2VsZiwgY2FtcGFpZ25LZXksIHVzZXJJZCwgb3B0aW9ucyk7IC8vIElmIHdlIGdldCBudWxsIGZyb20gdGhlIEFQSSBpLmUuIG5vIHRyYWNraW5nIGNhbGwgd2FzIHNlbnRcbiAgICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlLCByZXNwcG9uc2VDYWxsYmFjayB3aWxsIG5vdCBiZSBmaXJlZCBhbmQgaGVuY2Ugd2UgaGF2ZSB0byBtYW51YWxseSByZXNvbHZlIHRoZSBwcm9taXNlXG5cbiAgICAgICAgICAgICAgaWYgKERhdGFUeXBlVXRpbC5pc051bGwoaXNGZWF0dXJlRW5hYmxlZEFwaVJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKERhdGFUeXBlVXRpbC5pc09iamVjdChpc0ZlYXR1cmVFbmFibGVkQXBpUmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSghIWlzRmVhdHVyZUVuYWJsZWRBcGlSZXNwb25zZS5pc0ZlYXR1cmVFbmFibGVkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0T3V0KSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkFQSV9OT1RfRU5BQkxFRCwge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIGFwaTogQXBpRW51bS5JU19GRUFUVVJFX0VOQUJMRURcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFwaVJlc3BvbnNlID0gYXBpLmlzRmVhdHVyZUVuYWJsZWQoc2VsZiwgY2FtcGFpZ25LZXksIHVzZXJJZCwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKERhdGFUeXBlVXRpbC5pc09iamVjdChhcGlSZXNwb25zZSkpIHtcbiAgICAgICAgICByZXR1cm4gISFhcGlSZXNwb25zZS5pc0ZlYXR1cmVFbmFibGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhYXBpUmVzcG9uc2U7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgQVBJIG1ldGhvZDogUmV0dXJuIHRoZSB2YXJpYWJsZSBmb3IgdGhhdCB2YXJpYXRpb24oaWYgRmVhdHVyZSBUZXN0KSxcbiAgICAgKiAgICBvdGhlcndpc2UgdGhlIGRlZmF1bHQgdmFsdWVzIGJlaW5nIHNldCBpbiBGZWF0dXJlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXkgICBVbmlxdWUga2V5IGZvciBhIGNhbXBhaWduXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhcmlhYmxlS2V5ICAgVW5pcXVlIGtleSBmb3IgYSBmZWF0dXJlJ3MgdmFyaWFibGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkICAgICAgICBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAgICAgICAgICAgb3B0aW9uYWwgcGFyYW1zIC0gY3VzdG9tVmFyaWFibGVzLCB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3xudW1iZXJ8ZG91YmxlfGJvb2xlYW58bnVsbH0gVmFyaWFibGUgdmFsdWUgYXMgaXMgc2V0IGluIHRoZSBWV08gYXBwIGkuZS5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW50YWluaW5nIHRoZSBkYXRhLXR5cGUsXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsIGlmIGFueXRoaW5nIGZhaWxzIGxpa2UgY2FtcGFpZ24gLyB2YXJpYWJsZSBub3QgZm91bmRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImdldEZlYXR1cmVWYXJpYWJsZVZhbHVlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZlYXR1cmVWYXJpYWJsZVZhbHVlKGNhbXBhaWduS2V5LCB2YXJpYWJsZUtleSwgdXNlcklkKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7IC8vIENoZWNrIGlmIHJldHVyblByb21pc2VGb3IgaXMgcHJvdmlkZWQuIElmIHllcywgcmV0dXJuIGEgcHJvbWlzZSBpbnN0ZWFkIG9mIHZhbHVlXG5cbiAgICAgICAgaWYgKHNlbGYucmV0dXJuUHJvbWlzZUZvciAmJiAoc2VsZi5yZXR1cm5Qcm9taXNlRm9yLmdldEZlYXR1cmVWYXJpYWJsZVZhbHVlIHx8IHNlbGYucmV0dXJuUHJvbWlzZUZvci5hbGwpKSB7XG4gICAgICAgICAgc2VsZi5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkNPTkZJR19SRVRVUk5fUFJPTUlTRSwge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIG1ldGhvZDogQXBpRW51bS5HRVRfRkVBVFVSRV9WQVJJQUJMRV9WQUxVRVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpczYub3B0T3V0KSB7XG4gICAgICAgICAgICAgIF90aGlzNi5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkFQSV9OT1RfRU5BQkxFRCwge1xuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICAgICAgYXBpOiBBcGlFbnVtLkdFVF9GRUFUVVJFX1ZBUklBQkxFX1ZBTFVFXG4gICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gc2luY2UgdGhpcyBBUEkgZG9lcyBub3Qgc2VuZCBhbnkgYXN5bmMgY2FsbCwgd2UgY2FuIHNpbXBseSByZXNvbHZlIHRoZSByZXR1cm5lZCB2YWx1ZVxuICAgICAgICAgICAgICByZXNvbHZlKGFwaS5nZXRGZWF0dXJlVmFyaWFibGVWYWx1ZShzZWxmLCBjYW1wYWlnbktleSwgdmFyaWFibGVLZXksIHVzZXJJZCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0T3V0KSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkFQSV9OT1RfRU5BQkxFRCwge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIGFwaTogQXBpRW51bS5HRVRfRkVBVFVSRV9WQVJJQUJMRV9WQUxVRVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcGkuZ2V0RmVhdHVyZVZhcmlhYmxlVmFsdWUoc2VsZiwgY2FtcGFpZ25LZXksIHZhcmlhYmxlS2V5LCB1c2VySWQsIG9wdGlvbnMpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgQVBJIG1ldGhvZDogUHVzaGVzIHRoZSBrZXktdmFsdWUgdGFnIHBhaXIgZm9yIGEgcGFydGljdWxhciB1c2VyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGFnS2V5ICAgICAgICAgICAgICAgICAgICB0YWcga2V5XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRhZ1ZhbHVlICAgICAgICAgICAgICAgICAgdGFnIFZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCAgICAgICAgICAgICAgICAgICAgSUQgYXNzaWduZWQgdG8gYSB1c2VyXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgdHJ1ZSBpZiByZXF1ZXN0IGlzIHB1c2hlZCB0byBldmVudFF1ZXVlLCBmYWxzZSBpZiBwYXJhbXMgYXJlIGludmFsaWQgb3Igc2V0dGluZ3MgZmlsZSBpcyB1bmF2YWlsYWJsZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwicHVzaFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwdXNoKHRhZ0tleSwgdGFnVmFsdWUsIHVzZXJJZCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGN1c3RvbURpbWVuc2lvbk1hcDtcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgIC8vIEFyZ3VtZW50IHJlc2h1ZmZsaW5nLlxuICAgICAgICAgIGN1c3RvbURpbWVuc2lvbk1hcCA9IHRhZ0tleTtcbiAgICAgICAgICB1c2VySWQgPSB0YWdWYWx1ZTtcbiAgICAgICAgICB0YWdLZXkgPSAnICc7XG4gICAgICAgICAgdGFnVmFsdWUgPSAnICc7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgIGN1c3RvbURpbWVuc2lvbk1hcCA9IHt9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLkFQSV9CQURfUEFSQU1FVEVSUywge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIGFwaTogQXBpRW51bS5QVVNIXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSAvLyBDaGVjayBpZiByZXR1cm5Qcm9taXNlRm9yIGlzIHByb3ZpZGVkLiBJZiB5ZXMsIHJldHVybiBhIHByb21pc2UgaW5zdGVhZCBvZiB2YWx1ZVxuICAgICAgICAvLyBpLmUuIHdhaXQgdGlsbCB0aGUgbmV0d29yayBjYWxsIGlzIG5vdCBzdWNjZXNzZnVsXG5cblxuICAgICAgICBpZiAoc2VsZi5yZXR1cm5Qcm9taXNlRm9yICYmIChzZWxmLnJldHVyblByb21pc2VGb3IucHVzaCB8fCBzZWxmLnJldHVyblByb21pc2VGb3IuYWxsKSkge1xuICAgICAgICAgIHNlbGYubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5DT05GSUdfUkVUVVJOX1BST01JU0UsIHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICBtZXRob2Q6IEFwaUVudW0uUFVTSFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpczcub3B0T3V0KSB7XG4gICAgICAgICAgICAgIF90aGlzNy5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkFQSV9OT1RfRU5BQkxFRCwge1xuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICAgICAgYXBpOiBBcGlFbnVtLlBVU0hcbiAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgYXBpUmVzcG9uc2U7XG4gICAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VDYWxsYmFjazogZnVuY3Rpb24gcmVzcG9uc2VDYWxsYmFjayhfZXJyb3IsIF9yZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgY291bnRlciArPSAxOyAvLyBJbiBjYXNlIG9mIG11bHRpcGxlIGN1c3RvbSBkaW1lbnNpb25zLCB3aGVuIGFsbCBhcmUgdHJhY2tlZCwgdGhlbiBvbmx5IHJlc29sdmVcblxuICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgPT09IEZ1bmN0aW9uVXRpbC5vYmplY3RWYWx1ZXMoYXBpUmVzcG9uc2UpLmZpbHRlcihCb29sZWFuKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhcGlSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBhcGlSZXNwb25zZSA9IGFwaS5wdXNoKHNlbGYsIHRhZ0tleSwgdGFnVmFsdWUsIHVzZXJJZCwgY3VzdG9tRGltZW5zaW9uTWFwLCBvcHRpb25zKTsgLy8gSWYgd2UgZ2V0IGZhbHNlIGZyb20gdGhlIEFQSSBpLmUuIG5vIHRyYWNraW5nIGNhbGwgd2FzIHNlbnRcbiAgICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlLCByZXNwcG9uc2VDYWxsYmFjayB3aWxsIG5vdCBiZSBmaXJlZCBhbmQgaGVuY2Ugd2UgaGF2ZSB0byBtYW51YWxseSByZXNvbHZlIHRoZSBwcm9taXNlXG5cbiAgICAgICAgICAgICAgaWYgKCFhcGlSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFwaVJlc3BvbnNlICYmIGFwaVJlc3BvbnNlLmlzRGV2ZWxvcG1lbnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGFwaVJlc3BvbnNlLmlzRGV2ZWxvcG1lbnRNb2RlO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoYXBpUmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRPdXQpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuQVBJX05PVF9FTkFCTEVELCB7XG4gICAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgICAgYXBpOiBBcGlFbnVtLlBVU0hcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXBpLnB1c2goc2VsZiwgdGFnS2V5LCB0YWdWYWx1ZSwgdXNlcklkLCBjdXN0b21EaW1lbnNpb25NYXApO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRPcHRPdXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T3B0T3V0KCkge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5PUFRfT1VUX0FQSV9DQUxMRUQsIHtcbiAgICAgICAgZmlsZTogZmlsZVxuICAgICAgfSkpO1xuXG4gICAgICBpZiAodGhpcy5yZXR1cm5Qcm9taXNlRm9yICYmICh0aGlzLnJldHVyblByb21pc2VGb3Iub3B0T3V0IHx8IHRoaXMucmV0dXJuUHJvbWlzZUZvci5hbGwpKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIF90aGlzOC5fZGVzdHJveUluc3RhbmNlVmFyaWFibGVzKCk7XG5cbiAgICAgICAgICBpZiAoX3RoaXM4LmJhdGNoRXZlbnRzUXVldWUpIHtcbiAgICAgICAgICAgIF90aGlzOC5mbHVzaEV2ZW50cygpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczguYmF0Y2hFdmVudHNRdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmJhdGNoRXZlbnRzUXVldWUpIHtcbiAgICAgICAgdGhpcy5mbHVzaEV2ZW50cygpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzOC5iYXRjaEV2ZW50c1F1ZXVlID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZGVzdHJveUluc3RhbmNlVmFyaWFibGVzKCk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYW51YWxseSBmbHVzaCBpbXByZXNzaW9uIGV2ZW50cyB0byBWV08gd2hpY2ggYXJlIHF1ZXVlZCBpbiBiYXRjaCBxdWV1ZSBhcyBwZXIgYmF0Y2hFdmVudHMgY29uZmlnXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJmbHVzaEV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmbHVzaEV2ZW50cygpIHtcbiAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICB2YXIgYWNjb3VudElkID0gdGhpcy5TZXR0aW5nc0ZpbGVNYW5hZ2VyLmdldFNldHRpbmdzRmlsZSgpLmFjY291bnRJZDtcblxuICAgICAgaWYgKGZhbHNlKSB7fVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaCBsYXRlc3Qgc2V0dGluZ3MtZmlsZSBhbmQgdXBkYXRlIHNvIHRoYXQgdndvQ2xpZW50SW5zdGFuY2UgY291bGQgdXNlIGxhdGVzdCBzZXR0aW5nc1xuICAgICAqIEhlbHBmdWwgZXNwZWNpYWxseSB3aGVuIHVzaW5nIHdlYmhvb2tzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYWNjb3VudElkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNka0tleVxuICAgICAqXG4gICAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImdldEFuZFVwZGF0ZVNldHRpbmdzRmlsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBbmRVcGRhdGVTZXR0aW5nc0ZpbGUoYWNjb3VudElkLCBzZGtLZXkpIHtcbiAgICAgIGlmICh0aGlzLm9wdE91dCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuQVBJX05PVF9FTkFCTEVELCB7XG4gICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICBhcGk6ICdnZXRBbmRVcGRhdGVTZXR0aW5nc0ZpbGUnXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0QW5kVXBkYXRlU2V0dGluZ3NGaWxlKGFjY291bnRJZCwgc2RrS2V5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiX2Rlc3Ryb3lJbnN0YW5jZVZhcmlhYmxlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVzdHJveUluc3RhbmNlVmFyaWFibGVzKCkge1xuICAgICAgdGhpcy51c2VyU3RvcmFnZVNlcnZpY2UgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLlNldHRpbmdzRmlsZU1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnVzYWdlU3RhdHMgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmV2ZW50UXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm9wdE91dCA9IHRydWU7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFZXTztcbn0oKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWV087XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2FwaS9hY3RpdmF0ZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvYXBpL2FjdGl2YXRlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIENvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvbnN0YW50cyAqLyBcIi4vbGliL2NvbnN0YW50cy9pbmRleC5qc1wiKTtcblxudmFyIEFwaUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9BcGlFbnVtICovIFwiLi9saWIvZW51bXMvQXBpRW51bS5qc1wiKTtcblxudmFyIERlY2lzaW9uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0RlY2lzaW9uVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RlY2lzaW9uVXRpbC5qc1wiKTtcblxudmFyIENhbXBhaWduVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0NhbXBhaWduVXRpbCAqLyBcIi4vbGliL3V0aWxzL0NhbXBhaWduVXRpbC5qc1wiKTtcblxudmFyIEltcHJlc3Npb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvSW1wcmVzc2lvblV0aWwgKi8gXCIuL2xpYi91dGlscy9JbXByZXNzaW9uVXRpbC5qc1wiKTtcblxudmFyIFZhbGlkYXRlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL1ZhbGlkYXRlVXRpbCAqLyBcIi4vbGliL3V0aWxzL1ZhbGlkYXRlVXRpbC5qc1wiKTtcblxudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0RhdGFUeXBlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiKTtcblxudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9sb2dnaW5nICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiKTtcblxudmFyIEZpbGVOYW1lRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0ZpbGVOYW1lRW51bSAqLyBcIi4vbGliL2VudW1zL0ZpbGVOYW1lRW51bS5qc1wiKTtcblxudmFyIEV2ZW50RW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0V2ZW50RW51bSAqLyBcIi4vbGliL2VudW1zL0V2ZW50RW51bS5qc1wiKTtcblxudmFyIExvZ0xldmVsRW51bSA9IGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5BY3RpdmF0ZTtcbi8qKlxuICogVGhpcyBBUEkgbWV0aG9kOiBHZXRzIHRoZSB2YXJpYXRpb24gYXNzaWduZWQgZm9yIHRoZSB1c2VyIGZvciB0aGUgY2FtcGFpZ24gYW5kIHNlbmQgdGhlIG1ldHJpY3MgdG8gVldPIHNlcnZlclxuICpcbiAqIDEuIFZhbGlkYXRlcyB0aGUgYXJndW1lbnRzIGJlaW5nIHBhc3NlZFxuICogMi4gQ2hlY2tzIGlmIHVzZXIgaXMgZWxpZ2libGUgdG8gZ2V0IGJ1Y2tldGVkIGludG8gdGhlIGNhbXBhaWduLFxuICogMy4gQXNzaWducyB0aGUgZGV0ZXJtaW5pdGljIHZhcmlhdGlvbiB0byB0aGUgdXNlcihiYXNlZCBvbiB1c2VySWQpLCBpZiB1c2VyIGJlY29tZXMgcGFydCBvZiBjYW1wYWlnblxuICogICAgSWYgdXNlclN0b3JhZ2VTZXJ2aWNlIGlzIHVzZWQsIGl0IHdpbGwgbG9vayBpbnRvIGl0IGZvciB0aGUgdmFyaWF0aW9uIGFuZCBpZiBmb3VuZCwgbm8gZnVydGhlciBwcm9jZXNzaW5nIGlzIGRvbmVcbiAqIDQuIFNlbmRzIGFuIGltcHJlc3Npb24gY2FsbCB0byBWV08gc2VydmVyIHRvIHRyYWNrIHVzZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdndvSW5zdGFuY2UgICAgICAgVldPIGluc3RhbmNlIHdoaWNoIGhhcyBsb2dnZXIsIHNldHRpbmdzRmlsZSBldGMuXG4gKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXkgICAgICAgdW5pcXVlIGNhbXBhaWduIGtleSBzcGVjaWZpZWQgaW4gVldPIGFwcFxuICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCAgICAgICAgICAgIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgIE9wdGlvbmFsIHBhcmFtc1xuICpcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfSAgICAgICAgICAgICBJZiB2YXJpYXRpb24gaXMgYXNzaWduZWQgdGhlbiB2YXJpYXRpb24tbmFtZSBvdGhlcndpc2UgbnVsbCBpbiBjYXNlIG9mIHVzZXIgbm90IGJlY29taW5nIHBhcnRcbiAqL1xuXG5mdW5jdGlvbiBhY3RpdmF0ZSh2d29JbnN0YW5jZSwgY2FtcGFpZ25LZXksIHVzZXJJZCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gIHZhciBhcGkgPSBBcGlFbnVtLkFDVElWQVRFO1xuICB2YXIgYXJlUGFyYW1zVmFsaWQgPSBmYWxzZTtcblxuICBpZiAoRGF0YVR5cGVVdGlsLmlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgdmFyIGN1c3RvbVZhcmlhYmxlcyA9IG9wdGlvbnMuY3VzdG9tVmFyaWFibGVzLFxuICAgICAgICB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMgPSBvcHRpb25zLnZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgICAgdXNlclN0b3JhZ2VEYXRhID0gb3B0aW9ucy51c2VyU3RvcmFnZURhdGEsXG4gICAgICAgIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciA9IG9wdGlvbnMuc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyLFxuICAgICAgICBtZXRhRGF0YSA9IG9wdGlvbnMubWV0YURhdGEsXG4gICAgICAgIHJlc3BvbnNlQ2FsbGJhY2sgPSBvcHRpb25zLnJlc3BvbnNlQ2FsbGJhY2s7IC8vIENoZWNrIGlmIGFyZ3VtZW50cyBoYXZlIHZhbGlkIGRhdGEtdHlwZVxuXG4gICAgaWYgKFZhbGlkYXRlVXRpbC5hcmVWYWxpZFBhcmFtc0ZvckFQSU1ldGhvZCh7XG4gICAgICBtZXRob2Q6IEFwaUVudW0uQUNUSVZBVEUsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIGN1c3RvbVZhcmlhYmxlczogY3VzdG9tVmFyaWFibGVzLFxuICAgICAgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzOiB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMsXG4gICAgICB1c2VyU3RvcmFnZURhdGE6IHVzZXJTdG9yYWdlRGF0YSxcbiAgICAgIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlcjogc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyLFxuICAgICAgbWV0YURhdGE6IG1ldGFEYXRhLFxuICAgICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICAgIH0pKSB7XG4gICAgICBhcmVQYXJhbXNWYWxpZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGFyZVBhcmFtc1ZhbGlkID09PSBmYWxzZSkge1xuICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5BUElfQkFEX1BBUkFNRVRFUlMsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBhcGk6IEFwaUVudW0uQUNUSVZBVEVcbiAgICB9KSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gR2V0IHRoZSBjYWNoZWQgY29uZmlndXJhdGlvblxuXG5cbiAgdmFyIGNvbmZpZyA9IHZ3b0luc3RhbmNlLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gIHZhciBzZXR0aW5nc0ZpbGUgPSB2d29JbnN0YW5jZS5TZXR0aW5nc0ZpbGVNYW5hZ2VyLmdldFNldHRpbmdzRmlsZShhcGkpOyAvLyBJZiBubyBzZXR0aW5ncyBhcmUgZm91bmQsIHNpbXBseSByZXR1cm4gbm8gdmFyaWF0aW9uXG5cbiAgaWYgKCFzZXR0aW5nc0ZpbGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciA9IHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciB8fCBjb25maWcuc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyIHx8IGZhbHNlOyAvLyBHZXQgdGhlIGNhbXBhaWduIHNldHRpbmdzIGJhc2VkIG9uIGNhbXBhaWduS2V5IGZyb20gdGhlIHNldHRpbmdzXG5cbiAgdmFyIGNhbXBhaWduID0gQ2FtcGFpZ25VdGlsLmdldENhbXBhaWduKHNldHRpbmdzRmlsZSwgY2FtcGFpZ25LZXkpOyAvLyBJZiBtYXRjaGluZyBjYW1wYWlnbiBpcyBub3QgZm91bmQgd2l0aCBjYW1wYWlnbktleSBvciBpZiBmb3VuZCBidXQgaXMgaW4gbm90IFJVTk5JTkcgc3RhdGUsIHNpbXBseSByZXR1cm4gbm8gdmFyaWF0aW9uXG5cbiAgaWYgKCFjYW1wYWlnbiB8fCBjYW1wYWlnbi5zdGF0dXMgIT09IENvbnN0YW50cy5TVEFUVVNfUlVOTklORykge1xuICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLldBUk4sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLldBUk5JTkdfTUVTU0FHRVMuQ0FNUEFJR05fTk9UX1JVTk5JTkcsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICBhcGk6IGFwaVxuICAgIH0pKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmICghQ2FtcGFpZ25VdGlsLmlzQWJDYW1wYWlnbihjYW1wYWlnbikpIHtcbiAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuQVBJX05PVF9BUFBMSUNBQkxFLCB7XG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgY2FtcGFpZ25UeXBlOiBjYW1wYWlnbi50eXBlLFxuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICBhcGk6IGFwaVxuICAgIH0pKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBPbmNlIHRoZSBtYXRjaGluZyBSVU5OSU5HIGNhbXBhaWduIGlzIGZvdW5kLCBhc3NpZ24gdGhlIGRldGVybWluaXN0aWMgdmFyaWF0aW9uIHRvIHRoZSB1c2VySWQgcHJvdmlkZWRcblxuXG4gIHZhciBfRGVjaXNpb25VdGlsJGdldFZhcmkgPSBEZWNpc2lvblV0aWwuZ2V0VmFyaWF0aW9uKGNvbmZpZywgc2V0dGluZ3NGaWxlLCBjYW1wYWlnbiwgY2FtcGFpZ25LZXksIHVzZXJJZCwgY3VzdG9tVmFyaWFibGVzLCB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMsIHVzZXJTdG9yYWdlRGF0YSwgbWV0YURhdGEsIHRydWUsIHVuZGVmaW5lZCwgYXBpKSxcbiAgICAgIHZhcmlhdGlvbklkID0gX0RlY2lzaW9uVXRpbCRnZXRWYXJpLnZhcmlhdGlvbklkLFxuICAgICAgdmFyaWF0aW9uTmFtZSA9IF9EZWNpc2lvblV0aWwkZ2V0VmFyaS52YXJpYXRpb25OYW1lLFxuICAgICAgaXNTdG9yZWRWYXJpYXRpb24gPSBfRGVjaXNpb25VdGlsJGdldFZhcmkuaXNTdG9yZWRWYXJpYXRpb247IC8vIENoZWNrIGlmIHZhcmlhdGlvbi1uYW1lIGhhcyBiZWVuIGFzc2lnbmVkIHRvIHRoZSB1c2VySWQuIElmIG5vdCwgcmV0dXJuIG5vIHZhcmlhdGlvblxuXG5cbiAgaWYgKCFWYWxpZGF0ZVV0aWwuaXNWYWxpZFZhbHVlKHZhcmlhdGlvbk5hbWUpKSB7XG4gICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5ERUNJU0lPTl9OT19WQVJJQVRJT05fQUxMT1RFRCwge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5XG4gICAgfSkpO1xuICAgIHJldHVybiBudWxsO1xuICB9IC8vIGNoZWNrIGlmIHZhcmlhdGlvbiBmb3VuZCBmcm9tIHN0b3JhZ2UuIHJldHVybiBpdCB3aXRob3V0IHNlbmRpbmcgYSBjYWxsIHRvIFZXTyBzZXJ2ZXJcblxuXG4gIGlmIChpc1N0b3JlZFZhcmlhdGlvbiAmJiAhc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyKSB7XG4gICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5DQU1QQUlHTl9VU0VSX0FMUkVBRFlfVFJBQ0tFRCwge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgYXBpOiBhcGlcbiAgICB9KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhcmlhdGlvbk5hbWU6IHZhcmlhdGlvbk5hbWVcbiAgICB9O1xuICB9IC8vIFZhcmlhdGlvbiBmb3VuZC4uLmxldCBWV08gc2VydmVyIGtub3dzIGFib3V0IGl0IHRvIHNob3cgcmVwb3J0IHN0YXRzXG5cblxuICBpZiAoY29uZmlnLmJhdGNoRXZlbnRzKSB7XG4gICAgdmFyIHByb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5idWlsZEJhdGNoRXZlbnRGb3JUcmFja2luZ1VzZXIoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbi5pZCwgdmFyaWF0aW9uSWQsIHVzZXJJZCk7XG4gICAgdndvSW5zdGFuY2UuYmF0Y2hFdmVudHNRdWV1ZS5lbnF1ZXVlKHByb3BlcnRpZXMpO1xuICB9IGVsc2UgaWYgKHNldHRpbmdzRmlsZS5pc0V2ZW50QXJjaEVuYWJsZWQpIHtcbiAgICB2YXIgX3Byb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5nZXRFdmVudHNCYXNlUHJvcGVydGllcyhzZXR0aW5nc0ZpbGUsIEV2ZW50RW51bS5WV09fVkFSSUFUSU9OX1NIT1dOLCB2d29JbnN0YW5jZS51c2FnZVN0YXRzLmdldFVzYWdlU3RhdHMoKSk7XG5cbiAgICB2YXIgcGF5bG9hZCA9IEltcHJlc3Npb25VdGlsLmdldFRyYWNrVXNlclBheWxvYWREYXRhKHNldHRpbmdzRmlsZSwgdXNlcklkLCBFdmVudEVudW0uVldPX1ZBUklBVElPTl9TSE9XTiwgY2FtcGFpZ24uaWQsIHZhcmlhdGlvbklkKTtcbiAgICB2d29JbnN0YW5jZS5ldmVudFF1ZXVlLnByb2Nlc3MoY29uZmlnLCBfcHJvcGVydGllcywgdndvSW5zdGFuY2UsIHtcbiAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICByZXNwb25zZUNhbGxiYWNrOiByZXNwb25zZUNhbGxiYWNrXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIF9wcm9wZXJ0aWVzMiA9IEltcHJlc3Npb25VdGlsLmJ1aWxkRXZlbnRGb3JUcmFja2luZ1VzZXIoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbi5pZCwgdmFyaWF0aW9uSWQsIHVzZXJJZCwgdndvSW5zdGFuY2UudXNhZ2VTdGF0cy5nZXRVc2FnZVN0YXRzKCkpO1xuXG4gICAgdndvSW5zdGFuY2UuZXZlbnRRdWV1ZS5wcm9jZXNzKGNvbmZpZywgX3Byb3BlcnRpZXMyLCB2d29JbnN0YW5jZSwge1xuICAgICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5pc0RldmVsb3BtZW50TW9kZSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YXJpYXRpb25OYW1lOiB2YXJpYXRpb25OYW1lXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB2YXJpYXRpb25OYW1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFjdGl2YXRlO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi9hcGkvZ2V0RmVhdHVyZVZhcmlhYmxlVmFsdWUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL2FwaS9nZXRGZWF0dXJlVmFyaWFibGVWYWx1ZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBDb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9jb25zdGFudHMgKi8gXCIuL2xpYi9jb25zdGFudHMvaW5kZXguanNcIik7XG5cbnZhciBBcGlFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvQXBpRW51bSAqLyBcIi4vbGliL2VudW1zL0FwaUVudW0uanNcIik7XG5cbnZhciBEZWNpc2lvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EZWNpc2lvblV0aWwgKi8gXCIuL2xpYi91dGlscy9EZWNpc2lvblV0aWwuanNcIik7XG5cbnZhciBDYW1wYWlnblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9DYW1wYWlnblV0aWwgKi8gXCIuL2xpYi91dGlscy9DYW1wYWlnblV0aWwuanNcIik7XG5cbnZhciBWYWxpZGF0ZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9WYWxpZGF0ZVV0aWwgKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIik7XG5cbnZhciBGZWF0dXJlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0ZlYXR1cmVVdGlsICovIFwiLi9saWIvdXRpbHMvRmVhdHVyZVV0aWwuanNcIik7XG5cbnZhciBEYXRhVHlwZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EYXRhVHlwZVV0aWwgKi8gXCIuL2xpYi91dGlscy9EYXRhVHlwZVV0aWwuanNcIik7XG5cbnZhciBPYmplY3RVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvT2JqZWN0VXRpbCAqLyBcIi4vbGliL3V0aWxzL09iamVjdFV0aWwuanNcIik7XG5cbnZhciBsb2dnaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBMb2dMZXZlbEVudW0gPSBsb2dnaW5nLkxvZ0xldmVsRW51bSxcbiAgICBMb2dNZXNzYWdlRW51bSA9IGxvZ2dpbmcuTG9nTWVzc2FnZUVudW0sXG4gICAgTG9nTWVzc2FnZVV0aWwgPSBsb2dnaW5nLkxvZ01lc3NhZ2VVdGlsO1xudmFyIGZpbGUgPSBGaWxlTmFtZUVudW0uR2V0RmVhdHVyZVZhcmlhYmxlVmFsdWU7XG4vKipcbiAqIFRoaXMgQVBJIG1ldGhvZDpcbiAqXG4gKiAxLiBWYWxpZGF0ZXMgdGhlIGFyZ3VtZW50cyBiZWluZyBwYXNzZWRcbiAqIDIuIENoZWNrcyBpZiB1c2VyIGlzIGVsaWdpYmxlIGZvciBjYW1wYWlnbiBhbmQgY2hlY2sgaWYgZmVhdHVyZSBpcyBlbmFibGVkIGZvciB0aGUgdXNlci5cbiAqIDQuIElmIGZlYXR1cmUgZW5hYmxlZCwgcmV0dXJuIHRoZSB2YXJpYWJsZSBmb3IgdGhhdCB2YXJpYXRpb24oaWYgRmVhdHVyZSBUZXN0KSxcbiAqICAgIG90aGVyd2lzZSB0aGUgZGVmYXVsdCB2YWx1ZXMgYmVpbmcgc2V0IGluIEZlYXR1cmVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdndvSW5zdGFuY2UgICBWV08gaW5zdGFuY2Ugd2hpY2ggaGFzIGxvZ2dlciwgc2V0dGluZ3NGaWxlIGV0Yy5cbiAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbktleSAgIFVuaXF1ZSBrZXkgZm9yIGEgY2FtcGFpZ25cbiAqIEBwYXJhbSB7U3RyaW5nfSB2YXJpYWJsZUtleSAgIFVuaXF1ZSBrZXkgZm9yIGEgZmVhdHVyZSdzIHZhcmlhYmxlXG4gKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkICAgICAgICBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zICAgICAgICAgICBPcHRpb25hbCBwYXJhbXNcbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd8bnVtYmVyfGRvdWJsZXxib29sZWFufG51bGx9IFZhcmlhYmxlIHZhbHVlIGFzIGlzIHNldCBpbiB0aGUgVldPIGFwcCBpLmUuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW50YWluaW5nIHRoZSBkYXRhLXR5cGUsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgaWYgYW55dGhpbmcgZmFpbHMgbGlrZSBjYW1wYWlnbiAvIHZhcmlhYmxlIG5vdCBmb3VuZFxuICovXG5cbmZ1bmN0aW9uIGdldEZlYXR1cmVWYXJpYWJsZVZhbHVlKHZ3b0luc3RhbmNlLCBjYW1wYWlnbktleSwgdmFyaWFibGVLZXksIHVzZXJJZCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge307XG5cbiAgdHJ5IHtcbiAgICB2YXIgYXBpID0gQXBpRW51bS5HRVRfRkVBVFVSRV9WQVJJQUJMRV9WQUxVRTtcbiAgICB2YXIgYXJlUGFyYW1zVmFsaWQgPSBmYWxzZTtcblxuICAgIGlmIChEYXRhVHlwZVV0aWwuaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgIHZhciBjdXN0b21WYXJpYWJsZXMgPSBvcHRpb25zLmN1c3RvbVZhcmlhYmxlcyxcbiAgICAgICAgICB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMgPSBvcHRpb25zLnZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgICAgICB1c2VyU3RvcmFnZURhdGEgPSBvcHRpb25zLnVzZXJTdG9yYWdlRGF0YSxcbiAgICAgICAgICBtZXRhRGF0YSA9IG9wdGlvbnMubWV0YURhdGE7IC8vIENoZWNrIGlmIGFyZ3VtZW50cyBoYXZlIHZhbGlkIGRhdGEtdHlwZVxuXG4gICAgICBpZiAoVmFsaWRhdGVVdGlsLmFyZVZhbGlkUGFyYW1zRm9yQVBJTWV0aG9kKHtcbiAgICAgICAgbWV0aG9kOiBBcGlFbnVtLkdFVF9GRUFUVVJFX1ZBUklBQkxFX1ZBTFVFLFxuICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICAgIHZhcmlhYmxlS2V5OiB2YXJpYWJsZUtleSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGN1c3RvbVZhcmlhYmxlczogY3VzdG9tVmFyaWFibGVzLFxuICAgICAgICB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXM6IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgICAgdXNlclN0b3JhZ2VEYXRhOiB1c2VyU3RvcmFnZURhdGEsXG4gICAgICAgIG1ldGFEYXRhOiBtZXRhRGF0YVxuICAgICAgfSkpIHtcbiAgICAgICAgYXJlUGFyYW1zVmFsaWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhcmVQYXJhbXNWYWxpZCA9PT0gZmFsc2UpIHtcbiAgICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5BUElfQkFEX1BBUkFNRVRFUlMsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgYXBpOiBBcGlFbnVtLkdldEZlYXR1cmVWYXJpYWJsZVZhbHVlXG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IC8vIEdldCB0aGUgY2FjaGVkIGNvbmZpZ3VyYXRpb25cblxuXG4gICAgdmFyIGNvbmZpZyA9IHZ3b0luc3RhbmNlLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gICAgdmFyIHNldHRpbmdzRmlsZSA9IHZ3b0luc3RhbmNlLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0U2V0dGluZ3NGaWxlKGFwaSk7XG4gICAgY29uZmlnLmFwaU5hbWUgPSBhcGk7IC8vIElmIG5vIHNldHRpbmdzIGFyZSBmb3VuZCwgc2ltcGx5IHJldHVybiBubyB2YXJpYXRpb25cblxuICAgIGlmICghc2V0dGluZ3NGaWxlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY2FtcGFpZ24gPSBDYW1wYWlnblV0aWwuZ2V0Q2FtcGFpZ24oc2V0dGluZ3NGaWxlLCBjYW1wYWlnbktleSk7XG5cbiAgICBpZiAoIWNhbXBhaWduIHx8IGNhbXBhaWduLnN0YXR1cyAhPT0gQ29uc3RhbnRzLlNUQVRVU19SVU5OSU5HKSB7XG4gICAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5XQVJOLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5XQVJOSU5HX01FU1NBR0VTLkNBTVBBSUdOX05PVF9SVU5OSU5HLCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgICAgYXBpOiBhcGlcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChDYW1wYWlnblV0aWwuaXNBYkNhbXBhaWduKGNhbXBhaWduKSkge1xuICAgICAgLy8gQVBJIG5vdCBhbGxvd2VkIGZvciBmdWxsLXN0YWNrIEFCIGNhbXBhaWduc1xuICAgICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLkFQSV9OT1RfQVBQTElDQUJMRSwge1xuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICAgIGNhbXBhaWduVHlwZTogY2FtcGFpZ24udHlwZSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGFwaTogYXBpXG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgdmFyaWFibGU7XG5cbiAgICB2YXIgX0RlY2lzaW9uVXRpbCRnZXRWYXJpID0gRGVjaXNpb25VdGlsLmdldFZhcmlhdGlvbihjb25maWcsIHNldHRpbmdzRmlsZSwgY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIGN1c3RvbVZhcmlhYmxlcywgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLCB1c2VyU3RvcmFnZURhdGEsIG1ldGFEYXRhLCBmYWxzZSwgdW5kZWZpbmVkLCBhcGkpLFxuICAgICAgICB2YXJpYXRpb24gPSBfRGVjaXNpb25VdGlsJGdldFZhcmkudmFyaWF0aW9uLFxuICAgICAgICB2YXJpYXRpb25OYW1lID0gX0RlY2lzaW9uVXRpbCRnZXRWYXJpLnZhcmlhdGlvbk5hbWU7XG5cbiAgICBpZiAoIXZhcmlhdGlvbk5hbWUpIHtcbiAgICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuRkVBVFVSRV9TVEFUVVMsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgc3RhdHVzOiAnZGlzYWJsZWQnXG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoQ2FtcGFpZ25VdGlsLmlzRmVhdHVyZVJvbGxvdXRDYW1wYWlnbihjYW1wYWlnbikpIHtcbiAgICAgIHZhcmlhYmxlID0gRmVhdHVyZVV0aWwuZ2V0VmFyaWFibGVGb3JGZWF0dXJlKGNhbXBhaWduLCB2YXJpYWJsZUtleSk7XG4gICAgfSBlbHNlIGlmIChDYW1wYWlnblV0aWwuaXNGZWF0dXJlVGVzdENhbXBhaWduKGNhbXBhaWduKSkge1xuICAgICAgdmFyaWFibGUgPSBGZWF0dXJlVXRpbC5nZXRWYXJpYWJsZVZhbHVlRm9yVmFyaWF0aW9uKGNhbXBhaWduLCB2YXJpYXRpb24sIHZhcmlhYmxlS2V5KTtcblxuICAgICAgaWYgKE9iamVjdFV0aWwuYXJlT2JqZWN0S2V5cyh2YXJpYWJsZSkgJiYgdmFyaWF0aW9uLmlzRmVhdHVyZUVuYWJsZWQpIHtcbiAgICAgICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5GRUFUVVJFX1ZBUklBQkxFX1ZBTFVFLCB7XG4gICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICB2YXJpYWJsZUtleTogdmFyaWFibGVLZXksXG4gICAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduLmtleSxcbiAgICAgICAgICB2YXJpYWJsZVZhbHVlOiB2YXJpYWJsZS52YWx1ZSxcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZFxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2UgaWYgKE9iamVjdFV0aWwuYXJlT2JqZWN0S2V5cyh2YXJpYWJsZSkgJiYgIXZhcmlhdGlvbi5pc0ZlYXR1cmVFbmFibGVkKSB7XG4gICAgICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuRkVBVFVSRV9WQVJJQUJMRV9ERUZBVUxUX1ZBTFVFLCB7XG4gICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICB2YXJpYWJsZUtleTogdmFyaWFibGVLZXksXG4gICAgICAgICAgdmFyaWF0aW9uTmFtZTogdmFyaWF0aW9uTmFtZVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFPYmplY3RVdGlsLmFyZU9iamVjdEtleXModmFyaWFibGUpKSB7XG4gICAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuVkFSSUFCTEVfTk9UX0ZPVU5ELCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIHZhcmlhYmxlS2V5OiB2YXJpYWJsZUtleSxcbiAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciB2YXJpYWJsZVZhbHVlID0gdmFyaWFibGUudmFsdWU7XG4gICAgdmFyIHR5cGVDYXN0ZWRWYWx1ZSA9IEZlYXR1cmVVdGlsLmdldFR5cGVDYXN0VmFyaWFibGVWYWx1ZSh2YXJpYWJsZVZhbHVlLCB2YXJpYWJsZS50eXBlKTtcbiAgICByZXR1cm4gdHlwZUNhc3RlZFZhbHVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgZXJyLm1lc3NhZ2UpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RmVhdHVyZVZhcmlhYmxlVmFsdWU7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2FwaS9nZXRWYXJpYXRpb24uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9hcGkvZ2V0VmFyaWF0aW9uLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBDb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9jb25zdGFudHMgKi8gXCIuL2xpYi9jb25zdGFudHMvaW5kZXguanNcIik7XG5cbnZhciBBcGlFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvQXBpRW51bSAqLyBcIi4vbGliL2VudW1zL0FwaUVudW0uanNcIik7XG5cbnZhciBEZWNpc2lvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EZWNpc2lvblV0aWwgKi8gXCIuL2xpYi91dGlscy9EZWNpc2lvblV0aWwuanNcIik7XG5cbnZhciBDYW1wYWlnblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9DYW1wYWlnblV0aWwgKi8gXCIuL2xpYi91dGlscy9DYW1wYWlnblV0aWwuanNcIik7XG5cbnZhciBWYWxpZGF0ZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9WYWxpZGF0ZVV0aWwgKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIik7XG5cbnZhciBEYXRhVHlwZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EYXRhVHlwZVV0aWwgKi8gXCIuL2xpYi91dGlscy9EYXRhVHlwZVV0aWwuanNcIik7XG5cbnZhciBsb2dnaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBMb2dMZXZlbEVudW0gPSBsb2dnaW5nLkxvZ0xldmVsRW51bSxcbiAgICBMb2dNZXNzYWdlRW51bSA9IGxvZ2dpbmcuTG9nTWVzc2FnZUVudW0sXG4gICAgTG9nTWVzc2FnZVV0aWwgPSBsb2dnaW5nLkxvZ01lc3NhZ2VVdGlsO1xudmFyIGZpbGUgPSBGaWxlTmFtZUVudW0uR2V0VmFyaWF0aW9uO1xuLyoqXG4gKiBUaGlzIEFQSSBtZXRob2Q6IEdldHMgdGhlIHZhcmlhdGlvbiBhc3NpZ25lZCBmb3IgdGhlIHVzZXIgZm9yIHRoZSBjYW1wYWlnblxuICpcbiAqIDEuIFZhbGlkYXRlcyB0aGUgYXJndW1lbnRzIGJlaW5nIHBhc3NlZFxuICogMi4gQ2hlY2tzIGlmIHVzZXIgaXMgZWxpZ2libGUgdG8gZ2V0IGJ1Y2tldGVkIGludG8gdGhlIGNhbXBhaWduLFxuICogMy4gQXNzaWducyB0aGUgZGV0ZXJtaW5pdGljIHZhcmlhdGlvbiB0byB0aGUgdXNlcihiYXNlZCBvbiB1c2VySWQpLCBpZiB1c2VyIGJlY29tZXMgcGFydCBvZiBjYW1wYWlnblxuICogICAgSWYgdXNlclN0b3JhZ2VTZXJ2aWNlIGlzIHVzZWQsIGl0IHdpbGwgbG9vayBpbnRvIGl0IGZvciB0aGUgdmFyaWF0aW9uIGFuZCBpZiBmb3VuZCwgbm8gZnVydGhlciBwcm9jZXNzaW5nIGlzIGRvbmVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdndvSW5zdGFuY2UgICAgICAgVldPIGluc3RhbmNlIHdoaWNoIGhhcyBsb2dnZXIsIHNldHRpbmdzRmlsZSBldGMuXG4gKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXkgICAgICAgdW5pcXVlIGNhbXBhaWduIGtleSBzcGVjaWZpZWQgaW4gVldPIGFwcFxuICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCAgICAgICAgICAgIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgIE9wdGlvbmFsIHBhcmFtc1xuICpcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfSAgICAgICAgICAgICBJZiB2YXJpYXRpb24gaXMgYXNzaWduZWQgdGhlbiB2YXJpYXRpb24tbmFtZSBvdGhlcndpc2UgbnVsbCBpbiBjYXNlIG9mIHVzZXIgbm90IGJlY29taW5nIHBhcnRcbiAqL1xuXG5mdW5jdGlvbiBnZXRWYXJpYXRpb24odndvSW5zdGFuY2UsIGNhbXBhaWduS2V5LCB1c2VySWQpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICB2YXIgYXBpID0gQXBpRW51bS5HRVRfVkFSSUFUSU9OX05BTUU7XG4gIHZhciBhcmVQYXJhbXNWYWxpZCA9IGZhbHNlO1xuXG4gIGlmIChEYXRhVHlwZVV0aWwuaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICB2YXIgY3VzdG9tVmFyaWFibGVzID0gb3B0aW9ucy5jdXN0b21WYXJpYWJsZXMsXG4gICAgICAgIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyA9IG9wdGlvbnMudmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLFxuICAgICAgICB1c2VyU3RvcmFnZURhdGEgPSBvcHRpb25zLnVzZXJTdG9yYWdlRGF0YSxcbiAgICAgICAgbWV0YURhdGEgPSBvcHRpb25zLm1ldGFEYXRhOyAvLyBDaGVjayBpZiBhcmd1bWVudHMgaGF2ZSB2YWxpZCBkYXRhLXR5cGVcblxuICAgIGlmIChWYWxpZGF0ZVV0aWwuYXJlVmFsaWRQYXJhbXNGb3JBUElNZXRob2Qoe1xuICAgICAgbWV0aG9kOiBBcGlFbnVtLkdFVF9WQVJJQVRJT05fTkFNRSxcbiAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgY3VzdG9tVmFyaWFibGVzOiBjdXN0b21WYXJpYWJsZXMsXG4gICAgICB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXM6IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgIHVzZXJTdG9yYWdlRGF0YTogdXNlclN0b3JhZ2VEYXRhLFxuICAgICAgbWV0YURhdGE6IG1ldGFEYXRhXG4gICAgfSkpIHtcbiAgICAgIGFyZVBhcmFtc1ZhbGlkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoYXJlUGFyYW1zVmFsaWQgPT09IGZhbHNlKSB7XG4gICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLkFQSV9CQURfUEFSQU1FVEVSUywge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIGFwaTogQXBpRW51bS5HRVRfVkFSSUFUSU9OX05BTUVcbiAgICB9KSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gR2V0IHRoZSBjYWNoZWQgY29uZmlndXJhdGlvblxuXG5cbiAgdmFyIGNvbmZpZyA9IHZ3b0luc3RhbmNlLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gIHZhciBzZXR0aW5nc0ZpbGUgPSB2d29JbnN0YW5jZS5TZXR0aW5nc0ZpbGVNYW5hZ2VyLmdldFNldHRpbmdzRmlsZShhcGkpO1xuICBjb25maWcuYXBpTmFtZSA9IGFwaTsgLy8gSWYgbm8gc2V0dGluZ3MgYXJlIGZvdW5kLCBzaW1wbHkgcmV0dXJuIG5vIHZhcmlhdGlvblxuXG4gIGlmICghc2V0dGluZ3NGaWxlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gR2V0IHRoZSBjYW1wYWlnbiBzZXR0aW5ncyBiYXNlZCBvbiBjYW1wYWlnbktleSBmcm9tIHRoZSBzZXR0aW5nc1xuXG5cbiAgdmFyIGNhbXBhaWduID0gQ2FtcGFpZ25VdGlsLmdldENhbXBhaWduKHNldHRpbmdzRmlsZSwgY2FtcGFpZ25LZXkpOyAvLyBJZiBtYXRjaGluZyBjYW1wYWlnbiBpcyBub3QgZm91bmQgd2l0aCBjYW1wYWlnbktleSBvciBpZiBmb3VuZCBidXQgaXMgaW4gbm90IFJVTk5JTkcgc3RhdGUsIHNpbXBseSByZXR1cm4gbm8gdmFyaWF0aW9uXG5cbiAgaWYgKCFjYW1wYWlnbiB8fCBjYW1wYWlnbi5zdGF0dXMgIT09IENvbnN0YW50cy5TVEFUVVNfUlVOTklORykge1xuICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLldBUk4sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLldBUk5JTkdfTUVTU0FHRVMuQ0FNUEFJR05fTk9UX1JVTk5JTkcsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICBhcGk6IGFwaVxuICAgIH0pKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChDYW1wYWlnblV0aWwuaXNGZWF0dXJlUm9sbG91dENhbXBhaWduKGNhbXBhaWduKSkge1xuICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5BUElfTk9UX0FQUExJQ0FCTEUsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICBjYW1wYWlnblR5cGU6IGNhbXBhaWduLnR5cGUsXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIGFwaTogYXBpXG4gICAgfSkpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIF9EZWNpc2lvblV0aWwkZ2V0VmFyaSA9IERlY2lzaW9uVXRpbC5nZXRWYXJpYXRpb24oY29uZmlnLCBzZXR0aW5nc0ZpbGUsIGNhbXBhaWduLCBjYW1wYWlnbktleSwgdXNlcklkLCBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgdXNlclN0b3JhZ2VEYXRhLCBtZXRhRGF0YSwgZmFsc2UsIHVuZGVmaW5lZCwgYXBpKSxcbiAgICAgIHZhcmlhdGlvbk5hbWUgPSBfRGVjaXNpb25VdGlsJGdldFZhcmkudmFyaWF0aW9uTmFtZTtcblxuICBpZiAoIXZhcmlhdGlvbk5hbWUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB2YXJpYXRpb25OYW1lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFZhcmlhdGlvbjtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvYXBpL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9hcGkvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgYWN0aXZhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FjdGl2YXRlICovIFwiLi9saWIvYXBpL2FjdGl2YXRlLmpzXCIpO1xuXG52YXIgZ2V0VmFyaWF0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nZXRWYXJpYXRpb24gKi8gXCIuL2xpYi9hcGkvZ2V0VmFyaWF0aW9uLmpzXCIpO1xuXG52YXIgdHJhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RyYWNrICovIFwiLi9saWIvYXBpL3RyYWNrLmpzXCIpO1xuXG52YXIgaXNGZWF0dXJlRW5hYmxlZCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaXNGZWF0dXJlRW5hYmxlZCAqLyBcIi4vbGliL2FwaS9pc0ZlYXR1cmVFbmFibGVkLmpzXCIpO1xuXG52YXIgZ2V0RmVhdHVyZVZhcmlhYmxlVmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldEZlYXR1cmVWYXJpYWJsZVZhbHVlICovIFwiLi9saWIvYXBpL2dldEZlYXR1cmVWYXJpYWJsZVZhbHVlLmpzXCIpO1xuXG52YXIgcHVzaCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcHVzaCAqLyBcIi4vbGliL2FwaS9wdXNoLmpzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWN0aXZhdGU6IGFjdGl2YXRlLFxuICBnZXRWYXJpYXRpb246IGdldFZhcmlhdGlvbixcbiAgdHJhY2s6IHRyYWNrLFxuICBpc0ZlYXR1cmVFbmFibGVkOiBpc0ZlYXR1cmVFbmFibGVkLFxuICBnZXRGZWF0dXJlVmFyaWFibGVWYWx1ZTogZ2V0RmVhdHVyZVZhcmlhYmxlVmFsdWUsXG4gIHB1c2g6IHB1c2hcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2FwaS9pc0ZlYXR1cmVFbmFibGVkLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL2FwaS9pc0ZlYXR1cmVFbmFibGVkLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgQ29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vY29uc3RhbnRzICovIFwiLi9saWIvY29uc3RhbnRzL2luZGV4LmpzXCIpO1xuXG52YXIgQXBpRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0FwaUVudW0gKi8gXCIuL2xpYi9lbnVtcy9BcGlFbnVtLmpzXCIpO1xuXG52YXIgRGVjaXNpb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvRGVjaXNpb25VdGlsICovIFwiLi9saWIvdXRpbHMvRGVjaXNpb25VdGlsLmpzXCIpO1xuXG52YXIgQ2FtcGFpZ25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvQ2FtcGFpZ25VdGlsICovIFwiLi9saWIvdXRpbHMvQ2FtcGFpZ25VdGlsLmpzXCIpO1xuXG52YXIgSW1wcmVzc2lvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9JbXByZXNzaW9uVXRpbCAqLyBcIi4vbGliL3V0aWxzL0ltcHJlc3Npb25VdGlsLmpzXCIpO1xuXG52YXIgVmFsaWRhdGVVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvVmFsaWRhdGVVdGlsICovIFwiLi9saWIvdXRpbHMvVmFsaWRhdGVVdGlsLmpzXCIpO1xuXG52YXIgRGF0YVR5cGVVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvRGF0YVR5cGVVdGlsICovIFwiLi9saWIvdXRpbHMvRGF0YVR5cGVVdGlsLmpzXCIpO1xuXG52YXIgbG9nZ2luZyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL2xvZ2dpbmcgKi8gXCIuL2xpYi9zZXJ2aWNlcy9sb2dnaW5nL2luZGV4LmpzXCIpO1xuXG52YXIgRmlsZU5hbWVFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvRmlsZU5hbWVFbnVtICovIFwiLi9saWIvZW51bXMvRmlsZU5hbWVFbnVtLmpzXCIpO1xuXG52YXIgRXZlbnRFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvRXZlbnRFbnVtICovIFwiLi9saWIvZW51bXMvRXZlbnRFbnVtLmpzXCIpO1xuXG52YXIgTG9nTGV2ZWxFbnVtID0gbG9nZ2luZy5Mb2dMZXZlbEVudW0sXG4gICAgTG9nTWVzc2FnZUVudW0gPSBsb2dnaW5nLkxvZ01lc3NhZ2VFbnVtLFxuICAgIExvZ01lc3NhZ2VVdGlsID0gbG9nZ2luZy5Mb2dNZXNzYWdlVXRpbDtcbnZhciBmaWxlID0gRmlsZU5hbWVFbnVtLklzRmVhdHVyZUVuYWJsZWQ7XG4vKipcbiAqIFRoaXMgQVBJIGNoZWNrczogV2hldGhlciBhIGZlYXR1cmUgaXMgZW5hYmxlZCBvciBub3QgZm9yIHRoZSBnaXZlbiB1c2VyXG4gKlxuICogMS4gVmFsaWRhdGVzIHRoZSBhcmd1bWVudHMgYmVpbmcgcGFzc2VkXG4gKiAyLiBDaGVja3MgaWYgdXNlciBpcyBlbGlnaWJsZSBmb3IgY2FtcGFpZ24gYW5kIGNoZWNrIGlmIGZlYXR1cmUgaXMgZW5hYmxlZCBmb3IgdGhlIHVzZXIuXG4gKiA0LiBJZiBmZWF0dXJlIGVuYWJsZWQsIHNlbmRzIGEgY2FsbCB0byBWV08gc2VydmVyIGZvciB0cmFja2luZyB2aXNpdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZ3b0luc3RhbmNlICAgICAgIFZXTyBpbnN0YW5jZSB3aGljaCBoYXMgbG9nZ2VyLCBzZXR0aW5nc0ZpbGUgZXRjLlxuICogQHBhcmFtIHtTdHJpbmd9IGNhbXBhaWduS2V5ICAgICAgIFVuaXF1ZSBrZXkgZm9yIGEgY2FtcGFpZ25cbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgICAgICAgICAgICBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zICAgICAgICAgICBPcHRpb25hbCBwYXJhbXNcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgdHJ1ZSBpZiBmZWF0dXJlIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5cbmZ1bmN0aW9uIGlzRmVhdHVyZUVuYWJsZWQodndvSW5zdGFuY2UsIGNhbXBhaWduS2V5LCB1c2VySWQpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICB2YXIgYXBpID0gQXBpRW51bS5JU19GRUFUVVJFX0VOQUJMRUQ7XG4gIHZhciBhcmVQYXJhbXNWYWxpZCA9IGZhbHNlO1xuXG4gIGlmIChEYXRhVHlwZVV0aWwuaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICB2YXIgY3VzdG9tVmFyaWFibGVzID0gb3B0aW9ucy5jdXN0b21WYXJpYWJsZXMsXG4gICAgICAgIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyA9IG9wdGlvbnMudmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLFxuICAgICAgICB1c2VyU3RvcmFnZURhdGEgPSBvcHRpb25zLnVzZXJTdG9yYWdlRGF0YSxcbiAgICAgICAgc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyID0gb3B0aW9ucy5zaG91bGRUcmFja1JldHVybmluZ1VzZXIsXG4gICAgICAgIG1ldGFEYXRhID0gb3B0aW9ucy5tZXRhRGF0YSxcbiAgICAgICAgcmVzcG9uc2VDYWxsYmFjayA9IG9wdGlvbnMucmVzcG9uc2VDYWxsYmFjazsgLy8gQ2hlY2sgaWYgYXJndW1lbnRzIGhhdmUgdmFsaWQgZGF0YS10eXBlXG5cbiAgICBpZiAoVmFsaWRhdGVVdGlsLmFyZVZhbGlkUGFyYW1zRm9yQVBJTWV0aG9kKHtcbiAgICAgIG1ldGhvZDogQXBpRW51bS5JU19GRUFUVVJFX0VOQUJMRUQsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIGN1c3RvbVZhcmlhYmxlczogY3VzdG9tVmFyaWFibGVzLFxuICAgICAgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzOiB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMsXG4gICAgICB1c2VyU3RvcmFnZURhdGE6IHVzZXJTdG9yYWdlRGF0YSxcbiAgICAgIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlcjogc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyLFxuICAgICAgbWV0YURhdGE6IG1ldGFEYXRhLFxuICAgICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICAgIH0pKSB7XG4gICAgICBhcmVQYXJhbXNWYWxpZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGFyZVBhcmFtc1ZhbGlkID09PSBmYWxzZSkge1xuICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5BUElfQkFEX1BBUkFNRVRFUlMsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBhcGk6IEFwaUVudW0uaXNGZWF0dXJlRW5hYmxlZFxuICAgIH0pKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBHZXQgdGhlIGNhY2hlZCBjb25maWd1cmF0aW9uXG5cblxuICB2YXIgY29uZmlnID0gdndvSW5zdGFuY2UuU2V0dGluZ3NGaWxlTWFuYWdlci5nZXRDb25maWcoKTtcbiAgdmFyIHNldHRpbmdzRmlsZSA9IHZ3b0luc3RhbmNlLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0U2V0dGluZ3NGaWxlKGFwaSk7IC8vIElmIG5vIHNldHRpbmdzIGFyZSBmb3VuZCwgc2ltcGx5IGxvZyBhbmQgcmV0dXJuIGZhbHNlXG5cbiAgaWYgKCFzZXR0aW5nc0ZpbGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciA9IHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciB8fCBjb25maWcuc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyIHx8IGZhbHNlOyAvLyBHZXQgdGhlIGNhbXBhaWduIHNldHRpbmdzIGJhc2VkIG9uIGNhbXBhaWduS2V5IGZyb20gdGhlIHNldHRpbmdzXG5cbiAgdmFyIGNhbXBhaWduID0gQ2FtcGFpZ25VdGlsLmdldENhbXBhaWduKHNldHRpbmdzRmlsZSwgY2FtcGFpZ25LZXkpO1xuXG4gIGlmICghY2FtcGFpZ24gfHwgY2FtcGFpZ24uc3RhdHVzICE9PSBDb25zdGFudHMuU1RBVFVTX1JVTk5JTkcpIHtcbiAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5XQVJOLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5XQVJOSU5HX01FU1NBR0VTLkNBTVBBSUdOX05PVF9SVU5OSU5HLCB7XG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgYXBpOiBhcGlcbiAgICB9KSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoQ2FtcGFpZ25VdGlsLmlzQWJDYW1wYWlnbihjYW1wYWlnbikpIHtcbiAgICAvLyBBUEkgbm90IGFsbG93ZWQgZm9yIGZ1bGwtc3RhY2sgQUIgY2FtcGFpZ25zXG4gICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLkFQSV9OT1RfQVBQTElDQUJMRSwge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgIGNhbXBhaWduVHlwZTogY2FtcGFpZ24udHlwZSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgYXBpOiBhcGlcbiAgICB9KSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgX0RlY2lzaW9uVXRpbCRnZXRWYXJpID0gRGVjaXNpb25VdGlsLmdldFZhcmlhdGlvbihjb25maWcsIHNldHRpbmdzRmlsZSwgY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIGN1c3RvbVZhcmlhYmxlcywgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLCB1c2VyU3RvcmFnZURhdGEsIG1ldGFEYXRhLCB0cnVlLCB1bmRlZmluZWQsIGFwaSksXG4gICAgICB2YXJpYXRpb24gPSBfRGVjaXNpb25VdGlsJGdldFZhcmkudmFyaWF0aW9uLFxuICAgICAgdmFyaWF0aW9uTmFtZSA9IF9EZWNpc2lvblV0aWwkZ2V0VmFyaS52YXJpYXRpb25OYW1lLFxuICAgICAgdmFyaWF0aW9uSWQgPSBfRGVjaXNpb25VdGlsJGdldFZhcmkudmFyaWF0aW9uSWQsXG4gICAgICBpc1N0b3JlZFZhcmlhdGlvbiA9IF9EZWNpc2lvblV0aWwkZ2V0VmFyaS5pc1N0b3JlZFZhcmlhdGlvbjtcblxuICB2YXIgaXNGZWF0dXJlRW5hYmxlZCA9IGZhbHNlO1xuXG4gIGlmICh2YXJpYXRpb25OYW1lKSB7XG4gICAgaXNGZWF0dXJlRW5hYmxlZCA9IENhbXBhaWduVXRpbC5pc0ZlYXR1cmVSb2xsb3V0Q2FtcGFpZ24oY2FtcGFpZ24pIHx8IHZhcmlhdGlvbi5pc0ZlYXR1cmVFbmFibGVkO1xuXG4gICAgaWYgKGlzU3RvcmVkVmFyaWF0aW9uICYmICFzaG91bGRUcmFja1JldHVybmluZ1VzZXIpIHtcbiAgICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuQ0FNUEFJR05fVVNFUl9BTFJFQURZX1RSQUNLRUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgICAgYXBpOiBhcGlcbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVmFyaWF0aW9uIGZvdW5kLi4ubGV0IFZXTyBzZXJ2ZXIga25vd3MgYWJvdXQgaXQgdG8gc2hvdyByZXBvcnQgc3RhdHNcbiAgICAgIGlmIChjb25maWcuYmF0Y2hFdmVudHMpIHtcbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5idWlsZEJhdGNoRXZlbnRGb3JUcmFja2luZ1VzZXIoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbi5pZCwgdmFyaWF0aW9uSWQsIHVzZXJJZCk7XG4gICAgICAgIHZ3b0luc3RhbmNlLmJhdGNoRXZlbnRzUXVldWUuZW5xdWV1ZShwcm9wZXJ0aWVzKTtcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGluZ3NGaWxlLmlzRXZlbnRBcmNoRW5hYmxlZCkge1xuICAgICAgICB2YXIgX3Byb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5nZXRFdmVudHNCYXNlUHJvcGVydGllcyhzZXR0aW5nc0ZpbGUsIEV2ZW50RW51bS5WV09fVkFSSUFUSU9OX1NIT1dOLCB2d29JbnN0YW5jZS51c2FnZVN0YXRzLmdldFVzYWdlU3RhdHMoKSk7XG5cbiAgICAgICAgdmFyIHBheWxvYWQgPSBJbXByZXNzaW9uVXRpbC5nZXRUcmFja1VzZXJQYXlsb2FkRGF0YShzZXR0aW5nc0ZpbGUsIHVzZXJJZCwgRXZlbnRFbnVtLlZXT19WQVJJQVRJT05fU0hPV04sIGNhbXBhaWduLmlkLCB2YXJpYXRpb25JZCk7XG4gICAgICAgIHZ3b0luc3RhbmNlLmV2ZW50UXVldWUucHJvY2Vzcyhjb25maWcsIF9wcm9wZXJ0aWVzLCB2d29JbnN0YW5jZSwge1xuICAgICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfcHJvcGVydGllczIgPSBJbXByZXNzaW9uVXRpbC5idWlsZEV2ZW50Rm9yVHJhY2tpbmdVc2VyKHNldHRpbmdzRmlsZSwgY2FtcGFpZ24uaWQsIHZhcmlhdGlvbklkLCB1c2VySWQsIHZ3b0luc3RhbmNlLnVzYWdlU3RhdHMuZ2V0VXNhZ2VTdGF0cygpKTtcblxuICAgICAgICB2d29JbnN0YW5jZS5ldmVudFF1ZXVlLnByb2Nlc3MoY29uZmlnLCBfcHJvcGVydGllczIsIHZ3b0luc3RhbmNlLCB7XG4gICAgICAgICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5GRUFUVVJFX1NUQVRVUywge1xuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBzdGF0dXM6IGlzRmVhdHVyZUVuYWJsZWQgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnXG4gICAgICB9KSk7XG5cbiAgICAgIGlmIChjb25maWcuaXNEZXZlbG9wbWVudE1vZGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpc0ZlYXR1cmVFbmFibGVkOiBpc0ZlYXR1cmVFbmFibGVkXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc0ZlYXR1cmVFbmFibGVkO1xuICAgIH1cbiAgfVxuXG4gIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuRkVBVFVSRV9TVEFUVVMsIHtcbiAgICBmaWxlOiBmaWxlLFxuICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICBzdGF0dXM6IGlzRmVhdHVyZUVuYWJsZWQgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnXG4gIH0pKTtcblxuICBpZiAoaXNTdG9yZWRWYXJpYXRpb24gfHwgY29uZmlnLmlzRGV2ZWxvcG1lbnRNb2RlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzRmVhdHVyZUVuYWJsZWQ6IGlzRmVhdHVyZUVuYWJsZWRcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc0ZlYXR1cmVFbmFibGVkOiBpc0ZlYXR1cmVFbmFibGVkXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNGZWF0dXJlRW5hYmxlZDtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvYXBpL3B1c2guanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvYXBpL3B1c2guanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBBcGlFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvQXBpRW51bSAqLyBcIi4vbGliL2VudW1zL0FwaUVudW0uanNcIik7XG5cbnZhciBsb2dnaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBFdmVudEVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9FdmVudEVudW0gKi8gXCIuL2xpYi9lbnVtcy9FdmVudEVudW0uanNcIik7XG5cbnZhciBWYWxpZGF0ZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9WYWxpZGF0ZVV0aWwgKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIik7XG5cbnZhciBJbXByZXNzaW9uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0ltcHJlc3Npb25VdGlsICovIFwiLi9saWIvdXRpbHMvSW1wcmVzc2lvblV0aWwuanNcIik7XG5cbnZhciBEYXRhVHlwZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EYXRhVHlwZVV0aWwgKi8gXCIuL2xpYi91dGlscy9EYXRhVHlwZVV0aWwuanNcIik7XG5cbnZhciBCYXRjaEV2ZW50c0Rpc3BhdGNoZXI7XG5cbmlmIChmYWxzZSkge31cblxudmFyIExvZ0xldmVsRW51bSA9IGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5QdXNoO1xuLyoqXG4gKiBUaGlzIEFQSSBtZXRob2Q6IFB1c2hlcyB0aGUga2V5LXZhbHVlIHRhZyBwYWlyIGZvciBhIHBhcnRpY3VsYXIgdXNlclxuICpcbiAqIDEuIHZhbGlkYXRlcyB0aGUgYXJndW1lbnRzIGJlaW5nIHBhc3NlZFxuICogMi4gU2VuZHMgYSBjYWxsIHRvIFZXTyBwdXNoIGFwaVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2d29JbnN0YW5jZSAgICAgICAgICAgICAgIFZXTyBpbnN0YW5jZSB3aGljaCBoYXMgbG9nZ2VyLCBzZXR0aW5nc0ZpbGUgZXRjLlxuICogQHBhcmFtIHtTdHJpbmd9IHRhZ0tleSAgICAgICAgICAgICAgICAgICAgdGFnIGtleVxuICogQHBhcmFtIHtTdHJpbmd9IHRhZ1ZhbHVlICAgICAgICAgICAgICAgICAgdGFnIFZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkICAgICAgICAgICAgICAgICAgICBJRCBhc3NpZ25lZCB0byBhIHVzZXJcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIGlmIHJlcXVlc3QgaXMgcHVzaGVkIHRvIGV2ZW50UXVldWUsIGZhbHNlIGlmIHBhcmFtcyBhcmUgaW52YWxpZCBvciBzZXR0aW5ncyBmaWxlIGlzIHVuYXZhaWxhYmxlXG4gKi9cblxuZnVuY3Rpb24gcHVzaCh2d29JbnN0YW5jZSwgdGFnS2V5LCB0YWdWYWx1ZSwgdXNlcklkLCBjdXN0b21EaW1lbnNpb25NYXApIHtcbiAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IHt9LFxuICAgICAgcmVzcG9uc2VDYWxsYmFjayA9IF9yZWYucmVzcG9uc2VDYWxsYmFjaztcblxuICB2YXIgYXBpID0gQXBpRW51bS5QVVNIO1xuXG4gIGlmICghVmFsaWRhdGVVdGlsLmFyZVZhbGlkUGFyYW1zRm9yQVBJTWV0aG9kKHtcbiAgICBtZXRob2Q6IEFwaUVudW0uUFVTSCxcbiAgICB0YWdLZXk6IHRhZ0tleSxcbiAgICB0YWdWYWx1ZTogdGFnVmFsdWUsXG4gICAgdXNlcklkOiB1c2VySWQsXG4gICAgY3VzdG9tRGltZW5zaW9uTWFwOiBjdXN0b21EaW1lbnNpb25NYXAsXG4gICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICB9KSkge1xuICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5QVVNIX0lOVkFMSURfUEFSQU1TLCB7XG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgbWV0aG9kOiBhcGlcbiAgICB9KSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHRhZ0tleS5sZW5ndGggPiAyNTUpIHtcbiAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuVEFHX0tFWV9MRU5HVEhfRVhDRUVERUQsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICB0YWdLZXk6IHRhZ0tleSxcbiAgICAgIHVzZXJJZDogdXNlcklkXG4gICAgfSkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0YWdWYWx1ZS5sZW5ndGggPiAyNTUpIHtcbiAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuVEFHX1ZBTFVFX0xFTkdUSF9FWENFRURFRCwge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIHRhZ0tleTogdGFnS2V5LFxuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICB0YWdWYWx1ZTogdGFnVmFsdWVcbiAgICB9KSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHRhZ0tleSA9PT0gJyAnICYmIHRhZ1ZhbHVlID09PSAnICcgJiYgKCFjdXN0b21EaW1lbnNpb25NYXAgfHwgT2JqZWN0LmtleXMoY3VzdG9tRGltZW5zaW9uTWFwKS5sZW5ndGggPT09IDApKSB7XG4gICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLlBVU0hfSU5WQUxJRF9QQVJBTVMsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBtZXRob2Q6IGFwaVxuICAgIH0pKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodGFnS2V5ICE9PSAnICcgJiYgdGFnVmFsdWUgIT09ICcgJykge1xuICAgIGN1c3RvbURpbWVuc2lvbk1hcFt0YWdLZXldID0gdGFnVmFsdWU7XG4gIH0gLy8gR2V0IHRoZSBjYWNoZWQgY29uZmlndXJhdGlvblxuXG5cbiAgdmFyIGNvbmZpZyA9IHZ3b0luc3RhbmNlLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gIHZhciBzZXR0aW5nc0ZpbGUgPSB2d29JbnN0YW5jZS5TZXR0aW5nc0ZpbGVNYW5hZ2VyLmdldFNldHRpbmdzRmlsZShhcGkpOyAvLyBJZiBubyBzZXR0aW5ncyBhcmUgZm91bmQsIHNpbXBseSBmYWxzZVxuXG4gIGlmICghc2V0dGluZ3NGaWxlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIGlmIChjb25maWcuYmF0Y2hFdmVudHMpIHtcbiAgICBPYmplY3Qua2V5cyhjdXN0b21EaW1lbnNpb25NYXApLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIHRhZ1ZhbHVlID0gRGF0YVR5cGVVdGlsLmlzU3RyaW5nKGN1c3RvbURpbWVuc2lvbk1hcFtrZXldKSA/IGN1c3RvbURpbWVuc2lvbk1hcFtrZXldIDogSlNPTi5zdHJpbmdpZnkoY3VzdG9tRGltZW5zaW9uTWFwW2tleV0pO1xuICAgICAgdmFyIHByb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5idWlsZEJhdGNoRXZlbnRGb3JQdXNoaW5nKHNldHRpbmdzRmlsZSwga2V5LCB0YWdWYWx1ZSwgdXNlcklkKTtcbiAgICAgIHZ3b0luc3RhbmNlLmJhdGNoRXZlbnRzUXVldWUuZW5xdWV1ZShwcm9wZXJ0aWVzKTtcbiAgICAgIHJlc3VsdFtrZXldID0gdHJ1ZTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChzZXR0aW5nc0ZpbGUuaXNFdmVudEFyY2hFbmFibGVkKSB7XG4gICAgdmFyIHByb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5nZXRFdmVudHNCYXNlUHJvcGVydGllcyhzZXR0aW5nc0ZpbGUsIEV2ZW50RW51bS5WV09fU1lOQ19WSVNJVE9SX1BST1ApO1xuICAgIHZhciBwYXlsb2FkID0gSW1wcmVzc2lvblV0aWwuZ2V0UHVzaFBheWxvYWREYXRhKHNldHRpbmdzRmlsZSwgdXNlcklkLCBFdmVudEVudW0uVldPX1NZTkNfVklTSVRPUl9QUk9QLCBjdXN0b21EaW1lbnNpb25NYXApO1xuICAgIHZ3b0luc3RhbmNlLmV2ZW50UXVldWUucHJvY2Vzcyhjb25maWcsIHByb3BlcnRpZXMsIHZ3b0luc3RhbmNlLCB7XG4gICAgICBwYXlsb2FkOiBwYXlsb2FkLFxuICAgICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICAgIH0pO1xuICAgIHJlc3VsdC5zdWNjZXNzID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZXZlbnRzID0gW107XG4gICAgdmFyIGN1c3RvbURpbWVuc2lvbktleXMgPSBPYmplY3Qua2V5cyhjdXN0b21EaW1lbnNpb25NYXApO1xuICAgIGN1c3RvbURpbWVuc2lvbktleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgcHJvcGVydGllcztcbiAgICAgIHZhciB0YWdWYWx1ZSA9IERhdGFUeXBlVXRpbC5pc1N0cmluZyhjdXN0b21EaW1lbnNpb25NYXBba2V5XSkgPyBjdXN0b21EaW1lbnNpb25NYXBba2V5XSA6IEpTT04uc3RyaW5naWZ5KGN1c3RvbURpbWVuc2lvbk1hcFtrZXldKTtcblxuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgcHJvcGVydGllcyA9IEltcHJlc3Npb25VdGlsLmJ1aWxkRXZlbnRGb3JQdXNoaW5nKHNldHRpbmdzRmlsZSwga2V5LCB0YWdWYWx1ZSwgdXNlcklkKTtcbiAgICAgICAgdndvSW5zdGFuY2UuZXZlbnRRdWV1ZS5wcm9jZXNzKGNvbmZpZywgcHJvcGVydGllcywgdndvSW5zdGFuY2UsIHtcbiAgICAgICAgICByZXNwb25zZUNhbGxiYWNrOiByZXNwb25zZUNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHt9XG5cbiAgICAgIGV2ZW50cy5wdXNoKHByb3BlcnRpZXMpO1xuICAgICAgcmVzdWx0W2tleV0gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgaWYgKGZhbHNlKSB7fVxuICB9XG5cbiAgaWYgKGNvbmZpZy5pc0RldmVsb3BtZW50TW9kZSkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByZXN1bHQsIHtcbiAgICAgIGlzRGV2ZWxvcG1lbnRNb2RlOiBjb25maWcuaXNEZXZlbG9wbWVudE1vZGVcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcHVzaDtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvYXBpL3RyYWNrLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9hcGkvdHJhY2suanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgQ29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vY29uc3RhbnRzICovIFwiLi9saWIvY29uc3RhbnRzL2luZGV4LmpzXCIpO1xuXG52YXIgR29hbFR5cGVFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvR29hbFR5cGVFbnVtICovIFwiLi9saWIvZW51bXMvR29hbFR5cGVFbnVtLmpzXCIpO1xuXG52YXIgQXBpRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0FwaUVudW0gKi8gXCIuL2xpYi9lbnVtcy9BcGlFbnVtLmpzXCIpO1xuXG52YXIgRGVjaXNpb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvRGVjaXNpb25VdGlsICovIFwiLi9saWIvdXRpbHMvRGVjaXNpb25VdGlsLmpzXCIpO1xuXG52YXIgQ2FtcGFpZ25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvQ2FtcGFpZ25VdGlsICovIFwiLi9saWIvdXRpbHMvQ2FtcGFpZ25VdGlsLmpzXCIpO1xuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9PYmplY3RVdGlsICovIFwiLi9saWIvdXRpbHMvT2JqZWN0VXRpbC5qc1wiKSxcbiAgICBvYmplY3RWYWx1ZXMgPSBfcmVxdWlyZS5vYmplY3RWYWx1ZXM7XG5cbnZhciBJbXByZXNzaW9uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0ltcHJlc3Npb25VdGlsICovIFwiLi9saWIvdXRpbHMvSW1wcmVzc2lvblV0aWwuanNcIik7XG5cbnZhciBWYWxpZGF0ZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9WYWxpZGF0ZVV0aWwgKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIik7XG5cbnZhciBEYXRhVHlwZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EYXRhVHlwZVV0aWwgKi8gXCIuL2xpYi91dGlscy9EYXRhVHlwZVV0aWwuanNcIik7XG5cbnZhciBsb2dnaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBMb2dMZXZlbEVudW0gPSBsb2dnaW5nLkxvZ0xldmVsRW51bSxcbiAgICBMb2dNZXNzYWdlRW51bSA9IGxvZ2dpbmcuTG9nTWVzc2FnZUVudW0sXG4gICAgTG9nTWVzc2FnZVV0aWwgPSBsb2dnaW5nLkxvZ01lc3NhZ2VVdGlsO1xudmFyIGZpbGUgPSBGaWxlTmFtZUVudW0uVHJhY2s7XG52YXIgR09BTF9UWVBFX1RPX1RSQUNLX0RFRkFVTFQgPSBHb2FsVHlwZUVudW0uQUxMO1xudmFyIEdPQUxfSURFTlRJRklFUl9TRVBFUkFUT1IgPSAnX3Z3b18nO1xudmFyIGFwaSA9IEFwaUVudW0uVFJBQ0s7XG52YXIgQmF0Y2hFdmVudHNEaXNwYXRjaGVyO1xuXG5pZiAoZmFsc2UpIHt9XG4vKipcbiAqIFRoaXMgQVBJIG1ldGhvZDogTWFya3MgdGhlIGNvbnZlcnNpb24gb2YgdGhlIGNhbXBhaWduIGZvciBhIHBhcnRpY3VsYXIgZ29hbFxuICpcbiAqIDEuIHZhbGlkYXRlcyB0aGUgYXJndW1lbnRzIGJlaW5nIHBhc3NlZFxuICogMi4gQ2hlY2tzIGlmIHVzZXIgaXMgZWxpZ2libGUgdG8gZ2V0IGJ1Y2tldGVkIGludG8gdGhlIGNhbXBhaWduLFxuICogMy4gR2V0cyB0aGUgYXNzaWduZWQgZGV0ZXJtaW5pdGljIHZhcmlhdGlvbiB0byB0aGUgdXNlcihiYXNlZCBvbiB1c2VySWQpLCBpZiB1c2VyIGJlY29tZXMgcGFydCBvZiBjYW1wYWlnblxuICogNC4gU2VuZHMgYW4gaW1wcmVzc2lvbiBjYWxsIHRvIFZXTyBzZXJ2ZXIgdG8gdHJhY2sgZ29hbCBkYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZ3b0luc3RhbmNlICAgICAgICAgICAgICAgVldPIGluc3RhbmNlIHdoaWNoIGhhcyBsb2dnZXIsIHNldHRpbmdzRmlsZSBldGMuXG4gKiBAcGFyYW0ge051bWJlcn0gY2FtcGFpZ25LZXkgICAgICAgICAgICAgICB1bmlxdWUgY2FtcGFpZ24gdGVzdCBrZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgICAgICAgICAgICAgICAgICAgIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICogQHBhcmFtIHtTdHJpbmd9IGdvYWxJZGVudGlmaWVyICAgICAgICAgICAgIHVuaXF1ZSBjYW1wYWlnbidzIGdvYWwgaWRlbnRpZmllclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICAgICAgT3B0aW9uYWwgcGFyYW1zXG4gKi9cblxuXG5mdW5jdGlvbiB0cmFjayh2d29JbnN0YW5jZSwgY2FtcGFpZ25LZXksIHVzZXJJZCwgZ29hbElkZW50aWZpZXIpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuICB2YXIgYXJlUGFyYW1zVmFsaWQgPSBmYWxzZTtcblxuICBpZiAoRGF0YVR5cGVVdGlsLmlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgdmFyIHJldmVudWVWYWx1ZSA9IG9wdGlvbnMucmV2ZW51ZVZhbHVlLFxuICAgICAgICBjdXN0b21WYXJpYWJsZXMgPSBvcHRpb25zLmN1c3RvbVZhcmlhYmxlcyxcbiAgICAgICAgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzID0gb3B0aW9ucy52YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMsXG4gICAgICAgIHVzZXJTdG9yYWdlRGF0YSA9IG9wdGlvbnMudXNlclN0b3JhZ2VEYXRhLFxuICAgICAgICBnb2FsVHlwZVRvVHJhY2sgPSBvcHRpb25zLmdvYWxUeXBlVG9UcmFjayxcbiAgICAgICAgc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyID0gb3B0aW9ucy5zaG91bGRUcmFja1JldHVybmluZ1VzZXIsXG4gICAgICAgIG1ldGFEYXRhID0gb3B0aW9ucy5tZXRhRGF0YSxcbiAgICAgICAgcmVzcG9uc2VDYWxsYmFjayA9IG9wdGlvbnMucmVzcG9uc2VDYWxsYmFjazsgLy8gQ2hlY2sgaWYgYXJndW1lbnRzIGhhdmUgdmFsaWQgZGF0YS10eXBlXG5cbiAgICBpZiAoVmFsaWRhdGVVdGlsLmFyZVZhbGlkUGFyYW1zRm9yQVBJTWV0aG9kKHtcbiAgICAgIG1ldGhvZDogQXBpRW51bS5UUkFDSyxcbiAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgZ29hbElkZW50aWZpZXI6IGdvYWxJZGVudGlmaWVyLFxuICAgICAgY3VzdG9tVmFyaWFibGVzOiBjdXN0b21WYXJpYWJsZXMsXG4gICAgICB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXM6IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgIHVzZXJTdG9yYWdlRGF0YTogdXNlclN0b3JhZ2VEYXRhLFxuICAgICAgZ29hbFR5cGVUb1RyYWNrOiBnb2FsVHlwZVRvVHJhY2ssXG4gICAgICBzaG91bGRUcmFja1JldHVybmluZ1VzZXI6IHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlcixcbiAgICAgIG1ldGFEYXRhOiBtZXRhRGF0YSxcbiAgICAgIHJlc3BvbnNlQ2FsbGJhY2s6IHJlc3BvbnNlQ2FsbGJhY2tcbiAgICB9KSAmJiAoIWdvYWxUeXBlVG9UcmFjayB8fCBnb2FsVHlwZVRvVHJhY2sgJiYgb2JqZWN0VmFsdWVzKEdvYWxUeXBlRW51bSkuaW5jbHVkZXMoZ29hbFR5cGVUb1RyYWNrKSkpIHtcbiAgICAgIGFyZVBhcmFtc1ZhbGlkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoYXJlUGFyYW1zVmFsaWQgPT09IGZhbHNlKSB7XG4gICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLkFQSV9CQURfUEFSQU1FVEVSUywge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIGFwaTogQXBpRW51bS5UUkFDS1xuICAgIH0pKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBHZXQgdGhlIGNhY2hlZCBjb25maWd1cmF0aW9uXG5cblxuICB2YXIgY29uZmlnID0gdndvSW5zdGFuY2UuU2V0dGluZ3NGaWxlTWFuYWdlci5nZXRDb25maWcoKTtcbiAgdmFyIHNldHRpbmdzRmlsZSA9IHZ3b0luc3RhbmNlLlNldHRpbmdzRmlsZU1hbmFnZXIuZ2V0U2V0dGluZ3NGaWxlKGFwaSk7XG4gIGNvbmZpZy5hcGlOYW1lID0gYXBpO1xuICB2YXIgcmV2ZW51ZVByb3BMaXN0ID0gbmV3IFNldCgpOyAvLyBJZiBubyBzZXR0aW5ncyBhcmUgZm91bmQsIHNpbXBseSBkbyBub3QgdHJhY2sgZ29hbCBhbmQgcmV0dXJuIGZhbHNlXG5cbiAgaWYgKCFzZXR0aW5nc0ZpbGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBjYW1wYWlnbnMgPSBbXTtcbiAgZ29hbFR5cGVUb1RyYWNrID0gZ29hbFR5cGVUb1RyYWNrIHx8IGNvbmZpZy5nb2FsVHlwZVRvVHJhY2sgfHwgR09BTF9UWVBFX1RPX1RSQUNLX0RFRkFVTFQ7IC8vIHByaW9yaXR5IG9yZGVyIC0gb3B0aW9ucyA+IGxhdW5jaENvbmZpZyA+IGRlZmF1bHRcblxuICBpZiAoRGF0YVR5cGVVdGlsLmlzVW5kZWZpbmVkKHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlcikpIHtcbiAgICAvLyBpZiBzaG91bGRUcmFja1JldHVybmluZ1VzZXIgaXMgbm90IGdpdmVuIGluIG9wdGlvbnNcbiAgICBpZiAoRGF0YVR5cGVVdGlsLmlzQm9vbGVhbihjb25maWcuc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyKSkge1xuICAgICAgLy8gaWYgc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyIGlzIGdpdmVuIGluIGNvbmZpZyBhdCBsYXVuY2hcbiAgICAgIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciA9IGNvbmZpZy5zaG91bGRUcmFja1JldHVybmluZ1VzZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghRGF0YVR5cGVVdGlsLmlzU3RyaW5nKGNhbXBhaWduS2V5KSkge1xuICAgIGlmIChEYXRhVHlwZVV0aWwuaXNBcnJheShjYW1wYWlnbktleSkpIHtcbiAgICAgIGNhbXBhaWducyA9IENhbXBhaWduVXRpbC5nZXRDYW1wYWlnbnNGb3JLZXlzKHNldHRpbmdzRmlsZSwgY2FtcGFpZ25LZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW1wYWlnbnMgPSBDYW1wYWlnblV0aWwuZ2V0Q2FtcGFpZ25zRm9yR29hbChzZXR0aW5nc0ZpbGUsIGdvYWxJZGVudGlmaWVyLCBnb2FsVHlwZVRvVHJhY2spO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgdGhlIGNhbXBhaWduIHNldHRpbmdzIGJhc2VkIG9uIGNhbXBhaWduS2V5IGZyb20gdGhlIHNldHRpbmdzXG4gICAgdmFyIGNhbXBhaWduID0gQ2FtcGFpZ25VdGlsLmdldENhbXBhaWduKHNldHRpbmdzRmlsZSwgY2FtcGFpZ25LZXkpO1xuICAgIGNhbXBhaWducy5wdXNoKGNhbXBhaWduIHx8IHtcbiAgICAgIGtleTogY2FtcGFpZ25LZXlcbiAgICB9KTtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSB7fTtcbiAgdmFyIG1ldHJpY01hcCA9IHt9O1xuICB2YXIgZXZlbnRzID0gW107XG4gIHZhciBhcmVHbG9iYWxHb2FscyA9ICB0cnVlID8gZmFsc2UgOiB1bmRlZmluZWQ7XG4gIGNhbXBhaWducy5mb3JFYWNoKGZ1bmN0aW9uIChjYW1wYWlnbikge1xuICAgIHJldHVybiByZXN1bHRbY2FtcGFpZ24ua2V5XSA9IHRyYWNrQ2FtcGFpZ25Hb2FsKHZ3b0luc3RhbmNlLCBjYW1wYWlnbiwgY2FtcGFpZ24ua2V5LCB1c2VySWQsIHNldHRpbmdzRmlsZSwgZ29hbElkZW50aWZpZXIsIHJldmVudWVWYWx1ZSwgY29uZmlnLCBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgdXNlclN0b3JhZ2VEYXRhLCBnb2FsVHlwZVRvVHJhY2ssIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciwgbWV0YURhdGEsIG1ldHJpY01hcCwgcmV2ZW51ZVByb3BMaXN0LCBldmVudHMsIGFyZUdsb2JhbEdvYWxzKTtcbiAgfSk7XG5cbiAgaWYgKCFPYmplY3Qua2V5cyhyZXN1bHQpLmxlbmd0aCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHRydWUpIHtcbiAgICBpZiAoZXZlbnRzICYmIGV2ZW50cy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZlbnRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZ3b0luc3RhbmNlLmV2ZW50UXVldWUucHJvY2Vzcyhjb25maWcsIGV2ZW50c1trXSwgdndvSW5zdGFuY2UsIHtcbiAgICAgICAgICByZXNwb25zZUNhbGxiYWNrOiByZXNwb25zZUNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHt9XG5cbiAgaWYgKHNldHRpbmdzRmlsZS5pc0V2ZW50QXJjaEVuYWJsZWQgJiYgT2JqZWN0LmtleXMobWV0cmljTWFwKS5sZW5ndGggPiAwKSB7XG4gICAgdmFyIHByb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5nZXRFdmVudHNCYXNlUHJvcGVydGllcyhzZXR0aW5nc0ZpbGUsIGdvYWxJZGVudGlmaWVyKTtcbiAgICB2YXIgcGF5bG9hZCA9IEltcHJlc3Npb25VdGlsLmdldFRyYWNrR29hbFBheWxvYWREYXRhKHNldHRpbmdzRmlsZSwgdXNlcklkLCBnb2FsSWRlbnRpZmllciwgbWV0cmljTWFwLCByZXZlbnVlVmFsdWUsIHJldmVudWVQcm9wTGlzdCk7XG4gICAgdndvSW5zdGFuY2UuZXZlbnRRdWV1ZS5wcm9jZXNzKGNvbmZpZywgcHJvcGVydGllcywgdndvSW5zdGFuY2UsIHtcbiAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICByZXNwb25zZUNhbGxiYWNrOiByZXNwb25zZUNhbGxiYWNrXG4gICAgfSk7XG4gICAgT2JqZWN0LmtleXMobWV0cmljTWFwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIERlY2lzaW9uVXRpbC5fc2F2ZVVzZXJEYXRhKGNvbmZpZywgbWV0cmljTWFwW2tleV0uY2FtcGFpZ24sIG1ldHJpY01hcFtrZXldLnZhcmlhdGlvbk5hbWUsIG1ldHJpY01hcFtrZXldLnVzZXJJZCwgbWV0cmljTWFwW2tleV0ubWV0YURhdGEsIGdvYWxJZGVudGlmaWVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChjb25maWcuaXNEZXZlbG9wbWVudE1vZGUpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0LCB7XG4gICAgICBpc0RldmVsb3BtZW50TW9kZTogY29uZmlnLmlzRGV2ZWxvcG1lbnRNb2RlXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiB0cmFja0NhbXBhaWduR29hbCh2d29JbnN0YW5jZSwgY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIHNldHRpbmdzRmlsZSwgZ29hbElkZW50aWZpZXIsIHJldmVudWVWYWx1ZSwgY29uZmlnLCBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgdXNlclN0b3JhZ2VEYXRhLCBnb2FsVHlwZVRvVHJhY2ssIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciwgbWV0YURhdGEsIG1ldHJpY01hcCwgcmV2ZW51ZVByb3BMaXN0LCBldmVudHMsIGFyZUdsb2JhbEdvYWxzKSB7XG4gIC8vIElmIG1hdGNoaW5nIGNhbXBhaWduIGlzIG5vdCBmb3VuZCB3aXRoIGNhbXBhaWduS2V5IG9yIGlmIGZvdW5kIGJ1dCBpcyBpbiBub3QgUlVOTklORyBzdGF0ZSwgc2ltcGx5IHJldHVybiBubyB2YXJpYXRpb25cbiAgaWYgKCFjYW1wYWlnbiB8fCBjYW1wYWlnbi5zdGF0dXMgIT09IENvbnN0YW50cy5TVEFUVVNfUlVOTklORykge1xuICAgIHZ3b0luc3RhbmNlLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLldBUk4sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLldBUk5JTkdfTUVTU0FHRVMuQ0FNUEFJR05fTk9UX1JVTk5JTkcsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICBhcGk6IGFwaVxuICAgIH0pKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoQ2FtcGFpZ25VdGlsLmlzRmVhdHVyZVJvbGxvdXRDYW1wYWlnbihjYW1wYWlnbikpIHtcbiAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuQVBJX05PVF9BUFBMSUNBQkxFLCB7XG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgY2FtcGFpZ25UeXBlOiBjYW1wYWlnbi50eXBlLFxuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICBhcGk6IGFwaVxuICAgIH0pKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgY2FtcGFpZ25JZCA9IGNhbXBhaWduLmlkOyAvLyBHZXQgdGhlIGNhbXBhaWduIGdvYWwgc2V0dGluZ3MgYmFzZWQgb24gZ29hbElkZW50aWZpZXJcblxuICB2YXIgZ29hbCA9IENhbXBhaWduVXRpbC5nZXRDYW1wYWlnbkdvYWwoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbi5rZXksIGdvYWxJZGVudGlmaWVyKTtcblxuICBpZiAoIWdvYWwpIHtcbiAgICAvLyBJZiBubyBnb2FsIGlzIGZvdW5kLCBzb21ldGhpbmcgaXMgd3Jvbmcgd2l0aCB0aGUgZ29hbElkZW50aWZpZXJcbiAgICB2d29JbnN0YW5jZS5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuVFJBQ0tfQVBJX0dPQUxfTk9UX0ZPVU5ELCB7XG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICBnb2FsSWRlbnRpZmllcjogZ29hbElkZW50aWZpZXIsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXlcbiAgICB9KSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKGdvYWxUeXBlVG9UcmFjayAhPT0gR09BTF9UWVBFX1RPX1RSQUNLX0RFRkFVTFQgJiYgZ29hbC50eXBlICE9PSBnb2FsVHlwZVRvVHJhY2spIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAoZ29hbC50eXBlID09PSBHb2FsVHlwZUVudW0uUkVWRU5VRSAmJiAhVmFsaWRhdGVVdGlsLmlzVmFsaWRWYWx1ZShyZXZlbnVlVmFsdWUpKSB7XG4gICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLlRSQUNLX0FQSV9SRVZFTlVFX05PVF9QQVNTRURfRk9SX1JFVkVOVUVfR09BTCwge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgZ29hbElkZW50aWZpZXI6IGdvYWxJZGVudGlmaWVyLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5XG4gICAgfSkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChnb2FsLnR5cGUgPT09IEdvYWxUeXBlRW51bS5SRVZFTlVFICYmIGdvYWwucmV2ZW51ZVByb3ApIHtcbiAgICByZXZlbnVlUHJvcExpc3QuYWRkKGdvYWwucmV2ZW51ZVByb3ApO1xuICB9XG5cbiAgdmFyIF9EZWNpc2lvblV0aWwkZ2V0VmFyaSA9IERlY2lzaW9uVXRpbC5nZXRWYXJpYXRpb24oY29uZmlnLCBzZXR0aW5nc0ZpbGUsIGNhbXBhaWduLCBjYW1wYWlnbktleSwgdXNlcklkLCBjdXN0b21WYXJpYWJsZXMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgdXNlclN0b3JhZ2VEYXRhLCBtZXRhRGF0YSwgZmFsc2UsIGdvYWxJZGVudGlmaWVyLCBhcGkpLFxuICAgICAgdmFyaWF0aW9uSWQgPSBfRGVjaXNpb25VdGlsJGdldFZhcmkudmFyaWF0aW9uSWQsXG4gICAgICB2YXJpYXRpb25OYW1lID0gX0RlY2lzaW9uVXRpbCRnZXRWYXJpLnZhcmlhdGlvbk5hbWUsXG4gICAgICBzdG9yZWRHb2FsSWRlbnRpZmllciA9IF9EZWNpc2lvblV0aWwkZ2V0VmFyaS5zdG9yZWRHb2FsSWRlbnRpZmllcjsgLy8gSXMgVXNlciBpcyBhIHBhcnQgb2YgQ2FtcGFpZ24gYW5kIGhhcyBiZWVuIGRlY2lkZWQgdG8gYmUgYSBwYXJ0IG9mIHBhcnRpY3VsYXIgdmFyaWF0aW9uXG5cblxuICBpZiAodmFyaWF0aW9uTmFtZSkge1xuICAgIGlmIChzdG9yZWRHb2FsSWRlbnRpZmllcikge1xuICAgICAgdmFyIGlkZW50aWZpZXJzID0gc3RvcmVkR29hbElkZW50aWZpZXIuc3BsaXQoR09BTF9JREVOVElGSUVSX1NFUEVSQVRPUik7XG5cbiAgICAgIGlmICghaWRlbnRpZmllcnMuaW5jbHVkZXMoZ29hbElkZW50aWZpZXIpKSB7XG4gICAgICAgIHN0b3JlZEdvYWxJZGVudGlmaWVyICs9IEdPQUxfSURFTlRJRklFUl9TRVBFUkFUT1IgKyBnb2FsSWRlbnRpZmllcjtcblxuICAgICAgICBEZWNpc2lvblV0aWwuX3NhdmVVc2VyRGF0YShjb25maWcsIGNhbXBhaWduLCB2YXJpYXRpb25OYW1lLCB1c2VySWQsIG1ldGFEYXRhLCBzdG9yZWRHb2FsSWRlbnRpZmllcik7XG4gICAgICB9IGVsc2UgaWYgKCFzaG91bGRUcmFja1JldHVybmluZ1VzZXIpIHtcbiAgICAgICAgdndvSW5zdGFuY2UubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5DQU1QQUlHTl9HT0FMX0FMUkVBRFlfVFJBQ0tFRCwge1xuICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgZ29hbElkZW50aWZpZXI6IGdvYWxJZGVudGlmaWVyLFxuICAgICAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IC8vIElmIGdvYWwgaXMgZm91bmQsIHNlbmQgYW4gaW1wcmVzc2lvbiB0byBWV08gc2VydmVyIGZvciByZXBvcnQgc3RhdHNcblxuXG4gICAgaWYgKGNvbmZpZy5iYXRjaEV2ZW50cykge1xuICAgICAgdmFyIHByb3BlcnRpZXMgPSBJbXByZXNzaW9uVXRpbC5idWlsZEJhdGNoRXZlbnRGb3JUcmFja2luZ0dvYWwoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbklkLCB2YXJpYXRpb25JZCwgdXNlcklkLCBnb2FsLCByZXZlbnVlVmFsdWUpO1xuICAgICAgdndvSW5zdGFuY2UuYmF0Y2hFdmVudHNRdWV1ZS5lbnF1ZXVlKHByb3BlcnRpZXMpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGluZ3NGaWxlLmlzRXZlbnRBcmNoRW5hYmxlZCkge1xuICAgICAgbWV0cmljTWFwW2NhbXBhaWduLmlkXSA9IHtcbiAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgIGNhbXBhaWduOiBjYW1wYWlnbixcbiAgICAgICAgdmFyaWF0aW9uTmFtZTogdmFyaWF0aW9uTmFtZSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIG1ldGFEYXRhOiBtZXRhRGF0YSxcbiAgICAgICAgZ29hbDogZ29hbFxuICAgICAgfTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgX3Byb3BlcnRpZXMgPSB7fTtcblxuICAgICAgaWYgKGFyZUdsb2JhbEdvYWxzKSB7XG4gICAgICAgIF9wcm9wZXJ0aWVzID0gSW1wcmVzc2lvblV0aWwuYnVpbGRCYXRjaEV2ZW50Rm9yVHJhY2tpbmdHb2FsKHNldHRpbmdzRmlsZSwgY2FtcGFpZ25JZCwgdmFyaWF0aW9uSWQsIHVzZXJJZCwgZ29hbCwgcmV2ZW51ZVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9wcm9wZXJ0aWVzID0gSW1wcmVzc2lvblV0aWwuYnVpbGRFdmVudEZvclRyYWNraW5nR29hbChzZXR0aW5nc0ZpbGUsIGNhbXBhaWduSWQsIHZhcmlhdGlvbklkLCB1c2VySWQsIGdvYWwsIHJldmVudWVWYWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGV2ZW50cy5wdXNoKF9wcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICBEZWNpc2lvblV0aWwuX3NhdmVVc2VyRGF0YShjb25maWcsIGNhbXBhaWduLCB2YXJpYXRpb25OYW1lLCB1c2VySWQsIG1ldGFEYXRhLCBnb2FsSWRlbnRpZmllcik7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFjaztcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvY29uc3RhbnRzL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9jb25zdGFudHMvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qIGdsb2JhbCBTREtfTkFNRSwgU0RLX1ZFUlNJT04gKi9cbnZhciBwYWNrYWdlRmlsZSA9IHt9OyAvLyBGb3IgamF2YXNjcmlwdC1zZGssIHRvIGtlZXAgdGhlIGJ1aWxkIHNpemUgbG93XG4vLyBhdm9pZCBhZGRpbmcgdGhlIHdob2xlIHBhY2thZ2UgZmlsZSBpbiB0aGUgZmlsZVxuXG5pZiAodHJ1ZSkge1xuICBwYWNrYWdlRmlsZSA9IHtcbiAgICBuYW1lOiBcInZ3by1qYXZhc2NyaXB0LXNka1wiLFxuICAgIHZlcnNpb246IFwiMS4zMi4zXCJcbiAgfTtcbn0gZWxzZSB7fVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgU0RLX05BTUU6IHBhY2thZ2VGaWxlLm5hbWUsXG4gIFNES19WRVJTSU9OOiBwYWNrYWdlRmlsZS52ZXJzaW9uLFxuICBQTEFURk9STTogJ3NlcnZlcicsXG4gIFNFRURfVkFMVUU6IDEsXG4gIE1BWF9UUkFGRklDX1BFUkNFTlQ6IDEwMCxcbiAgTUFYX1RSQUZGSUNfVkFMVUU6IDEwMDAwLFxuICBNQVhfRVZFTlRTX1BFUl9SRVFVRVNUOiA1MDAwLFxuICBERUZBVUxUX0VWRU5UU19QRVJfUkVRVUVTVDogMTAwLFxuICBERUZBVUxUX1JFUVVFU1RfVElNRV9JTlRFUlZBTDogNjAwLFxuICAvLyAxMCAqIDYwKHNlY3MpID0gNjAwIHNlY3MgaS5lLiAxMCBtaW51dGVzXG4gIFNUQVRVU19SVU5OSU5HOiAnUlVOTklORycsXG4gIFNFRURfVVJMOiAnaHR0cHM6Ly92d28uY29tJyxcbiAgSFRUUF9QUk9UT0NPTDogJ2h0dHA6Ly8nLFxuICBIVFRQU19QUk9UT0NPTDogJ2h0dHBzOi8vJyxcbiAgU0RLX1FVRVJZX1BBUkFNOiAnc2RrJyxcbiAgU0RLX1ZFUlNJT05fUVVFUllfUEFSQU06ICdzZGstdidcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2NvcmUvQnVja2V0aW5nU2VydmljZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvY29yZS9CdWNrZXRpbmdTZXJ2aWNlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEhhc2hlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIG11cm11cmhhc2ggKi8gXCIuL25vZGVfbW9kdWxlcy9tdXJtdXJoYXNoL211cm11cmhhc2guanNcIik7XG5cbnZhciBDb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9jb25zdGFudHMgKi8gXCIuL2xpYi9jb25zdGFudHMvaW5kZXguanNcIik7XG5cbnZhciBWYWxpZGF0ZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9WYWxpZGF0ZVV0aWwgKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIik7XG5cbnZhciBsb2dnaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBDYW1wYWlnblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9DYW1wYWlnblV0aWwgKi8gXCIuL2xpYi91dGlscy9DYW1wYWlnblV0aWwuanNcIik7XG5cbnZhciBMb2dMZXZlbEVudW0gPSBsb2dnaW5nLkxvZ0xldmVsRW51bSxcbiAgICBMb2dNZXNzYWdlRW51bSA9IGxvZ2dpbmcuTG9nTWVzc2FnZUVudW0sXG4gICAgTG9nTWVzc2FnZVV0aWwgPSBsb2dnaW5nLkxvZ01lc3NhZ2VVdGlsO1xudmFyIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCk7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5CdWNrZXRpbmdTZXJ2aWNlO1xudmFyIEJ1Y2tldGluZ1NlcnZpY2UgPSB7XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgQnVja2V0IFZhbHVlIG9mIHRoZSBVc2VyIGJ5IGhhc2hpbmcgdGhlIFVzZXIgSUQgYnkgbXVybXVySGFzaFxuICAgKiBhbmQgc2NhbGluZyBpdCBkb3duLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaGFzaFZhbHVlIHRoZSBoYXNoVmFsdWUgZ2VuZXJhdGVkIGFmdGVyIGhhc2hpbmdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG1heFZhbHVlIHRoZSB2YWx1ZSB1cC10byB3aGljaCBoYXNoVmFsdWUgbmVlZHMgdG8gYmUgc2NhbGVkXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBtdWx0aXBsaWVyIG11bHRpcGxpZXIgaW4gY2FzZSB0aGUgdHJhZmZpYyBhbGxvY2F0aW9uIGlzIGxlc3MgdGhhbiAxMDBcbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBidWNrZXQgVmFsdWUgb2YgdGhlIFVzZXJcbiAgICovXG4gIF9nZW5lcmF0ZUJ1Y2tldFZhbHVlOiBmdW5jdGlvbiBfZ2VuZXJhdGVCdWNrZXRWYWx1ZShoYXNoVmFsdWUsIG1heFZhbHVlKSB7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDE7XG4gICAgdmFyIHJhdGlvID0gaGFzaFZhbHVlIC8gTWF0aC5wb3coMiwgMzIpO1xuICAgIHZhciBtdWx0aXBsaWVkVmFsdWUgPSAobWF4VmFsdWUgKiByYXRpbyArIDEpICogbXVsdGlwbGllcjtcbiAgICB2YXIgdmFsdWUgPSBNYXRoLmZsb29yKG11bHRpcGxpZWRWYWx1ZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBWYXJpYXRpb24gYnkgY2hlY2tpbmcgdGhlIFN0YXJ0IGFuZCBFbmQgQnVja2V0IEFsbG9jYXRpb25zIG9mIGVhY2ggVmFyaWF0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjYW1wYWlnbiB3aGljaCBjb250YWlucyB0aGUgdmFyaWF0aW9uc1xuICAgKiBAcGFyYW0ge051bWJlcn0gYnVja2V0VmFsdWUgdGhlIGJ1Y2tldCBWYWx1ZSBvZiB0aGUgdXNlclxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R8bnVsbH0gdmFyaWF0aW9uIGRhdGEgYWxsb3R0ZWQgdG8gdGhlIHVzZXIgb3IgbnVsbCBpZiBub3RcbiAgICovXG4gIF9nZXRWYXJpYXRpb246IGZ1bmN0aW9uIF9nZXRWYXJpYXRpb24odmFyaWF0aW9ucywgYnVja2V0VmFsdWUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHZhcmlhdGlvbnMpLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFyaWF0aW9uID0gdmFyaWF0aW9uc1tpXTtcblxuICAgICAgaWYgKGJ1Y2tldFZhbHVlID49IHZhcmlhdGlvbi5zdGFydFZhcmlhdGlvbkFsbG9jYXRpb24gJiYgYnVja2V0VmFsdWUgPD0gdmFyaWF0aW9uLmVuZFZhcmlhdGlvbkFsbG9jYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhcmlhdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoZSBVc2VyIElEIGFuZCBnZW5lcmF0ZXMgQnVja2V0IFZhbHVlIG9mIHRoZSBVc2VyIGJ5IGhhc2hpbmcgdGhlIHVzZXJJZCBieSBtdXJtdXJIYXNoIGFuZCBzY2FsaW5nIGl0IGRvd24uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgdGhlIHVuaXF1ZSBJRCBhc3NpZ25lZCB0byBVc2VyXG4gICAqXG4gICAqIEByZXR1cm4ge051bWJlcn0gdGhlIGJ1Y2tldCBWYWx1ZSBhbGxvdHRlZCB0byBVc2VyIChiZXR3ZWVuIDEgdG8gJHRoaXMtPiRNQVhfVFJBRkZJQ19QRVJDRU5UKVxuICAgKi9cbiAgX2dldEJ1Y2tldFZhbHVlRm9yVXNlcjogZnVuY3Rpb24gX2dldEJ1Y2tldFZhbHVlRm9yVXNlcihzZWVkLCB1c2VySWQsIGRpc2FibGVMb2cpIHtcbiAgICB2YXIgaGFzaFZhbHVlID0gSGFzaGVyLnYzKHNlZWQsIENvbnN0YW50cy5TRUVEX1ZBTFVFKTtcblxuICAgIHZhciBidWNrZXRWYWx1ZSA9IEJ1Y2tldGluZ1NlcnZpY2UuX2dlbmVyYXRlQnVja2V0VmFsdWUoaGFzaFZhbHVlLCBDb25zdGFudHMuTUFYX1RSQUZGSUNfUEVSQ0VOVCk7XG5cbiAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuVVNFUl9IQVNIX0JVQ0tFVF9WQUxVRSwge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIGhhc2hWYWx1ZTogaGFzaFZhbHVlLFxuICAgICAgYnVja2V0VmFsdWU6IGJ1Y2tldFZhbHVlLFxuICAgICAgdXNlcklkOiB1c2VySWRcbiAgICB9KSwgZGlzYWJsZUxvZyk7XG4gICAgcmV0dXJuIGJ1Y2tldFZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgaWYgdGhpcyB1c2VyIHNob3VsZCBiZWNvbWUgcGFydCBvZiB0aGUgY2FtcGFpZ24gb3Igbm90XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgdGhlIHVuaXF1ZSBJRCBhc3NpZ25lZCB0byBhIHVzZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IGNhbXBhaWduIGZvdCBnZXR0aW5nIHRoZSB2YWx1ZSBvZiB0cmFmZmljIGFsbG90dGVkIHRvIHRoZSBjYW1wYWlnblxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBpZiBVc2VyIGlzIGEgcGFydCBvZiBDYW1wYWlnbiBvciBub3RcbiAgICovXG4gIGlzVXNlclBhcnRPZkNhbXBhaWduOiBmdW5jdGlvbiBpc1VzZXJQYXJ0T2ZDYW1wYWlnbih1c2VySWQsIGNhbXBhaWduKSB7XG4gICAgdmFyIGRpc2FibGVMb2cgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlO1xuXG4gICAgaWYgKCFjYW1wYWlnbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciB0cmFmZmljQWxsb2NhdGlvbiA9IGNhbXBhaWduLnBlcmNlbnRUcmFmZmljO1xuXG4gICAgdmFyIHZhbHVlQXNzaWduZWRUb1VzZXIgPSBCdWNrZXRpbmdTZXJ2aWNlLl9nZXRCdWNrZXRWYWx1ZUZvclVzZXIoQ2FtcGFpZ25VdGlsLmdldEJ1Y2tldGluZ1NlZWQodXNlcklkLCBjYW1wYWlnbiksIHVzZXJJZCwgZGlzYWJsZUxvZyk7XG5cbiAgICB2YXIgaXNVc2VyUGFydCA9IHZhbHVlQXNzaWduZWRUb1VzZXIgIT09IDAgJiYgdmFsdWVBc3NpZ25lZFRvVXNlciA8PSB0cmFmZmljQWxsb2NhdGlvbjtcbiAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLlVTRVJfQ0FNUEFJR05fRUxJR0lCSUxJVFksIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbi5rZXksXG4gICAgICBzdGF0dXM6IGlzVXNlclBhcnQgPyAnZWxpZ2libGUnIDogJ25vdCBlbGlnaWJsZSdcbiAgICB9KSwgZGlzYWJsZUxvZyk7XG4gICAgcmV0dXJuIGlzVXNlclBhcnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGUgVXNlciBJRCBhbmQgZ2VuZXJhdGVzIFZhcmlhdGlvbiBpbnRvIHdoaWNoIHRoZSBVc2VyIGlzIGJ1Y2tldGVkIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkIHRoZSB1bmlxdWUgSUQgYXNzaWduZWQgdG8gVXNlclxuICAgKiBAcGFyYW0ge09iamVjdH0gY2FtcGFpZ24gdGhlIENhbXBhaWduIG9mIHdoaWNoIFVzZXIgaXMgYSBwYXJ0IG9mXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdHxudWxsfSB2YXJpYXRpb24gZGF0YSBpbnRvIHdoaWNoIHVzZXIgaXMgYnVja2V0ZWQgaW4gb3IgbnVsbCBpZiBub3RcbiAgICovXG4gIGJ1Y2tldFVzZXJUb1ZhcmlhdGlvbjogZnVuY3Rpb24gYnVja2V0VXNlclRvVmFyaWF0aW9uKHVzZXJJZCwgY2FtcGFpZ24pIHtcbiAgICB2YXIgbXVsdGlwbGllcjtcblxuICAgIGlmICghVmFsaWRhdGVVdGlsLmlzVmFsaWRWYWx1ZSh1c2VySWQpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIWNhbXBhaWduKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoY2FtcGFpZ24ucGVyY2VudFRyYWZmaWMpIHtcbiAgICAgIG11bHRpcGxpZXIgPSBDb25zdGFudHMuTUFYX1RSQUZGSUNfVkFMVUUgLyBjYW1wYWlnbi5wZXJjZW50VHJhZmZpYyAvIDEwMDtcbiAgICB9XG5cbiAgICB2YXIgaGFzaFZhbHVlID0gQnVja2V0aW5nU2VydmljZS5fZ2VuZXJhdGVIYXNoVmFsdWUoY2FtcGFpZ24uaXNCdWNrZXRpbmdTZWVkRW5hYmxlZCA/IFwiXCIuY29uY2F0KGNhbXBhaWduLmlkLCBcIl9cIikuY29uY2F0KHVzZXJJZCkgOiB1c2VySWQpO1xuXG4gICAgdmFyIGJ1Y2tldFZhbHVlID0gQnVja2V0aW5nU2VydmljZS5fZ2VuZXJhdGVCdWNrZXRWYWx1ZShoYXNoVmFsdWUsIENvbnN0YW50cy5NQVhfVFJBRkZJQ19WQUxVRSwgbXVsdGlwbGllcik7XG5cbiAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuVVNFUl9DQU1QQUlHTl9CVUNLRVRfVkFMVUVTLCB7XG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ24ua2V5LFxuICAgICAgcGVyY2VudFRyYWZmaWM6IGNhbXBhaWduLnBlcmNlbnRUcmFmZmljLFxuICAgICAgYnVja2V0VmFsdWU6IGJ1Y2tldFZhbHVlLFxuICAgICAgaGFzaFZhbHVlOiBoYXNoVmFsdWVcbiAgICB9KSk7XG4gICAgcmV0dXJuIEJ1Y2tldGluZ1NlcnZpY2UuX2dldFZhcmlhdGlvbihjYW1wYWlnbi52YXJpYXRpb25zLCBidWNrZXRWYWx1ZSk7XG4gIH0sXG4gIGNhbGN1bGF0ZUJ1Y2tldFZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVCdWNrZXRWYWx1ZShzZWVkKSB7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7XG5cbiAgICB2YXIgaGFzaFZhbHVlID0gQnVja2V0aW5nU2VydmljZS5fZ2VuZXJhdGVIYXNoVmFsdWUoc2VlZCk7XG5cbiAgICByZXR1cm4gQnVja2V0aW5nU2VydmljZS5fZ2VuZXJhdGVCdWNrZXRWYWx1ZShoYXNoVmFsdWUsIENvbnN0YW50cy5NQVhfVFJBRkZJQ19WQUxVRSwgbXVsdGlwbGllcik7XG4gIH0sXG4gIF9nZW5lcmF0ZUhhc2hWYWx1ZTogZnVuY3Rpb24gX2dlbmVyYXRlSGFzaFZhbHVlKHVzZXJJZCkge1xuICAgIHJldHVybiBIYXNoZXIudjModXNlcklkLCBDb25zdGFudHMuU0VFRF9WQUxVRSk7XG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IEJ1Y2tldGluZ1NlcnZpY2U7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2NvcmUvU2VnbWVudEV2YWx1YXRvci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvY29yZS9TZWdtZW50RXZhbHVhdG9yLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIFNlZ21lbnRFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvc2VnbWVudCAqLyBcIi4vbGliL2VudW1zL3NlZ21lbnQvaW5kZXguanNcIik7XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL09iamVjdFV0aWwgKi8gXCIuL2xpYi91dGlscy9PYmplY3RVdGlsLmpzXCIpLFxuICAgIGdldEtleVZhbHVlID0gX3JlcXVpcmUuZ2V0S2V5VmFsdWU7XG5cbnZhciBfcmVxdWlyZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9TZWdtZW50VXRpbCAqLyBcIi4vbGliL3V0aWxzL1NlZ21lbnRVdGlsLmpzXCIpLFxuICAgIG9wZXJhbmRDdXN0b21WYXJpYWJsZXNQYXJzZXIgPSBfcmVxdWlyZTIub3BlcmFuZEN1c3RvbVZhcmlhYmxlc1BhcnNlcixcbiAgICBvcGVyYW5kVXNlclBhcnNlciA9IF9yZXF1aXJlMi5vcGVyYW5kVXNlclBhcnNlcjtcblxudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9sb2dnaW5nICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiKTtcblxudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0RhdGFUeXBlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiKTtcblxudmFyIEZpbGVOYW1lRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0ZpbGVOYW1lRW51bSAqLyBcIi4vbGliL2VudW1zL0ZpbGVOYW1lRW51bS5qc1wiKTtcblxudmFyIF9TZWdtZW50RW51bSRTZWdtZW50TyA9IFNlZ21lbnRFbnVtLlNlZ21lbnRPcGVyYXRvclR5cGVzLFxuICAgIEFORCA9IF9TZWdtZW50RW51bSRTZWdtZW50Ty5BTkQsXG4gICAgT1IgPSBfU2VnbWVudEVudW0kU2VnbWVudE8uT1IsXG4gICAgTk9UID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPLk5PVDtcbnZhciBfU2VnbWVudEVudW0kU2VnbWVudE8yID0gU2VnbWVudEVudW0uU2VnbWVudE9wZXJhbmRUeXBlcyxcbiAgICBDVVNUT01fVkFSSUFCTEUgPSBfU2VnbWVudEVudW0kU2VnbWVudE8yLkNVU1RPTV9WQVJJQUJMRSxcbiAgICBVU0VSID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPMi5VU0VSO1xudmFyIExvZ0xldmVsRW51bSA9IGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5TZWdtZW50RXZhbHVhdG9yO1xudmFyIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCk7XG5tb2R1bGUuZXhwb3J0cyA9IFNlZ21lbnRFdmFsdWF0b3I7XG4vKipcbiAqIFRoaXMgbWV0aG9kOiBBIHBhcnNlciB3aGljaCByZWN1cnNpdmVseSBldmFsdWF0ZXMgdGhlIGV4cHJlc3Npb24gdHJlZSByZXByZXNlbnRlZCBieSBkc2xcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZHNsICAgICAgICAgICAgICAgICAgICAgVGhlIHNlZ21lbnRzIGRlZmluZWQgaW4gdGhlIGNhbXBhaW5nXG4gKiBAcGFyYW0ge09iamVjdH0gY3VzdG9tVmFyaWFibGVzICAgICAgICAgS2V5L3ZhbHVlIHBhaXIgb2YgY3VzdG9tX2F0dHJpYnV0cyBwcm9wZXJ0aWVzXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgIHRydWUgaWYgdXNlciBpcyB0byBiZSBtYWRlIHBhcnQgb2YgY2FtcGFpZ24sIGVsc2UgZmFsc2VcbiAqL1xuXG5mdW5jdGlvbiBldmFsdWF0b3IoZHNsLCBjdXN0b21WYXJpYWJsZXMpIHtcbiAgdmFyIF9nZXRLZXlWYWx1ZSA9IGdldEtleVZhbHVlKGRzbCksXG4gICAgICBrZXkgPSBfZ2V0S2V5VmFsdWUua2V5LFxuICAgICAgdmFsdWUgPSBfZ2V0S2V5VmFsdWUudmFsdWU7XG5cbiAgdmFyIG9wZXJhdG9yID0ga2V5O1xuICB2YXIgc3ViRHNsID0gdmFsdWU7XG5cbiAgaWYgKG9wZXJhdG9yID09PSBOT1QpIHtcbiAgICByZXR1cm4gIWV2YWx1YXRvcihzdWJEc2wsIGN1c3RvbVZhcmlhYmxlcyk7XG4gIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IEFORCkge1xuICAgIHZhciBsaXN0ID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YkRzbC5sZW5ndGg7IGkrKykge1xuICAgICAgbGlzdC5wdXNoKGV2YWx1YXRvcihzdWJEc2xbaV0sIGN1c3RvbVZhcmlhYmxlcykpO1xuICAgIH1cblxuICAgIHJldHVybiBsaXN0LmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgIHJldHVybiB2YWw7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IE9SKSB7XG4gICAgdmFyIF9saXN0ID0gW107XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgc3ViRHNsLmxlbmd0aDsgX2krKykge1xuICAgICAgX2xpc3QucHVzaChldmFsdWF0b3Ioc3ViRHNsW19pXSwgY3VzdG9tVmFyaWFibGVzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9saXN0LnNvbWUoZnVuY3Rpb24gKHZhbCkge1xuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gQ1VTVE9NX1ZBUklBQkxFKSB7XG4gICAgcmV0dXJuIG9wZXJhbmRDdXN0b21WYXJpYWJsZXNQYXJzZXIoc3ViRHNsLCBjdXN0b21WYXJpYWJsZXMpO1xuICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBVU0VSKSB7XG4gICAgcmV0dXJuIG9wZXJhbmRVc2VyUGFyc2VyKHN1YkRzbCwgY3VzdG9tVmFyaWFibGVzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBTZWdtZW50RXZhbHVhdG9yKGRzbCkge1xuICB2YXIgY3VzdG9tVmFyaWFibGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgdmFyIGNhbXBhaWduS2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7XG4gIHZhciB1c2VySWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDtcbiAgdmFyIHZhcmlhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogJyc7XG4gIHZhciBkaXNhYmxlTG9ncyA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDogZmFsc2U7XG5cbiAgdHJ5IHtcbiAgICBpZiAoRGF0YVR5cGVVdGlsLmlzT2JqZWN0KGRzbCkgJiYgIU9iamVjdC5rZXlzKGRzbCkubGVuZ3RoKSB7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuU0VHTUVOVEFUSU9OX1NLSVBQRUQsIHtcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZmlsZTogZmlsZVxuICAgICAgfSksIGRpc2FibGVMb2dzKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChEYXRhVHlwZVV0aWwuaXNPYmplY3QoZHNsKSAmJiBPYmplY3Qua2V5cyhkc2wpLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGV2YWx1YXRvcihkc2wsIGN1c3RvbVZhcmlhYmxlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5TRUdNRU5UQVRJT05fRVJST1IsIHtcbiAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgY3VzdG9tVmFyaWFibGVzOiBKU09OLnN0cmluZ2lmeShjdXN0b21WYXJpYWJsZXMpLFxuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIGVycjogZXJyLFxuICAgICAgdmFyaWF0aW9uOiB2YXJpYXRpb25cbiAgICB9KSwgZGlzYWJsZUxvZ3MpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi9jb3JlL1ZhcmlhdGlvbkRlY2lkZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL2NvcmUvVmFyaWF0aW9uRGVjaWRlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBWYWxpZGF0ZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9WYWxpZGF0ZVV0aWwgKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIik7XG5cbnZhciBCdWNrZXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vQnVja2V0aW5nU2VydmljZSAqLyBcIi4vbGliL2NvcmUvQnVja2V0aW5nU2VydmljZS5qc1wiKTtcblxudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9sb2dnaW5nICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiKTtcblxudmFyIEZpbGVOYW1lRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0ZpbGVOYW1lRW51bSAqLyBcIi4vbGliL2VudW1zL0ZpbGVOYW1lRW51bS5qc1wiKTtcblxudmFyIExvZ0xldmVsRW51bSA9IGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoKTtcbnZhciBmaWxlID0gRmlsZU5hbWVFbnVtLlZhcmlhdGlvbkRlY2lkZXI7XG52YXIgVmFyaWF0aW9uRGVjaWRlciA9IHtcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFZhcmlhdGlvbiBBbGxvdHRlZCB0byBVc2VyXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgdGhlIHVuaXF1ZSBJRCBhc3NpZ25lZCB0byBVc2VyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjYW1wYWlnblxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFZhcmlhdGlvbiBvYmplY3QgYWxsb3R0ZWQgdG8gVXNlclxuICAgKi9cbiAgZ2V0VmFyaWF0aW9uQWxsb3R0ZWQ6IGZ1bmN0aW9uIGdldFZhcmlhdGlvbkFsbG90dGVkKHVzZXJJZCwgY2FtcGFpZ24pIHtcbiAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICB2YXJpYXRpb246IG51bGwsXG4gICAgICB2YXJpYXRpb25JZDogbnVsbCxcbiAgICAgIHZhcmlhdGlvbk5hbWU6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKCFWYWxpZGF0ZVV0aWwuaXNWYWxpZFZhbHVlKHVzZXJJZCkpIHtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5VU0VSX0lEX0lOVkFMSUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICBpZiAoQnVja2V0ZXIuaXNVc2VyUGFydE9mQ2FtcGFpZ24odXNlcklkLCBjYW1wYWlnbikpIHtcbiAgICAgIHZhciB2YXJpYXRpb24gPSBWYXJpYXRpb25EZWNpZGVyLmdldFZhcmlhdGlvbk9mQ2FtcGFpZ25Gb3JVc2VyKHVzZXJJZCwgY2FtcGFpZ24pIHx8IHt9O1xuICAgICAgcmVzcG9uc2UudmFyaWF0aW9uID0gdmFyaWF0aW9uO1xuICAgICAgcmVzcG9uc2UudmFyaWF0aW9uSWQgPSB2YXJpYXRpb24uaWQ7XG4gICAgICByZXNwb25zZS52YXJpYXRpb25OYW1lID0gdmFyaWF0aW9uLm5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuVVNFUl9OT1RfUEFSVF9PRl9DQU1QQUlHTiwge1xuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduLmtleVxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSxcblxuICAvKipcbiAgICogQXNzaWducyByYW5kb20gdmFyaWF0aW9uIElEIHRvIGEgcGFydGljdWxhciB1c2VyIGRlcGVuZGluZyBvbiB0aGUgUGVyY2VudFRyYWZmaWMuXG4gICAqIE1ha2VzIHVzZXIgYSBwYXJ0IG9mIGNhbXBhaWduIGlmIHVzZXIncyBpbmNsdWRlZCBpbiBUcmFmZmljLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkIHRoZSB1bmlxdWUgSUQgYXNzaWduZWQgdG8gYSB1c2VyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjYW1wYWlnbiB0aGUgQ2FtcGFpZ24gb2Ygd2hpY2ggdXNlciBpcyB0byBiZSBtYWRlIGEgcGFydCBvZlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R8bnVsbH0gVmFyaWF0aW9uIGFsbG90dGVkIHRvIFVzZXJcbiAgICovXG4gIGdldFZhcmlhdGlvbk9mQ2FtcGFpZ25Gb3JVc2VyOiBmdW5jdGlvbiBnZXRWYXJpYXRpb25PZkNhbXBhaWduRm9yVXNlcih1c2VySWQsIGNhbXBhaWduKSB7XG4gICAgaWYgKCFjYW1wYWlnbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHZhcmlhdGlvbiA9IEJ1Y2tldGVyLmJ1Y2tldFVzZXJUb1ZhcmlhdGlvbih1c2VySWQsIGNhbXBhaWduKTtcblxuICAgIGlmICh2YXJpYXRpb24gJiYgdmFyaWF0aW9uLm5hbWUpIHtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuVVNFUl9WQVJJQVRJT05fU1RBVFVTLCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ24ua2V5LFxuICAgICAgICBzdGF0dXM6IFwiZ290IFZhcmF0aW9uOlwiLmNvbmNhdCh2YXJpYXRpb24ubmFtZSlcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhcmlhdGlvbjogdmFyaWF0aW9uLFxuICAgICAgICBuYW1lOiB2YXJpYXRpb24ubmFtZSxcbiAgICAgICAgaWQ6IHZhcmlhdGlvbi5pZFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLlVTRVJfVkFSSUFUSU9OX1NUQVRVUywge1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduLmtleSxcbiAgICAgIHN0YXR1czogJ2dvdCBubyB2YXJpYXRpb24nXG4gICAgfSkpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBWYXJpYXRpb25EZWNpZGVyO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi9lbnVtcy9BbnNpQ29sb3JFbnVtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvZW51bXMvQW5zaUNvbG9yRW51bS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgQW5zaUNvbG9yRW51bSA9IHtcbiAgQk9MRDogJ1xceDFiWzFtJyxcbiAgQ1lBTjogJ1xceDFiWzM2bScsXG4gIEdSRUVOOiAnXFx4MWJbMzJtJyxcbiAgTElHSFRCTFVFOiAnXFx4MWJbOTRtJyxcbiAgUkVEOiAnXFx4MWJbMzFtJyxcbiAgUkVTRVQ6ICdcXHgxYlswbScsXG4gIFdISVRFOiAnXFx4MWJbMzBtJyxcbiAgWUVMTE9XOiAnXFx4MWJbMzNtJ1xufTtcbm1vZHVsZS5leHBvcnRzID0gQW5zaUNvbG9yRW51bTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvZW51bXMvQXBpRW51bS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL2VudW1zL0FwaUVudW0uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEFwaUVudW0gPSB7XG4gIExBVU5DSDogJ2xhdW5jaCcsXG4gIEFDVElWQVRFOiAnYWN0aXZhdGUnLFxuICBHRVRfVkFSSUFUSU9OX05BTUU6ICdnZXRWYXJpYXRpb24nLFxuICBUUkFDSzogJ3RyYWNrJyxcbiAgSVNfRkVBVFVSRV9FTkFCTEVEOiAnaXNGZWF0dXJlRW5hYmxlZCcsXG4gIEdFVF9GRUFUVVJFX1ZBUklBQkxFX1ZBTFVFOiAnZ2V0RmVhdHVyZVZhcmlhYmxlVmFsdWUnLFxuICBQVVNIOiAncHVzaCdcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEFwaUVudW07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL0NhbXBhaWduVHlwZUVudW0uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9DYW1wYWlnblR5cGVFbnVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBDYW1wYWlnblR5cGVFbnVtID0ge1xuICBGRUFUVVJFX1RFU1Q6ICdGRUFUVVJFX1RFU1QnLFxuICBGRUFUVVJFX1JPTExPVVQ6ICdGRUFUVVJFX1JPTExPVVQnLFxuICBBQjogJ1ZJU1VBTF9BQidcbn07XG5tb2R1bGUuZXhwb3J0cyA9IENhbXBhaWduVHlwZUVudW07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL0RhdGFUeXBlRW51bS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvZW51bXMvRGF0YVR5cGVFbnVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIERhdGFUeXBlRW51bSA9IHtcbiAgTlVNQkVSOiAnbnVtYmVyJyxcbiAgU1RSSU5HOiAnc3RyaW5nJyxcbiAgLy8gRlVOQ1RJT046ICdmdW5jdGlvbicsXG4gIEJPT0xFQU46ICdib29sZWFuJyxcbiAgT0JKRUNUOiAnb2JqZWN0J1xufTtcbm1vZHVsZS5leHBvcnRzID0gRGF0YVR5cGVFbnVtO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi9lbnVtcy9FdmVudEVudW0uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL2VudW1zL0V2ZW50RW51bS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBFdmVudEVudW0gPSB7XG4gIFZXT19WQVJJQVRJT05fU0hPV046ICd2d29fdmFyaWF0aW9uU2hvd24nLFxuICBWV09fU1lOQ19WSVNJVE9SX1BST1A6ICd2d29fc3luY1Zpc2l0b3JQcm9wJ1xufTtcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbnVtO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi9lbnVtcy9GZWF0dXJlVmFyaWFibGVUeXBlRW51bS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9GZWF0dXJlVmFyaWFibGVUeXBlRW51bS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEZlYXR1cmVWYXJpYWJsZVR5cGVFbnVtID0ge1xuICBCT09MRUFOOiAnYm9vbGVhbicsXG4gIERPVUJMRTogJ2RvdWJsZScsXG4gIElOVEVHRVI6ICdpbnRlZ2VyJyxcbiAgU1RSSU5HOiAnc3RyaW5nJyxcbiAgSlNPTjogJ2pzb24nXG59O1xubW9kdWxlLmV4cG9ydHMgPSBGZWF0dXJlVmFyaWFibGVUeXBlRW51bTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvZW51bXMvRmlsZU5hbWVFbnVtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgTElCX1BBVEggPSAnbGliJztcbnZhciBDT1JFX1BBVEggPSAnbGliL2NvcmUnO1xudmFyIFVUSUxfUEFUSCA9ICdsaWIvdXRpbCc7XG52YXIgU0VSVklDRVNfUEFUSCA9ICdsaWIvc2VydmljZXMnO1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIElOREVYOiBcIlwiLmNvbmNhdChMSUJfUEFUSCwgXCIvaW5kZXhcIiksXG4gIFZXTzogXCJcIi5jb25jYXQoTElCX1BBVEgsIFwiL1ZXT1wiKSxcbiAgQVBJOiBcIlwiLmNvbmNhdChMSUJfUEFUSCwgXCIvYXBpL2luZGV4XCIpLFxuICBBY3RpdmF0ZTogXCJcIi5jb25jYXQoTElCX1BBVEgsIFwiL2FwaS9hY3RpdmF0ZVwiKSxcbiAgR2V0VmFyaWF0aW9uOiBcIlwiLmNvbmNhdChMSUJfUEFUSCwgXCIvYXBpL2dldFZhcmlhdGlvblwiKSxcbiAgVHJhY2s6IFwiXCIuY29uY2F0KExJQl9QQVRILCBcIi9hcGkvdHJhY2tcIiksXG4gIElzRmVhdHVyZUVuYWJsZWQ6IFwiXCIuY29uY2F0KExJQl9QQVRILCBcIi9hcGkvaXNGZWF0dXJlRW5hYmxlZFwiKSxcbiAgR2V0RmVhdHVyZVZhcmlhYmxlVmFsdWU6IFwiXCIuY29uY2F0KExJQl9QQVRILCBcIi9hcGkvZ2V0RmVhdHVyZVZhcmlhYmxlVmFsdWVcIiksXG4gIFB1c2g6IFwiXCIuY29uY2F0KExJQl9QQVRILCBcIi9hcGkvcHVzaFwiKSxcbiAgU2VnbWVudEV2YWx1YXRvcjogXCJcIi5jb25jYXQoQ09SRV9QQVRILCBcIi9TZWdtZW50RXZhbHVhdG9yXCIpLFxuICBCdWNrZXRpbmdTZXJ2aWNlOiBcIlwiLmNvbmNhdChDT1JFX1BBVEgsIFwiL0J1Y2tldGluZ1NlcnZpY2VcIiksXG4gIFZhcmlhdGlvbkRlY2lkZXI6IFwiXCIuY29uY2F0KENPUkVfUEFUSCwgXCIvVmFyaWF0aW9uRGVjaWRlclwiKSxcbiAgQ29uc29sZUxvZ01hbmFnZXI6IFwiXCIuY29uY2F0KFNFUlZJQ0VTX1BBVEgsIFwiL0NvbnNvbGVMb2dNYW5hZ2VyXCIpLFxuICBFdmVudFF1ZXVlOiBcIlwiLmNvbmNhdChTRVJWSUNFU19QQVRILCBcIi9FdmVudFF1ZXVlXCIpLFxuICBMb2dnaW5nTWFuYWdlcjogXCJcIi5jb25jYXQoU0VSVklDRVNfUEFUSCwgXCIvTG9nZ2luZ01hbmFnZXJcIiksXG4gIFNldHRpbmdzRmlsZU1hbmFnZXI6IFwiXCIuY29uY2F0KFNFUlZJQ0VTX1BBVEgsIFwiL1NldHRpbmdzRmlsZU1hbmFnZXJcIiksXG4gIEJhdGNoRXZlbnRzUXVldWU6IFwiXCIuY29uY2F0KFNFUlZJQ0VTX1BBVEgsIFwiL0JhdGNoRXZlbnRzUXVldWVcIiksXG4gIENhbXBhaWduVXRpbDogXCJcIi5jb25jYXQoVVRJTF9QQVRILCBcIi9DYW1wYWlnblV0aWxcIiksXG4gIERhdGFUeXBlVXRpbDogXCJcIi5jb25jYXQoVVRJTF9QQVRILCBcIi9EYXRhVHlwZVV0aWxcIiksXG4gIEV2ZW50RGlzcGF0Y2hlcjogXCJcIi5jb25jYXQoVVRJTF9QQVRILCBcIi9FdmVudERpc3BhdGNoZXJcIiksXG4gIEV2ZW50RGlzcGF0Y2hlclV0aWw6IFwiXCIuY29uY2F0KFVUSUxfUEFUSCwgXCIvRXZlbnREaXNwYXRjaGVyVXRpbFwiKSxcbiAgRmVhdHVyZVV0aWw6IFwiXCIuY29uY2F0KFVUSUxfUEFUSCwgXCIvRmVhdHVyZVV0aWxcIiksXG4gIEZ1bmN0aW9udXRpbDogXCJcIi5jb25jYXQoVVRJTF9QQVRILCBcIi9GdW5jdGlvbnV0aWxcIiksXG4gIEltcHJlc3Npb25VdGlsOiBcIlwiLmNvbmNhdChVVElMX1BBVEgsIFwiL0ltcHJlc3Npb25VdGlsXCIpLFxuICBVdWlkVXRpbDogXCJcIi5jb25jYXQoVVRJTF9QQVRILCBcIi9VdWlkVXRpbFwiKSxcbiAgVmFsaWRhdGVVdGlsOiBcIlwiLmNvbmNhdChVVElMX1BBVEgsIFwiL1ZhbGlkYXRlVXRpbFwiKSxcbiAgRGVjaXNpb25VdGlsOiBcIlwiLmNvbmNhdChVVElMX1BBVEgsIFwiL0RlY2lzaW9uVXRpbHNcIiksXG4gIEh0dHBIYW5kbGVyVXRpbDogXCJcIi5jb25jYXQoVVRJTF9QQVRILCBcIi9IdHRwSGFuZGxlclV0aWxcIiksXG4gIEh0dHBJbWFnZVV0aWw6IFwiXCIuY29uY2F0KFVUSUxfUEFUSCwgXCIvSHR0cEltYWdlVXRpbFwiKSxcbiAgVXNhZ2VTdGF0c1V0aWw6IFwiXCIuY29uY2F0KFNFUlZJQ0VTX1BBVEgsIFwiL1VzYWdlU3RhdHNcIilcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL0dvYWxUeXBlRW51bS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvZW51bXMvR29hbFR5cGVFbnVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEdvYWxUeXBlRW51bSA9IHtcbiAgUkVWRU5VRTogJ1JFVkVOVUVfVFJBQ0tJTkcnLFxuICBDVVNUT006ICdDVVNUT01fR09BTCcsXG4gIEFMTDogJ0FMTCdcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEdvYWxUeXBlRW51bTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvZW51bXMvSG9va3NFbnVtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9Ib29rc0VudW0uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgSG9va3NFbnVtID0ge1xuICBERUNJU0lPTl9UWVBFUzoge1xuICAgIENBTVBBSUdOX0RFQ0lTSU9OOiAnQ0FNUEFJR05fREVDSVNJT04nXG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IEhvb2tzRW51bTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvZW51bXMvTG9nTGV2ZWxFbnVtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9Mb2dMZXZlbEVudW0uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBfTG9nTGV2ZWxDb2xvckluZm9FbnUsIF9Mb2dMZXZlbEluZm9FbnVtO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEFuc2lDb2xvckVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0Fuc2lDb2xvckVudW0gKi8gXCIuL2xpYi9lbnVtcy9BbnNpQ29sb3JFbnVtLmpzXCIpO1xuXG52YXIgTG9nTnVtYmVyTGV2ZWwgPSB7XG4gIF8wOiAnTk9UU0VUJyxcbiAgXzE6ICdERUJVRycsXG4gIF8yOiAnSU5GTycsXG4gIF8zOiAnV0FSTicsXG4gIF80OiAnRVJST1InXG59O1xudmFyIExvZ0xldmVsRW51bSA9IHtcbiAgTk9UU0VUOiAwLFxuICBERUJVRzogMSxcbiAgSU5GTzogMixcbiAgV0FSTjogMyxcbiAgRVJST1I6IDRcbn07XG52YXIgTG9nTGV2ZWxDb2xvckluZm9FbnVtID0gKF9Mb2dMZXZlbENvbG9ySW5mb0VudSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX0xvZ0xldmVsQ29sb3JJbmZvRW51LCBMb2dMZXZlbEVudW0uTk9UU0VULCBcIlwiLmNvbmNhdChBbnNpQ29sb3JFbnVtLkJPTEQpLmNvbmNhdChBbnNpQ29sb3JFbnVtLldISVRFLCBcIltOT1RTRVRdOlwiKS5jb25jYXQoQW5zaUNvbG9yRW51bS5SRVNFVCkpLCBfZGVmaW5lUHJvcGVydHkoX0xvZ0xldmVsQ29sb3JJbmZvRW51LCBMb2dMZXZlbEVudW0uREVCVUcsIFwiXCIuY29uY2F0KEFuc2lDb2xvckVudW0uQk9MRCkuY29uY2F0KEFuc2lDb2xvckVudW0uTElHSFRCTFVFLCBcIltERUJVR106IFwiKS5jb25jYXQoQW5zaUNvbG9yRW51bS5SRVNFVCkpLCBfZGVmaW5lUHJvcGVydHkoX0xvZ0xldmVsQ29sb3JJbmZvRW51LCBMb2dMZXZlbEVudW0uSU5GTywgXCJcIi5jb25jYXQoQW5zaUNvbG9yRW51bS5CT0xEKS5jb25jYXQoQW5zaUNvbG9yRW51bS5DWUFOLCBcIltJTkZPXTogIFwiKS5jb25jYXQoQW5zaUNvbG9yRW51bS5SRVNFVCkpLCBfZGVmaW5lUHJvcGVydHkoX0xvZ0xldmVsQ29sb3JJbmZvRW51LCBMb2dMZXZlbEVudW0uV0FSTiwgXCJcIi5jb25jYXQoQW5zaUNvbG9yRW51bS5CT0xEKS5jb25jYXQoQW5zaUNvbG9yRW51bS5ZRUxMT1csIFwiW1dBUk5dOiAgXCIpLmNvbmNhdChBbnNpQ29sb3JFbnVtLlJFU0VUKSksIF9kZWZpbmVQcm9wZXJ0eShfTG9nTGV2ZWxDb2xvckluZm9FbnUsIExvZ0xldmVsRW51bS5FUlJPUiwgXCJcIi5jb25jYXQoQW5zaUNvbG9yRW51bS5CT0xEKS5jb25jYXQoQW5zaUNvbG9yRW51bS5SRUQsIFwiW0VSUk9SXTogXCIpLmNvbmNhdChBbnNpQ29sb3JFbnVtLlJFU0VUKSksIF9Mb2dMZXZlbENvbG9ySW5mb0VudSk7XG52YXIgTG9nTGV2ZWxJbmZvRW51bSA9IChfTG9nTGV2ZWxJbmZvRW51bSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX0xvZ0xldmVsSW5mb0VudW0sIExvZ0xldmVsRW51bS5OT1RTRVQsIFwiW05PVFNFVF06XCIpLCBfZGVmaW5lUHJvcGVydHkoX0xvZ0xldmVsSW5mb0VudW0sIExvZ0xldmVsRW51bS5ERUJVRywgXCJbREVCVUddOiBcIiksIF9kZWZpbmVQcm9wZXJ0eShfTG9nTGV2ZWxJbmZvRW51bSwgTG9nTGV2ZWxFbnVtLklORk8sIFwiW0lORk9dOiAgXCIpLCBfZGVmaW5lUHJvcGVydHkoX0xvZ0xldmVsSW5mb0VudW0sIExvZ0xldmVsRW51bS5XQVJOLCBcIltXQVJOXTogIFwiKSwgX2RlZmluZVByb3BlcnR5KF9Mb2dMZXZlbEluZm9FbnVtLCBMb2dMZXZlbEVudW0uRVJST1IsIFwiW0VSUk9SXTogXCIpLCBfTG9nTGV2ZWxJbmZvRW51bSk7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgTG9nTGV2ZWxFbnVtOiBMb2dMZXZlbEVudW0sXG4gIExvZ051bWJlckxldmVsOiBMb2dOdW1iZXJMZXZlbCxcbiAgTG9nTGV2ZWxJbmZvRW51bTogTG9nTGV2ZWxJbmZvRW51bSxcbiAgTG9nTGV2ZWxDb2xvckluZm9FbnVtOiBMb2dMZXZlbENvbG9ySW5mb0VudW1cbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL1N0YXR1c0VudW0uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9TdGF0dXNFbnVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICBQQVNTRUQ6ICdwYXNzZWQnLFxuICBGQUlMRUQ6ICdmYWlsZWQnXG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi9lbnVtcy9VcmxFbnVtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvZW51bXMvVXJsRW51bS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgVXJsRW51bSA9IHtcbiAgQkFTRV9VUkw6ICdkZXYudmlzdWFsd2Vic2l0ZW9wdGltaXplci5jb20nLFxuICBTRVRUSU5HU19VUkw6ICcvc2VydmVyLXNpZGUvc2V0dGluZ3MnLFxuICBXRUJIT09LX1NFVFRJTkdTX1VSTDogJy9zZXJ2ZXItc2lkZS9wdWxsJyxcbiAgVFJBQ0tfVVNFUjogJy9zZXJ2ZXItc2lkZS90cmFjay11c2VyJyxcbiAgVFJBQ0tfR09BTDogJy9zZXJ2ZXItc2lkZS90cmFjay1nb2FsJyxcbiAgUFVTSDogJy9zZXJ2ZXItc2lkZS9wdXNoJyxcbiAgQkFUQ0hfRVZFTlRTOiAnL3NlcnZlci1zaWRlL2JhdGNoLWV2ZW50cycsXG4gIEVWRU5UUzogJy9ldmVudHMvdCdcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFVybEVudW07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL3NlZ21lbnQvU2VnbWVudE9wZXJhbmRUeXBlc0VudW0uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9zZWdtZW50L1NlZ21lbnRPcGVyYW5kVHlwZXNFbnVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICBDVVNUT01fVkFSSUFCTEU6ICdjdXN0b21fdmFyaWFibGUnLFxuICBVU0VSOiAndXNlcidcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL3NlZ21lbnQvU2VnbWVudE9wZXJhbmRWYWx1ZVR5cGVSZWdleGVzRW51bS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvZW51bXMvc2VnbWVudC9TZWdtZW50T3BlcmFuZFZhbHVlVHlwZVJlZ2V4ZXNFbnVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIExPV0VSOiAvXmxvd2VyLyxcbiAgTE9XRVJfTUFUQ0g6IC9ebG93ZXJcXCgoLiopXFwpLyxcbiAgV0lMRENBUkQ6IC9ed2lsZGNhcmQvLFxuICBXSUxEQ0FSRF9NQVRDSDogL153aWxkY2FyZFxcKCguKilcXCkvLFxuICBSRUdFWDogL15yZWdleC8sXG4gIFJFR0VYX01BVENIOiAvXnJlZ2V4XFwoKC4qKVxcKS8sXG4gIFNUQVJUSU5HX1NUQVI6IC9eXFwqLyxcbiAgRU5ESU5HX1NUQVI6IC9cXCokL1xufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvZW51bXMvc2VnbWVudC9TZWdtZW50T3BlcmFuZFZhbHVlc0VudW0uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvZW51bXMvc2VnbWVudC9TZWdtZW50T3BlcmFuZFZhbHVlc0VudW0uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICBMT1dFUl9WQUxVRTogMSxcbiAgU1RBUlRJTkdfRU5ESU5HX1NUQVJfVkFMVUU6IDIsXG4gIFNUQVJUSU5HX1NUQVJfVkFMVUU6IDMsXG4gIEVORElOR19TVEFSX1ZBTFVFOiA0LFxuICBSRUdFWF9WQUxVRTogNSxcbiAgRVFVQUxfVkFMVUU6IDZcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL3NlZ21lbnQvU2VnbWVudE9wZXJhdG9yVHlwZXNFbnVtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL2VudW1zL3NlZ21lbnQvU2VnbWVudE9wZXJhdG9yVHlwZXNFbnVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQU5EOiAnYW5kJyxcbiAgTk9UOiAnbm90JyxcbiAgT1I6ICdvcidcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL2VudW1zL3NlZ21lbnQvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9lbnVtcy9zZWdtZW50L2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBTZWdtZW50T3BlcmFuZFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TZWdtZW50T3BlcmFuZFR5cGVzRW51bSAqLyBcIi4vbGliL2VudW1zL3NlZ21lbnQvU2VnbWVudE9wZXJhbmRUeXBlc0VudW0uanNcIik7XG5cbnZhciBTZWdtZW50T3BlcmF0b3JUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vU2VnbWVudE9wZXJhdG9yVHlwZXNFbnVtICovIFwiLi9saWIvZW51bXMvc2VnbWVudC9TZWdtZW50T3BlcmF0b3JUeXBlc0VudW0uanNcIik7XG5cbnZhciBTZWdtZW50T3BlcmFuZFZhbHVlVHlwZVJlZ2V4ZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1NlZ21lbnRPcGVyYW5kVmFsdWVUeXBlUmVnZXhlc0VudW0gKi8gXCIuL2xpYi9lbnVtcy9zZWdtZW50L1NlZ21lbnRPcGVyYW5kVmFsdWVUeXBlUmVnZXhlc0VudW0uanNcIik7XG5cbnZhciBTZWdtZW50T3BlcmFuZFZhbHVlcyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vU2VnbWVudE9wZXJhbmRWYWx1ZXNFbnVtICovIFwiLi9saWIvZW51bXMvc2VnbWVudC9TZWdtZW50T3BlcmFuZFZhbHVlc0VudW0uanNcIik7XG5cbnZhciBTZWdtZW50RW51bSA9IHtcbiAgU2VnbWVudE9wZXJhbmRUeXBlczogU2VnbWVudE9wZXJhbmRUeXBlcyxcbiAgU2VnbWVudE9wZXJhdG9yVHlwZXM6IFNlZ21lbnRPcGVyYXRvclR5cGVzLFxuICBTZWdtZW50T3BlcmFuZFZhbHVlVHlwZVJlZ2V4ZXM6IFNlZ21lbnRPcGVyYW5kVmFsdWVUeXBlUmVnZXhlcyxcbiAgU2VnbWVudE9wZXJhbmRWYWx1ZXM6IFNlZ21lbnRPcGVyYW5kVmFsdWVzXG59O1xubW9kdWxlLmV4cG9ydHMgPSBTZWdtZW50RW51bTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBWV08gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1ZXTyAqLyBcIi4vbGliL1ZXTy5qc1wiKTtcblxudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMvRGF0YVR5cGVVdGlsICovIFwiLi9saWIvdXRpbHMvRGF0YVR5cGVVdGlsLmpzXCIpO1xuXG52YXIgRnVuY3Rpb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91dGlscy9GdW5jdGlvblV0aWwgKi8gXCIuL2xpYi91dGlscy9GdW5jdGlvblV0aWwuanNcIik7XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMvT2JqZWN0VXRpbCAqLyBcIi4vbGliL3V0aWxzL09iamVjdFV0aWwuanNcIiksXG4gICAgb2JqZWN0VmFsdWVzID0gX3JlcXVpcmUub2JqZWN0VmFsdWVzO1xuXG52YXIgU2V0dGluZ3NGaWxlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMvU2V0dGluZ3NGaWxlVXRpbCAqLyBcIi4vbGliL3V0aWxzL1NldHRpbmdzRmlsZVV0aWwuanNcIik7XG5cbnZhciBHb2FsVHlwZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VudW1zL0dvYWxUeXBlRW51bSAqLyBcIi4vbGliL2VudW1zL0dvYWxUeXBlRW51bS5qc1wiKTtcblxudmFyIF9yZXF1aXJlMiA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uc3RhbnRzICovIFwiLi9saWIvY29uc3RhbnRzL2luZGV4LmpzXCIpLFxuICAgIE1BWF9FVkVOVFNfUEVSX1JFUVVFU1QgPSBfcmVxdWlyZTIuTUFYX0VWRU5UU19QRVJfUkVRVUVTVDtcblxudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NlcnZpY2VzL2xvZ2dpbmcgKi8gXCIuL2xpYi9zZXJ2aWNlcy9sb2dnaW5nL2luZGV4LmpzXCIpO1xuXG52YXIgQXBpRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW51bXMvQXBpRW51bSAqLyBcIi4vbGliL2VudW1zL0FwaUVudW0uanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VudW1zL0ZpbGVOYW1lRW51bSAqLyBcIi4vbGliL2VudW1zL0ZpbGVOYW1lRW51bS5qc1wiKTtcblxudmFyIGZpbGUgPSBGaWxlTmFtZUVudW0uSU5ERVg7XG52YXIgc2V0TG9nSGFuZGxlciA9IGxvZ2dpbmcuc2V0TG9nSGFuZGxlcixcbiAgICBzZXRMb2dMZXZlbCA9IGxvZ2dpbmcuc2V0TG9nTGV2ZWwsXG4gICAgTG9nTGV2ZWxFbnVtID0gbG9nZ2luZy5Mb2dMZXZlbEVudW0sXG4gICAgTG9nTnVtYmVyTGV2ZWwgPSBsb2dnaW5nLkxvZ051bWJlckxldmVsLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoKTsgLy8gQnkgZGVmYXVsdCwgYWxsIEVSUk9SUyBzaG91bGQgYmUgbG9nZ2VkXG5cbmxvZ2dpbmcuc2V0TG9nTGV2ZWwoTG9nTGV2ZWxFbnVtLkVSUk9SKTtcblxuZnVuY3Rpb24gbG9nRXJyb3IoKSB7XG4gIHZhciBwYXJhbWV0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICB2YXIgdHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHZhciBsb2cgPSBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5DT05GSUdfUEFSQU1FVEVSX0lOVkFMSUQsIHtcbiAgICBmaWxlOiBmaWxlLFxuICAgIHBhcmFtZXRlcjogcGFyYW1ldGVyLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgYXBpOiBBcGlFbnVtLkxBVU5DSFxuICB9KTtcbiAgdGhyb3cgbmV3IEVycm9yKGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBsb2cpKTtcbn1cblxuZnVuY3Rpb24gbG9nSW5mbygpIHtcbiAgdmFyIHBhcmFtZXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7XG4gIHZhciB0eXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgdmFyIGxvZyA9IExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuQ09ORklHX1BBUkFNRVRFUl9VU0VELCB7XG4gICAgZmlsZTogZmlsZSxcbiAgICBwYXJhbWV0ZXI6IHBhcmFtZXRlcixcbiAgICB0eXBlOiB0eXBlXG4gIH0pO1xuICBjb25zb2xlLmluZm8oXCJWV08tU0RLIC0gW0lORk9dOiAgIFwiLmNvbmNhdChGdW5jdGlvblV0aWwuZ2V0Q3VycmVudFRpbWUoKSwgXCIgXCIpLmNvbmNhdChsb2cpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGxvZ2dpbmc6IGxvZ2dpbmcsXG4gIHNldExvZ2dlcjogc2V0TG9nSGFuZGxlcixcbiAgc2V0TG9nTGV2ZWw6IHNldExvZ0xldmVsLFxuICBnZXRTZXR0aW5nc0ZpbGU6IFNldHRpbmdzRmlsZVV0aWwuZ2V0LFxuICBHb2FsVHlwZUVudW06IEdvYWxUeXBlRW51bSxcbiAgTG9nTGV2ZWxFbnVtOiBMb2dMZXZlbEVudW0sXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBTREsgYW5kIHBhcnNlcyB0aGUgc2V0dGluZ3NmaWxlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgY29uZmlndXJhdGlvbiBmb3IgdGhlIFNES1xuICAgKi9cbiAgbGF1bmNoOiBmdW5jdGlvbiBsYXVuY2goc2RrQ29uZmlnKSB7XG4gICAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIHZhbGlkYXRpbmcgY29uZmlnIHNjaGVtYVxuICAgICAgRnVuY3Rpb25VdGlsLmNsb25lT2JqZWN0KHNka0NvbmZpZyk7XG5cbiAgICAgIGlmICghRGF0YVR5cGVVdGlsLmlzVW5kZWZpbmVkKHNka0NvbmZpZy5zaG91bGRUcmFja1JldHVybmluZ1VzZXIpICYmICFEYXRhVHlwZVV0aWwuaXNCb29sZWFuKHNka0NvbmZpZy5zaG91bGRUcmFja1JldHVybmluZ1VzZXIpKSB7XG4gICAgICAgIGxvZ0Vycm9yKCdzaG91bGRUcmFja1JldHVybmluZ1VzZXInLCAnYm9vbGVhbicpO1xuICAgICAgfSBlbHNlIGlmICghRGF0YVR5cGVVdGlsLmlzVW5kZWZpbmVkKHNka0NvbmZpZy5zaG91bGRUcmFja1JldHVybmluZ1VzZXIpKSB7XG4gICAgICAgIGxvZ0luZm8oJ3Nob3VsZFRyYWNrUmV0dXJuaW5nVXNlcicsICdib29sZWFuJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghRGF0YVR5cGVVdGlsLmlzVW5kZWZpbmVkKHNka0NvbmZpZy5pc0RldmVsb3BtZW50TW9kZSkgJiYgIURhdGFUeXBlVXRpbC5pc0Jvb2xlYW4oc2RrQ29uZmlnLmlzRGV2ZWxvcG1lbnRNb2RlKSkge1xuICAgICAgICBsb2dFcnJvcignaXNEZXZlbG9wbWVudE1vZGUnLCAnYm9vbGVhbicpO1xuICAgICAgfSBlbHNlIGlmICghRGF0YVR5cGVVdGlsLmlzVW5kZWZpbmVkKHNka0NvbmZpZy5pc0RldmVsb3BtZW50TW9kZSkpIHtcbiAgICAgICAgbG9nSW5mbygnaXNEZXZlbG9wbWVudE1vZGUnLCAnYm9vbGVhbicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2RrQ29uZmlnLmdvYWxUeXBlVG9UcmFjayAmJiAhb2JqZWN0VmFsdWVzKEdvYWxUeXBlRW51bSkuaW5jbHVkZXMoc2RrQ29uZmlnLmdvYWxUeXBlVG9UcmFjaykpIHtcbiAgICAgICAgbG9nRXJyb3IoJ2dvYWxUeXBlVG9UcmFjaycsICdzdHJpbmcoUkVWRU5VRV9UUkFDS0lORywgQ1VTVE9NX0dPQUwsIEFMTCknKTtcbiAgICAgIH0gZWxzZSBpZiAoc2RrQ29uZmlnLmdvYWxUeXBlVG9UcmFjaykge1xuICAgICAgICBsb2dJbmZvKCdnb2FsVHlwZVRvVHJhY2snLCAnc3RyaW5nKFJFVkVOVUVfVFJBQ0tJTkcsIENVU1RPTV9HT0FMLCBBTEwpJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZGtDb25maWcubG9nZ2luZyAmJiBzZGtDb25maWcubG9nZ2luZy5sZXZlbCAmJiAhb2JqZWN0VmFsdWVzKExvZ0xldmVsRW51bSkuaW5jbHVkZXMoc2RrQ29uZmlnLmxvZ2dpbmcubGV2ZWwpKSB7XG4gICAgICAgIGxvZ0Vycm9yKCdsb2dMZXZlbCcsICdudW1iZXIoMSwyLDMsNCknKTtcbiAgICAgIH0gZWxzZSBpZiAoc2RrQ29uZmlnLmxvZ2dpbmcgJiYgc2RrQ29uZmlnLmxvZ2dpbmcubGV2ZWwpIHtcbiAgICAgICAgbG9nSW5mbygnbG9nTGV2ZWwnLCAnbnVtYmVyKDEsMiwzLDQpJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZGtDb25maWcucG9sbGluZ0ludGVydmFsICYmICFEYXRhVHlwZVV0aWwuaXNOdW1iZXIoc2RrQ29uZmlnLnBvbGxpbmdJbnRlcnZhbCkpIHtcbiAgICAgICAgbG9nRXJyb3IoJ3BvbGxpbmdJbnRlcnZhbCcsICdudW1iZXIoaW4gbWlsaWlzZWNvbmRzKScpO1xuICAgICAgfSBlbHNlIGlmIChzZGtDb25maWcucG9sbGluZ0ludGVydmFsKSB7XG4gICAgICAgIGxvZ0luZm8oJ3BvbGxpbmdJbnRlcnZhbCcsICdudW1iZXIoaW4gbWlsaWlzZWNvbmRzKScpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2RrQ29uZmlnLnBvbGxpbmdJbnRlcnZhbCAmJiBEYXRhVHlwZVV0aWwuaXNVbmRlZmluZWQoc2RrQ29uZmlnLnNka0tleSkpIHtcbiAgICAgICAgbG9nRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNka0NvbmZpZy5wb2xsaW5nSW50ZXJ2YWwgJiYgIURhdGFUeXBlVXRpbC5pc1N0cmluZyhzZGtDb25maWcuc2RrS2V5KSkge1xuICAgICAgICBsb2dFcnJvcignc2RrS2V5JywgJ3N0cmluZycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIURhdGFUeXBlVXRpbC5pc1VuZGVmaW5lZChzZGtDb25maWcuYmF0Y2hFdmVudHMpICYmICFEYXRhVHlwZVV0aWwuaXNPYmplY3Qoc2RrQ29uZmlnLmJhdGNoRXZlbnRzKSkge1xuICAgICAgICBsb2dFcnJvcignYmF0Y2hFdmVudHMnLCAnb2JqZWN0Jyk7XG4gICAgICB9IGVsc2UgaWYgKCFEYXRhVHlwZVV0aWwuaXNVbmRlZmluZWQoc2RrQ29uZmlnLmJhdGNoRXZlbnRzKSkge1xuICAgICAgICBsb2dJbmZvKCdiYXRjaEV2ZW50cycsICdvYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFEYXRhVHlwZVV0aWwuaXNVbmRlZmluZWQoc2RrQ29uZmlnLnJldHVyblByb21pc2VGb3IpICYmICFEYXRhVHlwZVV0aWwuaXNPYmplY3Qoc2RrQ29uZmlnLnJldHVyblByb21pc2VGb3IpKSB7XG4gICAgICAgIGxvZ0Vycm9yKCdyZXR1cm5Qcm9taXNlRm9yJywgJ29iamVjdCcpO1xuICAgICAgfSBlbHNlIGlmICghRGF0YVR5cGVVdGlsLmlzVW5kZWZpbmVkKHNka0NvbmZpZy5yZXR1cm5Qcm9taXNlRm9yKSkge1xuICAgICAgICBsb2dJbmZvKCdyZXR1cm5Qcm9taXNlRm9yJywgJ29iamVjdCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIURhdGFUeXBlVXRpbC5pc1VuZGVmaW5lZChzZGtDb25maWcuaW50ZWdyYXRpb25zKSAmJiAhRGF0YVR5cGVVdGlsLmlzT2JqZWN0KHNka0NvbmZpZy5pbnRlZ3JhdGlvbnMpKSB7XG4gICAgICAgIGxvZ0Vycm9yKCdpbnRlZ3JhdGlvbnMnLCAnb2JqZWN0Jyk7XG4gICAgICB9IGVsc2UgaWYgKCFEYXRhVHlwZVV0aWwuaXNVbmRlZmluZWQoc2RrQ29uZmlnLmludGVncmF0aW9ucykpIHtcbiAgICAgICAgbG9nSW5mbygnaW50ZWdyYXRpb25zJywgJ29iamVjdCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIURhdGFUeXBlVXRpbC5pc1VuZGVmaW5lZChzZGtDb25maWcudXNlclN0b3JhZ2VTZXJ2aWNlKSAmJiAhRGF0YVR5cGVVdGlsLmlzT2JqZWN0KHNka0NvbmZpZy51c2VyU3RvcmFnZVNlcnZpY2UpKSB7XG4gICAgICAgIGxvZ0Vycm9yKCd1c2VyU3RvcmFnZVNlcnZpY2UnLCAnb2JqZWN0Jyk7XG4gICAgICB9IGVsc2UgaWYgKCFEYXRhVHlwZVV0aWwuaXNVbmRlZmluZWQoc2RrQ29uZmlnLnVzZXJTdG9yYWdlU2VydmljZSkpIHtcbiAgICAgICAgbG9nSW5mbygndXNlclN0b3JhZ2VTZXJ2aWNlJywgJ29iamVjdCcpO1xuICAgICAgfSAvLyBGb3IgSmF2YVNjcmlwdCBTREssIGJhdGNoaW5nIGlzIG5vdCByZXF1aXJlZCBhbmQgaXMgbm90IGF2YWlsYWJsZVxuXG5cbiAgICAgIGlmIChEYXRhVHlwZVV0aWwuaXNPYmplY3Qoc2RrQ29uZmlnLmJhdGNoRXZlbnRzKSAmJiBcInVuZGVmaW5lZFwiID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZGtDb25maWcuYmF0Y2hFdmVudHMgPSBudWxsO1xuICAgICAgfSAvLyBGb3IgTm9kZS5qcyBTREtcblxuXG4gICAgICBpZiAoZmFsc2UpIHt9XG5cbiAgICAgIGNvbmZpZyA9IHNka0NvbmZpZztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5DT05GSUdfQ09SUlVQVEVELCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIGFwaTogQXBpRW51bS5MQVVOQ0hcbiAgICAgIH0pKTtcbiAgICAgIGNvbmZpZyA9IHt9O1xuICAgIH0gLy8gSWYgREVWIG1vZGUsIHNldCBjb2xvcmZ1bCBsb2dzIHRvIHRydWVcblxuXG4gICAgaWYgKGNvbmZpZy5pc0RldmVsb3BtZW50TW9kZSkge1xuICAgICAgbG9nZ2luZy5zZXRMb2dDb2xvck1vZGUodHJ1ZSk7XG4gICAgfSAvLyBJZiBsb2dnaW5nIGlzIGVuYWJsZWQsIHVzZSB0aGUgbG9nZ2VyIGFuZCBsb2dMZXZlbCBkZWZpbmVkIGJ5IHRoZSBjbGllbnRcblxuXG4gICAgaWYgKGNvbmZpZy5sb2dnaW5nICYmIERhdGFUeXBlVXRpbC5pc09iamVjdChjb25maWcubG9nZ2luZykpIHtcbiAgICAgIGlmIChjb25maWcubG9nZ2luZy5oYXZlQ29sb3JlZExvZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsb2dnaW5nLnNldExvZ0NvbG9yTW9kZShjb25maWcubG9nZ2luZy5oYXZlQ29sb3JlZExvZ3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZmlnLmxvZ2dpbmcubG9nZ2VyICYmIERhdGFUeXBlVXRpbC5pc09iamVjdChjb25maWcubG9nZ2luZy5sb2dnZXIpICYmIERhdGFUeXBlVXRpbC5pc0Z1bmN0aW9uKGNvbmZpZy5sb2dnaW5nLmxvZ2dlci5sb2cpKSB7XG4gICAgICAgIGxvZ2dpbmcuc2V0TG9nSGFuZGxlcihjb25maWcubG9nZ2luZy5sb2dnZXIpO1xuICAgICAgICBsb2dnaW5nLnNldExvZ0xldmVsKGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLk5PVFNFVCk7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkRFQlVHLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5ERUJVR19NRVNTQUdFUy5DT05GSUdfQ1VTVE9NX0xPR0dFUl9VU0VELCB7XG4gICAgICAgICAgZmlsZTogZmlsZVxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2UgaWYgKGNvbmZpZy5sb2dnaW5nLmxvZ2dlcikge1xuICAgICAgICBsb2dFcnJvcignbG9nZ2luZy5sb2dnZXInLCAnb2JqZWN0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maWcubG9nZ2luZy5sZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxvZ2dpbmcuc2V0TG9nTGV2ZWwoY29uZmlnLmxvZ2dpbmcubGV2ZWwpO1xuICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuQ09ORklHX0xPR19MRVZFTF9TRVQsIHtcbiAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgIGxldmVsOiBMb2dOdW1iZXJMZXZlbFsnXycgKyBjb25maWcubG9nZ2luZy5sZXZlbF1cbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gLy8gREVCVUcgbG9nIGZvciBrbm93aW5nIHdoZXRoZXIgaXQncyBERVYgbW9kZVxuXG5cbiAgICBpZiAoY29uZmlnLmlzRGV2ZWxvcG1lbnRNb2RlKSB7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuQ09ORklHX0RFVkVMT1BNRU5UX01PREVfU1RBVFVTLCB7XG4gICAgICAgIGZpbGU6IGZpbGVcbiAgICAgIH0pKTtcbiAgICB9IC8vIFNldCBsb2dnZXIgb24gY29uZmlnIE9ia2VjdCwgdG8gYmUgcmVxdWlyZWQgbGF0ZXJcblxuXG4gICAgY29uZmlnLmxvZ2dlciA9IGNvbmZpZy5sb2dnaW5nICYmIGNvbmZpZy5sb2dnaW5nLmxvZ2dlciB8fCBsb2dnZXI7IC8vIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBWV08gY2xhc3Mgd2hpY2ggZXhwb3NlcyBBUEkgbWV0aG9kc1xuXG4gICAgcmV0dXJuIG5ldyBWV08oY29uZmlnKTtcbiAgfVxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvc2NoZW1hcy9TZXR0aW5nc0ZpbGVTY2hlbWEuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvc2NoZW1hcy9TZXR0aW5nc0ZpbGVTY2hlbWEuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAoIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT09IFwiW29iamVjdCBBcmd1bWVudHNdXCIpKSB7IHJldHVybjsgfSB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBzdXBlcnN0cnVjdCAqLyBcIi4vbm9kZV9tb2R1bGVzL3N1cGVyc3RydWN0L2xpYi9pbmRleC5lcy5qc1wiKSxcbiAgICB2YWxpZGF0ZSA9IF9yZXF1aXJlLnZhbGlkYXRlLFxuICAgIG51bWJlciA9IF9yZXF1aXJlLm51bWJlcixcbiAgICBzdHJpbmcgPSBfcmVxdWlyZS5zdHJpbmcsXG4gICAgX2Jvb2xlYW4gPSBfcmVxdWlyZVtcImJvb2xlYW5cIl0sXG4gICAgYXJyYXkgPSBfcmVxdWlyZS5hcnJheSxcbiAgICBvYmplY3QgPSBfcmVxdWlyZS5vYmplY3QsXG4gICAgb3B0aW9uYWwgPSBfcmVxdWlyZS5vcHRpb25hbCxcbiAgICB1bmlvbiA9IF9yZXF1aXJlLnVuaW9uLFxuICAgIHR5cGUgPSBfcmVxdWlyZS50eXBlLFxuICAgIHJlY29yZCA9IF9yZXF1aXJlLnJlY29yZDtcblxudmFyIGNhbXBhaWduR29hbFNjaGVtYSA9IHR5cGUoe1xuICBpZDogdW5pb24oW251bWJlcigpLCBzdHJpbmcoKV0pLFxuICBpZGVudGlmaWVyOiBzdHJpbmcoKSxcbiAgdHlwZTogc3RyaW5nKCksXG4gIHJldmVudWVQcm9wOiBvcHRpb25hbChzdHJpbmcoKSlcbn0pO1xudmFyIHZhcmlhYmxlT2JqZWN0U2NoZW1hID0gdHlwZSh7XG4gIGlkOiB1bmlvbihbbnVtYmVyKCksIHN0cmluZygpXSksXG4gIHR5cGU6IHN0cmluZygpLFxuICBrZXk6IHN0cmluZygpLFxuICB2YWx1ZTogdW5pb24oW251bWJlcigpLCBzdHJpbmcoKSwgX2Jvb2xlYW4oKV0pXG59KTtcbnZhciBjYW1wYWlnblZhcmlhdGlvblNjaGVtYSA9IHR5cGUoe1xuICBpZDogdW5pb24oW251bWJlcigpLCBzdHJpbmcoKV0pLFxuICBuYW1lOiBzdHJpbmcoKSxcbiAgd2VpZ2h0OiB1bmlvbihbbnVtYmVyKCksIHN0cmluZygpXSksXG4gIGNoYW5nZXM6IG9wdGlvbmFsKG9iamVjdCgpKSxcbiAgc2VnbWVudHM6IG9wdGlvbmFsKG9iamVjdCgpKSxcbiAgdmFyaWFibGVzOiBvcHRpb25hbCh1bmlvbihbb2JqZWN0KCksIGFycmF5KHZhcmlhYmxlT2JqZWN0U2NoZW1hKV0pKSxcbiAgaXNGZWF0dXJlRW5hYmxlZDogb3B0aW9uYWwoX2Jvb2xlYW4oKSksXG4gIHN0YXJ0VmFyaWF0aW9uQWxsb2NhdGlvbjogb3B0aW9uYWwobnVtYmVyKCkpLFxuICBlbmRWYXJpYXRpb25BbGxvY2F0aW9uOiBvcHRpb25hbChudW1iZXIoKSlcbn0pO1xudmFyIGNhbXBhaWduT2JqZWN0U2NoZW1hID0gdHlwZSh7XG4gIGlkOiB1bmlvbihbbnVtYmVyKCksIHN0cmluZygpXSksXG4gIHR5cGU6IHN0cmluZygpLFxuICBrZXk6IHN0cmluZygpLFxuICBzdGF0dXM6IHN0cmluZygpLFxuICBuYW1lOiBzdHJpbmcoKSxcbiAgaXNCdWNrZXRpbmdTZWVkRW5hYmxlZDogb3B0aW9uYWwoX2Jvb2xlYW4oKSksXG4gIHBlcmNlbnRUcmFmZmljOiBudW1iZXIoKSxcbiAgZ29hbHM6IHVuaW9uKFtvYmplY3QoKSwgYXJyYXkoY2FtcGFpZ25Hb2FsU2NoZW1hKV0pLFxuICB2YXJpYXRpb25zOiB1bmlvbihbb2JqZWN0KCksIGFycmF5KGNhbXBhaWduVmFyaWF0aW9uU2NoZW1hKV0pLFxuICB2YXJpYWJsZXM6IG9wdGlvbmFsKHVuaW9uKFtvYmplY3QoKSwgYXJyYXkodmFyaWFibGVPYmplY3RTY2hlbWEpXSkpLFxuICBzZWdtZW50czogb2JqZWN0KCksXG4gIGlzRm9yY2VkVmFyaWF0aW9uRW5hYmxlZDogb3B0aW9uYWwoX2Jvb2xlYW4oKSksXG4gIGlzVXNlckxpc3RFbmFibGVkOiBvcHRpb25hbChfYm9vbGVhbigpKVxufSk7XG52YXIgZ3JvdXBTY2hlbWEgPSB0eXBlKHtcbiAgZ3JvdXBOYW1lOiBzdHJpbmcoKSxcbiAgY2FtcGFpZ25zOiBhcnJheShudW1iZXIoKSlcbn0pO1xudmFyIHNldHRpbmdzRmlsZVNjaGVtYSA9IHR5cGUoe1xuICBzZGtLZXk6IG9wdGlvbmFsKHN0cmluZygpKSxcbiAgdmVyc2lvbjogdW5pb24oW251bWJlcigpLCBzdHJpbmcoKV0pLFxuICBhY2NvdW50SWQ6IHVuaW9uKFtudW1iZXIoKSwgc3RyaW5nKCldKSxcbiAgY2FtcGFpZ25zOiBhcnJheShjYW1wYWlnbk9iamVjdFNjaGVtYSksXG4gIGNhbXBhaWduR3JvdXBzOiBvcHRpb25hbChyZWNvcmQoc3RyaW5nKCksIG51bWJlcigpKSksXG4gIGlzRXZlbnRBcmNoRW5hYmxlZDogb3B0aW9uYWwoX2Jvb2xlYW4oKSksXG4gIGNvbGxlY3Rpb25QcmVmaXg6IG9wdGlvbmFsKHN0cmluZygpKSxcbiAgZ3JvdXBzOiBvcHRpb25hbCh1bmlvbihbb2JqZWN0KCksIHJlY29yZChzdHJpbmcoKSwgZ3JvdXBTY2hlbWEpXSkpXG59KTtcblxudmFyIHZhbGlkYXRlU2V0dGluZ3NGaWxlID0gZnVuY3Rpb24gdmFsaWRhdGVTZXR0aW5nc0ZpbGUoc2V0dGluZ3MpIHtcbiAgdmFyIF92YWxpZGF0ZSA9IHZhbGlkYXRlKHNldHRpbmdzLCBzZXR0aW5nc0ZpbGVTY2hlbWEpLFxuICAgICAgX3ZhbGlkYXRlMiA9IF9zbGljZWRUb0FycmF5KF92YWxpZGF0ZSwgMSksXG4gICAgICBlcnJvciA9IF92YWxpZGF0ZTJbMF07XG5cbiAgcmV0dXJuICFlcnJvcjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGVTZXR0aW5nc0ZpbGU7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3NlcnZpY2VzL0V2ZW50UXVldWUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9zZXJ2aWNlcy9FdmVudFF1ZXVlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0RhdGFUeXBlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiKTtcblxudmFyIEV2ZW50RGlzcGF0Y2hlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0V2ZW50RGlzcGF0Y2hlclV0aWwgKi8gXCIuL2xpYi91dGlscy9FdmVudERpc3BhdGNoZXJVdGlsLmpzXCIpO1xuXG52YXIgbG9nZ2luZyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBMb2dMZXZlbEVudW0gPSBsb2dnaW5nLkxvZ0xldmVsRW51bSxcbiAgICBMb2dNZXNzYWdlRW51bSA9IGxvZ2dpbmcuTG9nTWVzc2FnZUVudW0sXG4gICAgTG9nTWVzc2FnZVV0aWwgPSBsb2dnaW5nLkxvZ01lc3NhZ2VVdGlsO1xudmFyIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCk7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5FdmVudFF1ZXVlO1xuXG52YXIgRXZlbnRRdWV1ZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEV2ZW50UXVldWUoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50UXVldWUpO1xuXG4gICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEV2ZW50UXVldWUsIFt7XG4gICAga2V5OiBcInByb2Nlc3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzcyhjb25maWcsIHByb3BlcnRpZXMsIHZ3b0luc3RhbmNlKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge30sXG4gICAgICAgICAgcGF5bG9hZCA9IF9yZWYucGF5bG9hZCxcbiAgICAgICAgICByZXNwb25zZUNhbGxiYWNrID0gX3JlZi5yZXNwb25zZUNhbGxiYWNrO1xuXG4gICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pc0RldmVsb3BtZW50TW9kZSkge1xuICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuQ09ORklHX0RFVkVMT1BNRU5UX01PREVfU1RBVFVTLCB7XG4gICAgICAgICAgZmlsZTogZmlsZVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5lbnF1ZXVlKHByb3BlcnRpZXMsIHZ3b0luc3RhbmNlLCB7XG4gICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgIHJlc3BvbnNlQ2FsbGJhY2s6IHJlc3BvbnNlQ2FsbGJhY2tcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlbnF1ZXVlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVucXVldWUocHJvcGVydGllcywgdndvSW5zdGFuY2UsIF9yZWYyKSB7XG4gICAgICB2YXIgcGF5bG9hZCA9IF9yZWYyLnBheWxvYWQsXG4gICAgICAgICAgcmVzcG9uc2VDYWxsYmFjayA9IF9yZWYyLnJlc3BvbnNlQ2FsbGJhY2s7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goe1xuICAgICAgICBldmVudE5hbWU6IHByb3BlcnRpZXMuZXZlbnROYW1lLFxuICAgICAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgICAgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgICAgIEV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaFBvc3RDYWxsKHByb3BlcnRpZXMsIHBheWxvYWQsIHtcbiAgICAgICAgICAgICAgcmVzcG9uc2VDYWxsYmFjazogcmVzcG9uc2VDYWxsYmFja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEdldENhbGwocHJvcGVydGllcywge1xuICAgICAgICAgICAgICByZXNwb25zZUNhbGxiYWNrOiByZXNwb25zZUNhbGxiYWNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5FVkVOVF9RVUVVRSwge1xuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBxdWV1ZVR5cGU6ICdub3JtYWwnLFxuICAgICAgICBldmVudDogJ1ZXT19NQVNLRURfUEFZTE9BRCdcbiAgICAgIH0pKTtcbiAgICAgIHZ3b0luc3RhbmNlLmV2ZW50UXVldWUuZXhlY3V0ZU5leHQocHJvcGVydGllcyk7XG5cbiAgICAgIGlmICghdGhpcy5ydW5uaW5nKSB7XG4gICAgICAgIC8vIGlmIG5vdGhpbmcgaXMgcnVubmluZywgdGhlbiBzdGFydCB0aGUgZW5naW5lcyFcbiAgICAgICAgdGhpcy5leGVjdXRlTmV4dChwcm9wZXJ0aWVzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV4ZWN1dGVOZXh0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV4ZWN1dGVOZXh0KHByb3BlcnRpZXMpIHtcbiAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlOyAvLyBnZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2ZmIHRoZSBxdWV1ZVxuXG4gICAgICBpZiAodGhpcy5xdWV1ZSAmJiB0aGlzLnF1ZXVlLmxlbmd0aCkge1xuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG5cbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgIGlmIChldmVudC5jYWxsYmFjayAmJiBEYXRhVHlwZVV0aWwuaXNGdW5jdGlvbihldmVudC5jYWxsYmFjaykpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhbGxiYWNrKHByb3BlcnRpZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBFdmVudFF1ZXVlO1xufSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50UXVldWU7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3NlcnZpY2VzL0hvb2tzTWFuYWdlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvc2VydmljZXMvSG9va3NNYW5hZ2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0RhdGFUeXBlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiKTtcbi8qKlxuICogSG9va3MgTWFuYWdlciBpcyByZXNwb25zaWJsZSBmb3IgdHJpZ2dlcmluZyBjYWxsYmFja3MgdXNlZnVsIHRvIHRoZSBlbmQtdXNlciBiYXNlZCBvbiBjZXJ0YWluIGxpZmVjeWNsZSBldmVudHMuXG4gKiBQb3NzaWJsZSB1c2Ugd2l0aCBpbnRlZ3JhdGlvbnMgd2hlbiB0aGUgdXNlciBpbnRlbmRzIHRvIHNlbmQgYW4gZXZlbnQgd2hlbiBhIHZpc2l0b3IgaXMgcGFydCBvZiB0aGUgZXhwZXJpbWVudC5cbiAqL1xuXG5cbnZhciBIb29rc01hbmFnZXIgPSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB3aXRoIGNvbmZpZ3VyYXRpb24gZnJvbSBWV08gT2JqZWN0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqL1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjb25maWcuaW50ZWdyYXRpb25zICYmIGNvbmZpZy5pbnRlZ3JhdGlvbnMuY2FsbGJhY2s7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIHRoZSBjYWxsYmFja1xuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBQcm9wZXJ0aWVzIGZyb20gdGhlIGNhbGxiYWNrXG4gICAqL1xuICBleGVjdXRlOiBmdW5jdGlvbiBleGVjdXRlKHByb3BlcnRpZXMpIHtcbiAgICBpZiAoRGF0YVR5cGVVdGlsLmlzRnVuY3Rpb24odGhpcy5jYWxsYmFjaykpIHtcbiAgICAgIHRoaXMuY2FsbGJhY2socHJvcGVydGllcyk7XG4gICAgfVxuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBIb29rc01hbmFnZXI7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3NlcnZpY2VzL1NldHRpbmdzRmlsZU1hbmFnZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9zZXJ2aWNlcy9TZXR0aW5nc0ZpbGVNYW5hZ2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIENhbXBhaWduVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0NhbXBhaWduVXRpbCAqLyBcIi4vbGliL3V0aWxzL0NhbXBhaWduVXRpbC5qc1wiKTtcblxudmFyIEZ1bmN0aW9uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0Z1bmN0aW9uVXRpbCAqLyBcIi4vbGliL3V0aWxzL0Z1bmN0aW9uVXRpbC5qc1wiKTtcblxudmFyIFNldHRpbmdzRmlsZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9TZXR0aW5nc0ZpbGVVdGlsICovIFwiLi9saWIvdXRpbHMvU2V0dGluZ3NGaWxlVXRpbC5qc1wiKTtcblxudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xvZ2dpbmcgKi8gXCIuL2xpYi9zZXJ2aWNlcy9sb2dnaW5nL2luZGV4LmpzXCIpO1xuXG52YXIgRmlsZU5hbWVFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvRmlsZU5hbWVFbnVtICovIFwiLi9saWIvZW51bXMvRmlsZU5hbWVFbnVtLmpzXCIpO1xuXG52YXIgdmFsaWRhdGVTZXR0aW5nc0ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zY2hlbWFzL1NldHRpbmdzRmlsZVNjaGVtYSAqLyBcIi4vbGliL3NjaGVtYXMvU2V0dGluZ3NGaWxlU2NoZW1hLmpzXCIpO1xuXG52YXIgX3JlcXVpcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EYXRhVHlwZVV0aWwgKi8gXCIuL2xpYi91dGlscy9EYXRhVHlwZVV0aWwuanNcIiksXG4gICAgaXNPYmplY3QgPSBfcmVxdWlyZS5pc09iamVjdDtcblxudmFyIExvZ0xldmVsRW51bSA9IGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5TZXR0aW5nc0ZpbGVNYW5hZ2VyO1xuXG52YXIgU2V0dGluZ3NGaWxlTWFuYWdlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIC8vIFBSSVZBVEUgTUVUSE9EU1xuICBmdW5jdGlvbiBTZXR0aW5nc0ZpbGVNYW5hZ2VyKGNvbmZpZykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZXR0aW5nc0ZpbGVNYW5hZ2VyKTtcblxuICAgIGlmIChjb25maWcpIHtcbiAgICAgIGlmIChjb25maWcuc2V0dGluZ3NGaWxlICYmIGlzT2JqZWN0KGNvbmZpZy5zZXR0aW5nc0ZpbGUuY2FtcGFpZ25zKSB8fCBjb25maWcuc2V0dGluZ3NGaWxlICYmICFjb25maWcuc2V0dGluZ3NGaWxlLmNhbXBhaWducykge1xuICAgICAgICBjb25maWcuc2V0dGluZ3NGaWxlLmNhbXBhaWducyA9IFtdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jb25maWdPYmogPSBjb25maWc7XG4gICAgICB0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGUgPSBjb25maWcuc2V0dGluZ3NGaWxlID8gRnVuY3Rpb25VdGlsLmNsb25lT2JqZWN0KGNvbmZpZy5zZXR0aW5nc0ZpbGUpIDogbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29uZmlnT2JqID0gbnVsbDtcbiAgICAgIHRoaXMuX2Nsb25lZFNldHRpbmdzRmlsZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNldHRpbmdzRmlsZU1hbmFnZXIsIFt7XG4gICAga2V5OiBcIl9zZXRWYXJpYXRpb25CdWNrZXRpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFZhcmlhdGlvbkJ1Y2tldGluZyhjYW1wYWlnbikge1xuICAgICAgQ2FtcGFpZ25VdGlsLnNldFZhcmlhdGlvbkFsbG9jYXRpb24oY2FtcGFpZ24pO1xuICAgIH0gLy8gUFVCTElDIE1FVEhPRFNcblxuICB9LCB7XG4gICAga2V5OiBcImlzU2V0dGluZ3NGaWxlVmFsaWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTZXR0aW5nc0ZpbGVWYWxpZCgpIHtcbiAgICAgIGlmICghdGhpcy5fY29uZmlnT2JqIHx8ICF0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXNWYWxpZFNldHRpbmdzRmlsZSA9IHZhbGlkYXRlU2V0dGluZ3NGaWxlKHRoaXMuX2Nsb25lZFNldHRpbmdzRmlsZSk7XG5cbiAgICAgIGlmICghaXNWYWxpZFNldHRpbmdzRmlsZSkge1xuICAgICAgICB0aGlzLl9jb25maWdPYmoubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLlNFVFRJTkdTX0ZJTEVfQ09SUlVQVEVELCB7XG4gICAgICAgICAgZmlsZTogZmlsZVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2hlY2tBbmRQb2xsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrQW5kUG9sbCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5fY29uZmlnT2JqLnBvbGxpbmdJbnRlcnZhbCB8fCAhdGhpcy5fY29uZmlnT2JqLnNka0tleSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsYXN0U2V0dGluZ3NGaWxlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5fY2xvbmVkU2V0dGluZ3NGaWxlKTtcbiAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU2V0dGluZ3NGaWxlVXRpbC5nZXQoX3RoaXMuX2Nsb25lZFNldHRpbmdzRmlsZS5hY2NvdW50SWQsIF90aGlzLl9jb25maWdPYmouc2RrS2V5KS50aGVuKGZ1bmN0aW9uIChsYXRlc3RTZXR0aW5nc0ZpbGUpIHtcbiAgICAgICAgICBfdGhpcy5fY29uZmlnT2JqLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuUE9MTElOR19TVUNDRVNTLCB7XG4gICAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgICAgYWNjb3VudElkOiBfdGhpcy5fY2xvbmVkU2V0dGluZ3NGaWxlLmFjY291bnRJZFxuICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIHZhciBzdHJpbmdpZmllZExhdGVzdFNldHRpbmdzRmlsZSA9IEpTT04uc3RyaW5naWZ5KGxhdGVzdFNldHRpbmdzRmlsZSk7XG5cbiAgICAgICAgICBpZiAoc3RyaW5naWZpZWRMYXRlc3RTZXR0aW5nc0ZpbGUgIT09IGxhc3RTZXR0aW5nc0ZpbGUpIHtcbiAgICAgICAgICAgIGxhc3RTZXR0aW5nc0ZpbGUgPSBzdHJpbmdpZmllZExhdGVzdFNldHRpbmdzRmlsZTtcblxuICAgICAgICAgICAgX3RoaXMudXBkYXRlU2V0dGluZ3NGaWxlKGxhdGVzdFNldHRpbmdzRmlsZSk7XG5cbiAgICAgICAgICAgIF90aGlzLl9jb25maWdPYmoubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5QT0xMSU5HX1NFVFRJTkdTX0ZJTEVfVVBEQVRFRCwge1xuICAgICAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgICAgICBhY2NvdW50SWQ6IF90aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGUuYWNjb3VudElkXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLl9jb25maWdPYmoubG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5QT0xMSU5HX1NFVFRJTkdTX0ZJTEVfTk9UX1VQREFURUQsIHtcbiAgICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgICAgYWNjb3VudElkOiBfdGhpcy5fY2xvbmVkU2V0dGluZ3NGaWxlLmFjY291bnRJZFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoX2UpIHtcbiAgICAgICAgICBfdGhpcy5fY29uZmlnT2JqLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5QT0xMSU5HX0ZBSUxFRCwge1xuICAgICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICAgIGFjY291bnRJZDogX3RoaXMuX2Nsb25lZFNldHRpbmdzRmlsZS5hY2NvdW50SWRcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgdGhpcy5fY29uZmlnT2JqLnBvbGxpbmdJbnRlcnZhbCk7XG5cbiAgICAgIHRoaXMuX2NvbmZpZ09iai5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuUE9MTElOR19TRVRUSU5HU19GSUxFX1JFR0lTVEVSRUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgcG9sbGluZ0ludGVydmFsOiB0aGlzLl9jb25maWdPYmoucG9sbGluZ0ludGVydmFsXG4gICAgICB9KSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb2Nlc3NTZXR0aW5nc0ZpbGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc1NldHRpbmdzRmlsZSgpIHtcbiAgICAgIHZhciBzZXR0aW5nc0ZpbGUgPSB0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGU7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0dGluZ3NGaWxlLmNhbXBhaWducy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2FtcGFpZ24gPSBzZXR0aW5nc0ZpbGUuY2FtcGFpZ25zW2ldO1xuXG4gICAgICAgIHRoaXMuX3NldFZhcmlhdGlvbkJ1Y2tldGluZyhjYW1wYWlnbik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NvbmZpZ09iai5sb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuU0VUVElOR1NfRklMRV9QUk9DRVNTRUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgYWNjb3VudElkOiB0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGUuYWNjb3VudElkXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBzZXR0aW5nc0ZpbGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoIGxhdGVzdCBzZXR0aW5ncy1maWxlIGFuZCB1cGRhdGUgc28gdGhhdCB2d29DbGllbnRJbnN0YW5jZSBjb3VsZCB1c2UgbGF0ZXN0IHNldHRpbmdzXG4gICAgICogSGVscGZ1bCBlc3BlY2lhbGx5IHdoZW4gdXNpbmcgd2ViaG9va3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhY2NvdW50SWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2RrS2V5XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QW5kVXBkYXRlU2V0dGluZ3NGaWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFuZFVwZGF0ZVNldHRpbmdzRmlsZSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgYWNjb3VudElkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGUuYWNjb3VudElkO1xuICAgICAgdmFyIHNka0tleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy5fY2xvbmVkU2V0dGluZ3NGaWxlLnNka0tleTtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgX3JlamVjdCkge1xuICAgICAgICBTZXR0aW5nc0ZpbGVVdGlsLmdldChhY2NvdW50SWQsIHNka0tleSwgbnVsbCwge1xuICAgICAgICAgIGlzVmlhV2ViaG9vazogdHJ1ZVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzZXR0aW5ncykge1xuICAgICAgICAgIF90aGlzMi51cGRhdGVTZXR0aW5nc0ZpbGUoc2V0dGluZ3MpO1xuXG4gICAgICAgICAgcmVzb2x2ZShzZXR0aW5ncyk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKF9lcnIpIHt9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHNldHRpbmdzLWZpbGUgb24gdGhlIGluc3RhbmNlIHNvIHRoYXQgbGF0ZXN0IHNldHRpbmdzIGNvdWxkIGJlIHVzZWQgZnJvbSBuZXh0IGhpdCBvbndhcmRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVTZXR0aW5nc0ZpbGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2V0dGluZ3NGaWxlKHNldHRpbmdzKSB7XG4gICAgICB0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGUgPSBGdW5jdGlvblV0aWwuY2xvbmVPYmplY3Qoc2V0dGluZ3MpO1xuICAgICAgdGhpcy5wcm9jZXNzU2V0dGluZ3NGaWxlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENvbmZpZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb25maWcoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29uZmlnT2JqO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRTZXR0aW5nc0ZpbGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2V0dGluZ3NGaWxlKGFwaSkge1xuICAgICAgaWYgKCF0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGUpIHtcbiAgICAgICAgdGhpcy5fY29uZmlnT2JqLmxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5BUElfSEFTX0NPUlJVUFRFRF9TRVRUSU5HU19GSUxFLCB7XG4gICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICBhcGk6IGFwaVxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9jbG9uZWRTZXR0aW5nc0ZpbGU7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNldHRpbmdzRmlsZU1hbmFnZXI7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2V0dGluZ3NGaWxlTWFuYWdlcjtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvc2VydmljZXMvVXJsU2VydmljZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL3NlcnZpY2VzL1VybFNlcnZpY2UuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIFVybEVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9VcmxFbnVtICovIFwiLi9saWIvZW51bXMvVXJsRW51bS5qc1wiKTtcblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvRGF0YVR5cGVVdGlsICovIFwiLi9saWIvdXRpbHMvRGF0YVR5cGVVdGlsLmpzXCIpLFxuICAgIGlzU3RyaW5nID0gX3JlcXVpcmUuaXNTdHJpbmc7XG5cbnZhciBVcmxTZXJ2aWNlID0ge1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgY29sbGVjdGlvblByZWZpeCA9IF9yZWYuY29sbGVjdGlvblByZWZpeDtcblxuICAgIGlmIChjb2xsZWN0aW9uUHJlZml4ICYmIGlzU3RyaW5nKGNvbGxlY3Rpb25QcmVmaXgpKSB7XG4gICAgICBVcmxTZXJ2aWNlLmNvbGxlY3Rpb25QcmVmaXggPSBjb2xsZWN0aW9uUHJlZml4O1xuICAgIH1cblxuICAgIHJldHVybiBVcmxTZXJ2aWNlO1xuICB9LFxuICBnZXRCYXNlVXJsOiBmdW5jdGlvbiBnZXRCYXNlVXJsKCkge1xuICAgIHZhciBiYXNlVXJsID0gVXJsRW51bS5CQVNFX1VSTDtcblxuICAgIGlmIChVcmxTZXJ2aWNlLmNvbGxlY3Rpb25QcmVmaXgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdChiYXNlVXJsLCBcIi9cIikuY29uY2F0KFVybFNlcnZpY2UuY29sbGVjdGlvblByZWZpeCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2VVcmw7XG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IFVybFNlcnZpY2U7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3NlcnZpY2VzL1VzYWdlU3RhdHMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9zZXJ2aWNlcy9Vc2FnZVN0YXRzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9sb2dnaW5nICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiKSxcbiAgICBMb2dNYW5hZ2VyID0gX3JlcXVpcmUuTG9nTWFuYWdlcjtcblxudmFyIFVzYWdlU3RhdHMgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBVc2FnZVN0YXRzKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVc2FnZVN0YXRzKTtcblxuICAgIHRoaXMuZGF0YSA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBDb2xsZWN0IHRoZSB1c2FnZSBzdGF0cyBmcm9tIHRoZSBwYXJhbXMgcGFzc2VkIGF0IHRoZSB0aW1lIG9mIGluc3RhbnRpYXRpbmcgVldPIGFuZCBzZW5kIHRoZW0gdG8gVldPIFNlcnZlclxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnICAgIGNvbmZpZyBwYXNzZWQgYXQgdGhlIHRpbWUgb2YgaW5zdGFudGlhdGlvbi5cbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoVXNhZ2VTdGF0cywgW3tcbiAgICBrZXk6IFwiY29sbGVjdFVzYWdlU3RhdHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29sbGVjdFVzYWdlU3RhdHMoY29uZmlnKSB7XG4gICAgICB0aGlzLmRhdGFbJ2ViJ10gPSBOdW1iZXIoISFjb25maWcuYmF0Y2hFdmVudHMpO1xuICAgICAgdGhpcy5kYXRhWydpZyddID0gTnVtYmVyKCEhY29uZmlnLmludGVncmF0aW9ucyk7XG4gICAgICB0aGlzLmRhdGFbJ3NzJ10gPSBOdW1iZXIoISFjb25maWcudXNlclN0b3JhZ2VTZXJ2aWNlKTtcbiAgICAgIHRoaXMuZGF0YVsnY2wnXSA9IE51bWJlcighKGNvbmZpZy5sb2dnZXIgaW5zdGFuY2VvZiBMb2dNYW5hZ2VyKSk7XG4gICAgICB0aGlzLmRhdGFbJ2xsJ10gPSBOdW1iZXIoY29uZmlnLmxvZ2dpbmcgJiYgY29uZmlnLmxvZ2dpbmcubGV2ZWwpO1xuICAgICAgdGhpcy5kYXRhWyd0ciddID0gTnVtYmVyKGNvbmZpZy5zaG91bGRUcmFja1JldHVybmluZ1VzZXIpO1xuICAgICAgdGhpcy5kYXRhWydndCddID0gTnVtYmVyKCEhY29uZmlnLmdvYWxUeXBlVG9UcmFjayk7XG4gICAgICB0aGlzLmRhdGFbJ3BpJ10gPSBOdW1iZXIoISFjb25maWcucG9sbGluZ0ludGVydmFsKTtcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhW2tleV0pIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5kYXRhW2tleV07XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbGxlY3RlZCB1c2FnZSBzdGF0cy5cbiAgICAgKiBAcmV0dXJucyAgICAgY29sbGVjdGVkIHVzYWdlIHN0YXRzIGRhdGFcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImdldFVzYWdlU3RhdHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNhZ2VTdGF0cygpIHtcbiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmRhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5kYXRhWydfbCddID0gMTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVXNhZ2VTdGF0cztcbn0oKTtcblxubW9kdWxlLmV4cG9ydHMgPSBVc2FnZVN0YXRzO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi9zZXJ2aWNlcy9sb2dnaW5nL0NvbnNvbGVMb2dNYW5hZ2VyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvc2VydmljZXMvbG9nZ2luZy9Db25zb2xlTG9nTWFuYWdlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3V0aWxzL0Z1bmN0aW9uVXRpbCAqLyBcIi4vbGliL3V0aWxzL0Z1bmN0aW9uVXRpbC5qc1wiKSxcbiAgICBnZXRDdXJyZW50VGltZSA9IF9yZXF1aXJlLmdldEN1cnJlbnRUaW1lO1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZW51bXMvTG9nTGV2ZWxFbnVtICovIFwiLi9saWIvZW51bXMvTG9nTGV2ZWxFbnVtLmpzXCIpLFxuICAgIExvZ0xldmVsRW51bSA9IF9yZXF1aXJlMi5Mb2dMZXZlbEVudW0sXG4gICAgTG9nTGV2ZWxJbmZvRW51bSA9IF9yZXF1aXJlMi5Mb2dMZXZlbEluZm9FbnVtLFxuICAgIExvZ0xldmVsQ29sb3JJbmZvRW51bSA9IF9yZXF1aXJlMi5Mb2dMZXZlbENvbG9ySW5mb0VudW07XG5cbnZhciBDb25zb2xlTG9nTWFuYWdlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENvbnNvbGVMb2dNYW5hZ2VyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25zb2xlTG9nTWFuYWdlcik7XG5cbiAgICB0aGlzLmxvZ0xldmVsID0gTG9nTGV2ZWxFbnVtLk5PVFNFVDtcbiAgICB0aGlzLnByZWZpeCA9IFwiVldPLVNES1wiO1xuICAgIHRoaXMuaXNDb2xvcmVkTG9nRW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENvbnNvbGVMb2dNYW5hZ2VyLCBbe1xuICAgIGtleTogXCJsb2dcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nKGxldmVsLCBtZXNzYWdlKSB7XG4gICAgICBpZiAoIXRoaXMuc2hvdWxkTG9nKGxldmVsKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsb2dNZXNzYWdlO1xuXG4gICAgICBpZiAodGhpcy5pc0NvbG9yZWRMb2dFbmFibGVkKSB7XG4gICAgICAgIGxvZ01lc3NhZ2UgPSBcIlwiLmNvbmNhdCh0aGlzLnByZWZpeCwgXCIgLSBcIikuY29uY2F0KExvZ0xldmVsQ29sb3JJbmZvRW51bVtsZXZlbF0sIFwiIFwiKS5jb25jYXQoZ2V0Q3VycmVudFRpbWUoKSwgXCIgXCIpLmNvbmNhdChtZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ01lc3NhZ2UgPSBcIlwiLmNvbmNhdCh0aGlzLnByZWZpeCwgXCIgLSBcIikuY29uY2F0KExvZ0xldmVsSW5mb0VudW1bbGV2ZWxdLCBcIiBcIikuY29uY2F0KGdldEN1cnJlbnRUaW1lKCksIFwiIFwiKS5jb25jYXQobWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY29uc29sZUxvZyhsZXZlbCwgW2xvZ01lc3NhZ2VdKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2hvdWxkTG9nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZExvZyh0YXJnZXRMb2dMZXZlbCkge1xuICAgICAgcmV0dXJuIHRhcmdldExvZ0xldmVsID49IHRoaXMubG9nTGV2ZWw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldExvZ0xldmVsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XG4gICAgICBpZiAobGV2ZWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmxvZ0xldmVsID0gTG9nTGV2ZWxFbnVtLkVSUk9SO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxldmVsO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb25zb2xlTG9nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnNvbGVMb2cobGV2ZWwsIGxvZ0FyZ3VtZW50cykge1xuICAgICAgc3dpdGNoIChsZXZlbCkge1xuICAgICAgICBjYXNlIExvZ0xldmVsRW51bS5JTkZPOlxuICAgICAgICAgIGNvbnNvbGUuaW5mby5hcHBseShjb25zb2xlLCBsb2dBcmd1bWVudHMpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgTG9nTGV2ZWxFbnVtLldBUk46XG4gICAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGxvZ0FyZ3VtZW50cyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBMb2dMZXZlbEVudW0uRVJST1I6XG4gICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBsb2dBcmd1bWVudHMpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgbG9nQXJndW1lbnRzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ29uc29sZUxvZ01hbmFnZXI7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ29uc29sZUxvZ01hbmFnZXI7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvTG9nZ2luZ01hbmFnZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi9zZXJ2aWNlcy9sb2dnaW5nL0xvZ2dpbmdNYW5hZ2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRvb2sgcmVmZXJlbmNlIGZyb206IFwibG9nbGV2ZWxcIiAtIGh0dHBzOi8vZ2l0aHViLmNvbS9waW10ZXJyeS9sb2dsZXZlbFxuICpcbiAqIE5hbWU6IGxvZ2xldmVsXG4gKiBQdWJsaXNoZWQgTmFtZTogbG9nbGV2ZWxcbiAqIFVSTDogaHR0cHM6Ly9naXRodWIuY29tL3BpbXRlcnJ5L2xvZ2xldmVsXG4gKiBEZXNjcmlwdGlvbjogTWluaW1hbCBsaWdodHdlaWdodCBsb2dnaW5nIGZvciBKYXZhU2NyaXB0LCBhZGRpbmcgcmVsaWFibGUgbG9nIGxldmVsIG1ldGhvZHMgdG8gd3JhcCBhbnkgYXZhaWxhYmxlIGNvbnNvbGUubG9nIG1ldGhvZHNcbiAqIEF1dGhvcjogVGltIFBlcnJ5IChodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkpXG4gKiBMSUNFTlNFOiBNSVQgTGljZW5zZVxuICogTG9jYWwgTW9kaWZpY2F0aW9uczogVGhpcyBsaWJyYXJ5IGlzIG5vdCB1c2VkIGFzIGEgZGVwZW5kZW5jeS4gU291cmNlIGNvZGUgd2FzIHJlZmVyZW5jZWQgYW5kIGlzIG1vZGlmaWVkIGFzIHBlciByZXF1aXJlbWVudHMuXG4gKlxuICovXG4vLyBUT0RPOiBjaGFuZ2UgcGF0aFxudmFyIExvZ01lc3NhZ2VFbnVtID0ge1xuICBERUJVR19NRVNTQUdFUzogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgdndvLXNkay1sb2ctbWVzc2FnZXMvc3JjL2RlYnVnLW1lc3NhZ2VzLmpzb24gKi8gXCIuL25vZGVfbW9kdWxlcy92d28tc2RrLWxvZy1tZXNzYWdlcy9zcmMvZGVidWctbWVzc2FnZXMuanNvblwiKSxcbiAgSU5GT19NRVNTQUdFUzogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgdndvLXNkay1sb2ctbWVzc2FnZXMvc3JjL2luZm8tbWVzc2FnZXMuanNvbiAqLyBcIi4vbm9kZV9tb2R1bGVzL3Z3by1zZGstbG9nLW1lc3NhZ2VzL3NyYy9pbmZvLW1lc3NhZ2VzLmpzb25cIiksXG4gIFdBUk5JTkdfTUVTU0FHRVM6IF9fd2VicGFja19yZXF1aXJlX18oLyohIHZ3by1zZGstbG9nLW1lc3NhZ2VzL3NyYy93YXJuaW5nLW1lc3NhZ2VzLmpzb24gKi8gXCIuL25vZGVfbW9kdWxlcy92d28tc2RrLWxvZy1tZXNzYWdlcy9zcmMvd2FybmluZy1tZXNzYWdlcy5qc29uXCIpLFxuICBFUlJPUl9NRVNTQUdFUzogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgdndvLXNkay1sb2ctbWVzc2FnZXMvc3JjL2Vycm9yLW1lc3NhZ2VzLmpzb24gKi8gXCIuL25vZGVfbW9kdWxlcy92d28tc2RrLWxvZy1tZXNzYWdlcy9zcmMvZXJyb3ItbWVzc2FnZXMuanNvblwiKVxufTtcblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vZW51bXMvTG9nTGV2ZWxFbnVtICovIFwiLi9saWIvZW51bXMvTG9nTGV2ZWxFbnVtLmpzXCIpLFxuICAgIExvZ0xldmVsRW51bSA9IF9yZXF1aXJlLkxvZ0xldmVsRW51bSxcbiAgICBMb2dOdW1iZXJMZXZlbCA9IF9yZXF1aXJlLkxvZ051bWJlckxldmVsO1xuXG52YXIgTG9nTWVzc2FnZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi91dGlscy9Mb2dNZXNzYWdlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0xvZ01lc3NhZ2VVdGlsLmpzXCIpO1xuXG52YXIgQ29uc29sZUxvZ01hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0NvbnNvbGVMb2dNYW5hZ2VyICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9Db25zb2xlTG9nTWFuYWdlci5qc1wiKTtcblxudmFyIGdsb2JhbExvZ0xldmVsID0gTG9nTGV2ZWxFbnVtLk5PVFNFVDtcbnZhciBpc0NvbG9yZWRMb2dFbmFibGVkID0gZmFsc2U7XG52YXIgZ2xvYmFsTG9nSGFuZGxlciA9IG5ldyBDb25zb2xlTG9nTWFuYWdlcigpO1xuXG52YXIgTG9nTWFuYWdlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIExvZ01hbmFnZXIobmFtZSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2dNYW5hZ2VyKTtcblxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5pc0NvbG9yZWRMb2dFbmFibGVkID0gaXNDb2xvcmVkTG9nRW5hYmxlZDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhMb2dNYW5hZ2VyLCBbe1xuICAgIGtleTogXCJfY3VzdG9tTG9nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9jdXN0b21Mb2cobGV2ZWwsIG1lc3NhZ2UpIHtcbiAgICAgIGlmIChsZXZlbCA8IGdsb2JhbExvZ0xldmVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZ2xvYmFsTG9nSGFuZGxlci5sb2cobGV2ZWwsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsb2dcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nKGxldmVsLCBtZXNzYWdlKSB7XG4gICAgICB2YXIgZGlzYWJsZUxvZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlO1xuXG4gICAgICBpZiAoZGlzYWJsZUxvZ3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl9jdXN0b21Mb2cobGV2ZWwsIG1lc3NhZ2UpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZXTzogQ291bGQgbm90IGxvZy4nLCBlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbmZvXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluZm8obWVzc2FnZSkge1xuICAgICAgdGhpcy5fY3VzdG9tTG9nKExvZ0xldmVsRW51bS5JTkZPLCBtZXNzYWdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGVidWdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVidWcobWVzc2FnZSkge1xuICAgICAgdGhpcy5fY3VzdG9tTG9nKExvZ0xldmVsRW51bS5ERUJVRywgbWVzc2FnZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndhcm5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gd2FybihtZXNzYWdlKSB7XG4gICAgICB0aGlzLl9jdXN0b21Mb2coTG9nTGV2ZWxFbnVtLldBUk4sIG1lc3NhZ2UpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlcnJvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlcnJvcihtZXNzYWdlKSB7XG4gICAgICB0aGlzLl9jdXN0b21Mb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBtZXNzYWdlKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTG9nTWFuYWdlcjtcbn0oKTtcblxuZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBMb2dNYW5hZ2VyKG5hbWUpO1xufVxuXG5mdW5jdGlvbiBzZXRMb2dIYW5kbGVyKGxvZ2dlcikge1xuICBnbG9iYWxMb2dIYW5kbGVyID0gbG9nZ2VyO1xufVxuXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xuICBpZiAobGV2ZWwgPT09IHVuZGVmaW5lZCkge1xuICAgIGdsb2JhbExvZ0xldmVsID0gTG9nTGV2ZWxFbnVtLkVSUk9SO1xuICB9IGVsc2Uge1xuICAgIGdsb2JhbExvZ0xldmVsID0gbGV2ZWw7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TG9nTGV2ZWwoKSB7XG4gIHJldHVybiBnbG9iYWxMb2dMZXZlbDtcbn1cblxuZnVuY3Rpb24gc2V0TG9nQ29sb3JNb2RlKHZhbHVlKSB7XG4gIGlzQ29sb3JlZExvZ0VuYWJsZWQgPSB2YWx1ZTtcbiAgZ2xvYmFsTG9nSGFuZGxlci5pc0NvbG9yZWRMb2dFbmFibGVkID0gaXNDb2xvcmVkTG9nRW5hYmxlZDtcbn1cblxuZnVuY3Rpb24gZ2V0TG9nQ29sb3JNb2RlKCkge1xuICByZXR1cm4gaXNDb2xvcmVkTG9nRW5hYmxlZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIExvZ0xldmVsRW51bTogTG9nTGV2ZWxFbnVtLFxuICBMb2dOdW1iZXJMZXZlbDogTG9nTnVtYmVyTGV2ZWwsXG4gIExvZ01lc3NhZ2VVdGlsOiBMb2dNZXNzYWdlVXRpbCxcbiAgTG9nTWVzc2FnZUVudW06IExvZ01lc3NhZ2VFbnVtLFxuICBnZXRMb2dnZXI6IGdldExvZ2dlcixcbiAgc2V0TG9nSGFuZGxlcjogc2V0TG9nSGFuZGxlcixcbiAgc2V0TG9nTGV2ZWw6IHNldExvZ0xldmVsLFxuICBnZXRMb2dMZXZlbDogZ2V0TG9nTGV2ZWwsXG4gIExvZ01hbmFnZXI6IExvZ01hbmFnZXIsXG4gIHNldExvZ0NvbG9yTW9kZTogc2V0TG9nQ29sb3JNb2RlLFxuICBnZXRMb2dDb2xvck1vZGU6IGdldExvZ0NvbG9yTW9kZSxcbiAgZ2xvYmFsTG9nSGFuZGxlcjogZ2xvYmFsTG9nSGFuZGxlclxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0xvZ2dpbmdNYW5hZ2VyICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9Mb2dnaW5nTWFuYWdlci5qc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBsb2dnaW5nO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9DYW1wYWlnblV0aWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL3V0aWxzL0NhbXBhaWduVXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBWYWxpZGF0ZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1ZhbGlkYXRlVXRpbCAqLyBcIi4vbGliL3V0aWxzL1ZhbGlkYXRlVXRpbC5qc1wiKTtcblxudmFyIENvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvbnN0YW50cyAqLyBcIi4vbGliL2NvbnN0YW50cy9pbmRleC5qc1wiKTtcblxudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9sb2dnaW5nICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiKTtcblxudmFyIEZpbGVOYW1lRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0ZpbGVOYW1lRW51bSAqLyBcIi4vbGliL2VudW1zL0ZpbGVOYW1lRW51bS5qc1wiKTtcblxudmFyIEdvYWxUeXBlRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0dvYWxUeXBlRW51bSAqLyBcIi4vbGliL2VudW1zL0dvYWxUeXBlRW51bS5qc1wiKTtcblxudmFyIENhbXBhaWduVHlwZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9DYW1wYWlnblR5cGVFbnVtICovIFwiLi9saWIvZW51bXMvQ2FtcGFpZ25UeXBlRW51bS5qc1wiKTtcblxudmFyIExvZ0xldmVsRW51bSA9IGxvZ2dpbmcuTG9nTGV2ZWxFbnVtLFxuICAgIExvZ01lc3NhZ2VFbnVtID0gbG9nZ2luZy5Mb2dNZXNzYWdlRW51bSxcbiAgICBMb2dNZXNzYWdlVXRpbCA9IGxvZ2dpbmcuTG9nTWVzc2FnZVV0aWw7XG52YXIgbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoKTtcbnZhciBDYW1wYWlnblV0aWwgPSB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBidWNrZXQgc2l6ZSBvZiB2YXJpYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyL0Zsb2F0fSAtIHdlaWdodCBvZiB2YXJpYXRpb25cbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBidWNrZXQgc3RhcnQgcmFuZ2Ugb2YgVmFyaWF0aW9uXG4gICAqL1xuICBfZ2V0VmFyaWF0aW9uQnVja2V0UmFuZ2U6IGZ1bmN0aW9uIF9nZXRWYXJpYXRpb25CdWNrZXRSYW5nZSh2YXJpYXRpb25XZWlnaHQpIHtcbiAgICBpZiAoIXZhcmlhdGlvbldlaWdodCB8fCB2YXJpYXRpb25XZWlnaHQgPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHZhciBzdGFydFJhbmdlID0gTWF0aC5jZWlsKHZhcmlhdGlvbldlaWdodCAqIDEwMCk7XG4gICAgcmV0dXJuIE1hdGgubWluKHN0YXJ0UmFuZ2UsIENvbnN0YW50cy5NQVhfVFJBRkZJQ19WQUxVRSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY2FtcGFpZ24gb24gdGhlIGJhc2lzIG9mIGNhbXBhaWduIGlkXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc0ZpbGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNhbXBhaWduSWRcbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gY2FtcGFpZ24gb2JqZWN0XG4gICAqL1xuICBnZXRDYW1wYWlnbkJhc2VkT25JZDogZnVuY3Rpb24gZ2V0Q2FtcGFpZ25CYXNlZE9uSWQoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbklkKSB7XG4gICAgdmFyIGNhbXBhaWduO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5nc0ZpbGUuY2FtcGFpZ25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocGFyc2VJbnQoc2V0dGluZ3NGaWxlLmNhbXBhaWduc1tpXS5pZCwgMTApID09PSBwYXJzZUludChjYW1wYWlnbklkLCAxMCkpIHtcbiAgICAgICAgY2FtcGFpZ24gPSBzZXR0aW5nc0ZpbGUuY2FtcGFpZ25zW2ldO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2FtcGFpZ247XG4gIH0sXG5cbiAgLyoqXG4gICAqIEl0IGV4dHJhY3RzIHRoZSB3ZWlnaHRzIGZyb20gYWxsIHRoZSB2YXJpYXRpb25zIGluc2lkZSB0aGUgY2FtcGFpZ25cbiAgICAgIGFuZCBzY2FsZXMgdGhlbSBzbyB0aGF0IHRoZSB0b3RhbCBzdW0gb2YgZWxpZ2libGUgdmFyaWF0aW9ucycgd2VpZ2h0cyBiZWNvbWUgMTAwJVxuICAgICAgIDEuIHZhcmlhdGlvbnNcbiAgICovXG4gIHNjYWxlVmFyaWF0aW9uV2VpZ2h0czogZnVuY3Rpb24gc2NhbGVWYXJpYXRpb25XZWlnaHRzKHZhcmlhdGlvbnMpIHtcbiAgICB2YXIgdG90YWxXZWlnaHQgPSB2YXJpYXRpb25zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB2YXJpYXRpb24pIHtcbiAgICAgIHJldHVybiBhY2MgKyB2YXJpYXRpb24ud2VpZ2h0O1xuICAgIH0sIDApO1xuXG4gICAgaWYgKCF0b3RhbFdlaWdodCkge1xuICAgICAgdmFyIHdlaWdodCA9IDEwMCAvIHZhcmlhdGlvbnMubGVuZ3RoO1xuICAgICAgdmFyaWF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhcmlhdGlvbi53ZWlnaHQgPSB3ZWlnaHQ7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyaWF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhcmlhdGlvbi53ZWlnaHQgPSB2YXJpYXRpb24ud2VpZ2h0IC8gdG90YWxXZWlnaHQgKiAxMDA7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIGdldENhbXBhaWduOiBmdW5jdGlvbiBnZXRDYW1wYWlnbihzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5KSB7XG4gICAgdmFyIGNhbXBhaWduO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5nc0ZpbGUuY2FtcGFpZ25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2V0dGluZ3NGaWxlLmNhbXBhaWduc1tpXS5rZXkgPT09IGNhbXBhaWduS2V5KSB7XG4gICAgICAgIGNhbXBhaWduID0gc2V0dGluZ3NGaWxlLmNhbXBhaWduc1tpXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbXBhaWduO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbXBhaWducyBmb3IgY29ycmVzcG9uZGluZyBjYW1wYWlnbktleXNcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzRmlsZVxuICAgKiBAcGFyYW0ge0FycmF5fSBjYW1wYWlnbktleXNcbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IENhbXBhaWduc1xuICAgKi9cbiAgZ2V0Q2FtcGFpZ25zRm9yS2V5czogZnVuY3Rpb24gZ2V0Q2FtcGFpZ25zRm9yS2V5cyhzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5cykge1xuICAgIHZhciBjYW1wYWlnbnMgPSBbXTtcbiAgICBjYW1wYWlnbktleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgY2FtcGFpZ24gPSBDYW1wYWlnblV0aWwuZ2V0Q2FtcGFpZ24oc2V0dGluZ3NGaWxlLCBrZXkpO1xuXG4gICAgICBpZiAoY2FtcGFpZ24pIHtcbiAgICAgICAgY2FtcGFpZ25zLnB1c2goY2FtcGFpZ24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FtcGFpZ25zLnB1c2goe1xuICAgICAgICAgIGtleToga2V5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjYW1wYWlnbnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgY2FtcGFpZ25zIHdoaWNoIGhhdmUgdGhlIGdvYWxJZGVudGlmaWVyIHByZXNlbnRcbiAgICpcbiAgICogQHBhcmFtIHtzZXR0aW5nc0ZpbGV9XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBnb2FsSWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZ29hbFR5cGVUb1RyYWNrIHR5cGUgb2YgZ29hbCB0byB0cmFja1xuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gQ2FtcGFpZ25zXG4gICAqL1xuICBnZXRDYW1wYWlnbnNGb3JHb2FsOiBmdW5jdGlvbiBnZXRDYW1wYWlnbnNGb3JHb2FsKHNldHRpbmdzRmlsZSwgZ29hbElkZW50aWZpZXIsIGdvYWxUeXBlVG9UcmFjaykge1xuICAgIHZhciBjYW1wYWlnbnMgPSBbXTtcbiAgICBzZXR0aW5nc0ZpbGUuY2FtcGFpZ25zLmZvckVhY2goZnVuY3Rpb24gKGNhbXBhaWduKSB7XG4gICAgICB2YXIgZ29hbCA9IENhbXBhaWduVXRpbC5nZXRDYW1wYWlnbkdvYWwoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbi5rZXksIGdvYWxJZGVudGlmaWVyKTtcblxuICAgICAgaWYgKGdvYWwgJiYgKGdvYWxUeXBlVG9UcmFjayA9PT0gR29hbFR5cGVFbnVtLkFMTCB8fCBnb2FsLnR5cGUgPT09IGdvYWxUeXBlVG9UcmFjaykpIHtcbiAgICAgICAgY2FtcGFpZ25zLnB1c2goY2FtcGFpZ24pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFjYW1wYWlnbnMubGVuZ3RoKSB7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuQ0FNUEFJR05fTk9UX0ZPVU5EX0ZPUl9HT0FMLCB7XG4gICAgICAgIGZpbGU6IEZpbGVOYW1lRW51bS5DYW1wYWlnblV0aWwsXG4gICAgICAgIGdvYWxJZGVudGlmaWVyOiBnb2FsSWRlbnRpZmllclxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiBjYW1wYWlnbnM7XG4gIH0sXG4gIGdldENhbXBhaWduU3RhdHVzOiBmdW5jdGlvbiBnZXRDYW1wYWlnblN0YXR1cyhzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5KSB7XG4gICAgdmFyIGNhbXBhaWduID0gQ2FtcGFpZ25VdGlsLmdldENhbXBhaWduKHNldHRpbmdzRmlsZSwgY2FtcGFpZ25LZXkpO1xuXG4gICAgaWYgKCFjYW1wYWlnbiB8fCAhY2FtcGFpZ24uc3RhdHVzKSB7XG4gICAgICAvLyBsb2cgZXJyb3JcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gY2FtcGFpZ24uc3RhdHVzLnRvTG93ZXJDYXNlKCk7XG4gIH0sXG4gIGlzQ2FtcGFpZ25SdW5uaW5nOiBmdW5jdGlvbiBpc0NhbXBhaWduUnVubmluZyhzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5KSB7XG4gICAgcmV0dXJuIENhbXBhaWduVXRpbC5nZXRDYW1wYWlnblN0YXR1cyhzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5KSA9PT0gJ3J1bm5pbmcnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhlIGNhbXBhaWduXG4gICAqXG4gICAqIEBwYXJhbSB7Q2FtcGFpZ259IGNhbXBhaWduIHRoZSBjYW1wYWlnbiB0byBiZSB2YWxpZGF0ZWRcbiAgICpcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpcyBjYW1wYWlnbiBpcyB2YWxpZFxuICAgKi9cbiAgdmFsaWRhdGVDYW1wYWlnbjogZnVuY3Rpb24gdmFsaWRhdGVDYW1wYWlnbihjYW1wYWlnbikge1xuICAgIHJldHVybiBWYWxpZGF0ZVV0aWwuaXNWYWxpZFZhbHVlKGNhbXBhaWduKSAmJiBjYW1wYWlnbi52YXJpYXRpb25zICYmIE9iamVjdC5rZXlzKGNhbXBhaWduLnZhcmlhdGlvbnMpLmxlbmd0aCA+IDA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFzc2lnbnMgdGhlIGJ1Y2tldHMgdG8gdGhlIFZhcmlhdGlvbnMgb2YgdGhlIGNhbXBhaWduXG4gICAqIGRlcGVuZGluZyBvbiB0aGUgdHJhZmZpYyBhbGxvY2F0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7Q2FtcGFpZ259IGNhbXBhaWduIHdob3NlIFZhcmlhdGlvbnMgYXJlIHRvIGJlIGFsbG9jYXRlZFxuICAgKi9cbiAgc2V0VmFyaWF0aW9uQWxsb2NhdGlvbjogZnVuY3Rpb24gc2V0VmFyaWF0aW9uQWxsb2NhdGlvbihjYW1wYWlnbikge1xuICAgIHZhciBudW1iZXJPZlZhcmlhdGlvbnMgPSBjYW1wYWlnbi52YXJpYXRpb25zLmxlbmd0aDtcbiAgICB2YXIgc3RlcEZhY3RvciA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgY3VycmVudEFsbG9jYXRpb24gPSAwOyBpIDwgbnVtYmVyT2ZWYXJpYXRpb25zOyBpKyspIHtcbiAgICAgIHZhciB2YXJpYXRpb24gPSBjYW1wYWlnbi52YXJpYXRpb25zW2ldO1xuICAgICAgc3RlcEZhY3RvciA9IENhbXBhaWduVXRpbC5hc3NpZ25SYW5nZVZhbHVlcyh2YXJpYXRpb24sIGN1cnJlbnRBbGxvY2F0aW9uKTtcbiAgICAgIGN1cnJlbnRBbGxvY2F0aW9uICs9IHN0ZXBGYWN0b3I7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuVkFSSUFUSU9OX1JBTkdFX0FMTE9DQVRJT04sIHtcbiAgICAgICAgZmlsZTogRmlsZU5hbWVFbnVtLkNhbXBhaWduVXRpbCxcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduLmtleSxcbiAgICAgICAgdmFyaWF0aW9uTmFtZTogdmFyaWF0aW9uLm5hbWUsXG4gICAgICAgIHZhcmlhdGlvbldlaWdodDogdmFyaWF0aW9uLndlaWdodCxcbiAgICAgICAgc3RhcnQ6IHZhcmlhdGlvbi5zdGFydFZhcmlhdGlvbkFsbG9jYXRpb24sXG4gICAgICAgIGVuZDogdmFyaWF0aW9uLmVuZFZhcmlhdGlvbkFsbG9jYXRpb25cbiAgICAgIH0pKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFzc2lnbiByYW5nZSBhbGxvY2F0aW9uIHRvIHRoZSBjYW1wYWlnbnMgaW4gdGhlIGxpc3QgdG8gZGVjaWRlIHdoaWNoIGNhbXBhaWduIHRvIGNob29zZSBvdXQgb2YgdGhlIE11dHVhbGx5IEV4Y2x1c2l2ZSBncm91cFxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBjYW1wYWlnbnNcbiAgICovXG4gIHNldENhbXBhaWduQWxsb2NhdGlvbjogZnVuY3Rpb24gc2V0Q2FtcGFpZ25BbGxvY2F0aW9uKGNhbXBhaWducykge1xuICAgIHZhciBzdGVwRmFjdG9yID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwLCBjdXJyZW50QWxsb2NhdGlvbiA9IDA7IGkgPCBjYW1wYWlnbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjYW1wYWlnbiA9IGNhbXBhaWduc1tpXTtcbiAgICAgIHN0ZXBGYWN0b3IgPSBDYW1wYWlnblV0aWwuYXNzaWduUmFuZ2VWYWx1ZXMoY2FtcGFpZ24sIGN1cnJlbnRBbGxvY2F0aW9uKTtcbiAgICAgIGN1cnJlbnRBbGxvY2F0aW9uICs9IHN0ZXBGYWN0b3I7XG4gICAgfVxuICB9LFxuICBhc3NpZ25SYW5nZVZhbHVlczogZnVuY3Rpb24gYXNzaWduUmFuZ2VWYWx1ZXModmFyaWF0aW9uLCBjdXJyZW50QWxsb2NhdGlvbikge1xuICAgIHZhciBzdGVwRmFjdG9yO1xuICAgIHN0ZXBGYWN0b3IgPSBDYW1wYWlnblV0aWwuX2dldFZhcmlhdGlvbkJ1Y2tldFJhbmdlKHZhcmlhdGlvbi53ZWlnaHQpO1xuXG4gICAgaWYgKHN0ZXBGYWN0b3IpIHtcbiAgICAgIHZhcmlhdGlvbi5zdGFydFZhcmlhdGlvbkFsbG9jYXRpb24gPSBjdXJyZW50QWxsb2NhdGlvbiArIDE7XG4gICAgICB2YXJpYXRpb24uZW5kVmFyaWF0aW9uQWxsb2NhdGlvbiA9IGN1cnJlbnRBbGxvY2F0aW9uICsgc3RlcEZhY3RvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyaWF0aW9uLnN0YXJ0VmFyaWF0aW9uQWxsb2NhdGlvbiA9IC0xO1xuICAgICAgdmFyaWF0aW9uLmVuZFZhcmlhdGlvbkFsbG9jYXRpb24gPSAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RlcEZhY3RvcjtcbiAgfSxcbiAgZ2V0Q2FtcGFpZ25Hb2FsOiBmdW5jdGlvbiBnZXRDYW1wYWlnbkdvYWwoc2V0dGluZ3NGaWxlLCBjYW1wYWlnbktleSwgZ29hbElkZW50aWZpZXIpIHtcbiAgICB2YXIgZGVzaXJlZENhbXBhaWduR29hbCA9IG51bGw7XG5cbiAgICBpZiAoIXNldHRpbmdzRmlsZSB8fCAhY2FtcGFpZ25LZXkgfHwgIWdvYWxJZGVudGlmaWVyKSB7XG4gICAgICByZXR1cm4gZGVzaXJlZENhbXBhaWduR29hbDtcbiAgICB9XG5cbiAgICB2YXIgY2FtcGFpZ24gPSBDYW1wYWlnblV0aWwuZ2V0Q2FtcGFpZ24oc2V0dGluZ3NGaWxlLCBjYW1wYWlnbktleSk7XG5cbiAgICBpZiAoIWNhbXBhaWduKSB7XG4gICAgICByZXR1cm4gZGVzaXJlZENhbXBhaWduR29hbDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhbXBhaWduLmdvYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZ29hbCA9IGNhbXBhaWduLmdvYWxzW2ldO1xuXG4gICAgICBpZiAoZ29hbC5pZGVudGlmaWVyID09PSBnb2FsSWRlbnRpZmllcikge1xuICAgICAgICBkZXNpcmVkQ2FtcGFpZ25Hb2FsID0gZ29hbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc2lyZWRDYW1wYWlnbkdvYWw7XG4gIH0sXG4gIGdldENhbXBhaWduVmFyaWF0aW9uOiBmdW5jdGlvbiBnZXRDYW1wYWlnblZhcmlhdGlvbihzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5LCB2YXJpYXRpb25OYW1lKSB7XG4gICAgdmFyIGRlc2lyZWRWYXJpYXRpb24gPSBudWxsO1xuXG4gICAgaWYgKCFzZXR0aW5nc0ZpbGUgfHwgIWNhbXBhaWduS2V5IHx8ICF2YXJpYXRpb25OYW1lKSB7XG4gICAgICByZXR1cm4gZGVzaXJlZFZhcmlhdGlvbjtcbiAgICB9XG5cbiAgICB2YXIgY2FtcGFpZ24gPSBDYW1wYWlnblV0aWwuZ2V0Q2FtcGFpZ24oc2V0dGluZ3NGaWxlLCBjYW1wYWlnbktleSk7XG5cbiAgICBpZiAoIWNhbXBhaWduKSB7XG4gICAgICByZXR1cm4gZGVzaXJlZFZhcmlhdGlvbjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhbXBhaWduLnZhcmlhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YXJpYXRpb24gPSBjYW1wYWlnbi52YXJpYXRpb25zW2ldO1xuXG4gICAgICBpZiAodmFyaWF0aW9uLm5hbWUgPT09IHZhcmlhdGlvbk5hbWUpIHtcbiAgICAgICAgZGVzaXJlZFZhcmlhdGlvbiA9IHZhcmlhdGlvbjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc2lyZWRWYXJpYXRpb247XG4gIH0sXG4gIGdldENvbnRyb2xGb3JDYW1wYWlnbjogZnVuY3Rpb24gZ2V0Q29udHJvbEZvckNhbXBhaWduKGNhbXBhaWduKSB7XG4gICAgdmFyIGNvbnRyb2wgPSB7fTtcblxuICAgIGlmICghY2FtcGFpZ24gfHwgIWNhbXBhaWduLnZhcmlhdGlvbnMpIHtcbiAgICAgIHJldHVybiBjb250cm9sO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FtcGFpZ24udmFyaWF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNhbXBhaWduLnZhcmlhdGlvbnNbaV0uaWQgPT09IDEpIHtcbiAgICAgICAgY29udHJvbCA9IGNhbXBhaWduLnZhcmlhdGlvbnNbaV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb250cm9sO1xuICB9LFxuICBpc0ZlYXR1cmVUZXN0Q2FtcGFpZ246IGZ1bmN0aW9uIGlzRmVhdHVyZVRlc3RDYW1wYWlnbihjYW1wYWlnbikge1xuICAgIGlmIChjYW1wYWlnbiAmJiBjYW1wYWlnbi50eXBlID09PSBDYW1wYWlnblR5cGVFbnVtLkZFQVRVUkVfVEVTVCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBpc0ZlYXR1cmVSb2xsb3V0Q2FtcGFpZ246IGZ1bmN0aW9uIGlzRmVhdHVyZVJvbGxvdXRDYW1wYWlnbihjYW1wYWlnbikge1xuICAgIGlmIChjYW1wYWlnbiAmJiBjYW1wYWlnbi50eXBlID09PSBDYW1wYWlnblR5cGVFbnVtLkZFQVRVUkVfUk9MTE9VVCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBpc0FiQ2FtcGFpZ246IGZ1bmN0aW9uIGlzQWJDYW1wYWlnbihjYW1wYWlnbikge1xuICAgIGlmIChjYW1wYWlnbiAmJiBjYW1wYWlnbi50eXBlID09PSBDYW1wYWlnblR5cGVFbnVtLkFCKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBjYW1wYWlnbiBpcyBhIHBhcnQgb2YgbXV0dWFsbHkgZXhjbHVzaXZlIGdyb3VwXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc0ZpbGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNhbXBhaWduSWRcbiAgICpcbiAgICogQHJldHVybnMge051bWJlcn0gZ3JvdXAgaWQgb2YgdGhlIGNhbXBhaWduLlxuICAgKi9cbiAgaXNQYXJ0T2ZHcm91cDogZnVuY3Rpb24gaXNQYXJ0T2ZHcm91cChzZXR0aW5nc0ZpbGUsIGNhbXBhaWduSWQpIHtcbiAgICBpZiAoc2V0dGluZ3NGaWxlLmNhbXBhaWduR3JvdXBzICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzZXR0aW5nc0ZpbGUuY2FtcGFpZ25Hcm91cHMsIGNhbXBhaWduSWQpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBncm91cElkOiBzZXR0aW5nc0ZpbGUuY2FtcGFpZ25Hcm91cHNbY2FtcGFpZ25JZF0sXG4gICAgICAgIGdyb3VwTmFtZTogc2V0dGluZ3NGaWxlLmdyb3Vwc1tzZXR0aW5nc0ZpbGUuY2FtcGFpZ25Hcm91cHNbY2FtcGFpZ25JZF1dLm5hbWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHt9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2YgY2FtcGFpZ25zIG9uIHRoZSBiYXNpcyBvZiB0aGVpciBpZFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NGaWxlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBncm91cElkXG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheX0gbGlzdCBvZiBjYW1wYWlnbnNcbiAgICovXG4gIGdldEdyb3VwQ2FtcGFpZ25zOiBmdW5jdGlvbiBnZXRHcm91cENhbXBhaWducyhzZXR0aW5nc0ZpbGUsIGdyb3VwSWQpIHtcbiAgICB2YXIgY2FtcGFpZ25zID0gW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNldHRpbmdzRmlsZS5ncm91cHMsIGdyb3VwSWQpKSB7XG4gICAgICBzZXR0aW5nc0ZpbGUuZ3JvdXBzW2dyb3VwSWRdLmNhbXBhaWducy5mb3JFYWNoKGZ1bmN0aW9uIChjYW1wYWlnbklkKSB7XG4gICAgICAgIHZhciBjYW1wYWlnbiA9IENhbXBhaWduVXRpbC5nZXRDYW1wYWlnbkJhc2VkT25JZChzZXR0aW5nc0ZpbGUsIGNhbXBhaWduSWQpO1xuXG4gICAgICAgIGlmIChjYW1wYWlnbikge1xuICAgICAgICAgIGNhbXBhaWducy5wdXNoKGNhbXBhaWduKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbXBhaWducztcbiAgfSxcblxuICAvKipcbiAgICogRGVjaWRlIHRoZSBTZWVkIGZvciBtdXJtdXJoYXNoIHRvIGJ1Y2tldCB1c2VyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYW1wYWlnblxuICAgKiBAcGFyYW0ge251bWJlcn0gZ3JvdXBJZFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBTZWVkIHZhbHVlXG4gICAqL1xuICBnZXRCdWNrZXRpbmdTZWVkOiBmdW5jdGlvbiBnZXRCdWNrZXRpbmdTZWVkKHVzZXJJZCwgY2FtcGFpZ24sIGdyb3VwSWQpIHtcbiAgICBpZiAoZ3JvdXBJZCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KGdyb3VwSWQsIFwiX1wiKS5jb25jYXQodXNlcklkKTtcbiAgICB9XG5cbiAgICBpZiAoY2FtcGFpZ24gJiYgY2FtcGFpZ24uaXNCdWNrZXRpbmdTZWVkRW5hYmxlZCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KGNhbXBhaWduLmlkLCBcIl9cIikuY29uY2F0KHVzZXJJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1c2VySWQ7XG4gICAgfVxuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBDYW1wYWlnblV0aWw7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvdXRpbHMvRGF0YVR5cGVVdGlsLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIERhdGFUeXBlVXRpbCA9IHtcbiAgX3RvU3RyaW5nVmFsdWU6IGZ1bmN0aW9uIF90b1N0cmluZ1ZhbHVlKHZhbCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKTtcbiAgfSxcbiAgaXNOdW1iZXI6IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkge1xuICAgIHJldHVybiBEYXRhVHlwZVV0aWwuX3RvU3RyaW5nVmFsdWUodmFsKSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XG4gIH0sXG4gIGlzU3RyaW5nOiBmdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgICByZXR1cm4gRGF0YVR5cGVVdGlsLl90b1N0cmluZ1ZhbHVlKHZhbCkgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xuICB9LFxuICBpc09iamVjdDogZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gICAgcmV0dXJuIERhdGFUeXBlVXRpbC5fdG9TdHJpbmdWYWx1ZSh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgfSxcbiAgaXNGdW5jdGlvbjogZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gRGF0YVR5cGVVdGlsLl90b1N0cmluZ1ZhbHVlKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gIH0sXG4gIGlzQm9vbGVhbjogZnVuY3Rpb24gaXNCb29sZWFuKHZhbCkge1xuICAgIHJldHVybiBEYXRhVHlwZVV0aWwuX3RvU3RyaW5nVmFsdWUodmFsKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICB9LFxuICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gICAgcmV0dXJuIERhdGFUeXBlVXRpbC5fdG9TdHJpbmdWYWx1ZSh2YWwpID09PSAnW29iamVjdCBVbmRlZmluZWRdJztcbiAgfSxcbiAgaXNOdWxsOiBmdW5jdGlvbiBpc051bGwodmFsKSB7XG4gICAgcmV0dXJuIERhdGFUeXBlVXRpbC5fdG9TdHJpbmdWYWx1ZSh2YWwpID09PSAnW29iamVjdCBOdWxsXSc7XG4gIH0sXG4gIGlzQXJyYXk6IGZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7XG4gICAgcmV0dXJuIERhdGFUeXBlVXRpbC5fdG9TdHJpbmdWYWx1ZSh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBEYXRhVHlwZVV0aWw7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3V0aWxzL0RlY2lzaW9uVXRpbC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvdXRpbHMvRGVjaXNpb25VdGlsLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIFZhcmlhdGlvbkRlY2lkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9jb3JlL1ZhcmlhdGlvbkRlY2lkZXIgKi8gXCIuL2xpYi9jb3JlL1ZhcmlhdGlvbkRlY2lkZXIuanNcIik7XG5cbnZhciBCdWNrZXRpbmdTZXJ2aWNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vY29yZS9CdWNrZXRpbmdTZXJ2aWNlICovIFwiLi9saWIvY29yZS9CdWNrZXRpbmdTZXJ2aWNlLmpzXCIpO1xuXG52YXIgQ2FtcGFpZ25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9DYW1wYWlnblV0aWwgKi8gXCIuL2xpYi91dGlscy9DYW1wYWlnblV0aWwuanNcIik7XG5cbnZhciBEYXRhVHlwZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0RhdGFUeXBlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiKTtcblxudmFyIEZ1bmN0aW9uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRnVuY3Rpb25VdGlsICovIFwiLi9saWIvdXRpbHMvRnVuY3Rpb25VdGlsLmpzXCIpO1xuXG52YXIgbG9nZ2luZyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL2xvZ2dpbmcgKi8gXCIuL2xpYi9zZXJ2aWNlcy9sb2dnaW5nL2luZGV4LmpzXCIpO1xuXG52YXIgRmlsZU5hbWVFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvRmlsZU5hbWVFbnVtICovIFwiLi9saWIvZW51bXMvRmlsZU5hbWVFbnVtLmpzXCIpO1xuXG52YXIgU3RhdHVzRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL1N0YXR1c0VudW0gKi8gXCIuL2xpYi9lbnVtcy9TdGF0dXNFbnVtLmpzXCIpO1xuXG52YXIgTG9nTGV2ZWxFbnVtID0gbG9nZ2luZy5Mb2dMZXZlbEVudW0sXG4gICAgTG9nTWVzc2FnZUVudW0gPSBsb2dnaW5nLkxvZ01lc3NhZ2VFbnVtLFxuICAgIExvZ01lc3NhZ2VVdGlsID0gbG9nZ2luZy5Mb2dNZXNzYWdlVXRpbDtcbnZhciBsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcigpO1xuXG52YXIgU2VnbWVudEV2YWx1YXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvcmUvU2VnbWVudEV2YWx1YXRvciAqLyBcIi4vbGliL2NvcmUvU2VnbWVudEV2YWx1YXRvci5qc1wiKTtcblxudmFyIEhvb2tzTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL0hvb2tzTWFuYWdlciAqLyBcIi4vbGliL3NlcnZpY2VzL0hvb2tzTWFuYWdlci5qc1wiKTtcblxudmFyIEhvb2tzRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0hvb2tzRW51bSAqLyBcIi4vbGliL2VudW1zL0hvb2tzRW51bS5qc1wiKTtcblxudmFyIFV1aWRVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9VdWlkVXRpbCAqLyBcIi4vbGliL3V0aWxzL1V1aWRVdGlsLmpzXCIpO1xuXG52YXIgQ29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vY29uc3RhbnRzICovIFwiLi9saWIvY29uc3RhbnRzL2luZGV4LmpzXCIpO1xuXG52YXIgQ2FtcGFpZ25UeXBlRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0NhbXBhaWduVHlwZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9DYW1wYWlnblR5cGVFbnVtLmpzXCIpO1xuXG52YXIgQXBpRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0FwaUVudW0gKi8gXCIuL2xpYi9lbnVtcy9BcGlFbnVtLmpzXCIpO1xuXG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5EZWNpc2lvblV0aWw7XG52YXIgU2VnbWVudGF0aW9uVHlwZUVudW0gPSB7XG4gIFdISVRFTElTVElORzogJ3doaXRlbGlzdGluZycsXG4gIFBSRV9TRUdNRU5UQVRJT046ICdwcmUtc2VnbWVudGF0aW9uJ1xufTtcbnZhciBEZWNpc2lvblV0aWwgPSB7XG4gIC8vIFBVQkxJQyBNRVRIT0RTXG5cbiAgLyoqXG4gICAqICAxLiBDaGVja3MgaWYgdGhlcmUgaXMgYSB2YXJpYXRpb24gc3RvcmVkIGluIHVzZXJTdG9yYWdlLCByZXR1cm5zIGl0XG4gICAqICAyLiBJZiBXaGl0ZWxpc3RpbmcgaXMgYXBwbGljYWJsZSwgZXZhbHVhdGUgaXQsIGlmIGFueSBlbGlnaWJsZSB2YXJpYXRpb24gaXMgZm91bmQsIHN0b3JlIGl0IGluIFVzZXIgU3RvcmFnZSBzZXJ2aWNlIGFuZCByZXR1cm4sIG90aGVyd2lzZSBza2lwIGl0LlxuICAgKiAgMy4gQ2hlY2sgaWYgdGhlIGNhbXBhaWduIGlzIHBhcnQgb2YgbXV0dWFsbHkgZXhjbHVzaXZlIGdyb3VwLCBpZiB5ZXMsIGdldCB0aGUgd2lubmVyIGNhbXBhaWduIHVzaW5nIGNhbXBhaWduIHRyYWZmaWMgbm9ybWFsaXphdGlvbi5cbiAgICogIDQuIElmIFByZS1zZWdtZW50YXRpb24gaXMgYXBwbGllZCBhbmQgcGFzc2VzIHRoZW4gZ28gZnVydGhlciBvdGhlcndpc2UgcmV0dXJuIGVhcmx5IGFuZCBubyBmdXJ0aGVyIHByb2Nlc3NpbmdcbiAgICogIDUuIElmIG5vIHVzZXIgc3RvcmFnZSB2YWx1ZSwgbm8gd2hpdGVsaXN0ZWQgdmFyaWF0aW9uIGFuZCBwcmUtc2VnbWVudGF0aW9uIGV2YWx1YXRlcyB0byB0cnVlLCBnZXQgdmFyaWF0aW9uIHVzaW5nIGhhc2hpbmcgbG9naWMgaWYgY2FtcGFpZ24gdHJhZmZpYyBwYXNzZXMgZm9yIHRoYXQgdXNlcklkXG4gICAqXG4gICAqXG4gICAqICBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqICBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NGaWxlXG4gICAqICBAcGFyYW0ge09iamVjdH0gY2FtcGFpZ25cbiAgICogIEBwYXJhbSB7T2JqZWN0fSBjYW1wYWlnbktleVxuICAgKiAgQHBhcmFtIHtTdHJpbmd9IHVzZXJJZFxuICAgKiAgQHBhcmFtIHtPYmplY3R9IGN1c3RvbVZhcmlhYmxlc1xuICAgKiAgQHBhcmFtIHtPYmplY3R9IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlc1xuICAgKlxuICAgKiAgQHJldHVybiB7T2JqZWN0fG51bGx9IC0gT2JqZWN0IGlmIGEgdmFyaWF0aW9uIGlzIGFzc2lnbmVkLCBvdGhlcndpc2UgbnVsbFxuICAgKi9cbiAgZ2V0VmFyaWF0aW9uOiBmdW5jdGlvbiBnZXRWYXJpYXRpb24oY29uZmlnLCBzZXR0aW5nc0ZpbGUsIGNhbXBhaWduLCBjYW1wYWlnbktleSwgdXNlcklkLCBjdXN0b21WYXJpYWJsZXMpIHtcbiAgICB2YXIgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiB7fTtcbiAgICB2YXIgdXNlclN0b3JhZ2VEYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDcgJiYgYXJndW1lbnRzWzddICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbN10gOiB7fTtcbiAgICB2YXIgbWV0YURhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gOCA/IGFyZ3VtZW50c1s4XSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgaXNUcmFja1VzZXJBUEkgPSBhcmd1bWVudHMubGVuZ3RoID4gOSA/IGFyZ3VtZW50c1s5XSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbmV3R29hbElkZW50aWZpZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMTAgPyBhcmd1bWVudHNbMTBdIDogdW5kZWZpbmVkO1xuICAgIHZhciBhcGkgPSBhcmd1bWVudHMubGVuZ3RoID4gMTEgJiYgYXJndW1lbnRzWzExXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzExXSA6ICcnO1xuICAgIHZhciB2d29Vc2VySWQgPSBVdWlkVXRpbC5nZW5lcmF0ZUZvcih1c2VySWQsIHNldHRpbmdzRmlsZS5hY2NvdW50SWQpO1xuICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkRFQlVHLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5ERUJVR19NRVNTQUdFUy5VU0VSX1VVSUQsIHtcbiAgICAgIGZpbGU6IEZpbGVOYW1lRW51bS5VdWlkVXRpbCxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgYWNjb3VudElkOiBzZXR0aW5nc0ZpbGUuYWNjb3VudElkLFxuICAgICAgdXVpZDogdndvVXNlcklkXG4gICAgfSkpO1xuICAgIHZhciBkZWNpc2lvbiA9IHtcbiAgICAgIC8vIGNhbXBhaWduIGluZm9cbiAgICAgIGNhbXBhaWduSWQ6IGNhbXBhaWduLmlkLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgY2FtcGFpZ25UeXBlOiBjYW1wYWlnbi50eXBlLFxuICAgICAgY2FtcGFpZ25OYW1lOiBjYW1wYWlnbi5uYW1lLFxuICAgICAgLy8gY2FtcGFpZ24gc2VnbWVudGF0aW9uIGNvbmRpdGlvbnNcbiAgICAgIGN1c3RvbVZhcmlhYmxlczogY3VzdG9tVmFyaWFibGVzLFxuICAgICAgLy8gZXZlbnQgbmFtZVxuICAgICAgZXZlbnQ6IEhvb2tzRW51bS5ERUNJU0lPTl9UWVBFUy5DQU1QQUlHTl9ERUNJU0lPTixcbiAgICAgIC8vIGdvYWwgdHJhY2tlZCBpbiBjYXNlIG9mIHRyYWNrIEFQSVxuICAgICAgZ29hbElkZW50aWZpZXI6IG5ld0dvYWxJZGVudGlmaWVyLFxuICAgICAgLy8gY2FtcGFpZ24gd2hpdGVsaXN0aW5nIGZsYWdcbiAgICAgIGlzRm9yY2VkVmFyaWF0aW9uRW5hYmxlZDogY2FtcGFpZ24uaXNGb3JjZWRWYXJpYXRpb25FbmFibGVkLFxuICAgICAgc2RrVmVyc2lvbjogQ29uc3RhbnRzLlNES19WRVJTSU9OLFxuICAgICAgLy8gQVBJIG5hbWUgd2hpY2ggdHJpZ2dlcmVkIHRoZSBldmVudFxuICAgICAgc291cmNlOiBhcGksXG4gICAgICAvLyBQYXNzZWQgaW4gQVBJXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIC8vIENhbXBhaWduIFdoaXRlbGlzdGluZyBjb25kaXRpb25zXG4gICAgICB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXM6IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgIC8vIFZXTyBnZW5lcmF0ZWQgVVVJRCBiYXNlZCBvbiBwYXNzZWQgVXNlcklkIGFuZCBBY2NvdW50IElEXG4gICAgICB2d29Vc2VySWQ6IHZ3b1VzZXJJZFxuICAgIH07IC8vIGNoZWNrIGlmIHRoZSBjYW1wYWlnbiBpcyBhIHBhcnQgb2YgZ3JvdXBcblxuICAgIHZhciBfQ2FtcGFpZ25VdGlsJGlzUGFydE8gPSBDYW1wYWlnblV0aWwuaXNQYXJ0T2ZHcm91cChzZXR0aW5nc0ZpbGUsIGNhbXBhaWduLmlkKSxcbiAgICAgICAgZ3JvdXBJZCA9IF9DYW1wYWlnblV0aWwkaXNQYXJ0Ty5ncm91cElkLFxuICAgICAgICBncm91cE5hbWUgPSBfQ2FtcGFpZ25VdGlsJGlzUGFydE8uZ3JvdXBOYW1lO1xuXG4gICAgaWYgKGdyb3VwSWQpIHtcbiAgICAgIC8vIGFwcGVuZCBncm91cElkIGFuZCBncm91cE5hbWUsIGlmIGNhbXBhaWduIGlzIGEgcGFydCBvZiBncm91cFxuICAgICAgZGVjaXNpb25bJ2dyb3VwSWQnXSA9IGdyb3VwSWQ7XG4gICAgICBkZWNpc2lvblsnZ3JvdXBOYW1lJ10gPSBncm91cE5hbWU7XG4gICAgfVxuXG4gICAgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzID0gT2JqZWN0LmFzc2lnbih7fSwgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLCB7XG4gICAgICBfdndvVXNlcklkOiBjYW1wYWlnbi5pc1VzZXJMaXN0RW5hYmxlZCA/IHZ3b1VzZXJJZCA6IHVzZXJJZFxuICAgIH0pOyAvLyBjaGVjayBpZiB0YmUgY2FtcGFpZ24gc2F0aXNmaWVzIHRoZSB3aGl0ZWxpc3RpbmcgYmVmb3JlIGNoZWNraW5nIGZvciB0aGUgZ3JvdXBcblxuICAgIHZhciB3aGl0ZWxpc3RlZFZhcmlhdGlvbiA9IERlY2lzaW9uVXRpbC5fY2hlY2tGb3JXaGl0ZWxpc3RpbmcoY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgZGVjaXNpb24pO1xuXG4gICAgaWYgKHdoaXRlbGlzdGVkVmFyaWF0aW9uKSB7XG4gICAgICByZXR1cm4gd2hpdGVsaXN0ZWRWYXJpYXRpb247XG4gICAgfSAvLyBjaGVjayBpZiB0aGUgY2FtcGFpZ24gaXMgcHJlc2VudCBpbiB0aGUgc3RvcmFnZSBiZWZvcmUgY2hlY2tpbmcgZm9yIHRoZSBncm91cFxuXG5cbiAgICB2YXIgc3RvcmVkVmFyaWF0aW9uID0gRGVjaXNpb25VdGlsLl9jaGVja0ZvclVzZXJTdG9yYWdlKGNvbmZpZywgc2V0dGluZ3NGaWxlLCBjYW1wYWlnbiwgY2FtcGFpZ25LZXksIHVzZXJJZCwgdXNlclN0b3JhZ2VEYXRhLCBpc1RyYWNrVXNlckFQSSwgZGVjaXNpb24pO1xuXG4gICAgaWYgKHN0b3JlZFZhcmlhdGlvbikge1xuICAgICAgcmV0dXJuIHN0b3JlZFZhcmlhdGlvbjtcbiAgICB9IC8vIGNoZWNrIGlmIHRoZSBjYWxsZWQgY2FtcGFpZ24gc2F0aXNmaWVzIHRoZSBwcmUtc2VnbWVudGF0aW4gYmVmb3JlIGZ1cnRoZXIgcHJvY2Nlc3NpbmcuXG5cblxuICAgIGlmICghKERlY2lzaW9uVXRpbC5fY2hlY2tGb3JQcmVTZWdtZW50YXRpb24oY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIGN1c3RvbVZhcmlhYmxlcywgZGVjaXNpb24pICYmIEJ1Y2tldGluZ1NlcnZpY2UuaXNVc2VyUGFydE9mQ2FtcGFpZ24odXNlcklkLCBjYW1wYWlnbiwgdHJ1ZSkpKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgaWYgKGdyb3VwSWQpIHtcbiAgICAgIC8vIG11dHVhbGx5IGV4Y2x1c2l2ZSBncm91cCBleGlzdHNcbiAgICAgIC8vIGdldCB0aGUgbGlzdCBvZiB0aGUgYWxsIHRoZSBjYW1wYWlnbnMgaW4gYSBncm91cFxuICAgICAgdmFyIGNhbXBhaWduTGlzdCA9IENhbXBhaWduVXRpbC5nZXRHcm91cENhbXBhaWducyhzZXR0aW5nc0ZpbGUsIGdyb3VwSWQpO1xuXG4gICAgICBpZiAoY2FtcGFpZ25MaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyByZXR1cm4gaWYgbm8gY2FtcGFpZ25zIGFyZSBhY3RpdmUgaW4gYSBncm91cFxuICAgICAgICByZXR1cm4ge307XG4gICAgICB9IC8vIGNoZWNraW5nIG90aGVyIGNhbXBhaWducyBmb3Igd2hpdGVsaXN0aW5nIGFuZCB1c2VyIHN0b3JhZ2UuXG5cblxuICAgICAgdmFyIGlzV2hpdGVsaXN0ZWRPclN0b3JlZFZhcmlhdGlvbiA9IERlY2lzaW9uVXRpbC5fY2hlY2tGb3JTdG9yYWdlQW5kV2hpdGVsaXN0aW5nKGNvbmZpZywgc2V0dGluZ3NGaWxlLCBncm91cE5hbWUsIGNhbXBhaWduTGlzdCwgY2FtcGFpZ24sIHVzZXJJZCwgdXNlclN0b3JhZ2VEYXRhLCB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMsIGlzVHJhY2tVc2VyQVBJKTtcblxuICAgICAgaWYgKGlzV2hpdGVsaXN0ZWRPclN0b3JlZFZhcmlhdGlvbikge1xuICAgICAgICAvLyBvdGhlciBjYW1wYWlnbnMgc2F0aXNmeSB0aGUgd2hpdGVsaXN0aW5nIG9yIHN0b3JhZ2UsIHRoZXJmb3JlIHJldHVybmluZ1xuICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLk1FR19DQUxMRURfQ0FNUEFJR05fTk9UX1dJTk5FUiwge1xuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIGdyb3VwTmFtZTogZ3JvdXBOYW1lLFxuICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfSAvLyBub25lIG9mIHRoZSBncm91cCBjYW1wYWlnbnMgc2F0aXNmeSB3aGl0ZWxpc3Rpbmcgb3IgdXNlciBzdG9yYWdlXG4gICAgICAvLyBjaGVjayBlYWNoIGNhbXBhaWduIGZvciBwcmUtc2VnbWVudGF0aW9uIGFuZCB0cmFmZmljIGFsbG9jYXRpb24uXG5cblxuICAgICAgdmFyIGluRWxpZ2libGVDYW1wYWlnbktleXMgPSAnJztcbiAgICAgIHZhciBlbGlnaWJsZUNhbXBhaWduS2V5cyA9ICcnO1xuXG4gICAgICB2YXIgX0RlY2lzaW9uVXRpbCRnZXRFbGlnID0gRGVjaXNpb25VdGlsLmdldEVsaWdibGVDYW1wYWlnbnMoY2FtcGFpZ25MaXN0LCB1c2VySWQsIGN1c3RvbVZhcmlhYmxlcyksXG4gICAgICAgICAgZWxpZ2libGVDYW1wYWlnbnMgPSBfRGVjaXNpb25VdGlsJGdldEVsaWcuZWxpZ2libGVDYW1wYWlnbnMsXG4gICAgICAgICAgaW5FbGlnaWJsZUNhbXBhaWducyA9IF9EZWNpc2lvblV0aWwkZ2V0RWxpZy5pbkVsaWdpYmxlQ2FtcGFpZ25zO1xuXG4gICAgICBpbkVsaWdpYmxlQ2FtcGFpZ25zLmZvckVhY2goZnVuY3Rpb24gKGNhbXBhaWduKSB7XG4gICAgICAgIGluRWxpZ2libGVDYW1wYWlnbktleXMgPSBpbkVsaWdpYmxlQ2FtcGFpZ25LZXlzICsgY2FtcGFpZ24ua2V5ICsgJywnO1xuICAgICAgfSk7XG4gICAgICBlbGlnaWJsZUNhbXBhaWducy5mb3JFYWNoKGZ1bmN0aW9uIChjYW1wYWlnbikge1xuICAgICAgICBlbGlnaWJsZUNhbXBhaWduS2V5cyA9IGVsaWdpYmxlQ2FtcGFpZ25LZXlzICsgY2FtcGFpZ24ua2V5ICsgJywnO1xuICAgICAgfSk7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuTUVHX0VMSUdJQkxFX0NBTVBBSUdOUywge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZ3JvdXBOYW1lOiBncm91cE5hbWUsXG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIGVsaWdpYmxlQ2FtcGFpZ25LZXlzOiBlbGlnaWJsZUNhbXBhaWduS2V5cy5zbGljZSgwLCAtMSksXG4gICAgICAgIGluRWxpZ2libGVUZXh0OiBpbkVsaWdpYmxlQ2FtcGFpZ25LZXlzID09PSAnJyA/ICdubyBjYW1wYWlnbnMnIDogXCJjYW1wYWlnbnM6IFwiLmNvbmNhdChpbkVsaWdpYmxlQ2FtcGFpZ25LZXlzLnNsaWNlKDAsIC0xKSlcbiAgICAgIH0pKTtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuTUVHX0VMSUdJQkxFX0NBTVBBSUdOUywge1xuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZ3JvdXBOYW1lOiBncm91cE5hbWUsXG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIG5vT2ZFbGlnaWJsZUNhbXBhaWduczogZWxpZ2libGVDYW1wYWlnbnMubGVuZ3RoLFxuICAgICAgICBub09mR3JvdXBDYW1wYWlnbnM6IGluRWxpZ2libGVDYW1wYWlnbnMubGVuZ3RoICsgZWxpZ2libGVDYW1wYWlnbnMubGVuZ3RoXG4gICAgICB9KSk7XG5cbiAgICAgIGlmIChlbGlnaWJsZUNhbXBhaWducy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gaWYgdGhlIGNhbGxlZCBjYW1wYWlnbiBpcyB0aGUgb25seSB3aW5uZXIuXG4gICAgICAgIHJldHVybiBEZWNpc2lvblV0aWwuZXZhbHVhdGVUcmFmZmljQW5kR2V0VmFyaWF0aW9uKGNvbmZpZywgZWxpZ2libGVDYW1wYWlnbnNbMF0sIGVsaWdpYmxlQ2FtcGFpZ25zWzBdLmtleSwgdXNlcklkLCBtZXRhRGF0YSwgbmV3R29hbElkZW50aWZpZXIsIGRlY2lzaW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0aGUgZWxpZ2libGUgY2FtcGFpZ25zIGFuZCBkZWNpZGUgd2lubmVyXG4gICAgICAgIHJldHVybiBEZWNpc2lvblV0aWwuX25vcm1hbGl6ZUFuZEZpbmRXaW5uaW5nQ2FtcGFpZ24oY29uZmlnLCBjYW1wYWlnbiwgZWxpZ2libGVDYW1wYWlnbnMsIHVzZXJJZCwgZ3JvdXBOYW1lLCBncm91cElkLCBtZXRhRGF0YSwgbmV3R29hbElkZW50aWZpZXIsIGRlY2lzaW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2FtcGFpZ24gaXMgbm90IGEgcGFydCBvZiBtdXR1YWxseSBleGNsdXNpdmUgZ3JvdXBcbiAgICAgIC8vIGNoZWNrIGlmIHRoZSB1c2VyIGlzIGVsaWdpYmxlIHRvIGJlY29tZSBwYXJ0IG9mIHRoZSBjYW1wYWlnbiBhbmQgYXNzaWduIHZhcmlhdGlvbi5cbiAgICAgIHJldHVybiBEZWNpc2lvblV0aWwuZXZhbHVhdGVUcmFmZmljQW5kR2V0VmFyaWF0aW9uKGNvbmZpZywgY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIG1ldGFEYXRhLCBuZXdHb2FsSWRlbnRpZmllciwgZGVjaXNpb24pO1xuICAgIH1cbiAgfSxcbiAgLy8gUFJJVkFURSBNRVRIT0RTXG4gIF9ldmFsdWF0ZVdoaXRlbGlzdGluZzogZnVuY3Rpb24gX2V2YWx1YXRlV2hpdGVsaXN0aW5nKGNhbXBhaWduLCBjYW1wYWlnbktleSwgdXNlcklkLCB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMpIHtcbiAgICB2YXIgZGlzYWJsZUxvZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlO1xuICAgIHZhciB3aGl0ZWxpc3RlZFZhcmlhdGlvbjtcbiAgICB2YXIgc3RhdHVzO1xuICAgIHZhciB0YXJnZXRlZFZhcmlhdGlvbnMgPSBbXTtcbiAgICBjYW1wYWlnbi52YXJpYXRpb25zLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhdGlvbikge1xuICAgICAgaWYgKERhdGFUeXBlVXRpbC5pc09iamVjdCh2YXJpYXRpb24uc2VnbWVudHMpICYmICFPYmplY3Qua2V5cyh2YXJpYXRpb24uc2VnbWVudHMpLmxlbmd0aCkge1xuICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuU0VHTUVOVEFUSU9OX1NLSVBQRUQsIHtcbiAgICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICB2YXJpYXRpb246IGNhbXBhaWduLnR5cGUgPT09IENhbXBhaWduVHlwZUVudW0uRkVBVFVSRV9ST0xMT1VUID8gJycgOiBcIiwgZm9yIFwiLmNvbmNhdCh2YXJpYXRpb24ubmFtZSlcbiAgICAgICAgfSksIGRpc2FibGVMb2dzKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoRGF0YVR5cGVVdGlsLmlzT2JqZWN0KHZhcmlhdGlvbi5zZWdtZW50cykgJiYgU2VnbWVudEV2YWx1YXRvcih2YXJpYXRpb24uc2VnbWVudHMsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgY2FtcGFpZ25LZXksIHVzZXJJZCwgdmFyaWF0aW9uLm5hbWUpKSB7XG4gICAgICAgIHN0YXR1cyA9IFN0YXR1c0VudW0uUEFTU0VEO1xuICAgICAgICB0YXJnZXRlZFZhcmlhdGlvbnMucHVzaChGdW5jdGlvblV0aWwuY2xvbmVPYmplY3QodmFyaWF0aW9uKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSBTdGF0dXNFbnVtLkZBSUxFRDtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uREVCVUcsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkRFQlVHX01FU1NBR0VTLlNFR01FTlRBVElPTl9TVEFUVVMsIHtcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgY3VzdG9tVmFyaWFibGVzOiBKU09OLnN0cmluZ2lmeSh2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMpLFxuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgc2VnbWVudGF0aW9uVHlwZTogU2VnbWVudGF0aW9uVHlwZUVudW0uV0hJVEVMSVNUSU5HLFxuICAgICAgICB2YXJpYXRpb246IGNhbXBhaWduLnR5cGUgPT09IENhbXBhaWduVHlwZUVudW0uRkVBVFVSRV9ST0xMT1VUICYmIHN0YXR1cyA9PT0gU3RhdHVzRW51bS5QQVNTRUQgPyAnYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgcm9sbG91dCcgOiBcImZvciBcIi5jb25jYXQodmFyaWF0aW9uLm5hbWUpXG4gICAgICB9KSwgZGlzYWJsZUxvZ3MpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRhcmdldGVkVmFyaWF0aW9ucy5sZW5ndGggPiAxKSB7XG4gICAgICBDYW1wYWlnblV0aWwuc2NhbGVWYXJpYXRpb25XZWlnaHRzKHRhcmdldGVkVmFyaWF0aW9ucyk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXJyZW50QWxsb2NhdGlvbiA9IDAsIHN0ZXBGYWN0b3IgPSAwOyBpIDwgdGFyZ2V0ZWRWYXJpYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0ZXBGYWN0b3IgPSBDYW1wYWlnblV0aWwuYXNzaWduUmFuZ2VWYWx1ZXModGFyZ2V0ZWRWYXJpYXRpb25zW2ldLCBjdXJyZW50QWxsb2NhdGlvbik7XG4gICAgICAgIGN1cnJlbnRBbGxvY2F0aW9uICs9IHN0ZXBGYWN0b3I7XG4gICAgICB9XG5cbiAgICAgIHdoaXRlbGlzdGVkVmFyaWF0aW9uID0gQnVja2V0aW5nU2VydmljZS5fZ2V0VmFyaWF0aW9uKHRhcmdldGVkVmFyaWF0aW9ucywgQnVja2V0aW5nU2VydmljZS5jYWxjdWxhdGVCdWNrZXRWYWx1ZShDYW1wYWlnblV0aWwuZ2V0QnVja2V0aW5nU2VlZCh1c2VySWQsIGNhbXBhaWduKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aGl0ZWxpc3RlZFZhcmlhdGlvbiA9IHRhcmdldGVkVmFyaWF0aW9uc1swXTtcbiAgICB9XG5cbiAgICBpZiAod2hpdGVsaXN0ZWRWYXJpYXRpb24pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhcmlhdGlvbjogd2hpdGVsaXN0ZWRWYXJpYXRpb24sXG4gICAgICAgIHZhcmlhdGlvbk5hbWU6IHdoaXRlbGlzdGVkVmFyaWF0aW9uLm5hbWUsXG4gICAgICAgIHZhcmlhdGlvbklkOiB3aGl0ZWxpc3RlZFZhcmlhdGlvbi5pZFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIElmIHVzZXJTdG9yYWdlU2VydmljZSBpcyBwcm92aWRlZCBhbmQgdmFyaWF0aW9uIHdhcyBzdG9yZWQsIGdldCB0aGUgc3RvcmVkIHZhcmlhdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc0ZpbGUgLSBjbG9uZWQgc2V0dGluZ3NGaWxlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbktleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdHxudWxsfSAtIGlmIGZvdW5kIHRoZW4gdmFyaWF0aW9uIGFuZCBnb2FsSWRlbnRpZmllciBzZXR0aW5ncyBvYmplY3Qgb3RoZXJ3aXNlIG51bGxcbiAgICovXG4gIF9nZXRTdG9yZWRWYXJpYXRpb25BbmRHb2FsSWRlbnRpZmllcnM6IGZ1bmN0aW9uIF9nZXRTdG9yZWRWYXJpYXRpb25BbmRHb2FsSWRlbnRpZmllcnMoY29uZmlnLCBzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5LCB1c2VySWQsIHVzZXJTdG9yYWdlRGF0YSkge1xuICAgIHZhciBkaXNhYmxlTG9ncyA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDogZmFsc2U7XG5cbiAgICB2YXIgdXNlckRhdGEgPSBEZWNpc2lvblV0aWwuX2dldFN0b3JlZFVzZXJEYXRhKGNvbmZpZywgdXNlcklkLCBjYW1wYWlnbktleSwgdXNlclN0b3JhZ2VEYXRhLCBkaXNhYmxlTG9ncyk7XG5cbiAgICB2YXIgdmFyaWF0aW9uTmFtZSA9IHVzZXJEYXRhLnZhcmlhdGlvbk5hbWUsXG4gICAgICAgIGdvYWxJZGVudGlmaWVyID0gdXNlckRhdGEuZ29hbElkZW50aWZpZXI7XG5cbiAgICBpZiAodXNlckRhdGEgJiYgdXNlckRhdGEuY2FtcGFpZ25LZXkgJiYgdmFyaWF0aW9uTmFtZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RvcmVkVmFyaWF0aW9uOiBDYW1wYWlnblV0aWwuZ2V0Q2FtcGFpZ25WYXJpYXRpb24oc2V0dGluZ3NGaWxlLCBjYW1wYWlnbktleSwgdmFyaWF0aW9uTmFtZSksXG4gICAgICAgIGdvYWxJZGVudGlmaWVyOiBnb2FsSWRlbnRpZmllclxuICAgICAgfTtcbiAgICB9IC8vIExvZyBpZiBzdG9yZWQgdmFyaWF0aW9uIGlzIG5vdCBmb3VuZCBldmVuIGFmdGVyIGltcGxlbWVudGluZyBVc2VyU3RvcmFnZVNlcnZpY2VcblxuXG4gICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uREVCVUcsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkRFQlVHX01FU1NBR0VTLlVTRVJfU1RPUkFHRV9TRVJWSUNFX05PX1NUT1JFRF9EQVRBLCB7XG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgdXNlcklkOiB1c2VySWRcbiAgICB9KSwgZGlzYWJsZUxvZ3MpO1xuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJZiB1c2VyU3RvcmFnZVNlcnZpY2UgaXMgcHJvdmlkZWQgYW5kIHZhcmlhdGlvbiB3YXMgc3RvcmVkLCBnZXQgdGhlIHN0b3JlZCB2YXJpYXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NGaWxlIC0gY2xvbmVkIHNldHRpbmdzRmlsZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZFxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R8bnVsbH0gLSBpZiBmb3VuZCB0aGVuIHZhcmlhdGlvbiBzZXR0aW5ncyBvYmplY3Qgb3RoZXJ3aXNlIG51bGxcbiAgICovXG4gIF9nZXRTdG9yZWRWYXJpYXRpb246IGZ1bmN0aW9uIF9nZXRTdG9yZWRWYXJpYXRpb24oY29uZmlnLCBzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5LCB1c2VySWQsIHVzZXJTdG9yYWdlRGF0YSkge1xuICAgIHZhciBkYXRhID0gRGVjaXNpb25VdGlsLl9nZXRTdG9yZWRWYXJpYXRpb25BbmRHb2FsSWRlbnRpZmllcnMoY29uZmlnLCBzZXR0aW5nc0ZpbGUsIGNhbXBhaWduS2V5LCB1c2VySWQsIHVzZXJTdG9yYWdlRGF0YSk7XG5cbiAgICBpZiAoZGF0YSAmJiBkYXRhLnN0b3JlZFZhcmlhdGlvbikge1xuICAgICAgcmV0dXJuIGRhdGEuc3RvcmVkVmFyaWF0aW9uO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIFVzZXIgVmFyaWF0aW9uIG1hcHBpbmcgYnkgY2FsbGluZyBnZXQgbWV0aG9kIG9mIFVzZXJTdG9yYWdlU2VydmljZSBiZWluZyBwcm92aWRlZFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBVc2VySURcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNhbXBhaWduS2V5XG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH0gLSBVc2VyIENhbXBhaWduIE1hcHBpbmdcbiAgICovXG4gIF9nZXRTdG9yZWRVc2VyRGF0YTogZnVuY3Rpb24gX2dldFN0b3JlZFVzZXJEYXRhKGNvbmZpZywgdXNlcklkLCBjYW1wYWlnbktleSwgdXNlclN0b3JhZ2VEYXRhLCBkaXNhYmxlTG9ncykge1xuICAgIHZhciB1c2VyU3RvcmFnZU1hcCA9IHtcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgdmFyaWF0aW9uTmFtZTogbnVsbCxcbiAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgIGdvYWxJZGVudGlmaWVyOiBudWxsXG4gICAgfTtcblxuICAgIGlmICghY29uZmlnLnVzZXJTdG9yYWdlU2VydmljZSkge1xuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uREVCVUcsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkRFQlVHX01FU1NBR0VTLlVTRVJfU1RPUkFHRV9TRVJWSUNFX05PVF9DT05GSUdVUkVELCB7XG4gICAgICAgIGZpbGU6IGZpbGVcbiAgICAgIH0pLCBkaXNhYmxlTG9ncyk7XG4gICAgICByZXR1cm4gdXNlclN0b3JhZ2VNYXA7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBkYXRhID0gY29uZmlnLnVzZXJTdG9yYWdlU2VydmljZS5nZXQodXNlcklkLCBjYW1wYWlnbktleSkgfHwge307IC8vIGlmIGRhdGEgZm91bmRcblxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5HRVRUSU5HX0RBVEFfVVNFUl9TVE9SQUdFX1NFUlZJQ0UsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleVxuICAgICAgfSksIGRpc2FibGVMb2dzKTtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBkYXRhLCB1c2VyU3RvcmFnZURhdGEpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gaWYgbm8gZGF0YSBmb3VuZFxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLlVTRVJfU1RPUkFHRV9TRVJWSUNFX0dFVF9GQUlMRUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGVycm9yOiBlcnJcbiAgICAgIH0pLCBkaXNhYmxlTG9ncyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJZiBVc2VyU3RvcmFnZVNlcnZpY2UgaXMgcHJvdmlkZWQgYW5kIHZhcmlhdGlvbiB3YXMgc3RvcmVkLCBzYXZlIHRoZSBhc3NpZ25lZCB2YXJpYXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNhbXBhaWduXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YXJpYXRpb25OYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAgICpcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gLSB0cnVlIGlmIGZvdW5kIG90aGVyd2lzZSBmYWxzZVxuICAgKi9cbiAgX3NhdmVVc2VyRGF0YTogZnVuY3Rpb24gX3NhdmVVc2VyRGF0YShjb25maWcsIGNhbXBhaWduLCB2YXJpYXRpb25OYW1lLCB1c2VySWQsIG1ldGFEYXRhLCBnb2FsSWRlbnRpZmllcikge1xuICAgIHZhciBpc1NhdmVkID0gZmFsc2U7XG5cbiAgICBpZiAoIWNvbmZpZy51c2VyU3RvcmFnZVNlcnZpY2UpIHtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkRFQlVHLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5ERUJVR19NRVNTQUdFUy5VU0VSX1NUT1JBR0VfU0VSVklDRV9OT1RfQ09ORklHVVJFRCwge1xuICAgICAgICBmaWxlOiBmaWxlXG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gaXNTYXZlZDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHByb3BlcnRpZXMgPSB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICB2YXJpYXRpb25OYW1lOiB2YXJpYXRpb25OYW1lLFxuICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ24ua2V5XG4gICAgICB9O1xuXG4gICAgICBpZiAoIURhdGFUeXBlVXRpbC5pc1VuZGVmaW5lZChnb2FsSWRlbnRpZmllcikpIHtcbiAgICAgICAgcHJvcGVydGllcy5nb2FsSWRlbnRpZmllciA9IGdvYWxJZGVudGlmaWVyO1xuICAgICAgfVxuXG4gICAgICBpZiAoIURhdGFUeXBlVXRpbC5pc1VuZGVmaW5lZChtZXRhRGF0YSkpIHtcbiAgICAgICAgcHJvcGVydGllcy5tZXRhRGF0YSA9IG1ldGFEYXRhO1xuICAgICAgfVxuXG4gICAgICBjb25maWcudXNlclN0b3JhZ2VTZXJ2aWNlLnNldChwcm9wZXJ0aWVzKTtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuU0VUVElOR19EQVRBX1VTRVJfU1RPUkFHRV9TRVJWSUNFLCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ24ua2V5XG4gICAgICB9KSk7XG4gICAgICBpc1NhdmVkID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5VU0VSX1NUT1JBR0VfU0VSVklDRV9TRVRfRkFJTEVELCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBlcnJvcjogZXJyXG4gICAgICB9KSk7XG4gICAgICBpc1NhdmVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzU2F2ZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIHRoZSBjYW1wYWlnbiBmb3Igd2hpdGVsaXN0aW5nIGFuZCBzdG9yZVxuICAgKiBUaGlzIG1ldGhvZCB3b3VsZCBiZSBydW4gb25seSBmb3IgTUVHIGNhbXBhaWduc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc0ZpbGVcbiAgICogQHBhcmFtIHtBcnJheX0gY2FtcGFpZ25MaXN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjYWxsZWRDYW1wYWlnblxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyU3RvcmFnZURhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzVHJhY2tVc2VyQVBJXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSAtIHRydWUsIGlmIHdoaXRlbGlzdGluZy9zdG9yYWdlIGlzIHNhdGlzZmllZCBmb3IgYW55IGNhbXBhaWduXG4gICAqL1xuICBfY2hlY2tGb3JTdG9yYWdlQW5kV2hpdGVsaXN0aW5nOiBmdW5jdGlvbiBfY2hlY2tGb3JTdG9yYWdlQW5kV2hpdGVsaXN0aW5nKGNvbmZpZywgc2V0dGluZ3NGaWxlLCBncm91cE5hbWUsIGNhbXBhaWduTGlzdCwgY2FsbGVkQ2FtcGFpZ24sIHVzZXJJZCwgdXNlclN0b3JhZ2VEYXRhLCB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMsIGlzVHJhY2tVc2VyQVBJKSB7XG4gICAgdmFyIG90aGVyQ2FtcGFpZ25XaW5uZXIgPSBmYWxzZTtcbiAgICBjYW1wYWlnbkxpc3Quc29tZShmdW5jdGlvbiAoZ3JvdXBDYW1wYWlnbikge1xuICAgICAgaWYgKGdyb3VwQ2FtcGFpZ24uaWQgPT09IGNhbGxlZENhbXBhaWduLmlkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gY3JlYXRlIGEgbG9jYWwgY29weSBvZiB0aGUgY2FtcGFpZ25zXG4gICAgICAvLyBncm91cENhbXBhaWduID0gRnVuY3Rpb25VdGlsLmNsb25lT2JqZWN0KGdyb3VwQ2FtcGFpZ24pO1xuICAgICAgLy8gY2hlY2tpbmcgb3RoZXIgY2FtcGFpZ25zIGZvciB3aGl0ZWxpc3Rpbmcgb3IgdXNlciBzdG9yYWdlLlxuXG5cbiAgICAgIHZhciB3aGl0ZWxpc3RlZFZhcmlhdGlvbiA9IERlY2lzaW9uVXRpbC5fY2hlY2tGb3JXaGl0ZWxpc3RpbmcoZ3JvdXBDYW1wYWlnbiwgZ3JvdXBDYW1wYWlnbi5rZXksIHVzZXJJZCwgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzKTtcblxuICAgICAgaWYgKHdoaXRlbGlzdGVkVmFyaWF0aW9uKSB7XG4gICAgICAgIC8vIG90aGVyIGNhbXBhaWduIHNhdGlzZnkgdGhlIHdoaXRlbGlzdGluZ1xuICAgICAgICBvdGhlckNhbXBhaWduV2lubmVyID0gdHJ1ZTtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5PVEhFUl9DQU1QQUlHTl9TQVRJU0ZJRVNfV0hJVEVMSVNUSU5HX1NUT1JBR0UsIHtcbiAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgIGNhbXBhaWduS2V5OiBncm91cENhbXBhaWduLmtleSxcbiAgICAgICAgICBncm91cE5hbWU6IGdyb3VwTmFtZSxcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICB0eXBlOiAnd2hpdGVsaXN0aW5nJ1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RvcmVkVmFyaWF0aW9uID0gRGVjaXNpb25VdGlsLl9jaGVja0ZvclVzZXJTdG9yYWdlKGNvbmZpZywgc2V0dGluZ3NGaWxlLCBncm91cENhbXBhaWduLCBncm91cENhbXBhaWduLmtleSwgdXNlcklkLCB1c2VyU3RvcmFnZURhdGEsIGlzVHJhY2tVc2VyQVBJKTtcblxuICAgICAgaWYgKHN0b3JlZFZhcmlhdGlvbiAmJiBEYXRhVHlwZVV0aWwuaXNPYmplY3Qoc3RvcmVkVmFyaWF0aW9uKSAmJiBPYmplY3Qua2V5cyhzdG9yZWRWYXJpYXRpb24pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gb3RoZXIgY2FtcGFpZ24gc2FzdGlzZnkgdGhlIHVzZXIgc3RvcmFnZVxuICAgICAgICBvdGhlckNhbXBhaWduV2lubmVyID0gdHJ1ZTtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5PVEhFUl9DQU1QQUlHTl9TQVRJU0ZJRVNfV0hJVEVMSVNUSU5HX1NUT1JBR0UsIHtcbiAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgIGNhbXBhaWduS2V5OiBncm91cENhbXBhaWduLmtleSxcbiAgICAgICAgICBncm91cE5hbWU6IGdyb3VwTmFtZSxcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICB0eXBlOiAndXNlciBzdG9yYWdlJ1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBvdGhlckNhbXBhaWduV2lubmVyO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhIGNhbXBhaWduIGZvciBwcmUtc2VnbWVudGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY2FtcGFpZ25cbiAgICogQHBhcmFtIHtTdHJpbmd9IGNhbXBhaWduS2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAgICogQHBhcmFtIHtPYmplY3R9IGN1c3RvbVZhcmlhYmxlc1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGVjaXNpb25cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUsIGlmIHRoZSBwcmUtc2VnbWVudGF0aW9uIGlzIHNhdGlzZmllZC5cbiAgICovXG4gIF9jaGVja0ZvclByZVNlZ21lbnRhdGlvbjogZnVuY3Rpb24gX2NoZWNrRm9yUHJlU2VnbWVudGF0aW9uKGNhbXBhaWduLCBjYW1wYWlnbktleSwgdXNlcklkLCBjdXN0b21WYXJpYWJsZXMsIGRlY2lzaW9uKSB7XG4gICAgdmFyIHN0YXR1cztcblxuICAgIGlmIChEYXRhVHlwZVV0aWwuaXNPYmplY3QoY2FtcGFpZ24uc2VnbWVudHMpICYmICFPYmplY3Qua2V5cyhjYW1wYWlnbi5zZWdtZW50cykubGVuZ3RoKSB7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuU0VHTUVOVEFUSU9OX1NLSVBQRUQsIHtcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZmlsZTogZmlsZVxuICAgICAgfSksICFkZWNpc2lvbik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHByZVNlZ21lbnRhdGlvblJlc3VsdCA9IFNlZ21lbnRFdmFsdWF0b3IoY2FtcGFpZ24uc2VnbWVudHMsIGN1c3RvbVZhcmlhYmxlcywgY2FtcGFpZ25LZXksIHVzZXJJZCwgIWRlY2lzaW9uKTtcblxuICAgICAgaWYgKCFwcmVTZWdtZW50YXRpb25SZXN1bHQpIHtcbiAgICAgICAgc3RhdHVzID0gU3RhdHVzRW51bS5GQUlMRUQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSBTdGF0dXNFbnVtLlBBU1NFRDtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5TRUdNRU5UQVRJT05fU1RBVFVTLCB7XG4gICAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGN1c3RvbVZhcmlhYmxlczogSlNPTi5zdHJpbmdpZnkoY3VzdG9tVmFyaWFibGVzIHx8IHt9KSxcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgIHNlZ21lbnRhdGlvblR5cGU6IFNlZ21lbnRhdGlvblR5cGVFbnVtLlBSRV9TRUdNRU5UQVRJT04sXG4gICAgICAgIHZhcmlhdGlvbjogJydcbiAgICAgIH0pLCAhZGVjaXNpb24pO1xuXG4gICAgICBpZiAoc3RhdHVzID09PSBTdGF0dXNFbnVtLkZBSUxFRCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHVzZXIgaXMgZWxpZ2libGUgZm9yIHRoZSBjYW1hcGlnbiBiYXNlZCBvbiB0cmFmZmljIHBlcmNlbnRhZ2UgYW5kIGFzc2lnbiB2YXJpYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICogQHBhcmFtIHtPYmplY3R9IGNhbXBhaWduXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbktleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBtZXRhRGF0YVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3R29hbElkZW50aWZpZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlY2lzaW9uXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IHZhcmlhdGlvbiBhc3NpZ25lZCB0byB0aGUgdXNlclxuICAgKi9cbiAgZXZhbHVhdGVUcmFmZmljQW5kR2V0VmFyaWF0aW9uOiBmdW5jdGlvbiBldmFsdWF0ZVRyYWZmaWNBbmRHZXRWYXJpYXRpb24oY29uZmlnLCBjYW1wYWlnbiwgY2FtcGFpZ25LZXksIHVzZXJJZCwgbWV0YURhdGEsIG5ld0dvYWxJZGVudGlmaWVyLCBkZWNpc2lvbikge1xuICAgIHZhciB2YXJpYXRpb24sIHZhcmlhdGlvbk5hbWUsIHZhcmlhdGlvbklkOyAvLyBVc2Ugb3VyIGNvcmUncyBWYXJpYXRpb25EZWNpZGVyIHV0aWxpdHkgdG8gZ2V0IHRoZSBkZXRlcm1pbmlzdGljIHZhcmlhdGlvbiBhc3NpZ25lZCB0byB0aGUgdXNlcklkIGZvciB0aGF0IGNhbXBhaWduXG5cbiAgICB2YXIgX1ZhcmlhdGlvbkRlY2lkZXIkZ2V0ID0gVmFyaWF0aW9uRGVjaWRlci5nZXRWYXJpYXRpb25BbGxvdHRlZCh1c2VySWQsIGNhbXBhaWduKTtcblxuICAgIHZhcmlhdGlvbiA9IF9WYXJpYXRpb25EZWNpZGVyJGdldC52YXJpYXRpb247XG4gICAgdmFyaWF0aW9uTmFtZSA9IF9WYXJpYXRpb25EZWNpZGVyJGdldC52YXJpYXRpb25OYW1lO1xuICAgIHZhcmlhdGlvbklkID0gX1ZhcmlhdGlvbkRlY2lkZXIkZ2V0LnZhcmlhdGlvbklkO1xuICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuVVNFUl9WQVJJQVRJT05fQUxMT0NBVElPTl9TVEFUVVMsIHtcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIHN0YXR1czogdmFyaWF0aW9uTmFtZSA/IFwiZ290IHZhcmlhdGlvbjpcIi5jb25jYXQodmFyaWF0aW9uTmFtZSkgOiAnZGlkIG5vdCBnZXQgYW55IHZhcmlhdGlvbidcbiAgICB9KSk7IC8vIENoZWNrIGlmIHZhcmlhdGlvbi1uYW1lIGhhcyBiZWVuIGFzc2lnbmVkIHRvIHRoZSB1c2VySWQuIElmIG5vdCwgcmV0dXJuIG5vIHZhcmlhdGlvblxuXG4gICAgaWYgKHZhcmlhdGlvbk5hbWUpIHtcbiAgICAgIC8vIElmIHVzZXJTdG9yYWdlU2VydmljZSBpcyBwcm92aWRlZCwgbG9vayBpbnRvIGl0IGZvciB0aGUgc2F2ZWQgdmFyaWF0aW9uIGZvciB0aGUgY2FtcGFpZ24gYW5kIHVzZXJJZFxuICAgICAgRGVjaXNpb25VdGlsLl9zYXZlVXNlckRhdGEoY29uZmlnLCBjYW1wYWlnbiwgdmFyaWF0aW9uTmFtZSwgdXNlcklkLCBtZXRhRGF0YSwgbmV3R29hbElkZW50aWZpZXIpO1xuICAgIH0gLy8gRXhlY3V0aW5nIHRoZSBjYWxsYmFjayB3aGVuIFNESyBtYWtlcyB0aGUgZGVjaXNpb25cblxuXG4gICAgSG9va3NNYW5hZ2VyLmV4ZWN1dGUoT2JqZWN0LmFzc2lnbih7XG4gICAgICBmcm9tVXNlclN0b3JhZ2VTZXJ2aWNlOiBmYWxzZSxcbiAgICAgIGlzVXNlcldoaXRlbGlzdGVkOiBmYWxzZVxuICAgIH0sIGNhbXBhaWduLnR5cGUgPT09IENhbXBhaWduVHlwZUVudW0uRkVBVFVSRV9ST0xMT1VUID8ge1xuICAgICAgaXNGZWF0dXJlRW5hYmxlZDogISF2YXJpYXRpb25OYW1lXG4gICAgfSA6IHtcbiAgICAgIHZhcmlhdGlvbk5hbWU6IHZhcmlhdGlvbk5hbWUsXG4gICAgICB2YXJpYXRpb25JZDogdmFyaWF0aW9uSWRcbiAgICB9LCBkZWNpc2lvbikpO1xuICAgIHJldHVybiB7XG4gICAgICB2YXJpYXRpb246IHZhcmlhdGlvbiAmJiB2YXJpYXRpb24udmFyaWF0aW9uLFxuICAgICAgdmFyaWF0aW9uTmFtZTogdmFyaWF0aW9uTmFtZSxcbiAgICAgIHZhcmlhdGlvbklkOiB2YXJpYXRpb25JZFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIGEgY2FtcGFpZ24gZm9yIHdoaXRlbGlzdGluZ1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY2FtcGFpZ25cbiAgICogQHBhcmFtIHtTdHJpbmd9IGNhbXBhaWduS2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlc1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGVjaXNpb25cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gd2hpdGVsaXN0ZWQgdmFyaWF0aW9uXG4gICAqL1xuICBfY2hlY2tGb3JXaGl0ZWxpc3Rpbmc6IGZ1bmN0aW9uIF9jaGVja0ZvcldoaXRlbGlzdGluZyhjYW1wYWlnbiwgY2FtcGFpZ25LZXksIHVzZXJJZCwgdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLCBkZWNpc2lvbikge1xuICAgIHZhciBzdGF0dXM7XG4gICAgdmFyIHZhcmlhdGlvbk5hbWUsIHZhcmlhdGlvbklkO1xuXG4gICAgaWYgKGNhbXBhaWduLmlzRm9yY2VkVmFyaWF0aW9uRW5hYmxlZCkge1xuICAgICAgdmFyIHdoaXRlbGlzdGluZ1Jlc3VsdCA9IERlY2lzaW9uVXRpbC5fZXZhbHVhdGVXaGl0ZWxpc3RpbmcoY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcywgIWRlY2lzaW9uKTtcblxuICAgICAgdmFyIHZhcmlhdGlvblN0cmluZztcblxuICAgICAgaWYgKHdoaXRlbGlzdGluZ1Jlc3VsdCkge1xuICAgICAgICBzdGF0dXMgPSBTdGF0dXNFbnVtLlBBU1NFRDtcbiAgICAgICAgdmFyaWF0aW9uU3RyaW5nID0gd2hpdGVsaXN0aW5nUmVzdWx0LnZhcmlhdGlvbk5hbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSBTdGF0dXNFbnVtLkZBSUxFRDtcbiAgICAgICAgdmFyaWF0aW9uU3RyaW5nID0gJyc7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLklORk8sIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLklORk9fTUVTU0FHRVMuU0VHTUVOVEFUSU9OX1NUQVRVUywge1xuICAgICAgICBjYW1wYWlnbktleTogY2FtcGFpZ25LZXksXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBjdXN0b21WYXJpYWJsZXM6IEpTT04uc3RyaW5naWZ5KHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyksXG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICBzZWdtZW50YXRpb25UeXBlOiBTZWdtZW50YXRpb25UeXBlRW51bS5XSElURUxJU1RJTkcsXG4gICAgICAgIHZhcmlhdGlvbjogY2FtcGFpZ24udHlwZSA9PT0gQ2FtcGFpZ25UeXBlRW51bS5GRUFUVVJFX1JPTExPVVQgPyAnJyA6IFwiZm9yIHZhcmlhdGlvbjogXCIuY29uY2F0KHZhcmlhdGlvblN0cmluZylcbiAgICAgIH0pLCAhZGVjaXNpb24pO1xuXG4gICAgICBpZiAod2hpdGVsaXN0aW5nUmVzdWx0KSB7XG4gICAgICAgIHZhcmlhdGlvbk5hbWUgPSB3aGl0ZWxpc3RpbmdSZXN1bHQudmFyaWF0aW9uTmFtZTtcbiAgICAgICAgdmFyaWF0aW9uSWQgPSB3aGl0ZWxpc3RpbmdSZXN1bHQudmFyaWF0aW9uSWQ7IC8vIEV4ZWN1dGluZyB0aGUgY2FsbGJhY2sgd2hlbiBTREsgaGFzIG1hZGUgYSBkZWNpc2lvbiBpbiBjYXNlIG9mIHdoaXRlbGlzdGluZ1xuXG4gICAgICAgIGlmIChkZWNpc2lvbikge1xuICAgICAgICAgIEhvb2tzTWFuYWdlci5leGVjdXRlKE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgZnJvbVVzZXJTdG9yYWdlU2VydmljZTogZmFsc2UsXG4gICAgICAgICAgICBpc1VzZXJXaGl0ZWxpc3RlZDogISF2YXJpYXRpb25OYW1lXG4gICAgICAgICAgfSwgY2FtcGFpZ24udHlwZSA9PT0gQ2FtcGFpZ25UeXBlRW51bS5GRUFUVVJFX1JPTExPVVQgPyB7XG4gICAgICAgICAgICBpc0ZlYXR1cmVFbmFibGVkOiAhIXZhcmlhdGlvbk5hbWVcbiAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgdmFyaWF0aW9uTmFtZTogdmFyaWF0aW9uTmFtZSxcbiAgICAgICAgICAgIHZhcmlhdGlvbklkOiB2YXJpYXRpb25JZFxuICAgICAgICAgIH0sIGRlY2lzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gd2hpdGVsaXN0aW5nUmVzdWx0O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuV0hJVEVMSVNUSU5HX1NLSVBQRUQsIHtcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZmlsZTogZmlsZVxuICAgICAgfSksICFkZWNpc2lvbik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdmFyaWF0aW9uIGlzIHByZXNlbnQgaW4gdGhlIHVzZXIgc3RvcmFnZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc0ZpbGVcbiAgICogQHBhcmFtIHtPYmplY3R9IGNhbXBhaWduXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbktleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyU3RvcmFnZURhdGFcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc1RyYWNrVXNlckFQSVxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVjaXNpb25cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gc3RvcmVkIHZhcmlhaXRpb25cbiAgICovXG4gIF9jaGVja0ZvclVzZXJTdG9yYWdlOiBmdW5jdGlvbiBfY2hlY2tGb3JVc2VyU3RvcmFnZShjb25maWcsIHNldHRpbmdzRmlsZSwgY2FtcGFpZ24sIGNhbXBhaWduS2V5LCB1c2VySWQsIHVzZXJTdG9yYWdlRGF0YSwgaXNUcmFja1VzZXJBUEksIGRlY2lzaW9uKSB7XG4gICAgdmFyIHZhcmlhdGlvbk5hbWUsIHZhcmlhdGlvbklkO1xuICAgIHZhciBzdG9yZWRWYXJpYXRpb24sIGdvYWxJZGVudGlmaWVyOyAvLyBJZiB1c2VyU3RvcmFnZVNlcnZpY2UgaXMgdXNlZCwgZ2V0IHRoZSB2YXJpYXRpb24gZnJvbSB0aGUgc3RvcmVkIGRhdGFcblxuICAgIHZhciBfcmVmID0gRGVjaXNpb25VdGlsLl9nZXRTdG9yZWRWYXJpYXRpb25BbmRHb2FsSWRlbnRpZmllcnMoY29uZmlnLCBzZXR0aW5nc0ZpbGUsIGNhbXBhaWduLmtleSwgdXNlcklkLCB1c2VyU3RvcmFnZURhdGEsICFkZWNpc2lvbikgfHwge307XG5cbiAgICBzdG9yZWRWYXJpYXRpb24gPSBfcmVmLnN0b3JlZFZhcmlhdGlvbjtcbiAgICBnb2FsSWRlbnRpZmllciA9IF9yZWYuZ29hbElkZW50aWZpZXI7XG5cbiAgICAvLyBJZiBzdG9yZWQgdmFyaWF0aW9uIGlzIGZvdW5kLCBzaW1wbHkgcmV0dXJuIHRoZSBzYW1lXG4gICAgaWYgKHN0b3JlZFZhcmlhdGlvbikge1xuICAgICAgdmFyaWF0aW9uTmFtZSA9IHN0b3JlZFZhcmlhdGlvbi5uYW1lO1xuICAgICAgdmFyaWF0aW9uSWQgPSBzdG9yZWRWYXJpYXRpb24uaWQ7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkdPVF9TVE9SRURfVkFSSUFUSU9OLCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIGNhbXBhaWduS2V5OiBjYW1wYWlnbktleSxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIHZhcmlhdGlvbk5hbWU6IHN0b3JlZFZhcmlhdGlvbi5uYW1lXG4gICAgICB9KSwgIWRlY2lzaW9uKTsgLy8gRXhlY3V0aW5nIHRoZSBjYWxsYmFjayB3aGVuIFNESyBnZXRzIHRoZSBkZWNpc2lvbiBmcm9tIHVzZXIgc3RvcmFnZSBzZXJ2aWNlXG5cbiAgICAgIGlmIChkZWNpc2lvbikge1xuICAgICAgICBIb29rc01hbmFnZXIuZXhlY3V0ZShPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICBmcm9tVXNlclN0b3JhZ2VTZXJ2aWNlOiAhIXZhcmlhdGlvbk5hbWUsXG4gICAgICAgICAgaXNVc2VyV2hpdGVsaXN0ZWQ6IGZhbHNlXG4gICAgICAgIH0sIGNhbXBhaWduLnR5cGUgPT09IENhbXBhaWduVHlwZUVudW0uRkVBVFVSRV9ST0xMT1VUID8ge1xuICAgICAgICAgIGlzRmVhdHVyZUVuYWJsZWQ6ICEhdmFyaWF0aW9uTmFtZVxuICAgICAgICB9IDoge1xuICAgICAgICAgIHZhcmlhdGlvbk5hbWU6IHZhcmlhdGlvbk5hbWUsXG4gICAgICAgICAgdmFyaWF0aW9uSWQ6IHZhcmlhdGlvbklkXG4gICAgICAgIH0sIGRlY2lzaW9uKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhcmlhdGlvbjogc3RvcmVkVmFyaWF0aW9uLFxuICAgICAgICB2YXJpYXRpb25OYW1lOiBzdG9yZWRWYXJpYXRpb24ubmFtZSxcbiAgICAgICAgdmFyaWF0aW9uSWQ6IHN0b3JlZFZhcmlhdGlvbi5pZCxcbiAgICAgICAgc3RvcmVkR29hbElkZW50aWZpZXI6IGdvYWxJZGVudGlmaWVyLFxuICAgICAgICBpc1N0b3JlZFZhcmlhdGlvbjogdHJ1ZVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCFEYXRhVHlwZVV0aWwuaXNVbmRlZmluZWQoY29uZmlnLnVzZXJTdG9yYWdlU2VydmljZSkgJiYgIWlzVHJhY2tVc2VyQVBJICYmIERhdGFUeXBlVXRpbC5pc1VuZGVmaW5lZChzdG9yZWRWYXJpYXRpb24pKSB7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5XQVJOLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5XQVJOSU5HX01FU1NBR0VTLkNBTVBBSUdOX05PVF9BQ1RJVkFURUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgYXBpOiBjb25maWcuYXBpTmFtZVxuICAgICAgfSksICFkZWNpc2lvbik7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLkNBTVBBSUdOX05PVF9BQ1RJVkFURUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgY2FtcGFpZ25LZXk6IGNhbXBhaWduS2V5LFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgcmVhc29uOiBjb25maWcuYXBpTmFtZSA9PT0gQXBpRW51bS5UUkFDSyA/ICd0cmFjayBpdCcgOiAnZ2V0IHRoZSBkZWNpc2lvbi92YWx1ZSdcbiAgICAgIH0pLCAhZGVjaXNpb24pO1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRXZhbHVhdGUgdGhlIGxpc3Qgb2YgY2FtcGFpZ25zIGZvciBwcmUtc2VnbWVudGF0aW9uIGFuZCBjYW1wYWlnbiB0cmFmZmljIGFsbG9jYXRpb24gYW5kIGFzc2lnbiB2YXJpYXRpb24gdG8gdGhlIHVzZXIuXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYmUgdXNlZCBmb3IgTUVHIGNhbXBhaWduc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAqIEBwYXJhbSB7QXJyYXl9IGNhbXBhaWduTGlzdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjdXN0b21WYXJpYWJsZXNcbiAgICogQHBhcmFtIHtPYmplY3R9IG1ldGFEYXRhXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuZXdHb2FsSWRlbnRpZmllclxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IGxpc3Qgb2YgY2FtcGFpZ25zIHdoaWNoIHNhdGlzZmllcyB0aGUgY29uZGl0aW9ucy5cbiAgICovXG4gIGdldEVsaWdibGVDYW1wYWlnbnM6IGZ1bmN0aW9uIGdldEVsaWdibGVDYW1wYWlnbnMoY2FtcGFpZ25MaXN0LCB1c2VySWQsIGN1c3RvbVZhcmlhYmxlcykge1xuICAgIHZhciBlbGlnaWJsZUNhbXBhaWducyA9IFtdO1xuICAgIHZhciBpbkVsaWdpYmxlQ2FtcGFpZ25zID0gW107XG4gICAgY2FtcGFpZ25MaXN0LmZvckVhY2goZnVuY3Rpb24gKGdyb3VwQ2FtcGFpZ24pIHtcbiAgICAgIHZhciBpc1BhcnRPZkNhbXBhaWduID0gRGVjaXNpb25VdGlsLl9jaGVja0ZvclByZVNlZ21lbnRhdGlvbihncm91cENhbXBhaWduLCBncm91cENhbXBhaWduLmtleSwgdXNlcklkLCBjdXN0b21WYXJpYWJsZXMpICYmIEJ1Y2tldGluZ1NlcnZpY2UuaXNVc2VyUGFydE9mQ2FtcGFpZ24odXNlcklkLCBncm91cENhbXBhaWduLCB0cnVlKTtcblxuICAgICAgaWYgKGlzUGFydE9mQ2FtcGFpZ24pIHtcbiAgICAgICAgZ3JvdXBDYW1wYWlnbiA9IEZ1bmN0aW9uVXRpbC5jbG9uZU9iamVjdChncm91cENhbXBhaWduKTsgLy8gY2FtcGFpZ24gc2F0aXNmaWVzIHRoZSBwcmUtc2VnbWVudGF0aW9uXG5cbiAgICAgICAgZWxpZ2libGVDYW1wYWlnbnMucHVzaChncm91cENhbXBhaWduKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluRWxpZ2libGVDYW1wYWlnbnMucHVzaChncm91cENhbXBhaWduKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZWxpZ2libGVDYW1wYWlnbnM6IGVsaWdpYmxlQ2FtcGFpZ25zLFxuICAgICAgaW5FbGlnaWJsZUNhbXBhaWduczogaW5FbGlnaWJsZUNhbXBhaWduc1xuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVxdWFsbHkgZGlzdHJpYnV0ZSB0aGUgdHJhZmZpYyBvZiBjYW1wYWlnbnMgYW5kIGFzc2lnbiBhIHdpbm5lciBjYW1wYWlnbiBieSBtdXJtdXIgaGFzaC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gY2FsbGVkQ2FtcGFpZ25cbiAgICogQHBhcmFtIHtBcnJheX0gc2hvcnRsaXN0ZWRDYW1wYWlnbnNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZFxuICAgKiBAcGFyYW0ge09iamVjdH0gbWV0YURhdGFcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5ld0dvYWxJZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkZWNpc2lvblxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSB2YXJpYXRpb24gb2YgdGhlIHdpbm5lciBjYW1wYWlnblxuICAgKi9cbiAgX25vcm1hbGl6ZUFuZEZpbmRXaW5uaW5nQ2FtcGFpZ246IGZ1bmN0aW9uIF9ub3JtYWxpemVBbmRGaW5kV2lubmluZ0NhbXBhaWduKGNvbmZpZywgY2FsbGVkQ2FtcGFpZ24sIHNob3J0bGlzdGVkQ2FtcGFpZ25zLCB1c2VySWQsIGdyb3VwTmFtZSwgZ3JvdXBJZCwgbWV0YURhdGEsIG5ld0dvYWxJZGVudGlmaWVyLCBkZWNpc2lvbikge1xuICAgIC8vIG5vcm1hbGlzZSB0aGUgd2VpZ2h0cyBvZiBhbGwgdGhlIHNob3J0bGlzdGVkIGNhbXBhaWduc1xuICAgIHNob3J0bGlzdGVkQ2FtcGFpZ25zLmZvckVhY2goZnVuY3Rpb24gKGNhbXBhaWduKSB7XG4gICAgICBjYW1wYWlnbi53ZWlnaHQgPSBNYXRoLmZsb29yKDEwMCAvIHNob3J0bGlzdGVkQ2FtcGFpZ25zLmxlbmd0aCk7XG4gICAgfSk7IC8vIHJlLWRpc3RyaWJ1dGUgdGhlIHRyYWZmaWMgZm9yIGVhY2ggY2FtYXBpZ25cblxuICAgIENhbXBhaWduVXRpbC5zZXRDYW1wYWlnbkFsbG9jYXRpb24oc2hvcnRsaXN0ZWRDYW1wYWlnbnMpO1xuXG4gICAgdmFyIHdpbm5lckNhbXBhaWduID0gQnVja2V0aW5nU2VydmljZS5fZ2V0VmFyaWF0aW9uKHNob3J0bGlzdGVkQ2FtcGFpZ25zLCBCdWNrZXRpbmdTZXJ2aWNlLmNhbGN1bGF0ZUJ1Y2tldFZhbHVlKENhbXBhaWduVXRpbC5nZXRCdWNrZXRpbmdTZWVkKHVzZXJJZCwgdW5kZWZpbmVkLCBncm91cElkKSkpO1xuXG4gICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5NRUdfR09UX1dJTk5FUl9DQU1QQUlHTiwge1xuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICBncm91cE5hbWU6IGdyb3VwTmFtZSxcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICBjYW1wYWlnbktleTogd2lubmVyQ2FtcGFpZ24ua2V5XG4gICAgfSkpO1xuXG4gICAgaWYgKHdpbm5lckNhbXBhaWduLmlkID09PSBjYWxsZWRDYW1wYWlnbi5pZCkge1xuICAgICAgLy8gaWYgY2FsbGVkIGNhbXBhaWduIGlzIHRoZSB3aW5uZXIgY2FtcGFpZ24sIGdldCB0aGUgdmFyaWF0aW9uIGZvciB0aGUgY2FtcGFpZ25cbiAgICAgIHJldHVybiBEZWNpc2lvblV0aWwuZXZhbHVhdGVUcmFmZmljQW5kR2V0VmFyaWF0aW9uKGNvbmZpZywgd2lubmVyQ2FtcGFpZ24sIHdpbm5lckNhbXBhaWduLmtleSwgdXNlcklkLCBtZXRhRGF0YSwgbmV3R29hbElkZW50aWZpZXIsIGRlY2lzaW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgd2lubmluZyBjYW1wYWlnbiBub3QgdGhlIGNhbGxlZCBjYW1hcGFpZ24sIHJldHVyblxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5NRUdfQ0FMTEVEX0NBTVBBSUdOX05PVF9XSU5ORVIsIHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGdyb3VwTmFtZTogZ3JvdXBOYW1lLFxuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBjYW1wYWlnbktleTogY2FsbGVkQ2FtcGFpZ24ua2V5XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBEZWNpc2lvblV0aWw7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3V0aWxzL0V2ZW50RGlzcGF0Y2hlclV0aWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi91dGlscy9FdmVudERpc3BhdGNoZXJVdGlsLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBsb2dnaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBMb2dMZXZlbEVudW0gPSBsb2dnaW5nLkxvZ0xldmVsRW51bSxcbiAgICBMb2dNZXNzYWdlRW51bSA9IGxvZ2dpbmcuTG9nTWVzc2FnZUVudW0sXG4gICAgTG9nTWVzc2FnZVV0aWwgPSBsb2dnaW5nLkxvZ01lc3NhZ2VVdGlsO1xudmFyIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCk7XG5cbnZhciBGdW5jdGlvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0Z1bmN0aW9uVXRpbCAqLyBcIi4vbGliL3V0aWxzL0Z1bmN0aW9uVXRpbC5qc1wiKTtcblxudmFyIEV2ZW50RW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0V2ZW50RW51bSAqLyBcIi4vbGliL2VudW1zL0V2ZW50RW51bS5qc1wiKTtcblxudmFyIGV4Y2x1ZGVkUHJvcGVydGllcyA9IFsndXJsJ107XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5FdmVudERpc3BhdGNoZXJVdGlsO1xudmFyIEV2ZW50RGlzcGF0Y2hlciA9IHtcbiAgZGlzcGF0Y2hHZXRDYWxsOiBmdW5jdGlvbiBkaXNwYXRjaEdldENhbGwocHJvcGVydGllcywgX3JlZikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgcmVzcG9uc2VDYWxsYmFjayA9IF9yZWYucmVzcG9uc2VDYWxsYmFjaztcbiAgICB2YXIgcGFyc2VkVXJsO1xuICAgIHZhciBxdWVyeVBhcmFtcyA9ICc/JztcbiAgICBxdWVyeVBhcmFtcyArPSBGdW5jdGlvblV0aWwuY29udmVydE9iamVjdEtleXNUb1N0cmluZyhwcm9wZXJ0aWVzLCBleGNsdWRlZFByb3BlcnRpZXMpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlcXVpcmUgZmlsZXMgb25seSBpZiByZXF1aXJlZCBpbiByZXNwZWN0aXZlIEVuZ2luZSBpLmUuIE5vZGUgLyBCcm93c2VyXG4gICAgICBpZiAodHJ1ZSkge1xuICAgICAgICBwYXJzZWRVcmwgPSBuZXcgVVJMKHByb3BlcnRpZXMudXJsKTtcblxuICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0h0dHBJbWFnZVV0aWwgKi8gXCIuL2xpYi91dGlscy9IdHRwSW1hZ2VVdGlsLmpzXCIpLnNlbmRDYWxsKHBhcnNlZFVybCwgcXVlcnlQYXJhbXMsIHtcbiAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2s6IHJlc3BvbnNlQ2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgeyB2YXIgdXJsOyB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB2YXIgZW5kUG9pbnQgPSBwcm9wZXJ0aWVzLnVybDtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5JTVBSRVNTSU9OX0ZBSUxFRCwge1xuICAgICAgICBmaWxlOiBGaWxlTmFtZUVudW0uRXZlbnREaXNwYXRjaGVyLFxuICAgICAgICBlbmRQb2ludDogZW5kUG9pbnQsXG4gICAgICAgIGVycjogZXJyXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBoYW5kbGVHZXRSZXNwb25zZTogZnVuY3Rpb24gaGFuZGxlR2V0UmVzcG9uc2UocHJvcGVydGllcywgZXJyb3IsIHJlc3BvbnNlKSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuSU1QUkVTU0lPTl9GQUlMRUQsIHtcbiAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgZW5kUG9pbnQ6IHJlc3BvbnNlLmVuZFBvaW50LFxuICAgICAgICBlcnI6IGVycm9yXG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBiYXNlUGFyYW1zID0ge1xuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBlbmRQb2ludDogcmVzcG9uc2UuZW5kUG9pbnQsXG4gICAgICAgIGFjY291bnRJZDogcHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmFjY291bnRfaWRcbiAgICAgIH07XG4gICAgICB2YXIgcGFyYW1zID0ge307XG5cbiAgICAgIGlmIChiYXNlUGFyYW1zLmVuZFBvaW50LmluY2x1ZGVzKCdwdXNoJykpIHtcbiAgICAgICAgdmFyIGN1c3RvbVZhcmlhYmxlcyA9IEpTT04ucGFyc2UocHJvcGVydGllcy50YWdzKS51O1xuICAgICAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBiYXNlUGFyYW1zLCB7XG4gICAgICAgICAgY3VzdG9tVmFyaWFibGVzOiBjdXN0b21WYXJpYWJsZXNcbiAgICAgICAgfSk7XG4gICAgICAgIHBhcmFtcy5tYWluS2V5cyA9IFwiY3VzdG9tRGltZW5zaW9uOlwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShwYXJhbXMuY3VzdG9tVmFyaWFibGVzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBiYXNlUGFyYW1zLCB7XG4gICAgICAgICAgY2FtcGFpZ25JZDogcHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmV4cGVyaW1lbnRfaWQsXG4gICAgICAgICAgdmFyaWF0aW9uSWQ6IHByb3BlcnRpZXMgJiYgcHJvcGVydGllcy5jb21iaW5hdGlvblxuICAgICAgICB9KTtcbiAgICAgICAgcGFyYW1zLm1haW5LZXlzID0gXCJjYW1wYWlnbklkOlwiLmNvbmNhdChwYXJhbXMuY2FtcGFpZ25JZCwgXCIgYW5kIHZhcmlhdGlvbklkOlwiKS5jb25jYXQocGFyYW1zLnZhcmlhdGlvbklkKTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uSU5GTywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uSU5GT19NRVNTQUdFUy5JTVBSRVNTSU9OX1NVQ0NFU1MsIHBhcmFtcykpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LFxuICBkaXNwYXRjaFBvc3RDYWxsOiBmdW5jdGlvbiBkaXNwYXRjaFBvc3RDYWxsKHByb3BlcnRpZXMsIHBheWxvYWQsIF9yZWYyKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgcmVzcG9uc2VDYWxsYmFjayA9IF9yZWYyLnJlc3BvbnNlQ2FsbGJhY2s7XG4gICAgdmFyIHBhcnNlZFVybDtcbiAgICB2YXIgcXVlcnlQYXJhbXMgPSAnPyc7XG4gICAgcXVlcnlQYXJhbXMgKz0gRnVuY3Rpb25VdGlsLmNvbnZlcnRPYmplY3RLZXlzVG9TdHJpbmcocHJvcGVydGllcywgZXhjbHVkZWRQcm9wZXJ0aWVzKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBSZXF1aXJlIGZpbGVzIG9ubHkgaWYgcmVxdWlyZWQgaW4gcmVzcGVjdGl2ZSBFbmdpbmUgaS5lLiBOb2RlIC8gQnJvd3NlclxuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9YaHJVdGlsICovIFwiLi9saWIvdXRpbHMvWGhyVXRpbC5qc1wiKS5zZW5kKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6IFwiXCIuY29uY2F0KHByb3BlcnRpZXMudXJsKS5jb25jYXQocXVlcnlQYXJhbXMpLFxuICAgICAgICAgIHBheWxvYWQ6IHBheWxvYWRcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyLmhhbmRsZVBvc3RSZXNwb25zZShwcm9wZXJ0aWVzLCBwYXlsb2FkKTtcblxuICAgICAgICAgIGlmIChyZXNwb25zZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXNwb25zZUNhbGxiYWNrKG51bGwsIHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICBfdGhpczIuaGFuZGxlUG9zdFJlc3BvbnNlKHByb3BlcnRpZXMsIHBheWxvYWQsIGVycm9yKTtcblxuICAgICAgICAgIHJlc3BvbnNlQ2FsbGJhY2soZXJyb3IsIHtcbiAgICAgICAgICAgIHN0YXR1czogJ2ZhaWx1cmUnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHsgdmFyIHVybDsgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdmFyIGVuZFBvaW50ID0gcHJvcGVydGllcy51cmw7XG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuSU1QUkVTU0lPTl9GQUlMRUQsIHtcbiAgICAgICAgZmlsZTogRmlsZU5hbWVFbnVtLkV2ZW50RGlzcGF0Y2hlclV0aWwsXG4gICAgICAgIGVuZFBvaW50OiBlbmRQb2ludCxcbiAgICAgICAgZXJyOiBlcnJcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIGhhbmRsZVBvc3RSZXNwb25zZTogZnVuY3Rpb24gaGFuZGxlUG9zdFJlc3BvbnNlKHByb3BlcnRpZXMsIHBheWxvYWQsIGVycm9yKSB7XG4gICAgdmFyIGVuZFBvaW50ID0gcHJvcGVydGllcy51cmw7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5JTVBSRVNTSU9OX0ZBSUxFRCwge1xuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBlbmRQb2ludDogZW5kUG9pbnQsXG4gICAgICAgIGVycjogZXJyb3JcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGV2ZW50ID0gXCJcIi5jb25jYXQocHJvcGVydGllcy5lbiwgXCIgZXZlbnRcIik7XG5cbiAgICAgIGlmIChwcm9wZXJ0aWVzLmVuID09PSBFdmVudEVudW0uVldPX1NZTkNfVklTSVRPUl9QUk9QKSB7XG4gICAgICAgIGRlbGV0ZSBwYXlsb2FkLmQudmlzaXRvci5wcm9wcy52d29fZnNfZW52aXJvbm1lbnQ7XG4gICAgICAgIGV2ZW50ID0gXCJ2aXNpdG9yIHByb3BlcnR5OlwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShwYXlsb2FkLmQudmlzaXRvci5wcm9wcykpO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLklNUFJFU1NJT05fU1VDQ0VTU19GT1JfRVZFTlRfQVJDSCwge1xuICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICBlbmRQb2ludDogZW5kUG9pbnQsXG4gICAgICAgIGFjY291bnRJZDogcHJvcGVydGllcy5hLFxuICAgICAgICBldmVudDogZXZlbnRcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gRXZlbnREaXNwYXRjaGVyO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9GZWF0dXJlVXRpbC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi91dGlscy9GZWF0dXJlVXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIENhbXBhaWduVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vQ2FtcGFpZ25VdGlsICovIFwiLi9saWIvdXRpbHMvQ2FtcGFpZ25VdGlsLmpzXCIpO1xuXG52YXIgRGF0YVR5cGVVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9EYXRhVHlwZVV0aWwgKi8gXCIuL2xpYi91dGlscy9EYXRhVHlwZVV0aWwuanNcIik7XG5cbnZhciBGZWF0dXJlVmFyaWFibGVUeXBlRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0ZlYXR1cmVWYXJpYWJsZVR5cGVFbnVtICovIFwiLi9saWIvZW51bXMvRmVhdHVyZVZhcmlhYmxlVHlwZUVudW0uanNcIik7XG5cbnZhciBsb2dnaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvbG9nZ2luZyAqLyBcIi4vbGliL3NlcnZpY2VzL2xvZ2dpbmcvaW5kZXguanNcIik7XG5cbnZhciBGaWxlTmFtZUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9GaWxlTmFtZUVudW0gKi8gXCIuL2xpYi9lbnVtcy9GaWxlTmFtZUVudW0uanNcIik7XG5cbnZhciBMb2dMZXZlbEVudW0gPSBsb2dnaW5nLkxvZ0xldmVsRW51bSxcbiAgICBMb2dNZXNzYWdlRW51bSA9IGxvZ2dpbmcuTG9nTWVzc2FnZUVudW0sXG4gICAgTG9nTWVzc2FnZVV0aWwgPSBsb2dnaW5nLkxvZ01lc3NhZ2VVdGlsO1xudmFyIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCk7XG52YXIgZmlsZSA9IEZpbGVOYW1lRW51bS5GZWF0dXJlVXRpbDtcbnZhciBGZWF0dXJlVXRpbCA9IHtcbiAgZ2V0VmFyaWFibGVGb3JGZWF0dXJlOiBmdW5jdGlvbiBnZXRWYXJpYWJsZUZvckZlYXR1cmUoY2FtcGFpZ24sIHZhcmlhYmxlS2V5KSB7XG4gICAgdmFyIHZhcmlhYmxlRGF0YSA9IHt9O1xuXG4gICAgaWYgKENhbXBhaWduVXRpbC5pc0ZlYXR1cmVSb2xsb3V0Q2FtcGFpZ24oY2FtcGFpZ24pKSB7XG4gICAgICB2YXIgdmFyaWFibGVzID0gY2FtcGFpZ24udmFyaWFibGVzIHx8IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcmlhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodmFyaWFibGVzW2ldLmtleSA9PT0gdmFyaWFibGVLZXkpIHtcbiAgICAgICAgICB2YXJpYWJsZURhdGEgPSB2YXJpYWJsZXNbaV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhcmlhYmxlRGF0YTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFyaWFibGVEYXRhO1xuICB9LFxuICBnZXRWYXJpYWJsZVZhbHVlRm9yVmFyaWF0aW9uOiBmdW5jdGlvbiBnZXRWYXJpYWJsZVZhbHVlRm9yVmFyaWF0aW9uKGNhbXBhaWduLCB2YXJpYXRpb24sIHZhcmlhYmxlS2V5KSB7XG4gICAgdmFyIHZhcmlhdGlvblZhcmlhYmxlID0ge307XG5cbiAgICBpZiAoQ2FtcGFpZ25VdGlsLmlzRmVhdHVyZVRlc3RDYW1wYWlnbihjYW1wYWlnbikpIHtcbiAgICAgIGlmICghdmFyaWF0aW9uIHx8ICF2YXJpYXRpb24gfHwgIXZhcmlhdGlvbi52YXJpYWJsZXMpIHtcbiAgICAgICAgcmV0dXJuIHZhcmlhdGlvblZhcmlhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXZhcmlhdGlvbi5pc0ZlYXR1cmVFbmFibGVkKSB7XG4gICAgICAgIHZhcmlhdGlvbiA9IENhbXBhaWduVXRpbC5nZXRDb250cm9sRm9yQ2FtcGFpZ24oY2FtcGFpZ24pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcmlhdGlvbi52YXJpYWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHZhcmlhYmxlID0gdmFyaWF0aW9uLnZhcmlhYmxlc1tpXTtcblxuICAgICAgICBpZiAodmFyaWFibGVLZXkgPT09IHZhcmlhYmxlLmtleSkge1xuICAgICAgICAgIHZhcmlhdGlvblZhcmlhYmxlID0gdmFyaWFibGU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFyaWF0aW9uVmFyaWFibGU7XG4gIH0sXG4gIGdldFR5cGVDYXN0VmFyaWFibGVWYWx1ZTogZnVuY3Rpb24gZ2V0VHlwZUNhc3RWYXJpYWJsZVZhbHVlKHZhcmlhYmxlVmFsdWUsIHZhcmlhYmxlVHlwZSkge1xuICAgIHZhciB0eXBlQ2FzdGVkVmFsdWU7XG5cbiAgICBzd2l0Y2ggKHZhcmlhYmxlVHlwZSkge1xuICAgICAgY2FzZSBGZWF0dXJlVmFyaWFibGVUeXBlRW51bS5JTlRFR0VSOlxuICAgICAgICB0eXBlQ2FzdGVkVmFsdWUgPSBwYXJzZUludCh2YXJpYWJsZVZhbHVlLCAxMCk7XG5cbiAgICAgICAgaWYgKCFEYXRhVHlwZVV0aWwuaXNOdW1iZXIodHlwZUNhc3RlZFZhbHVlKSB8fCBpc05hTih0eXBlQ2FzdGVkVmFsdWUpKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLlVOQUJMRV9UT19DQVNUX1ZBTFVFLCB7XG4gICAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgICAgdmFyaWFibGVWYWx1ZTogdmFyaWFibGVWYWx1ZSxcbiAgICAgICAgICAgIHZhcmlhYmxlVHlwZTogdmFyaWFibGVUeXBlXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHR5cGVDYXN0ZWRWYWx1ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBGZWF0dXJlVmFyaWFibGVUeXBlRW51bS5ET1VCTEU6XG4gICAgICAgIHR5cGVDYXN0ZWRWYWx1ZSA9IHBhcnNlRmxvYXQodmFyaWFibGVWYWx1ZSk7XG5cbiAgICAgICAgaWYgKCFEYXRhVHlwZVV0aWwuaXNOdW1iZXIodHlwZUNhc3RlZFZhbHVlKSB8fCBpc05hTih0eXBlQ2FzdGVkVmFsdWUpKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uRVJST1IsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkVSUk9SX01FU1NBR0VTLlVOQUJMRV9UT19DQVNUX1ZBTFVFLCB7XG4gICAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgICAgdmFyaWFibGVWYWx1ZTogdmFyaWFibGVWYWx1ZSxcbiAgICAgICAgICAgIHZhcmlhYmxlVHlwZTogdmFyaWFibGVUeXBlXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHR5cGVDYXN0ZWRWYWx1ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBGZWF0dXJlVmFyaWFibGVUeXBlRW51bS5CT09MRUFOOlxuICAgICAgICBpZiAoIURhdGFUeXBlVXRpbC5pc0Jvb2xlYW4odmFyaWFibGVWYWx1ZSkpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuVU5BQkxFX1RPX0NBU1RfVkFMVUUsIHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlOiB2YXJpYWJsZVZhbHVlLFxuICAgICAgICAgICAgdmFyaWFibGVUeXBlOiB2YXJpYWJsZVR5cGVcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgdHlwZUNhc3RlZFZhbHVlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0eXBlQ2FzdGVkVmFsdWUgPSB2YXJpYWJsZVZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRmVhdHVyZVZhcmlhYmxlVHlwZUVudW0uSlNPTjpcbiAgICAgICAgaWYgKCFEYXRhVHlwZVV0aWwuaXNPYmplY3QodmFyaWFibGVWYWx1ZSkpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5FUlJPUiwgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uRVJST1JfTUVTU0FHRVMuVU5BQkxFX1RPX0NBU1RfVkFMVUUsIHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlOiB2YXJpYWJsZVZhbHVlLFxuICAgICAgICAgICAgdmFyaWFibGVUeXBlOiB2YXJpYWJsZVR5cGVcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgdHlwZUNhc3RlZFZhbHVlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0eXBlQ2FzdGVkVmFsdWUgPSB2YXJpYWJsZVZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHR5cGVDYXN0ZWRWYWx1ZSA9IHZhcmlhYmxlVmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlQ2FzdGVkVmFsdWU7XG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IEZlYXR1cmVVdGlsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9GdW5jdGlvblV0aWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL3V0aWxzL0Z1bmN0aW9uVXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBGdW5jdGlvblV0aWwgPSB7XG4gIGNsb25lT2JqZWN0OiBmdW5jdGlvbiBjbG9uZU9iamVjdChvYmopIHtcbiAgICBpZiAoIW9iaikge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICB2YXIgY2xvbmVkT2JqID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgICByZXR1cm4gY2xvbmVkT2JqO1xuICB9LFxuICBnZXRSYW5kb21OdW1iZXI6IGZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcigpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKTtcbiAgfSxcbiAgZ2V0Q3VycmVudFVuaXhUaW1lc3RhbXA6IGZ1bmN0aW9uIGdldEN1cnJlbnRVbml4VGltZXN0YW1wKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwoK25ldyBEYXRlKCkgLyAxMDAwKTtcbiAgfSxcbiAgZ2V0Q3VycmVudFVuaXhUaW1lc3RhbXBJbk1pbGxpczogZnVuY3Rpb24gZ2V0Q3VycmVudFVuaXhUaW1lc3RhbXBJbk1pbGxpcygpIHtcbiAgICByZXR1cm4gK25ldyBEYXRlKCk7XG4gIH0sXG4gIG1hdGNoV2l0aFJlZ2V4OiBmdW5jdGlvbiBtYXRjaFdpdGhSZWdleChzdHJpbmcsIHJlZ2V4KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBzdHJpbmcubWF0Y2gobmV3IFJlZ0V4cChyZWdleCkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9sb2dnaW5nICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiKTtcblxuICAgICAgdmFyIEZpbGVOYW1lRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0ZpbGVOYW1lRW51bSAqLyBcIi4vbGliL2VudW1zL0ZpbGVOYW1lRW51bS5qc1wiKTtcblxuICAgICAgdmFyIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCk7XG4gICAgICB2YXIgTG9nTGV2ZWxFbnVtID0gbG9nZ2luZy5Mb2dMZXZlbEVudW0sXG4gICAgICAgICAgTG9nTWVzc2FnZUVudW0gPSBsb2dnaW5nLkxvZ01lc3NhZ2VFbnVtLFxuICAgICAgICAgIExvZ01lc3NhZ2VVdGlsID0gbG9nZ2luZy5Mb2dNZXNzYWdlVXRpbDtcbiAgICAgIHZhciBmaWxlID0gRmlsZU5hbWVFbnVtLkZ1bmN0aW9uVXRpbDtcbiAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkVSUk9SLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5FUlJPUl9NRVNTQUdFUy5TRUdNRU5UQVRJT05fUkVHRVhfQ1JFQVRJT05fRkFJTEVELCB7XG4gICAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAgIHJlZ2V4OiByZWdleFxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LFxuICBnZXRDdXJyZW50VGltZTogZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWUoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgfSxcbiAgY29udmVydE9iamVjdEtleXNUb1N0cmluZzogZnVuY3Rpb24gY29udmVydE9iamVjdEtleXNUb1N0cmluZyhwcm9wZXJ0aWVzLCBleGNsdWRlZFByb3BlcnRpZXMpIHtcbiAgICB2YXIgcXVlcnlQYXJhbXMgPSAnJztcbiAgICBleGNsdWRlZFByb3BlcnRpZXMgPSBleGNsdWRlZFByb3BlcnRpZXMgfHwgW107XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIGlmIChleGNsdWRlZFByb3BlcnRpZXMuaW5kZXhPZihwcm9wKSA9PT0gLTEpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtcyArPSBwcm9wICsgJz0nICsgcHJvcGVydGllc1twcm9wXSArICcmJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgfSxcbiAgb2JqZWN0VmFsdWVzOiBmdW5jdGlvbiBvYmplY3RWYWx1ZXMob2JqKSB7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcbiAgICAgIHZhbHVlcy5wdXNoKG9ialtwcm9wXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gRnVuY3Rpb25VdGlsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9IdHRwSW1hZ2VVdGlsLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvdXRpbHMvSHR0cEltYWdlVXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgbG9nZ2luZyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL2xvZ2dpbmcgKi8gXCIuL2xpYi9zZXJ2aWNlcy9sb2dnaW5nL2luZGV4LmpzXCIpO1xuXG52YXIgRmlsZU5hbWVFbnVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZW51bXMvRmlsZU5hbWVFbnVtICovIFwiLi9saWIvZW51bXMvRmlsZU5hbWVFbnVtLmpzXCIpO1xuXG52YXIgTG9nTGV2ZWxFbnVtID0gbG9nZ2luZy5Mb2dMZXZlbEVudW0sXG4gICAgTG9nTWVzc2FnZUVudW0gPSBsb2dnaW5nLkxvZ01lc3NhZ2VFbnVtLFxuICAgIExvZ01lc3NhZ2VVdGlsID0gbG9nZ2luZy5Mb2dNZXNzYWdlVXRpbDtcbnZhciBsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcigpO1xudmFyIGZpbGUgPSBGaWxlTmFtZUVudW0uSHR0cEltYWdlVXRpbDtcblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbnZhciBwcmludExvZyA9IGZ1bmN0aW9uIHByaW50TG9nKHVybCwgcXVlcnlQYXJhbXMpIHtcbiAgdmFyIHByb3BlcnRpZXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5UGFyYW1zKTtcbiAgdmFyIGJhc2VQYXJhbXMgPSB7XG4gICAgZmlsZTogZmlsZSxcbiAgICBlbmRQb2ludDogXCJodHRwczovL1wiLmNvbmNhdCh1cmwuaG9zdCkuY29uY2F0KHVybC5wYXRobmFtZSksXG4gICAgYWNjb3VudElkOiBwcm9wZXJ0aWVzICYmIHByb3BlcnRpZXMuZ2V0KCdhY2NvdW50X2lkJylcbiAgfTtcbiAgdmFyIHBhcmFtcyA9IHt9O1xuXG4gIGlmIChiYXNlUGFyYW1zLmVuZFBvaW50LmluY2x1ZGVzKCdwdXNoJykpIHtcbiAgICB2YXIgY3VzdG9tVmFyaWFibGVzID0gSlNPTi5wYXJzZShwcm9wZXJ0aWVzLmdldCgndGFncycpKS51O1xuICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGJhc2VQYXJhbXMsIHtcbiAgICAgIGN1c3RvbVZhcmlhYmxlczogY3VzdG9tVmFyaWFibGVzXG4gICAgfSk7XG4gICAgcGFyYW1zLm1haW5LZXlzID0gXCJjdXN0b21EaW1lbnNpb246XCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHBhcmFtcy5jdXN0b21WYXJpYWJsZXMpKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBiYXNlUGFyYW1zLCB7XG4gICAgICBjYW1wYWlnbklkOiBwcm9wZXJ0aWVzICYmIHByb3BlcnRpZXMuZ2V0KCdleHBlcmltZW50X2lkJyksXG4gICAgICB2YXJpYXRpb25JZDogcHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmdldCgnY29tYmluYXRpb24nKVxuICAgIH0pO1xuICAgIHBhcmFtcy5tYWluS2V5cyA9IFwiY2FtcGFpZ25JZDpcIi5jb25jYXQocGFyYW1zLmNhbXBhaWduSWQsIFwiIGFuZCB2YXJpYXRpb25JZDpcIikuY29uY2F0KHBhcmFtcy52YXJpYXRpb25JZCk7XG4gIH1cblxuICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5JTkZPLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5JTkZPX01FU1NBR0VTLklNUFJFU1NJT05fU1VDQ0VTUywgcGFyYW1zKSk7XG59O1xuXG52YXIgSHR0cEltYWdlVXRpbCA9IHtcbiAgc2VuZENhbGw6IGZ1bmN0aW9uIHNlbmRDYWxsKHVybCwgcXVlcnlQYXJhbXMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgdmFyIGVuZFBvaW50ID0gXCJodHRwczovL1wiLmNvbmNhdCh1cmwuaG9zdCkuY29uY2F0KHVybC5wYXRobmFtZSkuY29uY2F0KHF1ZXJ5UGFyYW1zKTtcbiAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gb3B0aW9ucy5zdWNjZXNzQ2FsbGJhY2ssXG4gICAgICAgIGVycm9yQ2FsbGJhY2sgPSBvcHRpb25zLmVycm9yQ2FsbGJhY2s7XG4gICAgZXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbGJhY2sgfHwgc3VjY2Vzc0NhbGxiYWNrO1xuICAgIHZhciBpc0NhbGxiYWNrQ2FsbGVkID0gZmFsc2U7XG4gICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuaGFuZGxlR2V0Q2FsbCh1cmwsIHF1ZXJ5UGFyYW1zLCBpbWcsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgZW5kUG9pbnQsIGlzQ2FsbGJhY2tDYWxsZWQpO1xuICB9LFxuICBoYW5kbGVHZXRDYWxsOiBmdW5jdGlvbiBoYW5kbGVHZXRDYWxsKHVybCwgcXVlcnlQYXJhbXMsIGltZywgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBlbmRQb2ludCwgaXNDYWxsYmFja0NhbGxlZCkge1xuICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHN1Y2Nlc3NDYWxsYmFjayB8fCBub29wO1xuICAgIGVycm9yQ2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrIHx8IG5vb3A7XG5cbiAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQ2FsbGJhY2tDYWxsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpc0NhbGxiYWNrQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHN1Y2Nlc3NDYWxsYmFjayhudWxsLCB7XG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnXG4gICAgICB9KTtcbiAgICAgIHByaW50TG9nKHVybCwgcXVlcnlQYXJhbXMpO1xuICAgIH07XG5cbiAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpc0NhbGxiYWNrQ2FsbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaXNDYWxsYmFja0NhbGxlZCA9IHRydWU7XG4gICAgICBlcnJvckNhbGxiYWNrKG51bGwsIHtcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcydcbiAgICAgIH0pO1xuICAgICAgcHJpbnRMb2codXJsLCBxdWVyeVBhcmFtcyk7XG4gICAgfTtcblxuICAgIGltZy5zcmMgPSBlbmRQb2ludDtcbiAgICByZXR1cm4gaW1nO1xuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBIdHRwSW1hZ2VVdGlsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9JbXByZXNzaW9uVXRpbC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi91dGlscy9JbXByZXNzaW9uVXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIENvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvbnN0YW50cyAqLyBcIi4vbGliL2NvbnN0YW50cy9pbmRleC5qc1wiKTtcblxudmFyIFVybEVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9VcmxFbnVtICovIFwiLi9saWIvZW51bXMvVXJsRW51bS5qc1wiKTtcblxudmFyIEdvYWxUeXBlRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0dvYWxUeXBlRW51bSAqLyBcIi4vbGliL2VudW1zL0dvYWxUeXBlRW51bS5qc1wiKTtcblxudmFyIFV1aWRVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9VdWlkVXRpbCAqLyBcIi4vbGliL3V0aWxzL1V1aWRVdGlsLmpzXCIpO1xuXG52YXIgVmFsaWRhdGVVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9WYWxpZGF0ZVV0aWwgKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIik7XG5cbnZhciBGdW5jdGlvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0Z1bmN0aW9uVXRpbCAqLyBcIi4vbGliL3V0aWxzL0Z1bmN0aW9uVXRpbC5qc1wiKTtcblxudmFyIGxvZ2dpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9sb2dnaW5nICovIFwiLi9saWIvc2VydmljZXMvbG9nZ2luZy9pbmRleC5qc1wiKTtcblxudmFyIEZpbGVOYW1lRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0ZpbGVOYW1lRW51bSAqLyBcIi4vbGliL2VudW1zL0ZpbGVOYW1lRW51bS5qc1wiKTtcblxudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRGF0YVR5cGVVdGlsICovIFwiLi9saWIvdXRpbHMvRGF0YVR5cGVVdGlsLmpzXCIpO1xuXG52YXIgTG9nTGV2ZWxFbnVtID0gbG9nZ2luZy5Mb2dMZXZlbEVudW0sXG4gICAgTG9nTWVzc2FnZUVudW0gPSBsb2dnaW5nLkxvZ01lc3NhZ2VFbnVtLFxuICAgIExvZ01lc3NhZ2VVdGlsID0gbG9nZ2luZy5Mb2dNZXNzYWdlVXRpbDtcbnZhciBsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcigpO1xuXG52YXIgVXJsU2VydmljZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL1VybFNlcnZpY2UgKi8gXCIuL2xpYi9zZXJ2aWNlcy9VcmxTZXJ2aWNlLmpzXCIpO1xuLyoqXG4gKiBSZXR1cm4gcHJpbWFyeSBwcm9wZXJ0aWVzIHJlcXVpcmVkIGZvciBldmVyeSBuZXR3b3JrIGNhbGwgdG8gVldPIHNlcnZlclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ09ialxuICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZFxuICpcbiAqIEByZXR1cm5zIHByaW1hcnkgcHJvcGVydGllc1xuICovXG5cblxuZnVuY3Rpb24gZ2V0UHJpbWFyeVByb3BlcnRpZXMoY29uZmlnT2JqLCB1c2VySWQpIHtcbiAgcmV0dXJuIHtcbiAgICBzSWQ6IEZ1bmN0aW9uVXRpbC5nZXRDdXJyZW50VW5peFRpbWVzdGFtcCgpLFxuICAgIHU6IFV1aWRVdGlsLmdlbmVyYXRlRm9yKHVzZXJJZCwgY29uZmlnT2JqLmFjY291bnRJZClcbiAgfTtcbn1cbi8qKlxuICogUmV0dXJuIGJhc2UgcHJvcGVydGllcyByZXF1aXJlZCBmb3IgZXZlcnkgbmV0d29yayBjYWxsIHRvIFZXTyBzZXJ2ZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdPYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAqXG4gKiBAcmV0dXJucyBiYXNlIHByb3BlcnRpZXNcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldEJhc2VQcm9wZXJ0aWVzKGNvbmZpZ09iaiwgdXNlcklkKSB7XG4gIHZhciBhY2NvdW50SWQgPSBjb25maWdPYmouYWNjb3VudElkO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgZ2V0UHJpbWFyeVByb3BlcnRpZXMoY29uZmlnT2JqLCB1c2VySWQpLCBJbXByZXNzaW9uVXRpbC5nZXRSZXBvcnRpbmdQcm9wZXJ0aWVzKGNvbmZpZ09iaiksIHtcbiAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgcmFuZG9tOiBGdW5jdGlvblV0aWwuZ2V0UmFuZG9tTnVtYmVyKCksXG4gICAgYXA6IENvbnN0YW50cy5QTEFURk9STVxuICB9KTtcbn1cblxudmFyIEltcHJlc3Npb25VdGlsID0ge1xuICAvKipcbiAgICogQnVpbGQgcHJvcGVydGllcyBmb3IgdGhlIGltcHJlc3Npb24gZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCB0aGUgdW5pcXVlIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGFnS2V5IHRoZSB0YWcgbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGFnVmFsdWUgdGhlIHRhZyB2YWx1ZVxuICAgKi9cbiAgYnVpbGRFdmVudEZvclB1c2hpbmc6IGZ1bmN0aW9uIGJ1aWxkRXZlbnRGb3JQdXNoaW5nKGNvbmZpZ09iaiwgdGFnS2V5LCB0YWdWYWx1ZSwgdXNlcklkKSB7XG4gICAgdmFyIHByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKHt9LCBnZXRCYXNlUHJvcGVydGllcyhjb25maWdPYmosIHVzZXJJZCkpO1xuICAgIHByb3BlcnRpZXMudXJsID0gQ29uc3RhbnRzLkhUVFBTX1BST1RPQ09MICsgVXJsU2VydmljZS5nZXRCYXNlVXJsKCkgKyBVcmxFbnVtLlBVU0g7XG4gICAgcHJvcGVydGllcy50YWdzID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgdTogX2RlZmluZVByb3BlcnR5KHt9LCBlbmNvZGVVUklDb21wb25lbnQodGFnS2V5KSwgZW5jb2RlVVJJQ29tcG9uZW50KHRhZ1ZhbHVlKSlcbiAgICB9KTtcbiAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuSU1QUkVTU0lPTl9GT1JfUFVTSCwge1xuICAgICAgZmlsZTogRmlsZU5hbWVFbnVtLkltcHJlc3Npb25VdGlsLFxuICAgICAgcHJvcGVydGllczogdGhpcy5fZ2V0U3RyaW5naWZpZWRMb2dQcm9wZXJ0aWVzKHByb3BlcnRpZXMpXG4gICAgfSkpO1xuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCdWlsZCBwcm9wZXJ0aWVzIGZvciB0aGUgYnVsayBpbXByZXNzaW9uIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgdGhlIHVuaXF1ZSBJRCBhc3NpZ25lZCB0byBhIHVzZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRhZ0tleSB0aGUgdGFnIG5hbWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRhZ1ZhbHVlIHRoZSB0YWcgdmFsdWVcbiAgICovXG4gIGJ1aWxkQmF0Y2hFdmVudEZvclB1c2hpbmc6IGZ1bmN0aW9uIGJ1aWxkQmF0Y2hFdmVudEZvclB1c2hpbmcoY29uZmlnT2JqLCB0YWdLZXksIHRhZ1ZhbHVlLCB1c2VySWQpIHtcbiAgICBpZiAoZmFsc2UpIHsgdmFyIHByb3BlcnRpZXM7IH1cbiAgfSxcblxuICAvKipcbiAgICogQnVpbGQgcHJvcGVydGllcyBmb3IgdGhlIGltcHJlc3Npb24gZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCB0aGUgdW5pcXVlIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXksIHRoZSBDYW1wYWlnbiBJRFxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFyaWF0aW9uSWQsIHRoZSBWYXJpYXRpb24gSURcbiAgICpcbiAgICogQHJldHVybiBudWxsIGlmIGNhbXBhaWduIElEIG9yIHZhcmlhdGlvbiBJRCBpcyBpbnZhbGlkXG4gICAqL1xuICBidWlsZEV2ZW50Rm9yVHJhY2tpbmdVc2VyOiBmdW5jdGlvbiBidWlsZEV2ZW50Rm9yVHJhY2tpbmdVc2VyKGNvbmZpZ09iaiwgY2FtcGFpZ25LZXksIHZhcmlhdGlvbklkLCB1c2VySWQsIHVzYWdlU3RhdHMpIHtcbiAgICB2YXIgcHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgZXhwZXJpbWVudF9pZDogY2FtcGFpZ25LZXksXG4gICAgICBjb21iaW5hdGlvbjogdmFyaWF0aW9uSWRcbiAgICB9LCBnZXRCYXNlUHJvcGVydGllcyhjb25maWdPYmosIHVzZXJJZCksIHVzYWdlU3RhdHMpO1xuICAgIHByb3BlcnRpZXMuZWQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwOiAnc2VydmVyJ1xuICAgIH0pO1xuICAgIHByb3BlcnRpZXMudXJsID0gQ29uc3RhbnRzLkhUVFBTX1BST1RPQ09MICsgVXJsU2VydmljZS5nZXRCYXNlVXJsKCkgKyBVcmxFbnVtLlRSQUNLX1VTRVI7XG4gICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uREVCVUcsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkRFQlVHX01FU1NBR0VTLklNUFJFU1NJT05fRk9SX1RSQUNLX1VTRVIsIHtcbiAgICAgIGZpbGU6IEZpbGVOYW1lRW51bS5JbXByZXNzaW9uVXRpbCxcbiAgICAgIHByb3BlcnRpZXM6IHRoaXMuX2dldFN0cmluZ2lmaWVkTG9nUHJvcGVydGllcyhwcm9wZXJ0aWVzKVxuICAgIH0pKTtcbiAgICByZXR1cm4gcHJvcGVydGllcztcbiAgfSxcblxuICAvKipcbiAgICogQnVpbGQgcHJvcGVydGllcyBmb3IgdGhlIGJ1bGsgaW1wcmVzc2lvbiBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcklkIHRoZSB1bmlxdWUgSUQgYXNzaWduZWQgdG8gYSB1c2VyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbktleSwgdGhlIENhbXBhaWduIElEXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YXJpYXRpb25JZCwgdGhlIFZhcmlhdGlvbiBJRFxuICAgKlxuICAgKiBAcmV0dXJuIG51bGwgaWYgY2FtcGFpZ24gSUQgb3IgdmFyaWF0aW9uIElEIGlzIGludmFsaWRcbiAgICovXG4gIGJ1aWxkQmF0Y2hFdmVudEZvclRyYWNraW5nVXNlcjogZnVuY3Rpb24gYnVpbGRCYXRjaEV2ZW50Rm9yVHJhY2tpbmdVc2VyKGNvbmZpZ09iaiwgY2FtcGFpZ25LZXksIHZhcmlhdGlvbklkLCB1c2VySWQpIHtcbiAgICBpZiAoZmFsc2UpIHsgdmFyIHByb3BlcnRpZXM7IH1cbiAgfSxcblxuICAvKipcbiAgICogQnVpbGQgcHJvcGVydGllcyBmb3IgdGhlIGltcHJlc3Npb24gZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCB0aGUgdW5pcXVlIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXksIHRoZSBDYW1wYWlnbiBJRFxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFyaWF0aW9uSWQsIHRoZSBWYXJpYXRpb24gSURcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdvYWxJZCwgdGhlIEdvYWwgSURcbiAgICogQHBhcmFtIHtTdHJpbmd9IHJldmVudWUsIHRoZSByZXZlbnVlIGdlbmVyYXRlZCBvbiBjb252ZXJzaW9uXG4gICAqXG4gICAqIEByZXR1cm4gbnVsbCBpZiBjYW1wYWlnbiBJRCBvciB2YXJpYXRpb24gSUQgaXMgaW52YWxpZFxuICAgKi9cbiAgYnVpbGRFdmVudEZvclRyYWNraW5nR29hbDogZnVuY3Rpb24gYnVpbGRFdmVudEZvclRyYWNraW5nR29hbChjb25maWdPYmosIGNhbXBhaWduS2V5LCB2YXJpYXRpb25JZCwgdXNlcklkKSB7XG4gICAgdmFyIGdvYWwgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHt9O1xuICAgIHZhciByZXZlbnVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiBudWxsO1xuICAgIHZhciBnb2FsSWQgPSBnb2FsLmlkO1xuICAgIHZhciBwcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBleHBlcmltZW50X2lkOiBjYW1wYWlnbktleSxcbiAgICAgIGNvbWJpbmF0aW9uOiB2YXJpYXRpb25JZFxuICAgIH0sIGdldEJhc2VQcm9wZXJ0aWVzKGNvbmZpZ09iaiwgdXNlcklkKSk7XG4gICAgcHJvcGVydGllcy51cmwgPSBDb25zdGFudHMuSFRUUFNfUFJPVE9DT0wgKyBVcmxTZXJ2aWNlLmdldEJhc2VVcmwoKSArIFVybEVudW0uVFJBQ0tfR09BTDtcbiAgICBwcm9wZXJ0aWVzWydnb2FsX2lkJ10gPSBnb2FsSWQ7XG5cbiAgICBpZiAoZ29hbC50eXBlID09PSBHb2FsVHlwZUVudW0uUkVWRU5VRSAmJiBWYWxpZGF0ZVV0aWwuaXNWYWxpZFZhbHVlKHJldmVudWUpKSB7XG4gICAgICBwcm9wZXJ0aWVzWydyJ10gPSByZXZlbnVlO1xuICAgIH1cblxuICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkRFQlVHLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5ERUJVR19NRVNTQUdFUy5JTVBSRVNTSU9OX0ZPUl9UUkFDS19HT0FMLCB7XG4gICAgICBmaWxlOiBGaWxlTmFtZUVudW0uSW1wcmVzc2lvblV0aWwsXG4gICAgICBwcm9wZXJ0aWVzOiB0aGlzLl9nZXRTdHJpbmdpZmllZExvZ1Byb3BlcnRpZXMocHJvcGVydGllcylcbiAgICB9KSk7XG4gICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEJ1aWxkIHByb3BlcnRpZXMgZm9yIHRoZSBidWxrIGltcHJlc3Npb24gZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCB0aGUgdW5pcXVlIElEIGFzc2lnbmVkIHRvIGEgdXNlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2FtcGFpZ25LZXksIHRoZSBDYW1wYWlnbiBJRFxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFyaWF0aW9uSWQsIHRoZSBWYXJpYXRpb24gSURcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdvYWxJZCwgdGhlIEdvYWwgSURcbiAgICogQHBhcmFtIHtTdHJpbmd9IHJldmVudWUsIHRoZSByZXZlbnVlIGdlbmVyYXRlZCBvbiBjb252ZXJzaW9uXG4gICAqXG4gICAqIEByZXR1cm4gbnVsbCBpZiBjYW1wYWlnbiBJRCBvciB2YXJpYXRpb24gSUQgaXMgaW52YWxpZFxuICAgKi9cbiAgYnVpbGRCYXRjaEV2ZW50Rm9yVHJhY2tpbmdHb2FsOiBmdW5jdGlvbiBidWlsZEJhdGNoRXZlbnRGb3JUcmFja2luZ0dvYWwoY29uZmlnT2JqLCBjYW1wYWlnbktleSwgdmFyaWF0aW9uSWQsIHVzZXJJZCkge1xuICAgIHZhciBnb2FsID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7fTtcbiAgICB2YXIgcmV2ZW51ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDogbnVsbDtcblxuICAgIGlmIChmYWxzZSkgeyB2YXIgcHJvcGVydGllczsgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmcgcHJvcGVydGllcyByZXF1aXJlZCBmb3Igc2VnbWVudGluZyByZXBvcnRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdPYmpcbiAgICogQHJldHVybnMgcmVwb3J0aW5nIHByb3BlcnRpZXNcbiAgICovXG4gIGdldFJlcG9ydGluZ1Byb3BlcnRpZXM6IGZ1bmN0aW9uIGdldFJlcG9ydGluZ1Byb3BlcnRpZXMoY29uZmlnT2JqKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgc2RrS2V5ID0gY29uZmlnT2JqLnNka0tleTtcbiAgICByZXR1cm4gX3JlZiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgQ29uc3RhbnRzLlNES19RVUVSWV9QQVJBTSwgQ29uc3RhbnRzLlNES19OQU1FKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsIENvbnN0YW50cy5TREtfVkVSU0lPTl9RVUVSWV9QQVJBTSwgQ29uc3RhbnRzLlNES19WRVJTSU9OKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsIFwiZW52XCIsIHNka0tleSksIF9yZWY7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEJ1aWxkcyBnZW5lcmljIHByb3BlcnRpZXMgZm9yIGRpZmZlcmVudCB0cmFja2luZyBjYWxscyByZXF1aXJlZCBieSBWV08gc2VydmVycy5cbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ09ialxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lXG4gICAqIEByZXR1cm5zIHByb3BlcnRpZXNcbiAgICovXG4gIGdldEV2ZW50c0Jhc2VQcm9wZXJ0aWVzOiBmdW5jdGlvbiBnZXRFdmVudHNCYXNlUHJvcGVydGllcyhjb25maWcsIGV2ZW50TmFtZSkge1xuICAgIHZhciB1c2FnZVN0YXRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICB2YXIgc2RrS2V5ID0gY29uZmlnLnNka0tleTtcbiAgICB2YXIgcHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgZW46IGV2ZW50TmFtZSxcbiAgICAgIGE6IGNvbmZpZy5hY2NvdW50SWQsXG4gICAgICBlbnY6IHNka0tleSxcbiAgICAgIGVUaW1lOiBGdW5jdGlvblV0aWwuZ2V0Q3VycmVudFVuaXhUaW1lc3RhbXBJbk1pbGxpcygpLFxuICAgICAgcmFuZG9tOiBGdW5jdGlvblV0aWwuZ2V0UmFuZG9tTnVtYmVyKCksXG4gICAgICBwOiAnRlMnXG4gICAgfSwgdXNhZ2VTdGF0cyk7XG4gICAgcHJvcGVydGllcy51cmwgPSBDb25zdGFudHMuSFRUUFNfUFJPVE9DT0wgKyBVcmxTZXJ2aWNlLmdldEJhc2VVcmwoKSArIFVybEVudW0uRVZFTlRTO1xuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCdWlsZHMgZ2VuZXJpYyBwYXlsb2FkIHJlcXVpcmVkIGJ5IGFsbCB0aGUgZGlmZmVyZW50IHRyYWNraW5nIGNhbGxzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgKiBAcGFyYW0ge09iamVjdH0gdXNhZ2VTdGF0c1xuICAgKiBAcmV0dXJucyBwcm9wZXJ0aWVzXG4gICAqL1xuICBnZXRFdmVudEJhc2VQYXlsb2FkOiBmdW5jdGlvbiBnZXRFdmVudEJhc2VQYXlsb2FkKGNvbmZpZ09iaiwgdXNlcklkLCBldmVudE5hbWUpIHtcbiAgICB2YXIgdXVpZCA9IFV1aWRVdGlsLmdlbmVyYXRlRm9yKHVzZXJJZCwgY29uZmlnT2JqLmFjY291bnRJZCk7XG4gICAgdmFyIHNka0tleSA9IGNvbmZpZ09iai5zZGtLZXk7XG4gICAgdmFyIHByb3BzID0ge1xuICAgICAgc2RrTmFtZTogQ29uc3RhbnRzLlNES19OQU1FLFxuICAgICAgc2RrVmVyc2lvbjogQ29uc3RhbnRzLlNES19WRVJTSU9OLFxuICAgICAgJHZpc2l0b3I6IHtcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICB2d29fZnNfZW52aXJvbm1lbnQ6IHNka0tleVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTsgLy8gaWYgKHVzYWdlU3RhdHMpIHtcbiAgICAvLyAgIHByb3BzID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvcHMsIHVzYWdlU3RhdHMpO1xuICAgIC8vIH1cblxuICAgIHZhciBwcm9wZXJ0aWVzID0ge1xuICAgICAgZDoge1xuICAgICAgICBtc2dJZDogXCJcIi5jb25jYXQodXVpZCwgXCItXCIpLmNvbmNhdChGdW5jdGlvblV0aWwuZ2V0Q3VycmVudFVuaXhUaW1lc3RhbXAoKSksXG4gICAgICAgIHZpc0lkOiB1dWlkLFxuICAgICAgICBzZXNzaW9uSWQ6IEZ1bmN0aW9uVXRpbC5nZXRDdXJyZW50VW5peFRpbWVzdGFtcCgpLFxuICAgICAgICBldmVudDoge1xuICAgICAgICAgIHByb3BzOiBwcm9wcyxcbiAgICAgICAgICBuYW1lOiBldmVudE5hbWUsXG4gICAgICAgICAgdGltZTogRnVuY3Rpb25VdGlsLmdldEN1cnJlbnRVbml4VGltZXN0YW1wSW5NaWxsaXMoKVxuICAgICAgICB9LFxuICAgICAgICB2aXNpdG9yOiB7XG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIHZ3b19mc19lbnZpcm9ubWVudDogc2RrS2V5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gcHJvcGVydGllcztcbiAgfSxcblxuICAvKipcbiAgICogQnVpbGRzIHBheWxvYWQgdG8gdHJhY2sgdGhlIHZpc2l0b3IuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdPYmpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYW1wYWlnbklkXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YXJpYXRpb25JZFxuICAgKiBAcmV0dXJucyB0cmFjay11c2VyIHBheWxvYWRcbiAgICovXG4gIGdldFRyYWNrVXNlclBheWxvYWREYXRhOiBmdW5jdGlvbiBnZXRUcmFja1VzZXJQYXlsb2FkRGF0YShjb25maWdPYmosIHVzZXJJZCwgZXZlbnROYW1lLCBjYW1wYWlnbklkLCB2YXJpYXRpb25JZCkge1xuICAgIHZhciBwcm9wZXJ0aWVzID0gdGhpcy5nZXRFdmVudEJhc2VQYXlsb2FkKGNvbmZpZ09iaiwgdXNlcklkLCBldmVudE5hbWUpO1xuICAgIHByb3BlcnRpZXMuZC5ldmVudC5wcm9wcy5pZCA9IGNhbXBhaWduSWQ7XG4gICAgcHJvcGVydGllcy5kLmV2ZW50LnByb3BzLnZhcmlhdGlvbiA9IHZhcmlhdGlvbklkOyAvLyB0aGlzIGlzIGN1cnJlbnRseSByZXF1aXJlZCBieSBkYXRhLWxheWVyIHRlYW0sIHdlIGNhbiBtYWtlIGNoYW5nZXMgb24gREFDRE4gYW5kIHJlbW92ZSBpdCBmcm9tIGhlcmVcblxuICAgIHByb3BlcnRpZXMuZC5ldmVudC5wcm9wcy5pc0ZpcnN0ID0gMTtcbiAgICBsb2dnZXIubG9nKExvZ0xldmVsRW51bS5ERUJVRywgTG9nTWVzc2FnZVV0aWwuYnVpbGQoTG9nTWVzc2FnZUVudW0uREVCVUdfTUVTU0FHRVMuSU1QUkVTU0lPTl9GT1JfRVZFTlRfQVJDSF9UUkFDS19VU0VSLCB7XG4gICAgICBmaWxlOiBGaWxlTmFtZUVudW0uSW1wcmVzc2lvblV0aWwsXG4gICAgICBhY2NvdW50SWQ6IGNvbmZpZ09iai5hY2NvdW50SWQsXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgIGNhbXBhaWduSWQ6IGNhbXBhaWduSWRcbiAgICB9KSk7XG4gICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEJ1aWxkcyBwYXlsb2FkIHRvIHRyYWNrIHRoZSBHb2FsLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgKiBAcGFyYW0ge09iamVjdH0gbWV0cmljTWFwXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZXZlbnVlVmFsdWVcbiAgICogQHJldHVybnMgdHJhY2stZ29hbCBwYXlsb2FkXG4gICAqL1xuICBnZXRUcmFja0dvYWxQYXlsb2FkRGF0YTogZnVuY3Rpb24gZ2V0VHJhY2tHb2FsUGF5bG9hZERhdGEoY29uZmlnT2JqLCB1c2VySWQsIGV2ZW50TmFtZSwgbWV0cmljTWFwLCByZXZlbnVlVmFsdWUsIHJldmVudWVQcm9wTGlzdCkge1xuICAgIHZhciBwcm9wZXJ0aWVzID0gdGhpcy5nZXRFdmVudEJhc2VQYXlsb2FkKGNvbmZpZ09iaiwgdXNlcklkLCBldmVudE5hbWUpO1xuICAgIHZhciBtZXRyaWMgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhtZXRyaWNNYXApLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgbWV0cmljW1wiaWRfXCIuY29uY2F0KGtleSldID0gW1wiZ19cIi5jb25jYXQobWV0cmljTWFwW2tleV0uZ29hbC5pZCldO1xuICAgICAgbG9nZ2VyLmxvZyhMb2dMZXZlbEVudW0uREVCVUcsIExvZ01lc3NhZ2VVdGlsLmJ1aWxkKExvZ01lc3NhZ2VFbnVtLkRFQlVHX01FU1NBR0VTLklNUFJFU1NJT05fRk9SX0VWRU5UX0FSQ0hfVFJBQ0tfR09BTCwge1xuICAgICAgICBmaWxlOiBGaWxlTmFtZUVudW0uSW1wcmVzc2lvblV0aWwsXG4gICAgICAgIGdvYWxOYW1lOiBldmVudE5hbWUsXG4gICAgICAgIGFjY291bnRJZDogY29uZmlnT2JqLmFjY291bnRJZCxcbiAgICAgICAgdTogdXNlcklkLFxuICAgICAgICBjYW1wYWlnbklkOiBrZXlcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgICBwcm9wZXJ0aWVzLmQuZXZlbnQucHJvcHMudndvTWV0YSA9IHtcbiAgICAgIG1ldHJpYzogbWV0cmljXG4gICAgfTtcblxuICAgIGlmIChyZXZlbnVlUHJvcExpc3QgJiYgcmV2ZW51ZVZhbHVlICYmIHJldmVudWVQcm9wTGlzdC5zaXplID4gMCkge1xuICAgICAgcmV2ZW51ZVByb3BMaXN0LmZvckVhY2goZnVuY3Rpb24gKHJldmVudWVQcm9wKSB7XG4gICAgICAgIHByb3BlcnRpZXMuZC5ldmVudC5wcm9wcy52d29NZXRhW3JldmVudWVQcm9wXSA9IHJldmVudWVWYWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3BlcnRpZXMuZC5ldmVudC5wcm9wcy5pc0N1c3RvbUV2ZW50ID0gdHJ1ZTtcbiAgICByZXR1cm4gcHJvcGVydGllcztcbiAgfSxcblxuICAvKipcbiAgICogQnVpbGRzIHBheWxvYWQgdG8gYXBwcGx5IHBvc3Qgc2VnbWVudGF0aW9uIG9uIFZXTyBjYW1wYWlnbiByZXBvcnRzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY3VzdG9tRGltZW5zaW9uTWFwXG4gICAqIEByZXR1cm5zIHB1c2ggcGF5bG9hZFxuICAgKi9cbiAgZ2V0UHVzaFBheWxvYWREYXRhOiBmdW5jdGlvbiBnZXRQdXNoUGF5bG9hZERhdGEoY29uZmlnT2JqLCB1c2VySWQsIGV2ZW50TmFtZSwgY3VzdG9tRGltZW5zaW9uTWFwKSB7XG4gICAgdmFyIHByb3BlcnRpZXMgPSB0aGlzLmdldEV2ZW50QmFzZVBheWxvYWQoY29uZmlnT2JqLCB1c2VySWQsIGV2ZW50TmFtZSk7XG4gICAgcHJvcGVydGllcy5kLmV2ZW50LnByb3BzLmlzQ3VzdG9tRXZlbnQgPSB0cnVlO1xuICAgIE9iamVjdC5rZXlzKGN1c3RvbURpbWVuc2lvbk1hcCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgdGFnVmFsdWUgPSBEYXRhVHlwZVV0aWwuaXNTdHJpbmcoY3VzdG9tRGltZW5zaW9uTWFwW2tleV0pID8gY3VzdG9tRGltZW5zaW9uTWFwW2tleV0gOiBKU09OLnN0cmluZ2lmeShjdXN0b21EaW1lbnNpb25NYXBba2V5XSk7XG4gICAgICBwcm9wZXJ0aWVzLmQuZXZlbnQucHJvcHMuJHZpc2l0b3IucHJvcHNba2V5XSA9IHRhZ1ZhbHVlO1xuICAgICAgcHJvcGVydGllcy5kLnZpc2l0b3IucHJvcHNba2V5XSA9IHRhZ1ZhbHVlO1xuICAgIH0pO1xuICAgIGxvZ2dlci5sb2coTG9nTGV2ZWxFbnVtLkRFQlVHLCBMb2dNZXNzYWdlVXRpbC5idWlsZChMb2dNZXNzYWdlRW51bS5ERUJVR19NRVNTQUdFUy5JTVBSRVNTSU9OX0ZPUl9FVkVOVF9BUkNIX1BVU0gsIHtcbiAgICAgIGZpbGU6IEZpbGVOYW1lRW51bS5JbXByZXNzaW9uVXRpbCxcbiAgICAgIGFjY291bnRJZDogY29uZmlnT2JqLmFjY291bnRJZCxcbiAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgcHJvcGVydHk6IEpTT04uc3RyaW5naWZ5KGN1c3RvbURpbWVuc2lvbk1hcClcbiAgICB9KSk7XG4gICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgc2Vuc2l0aXZlIGtleXMgZnJvbSB0aGUgcHJvcGVydGllcyB0byB0ZSBkaXNwbGF5ZWQgaW4gdGhlIGxvZy5cbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAgICogQHJldHVybnMgcHJvcGVydGllcyB3aXRob3V0IHNlbnNpdGl2ZSBrZXlzXG4gICAqL1xuICBfZ2V0U3RyaW5naWZpZWRMb2dQcm9wZXJ0aWVzOiBmdW5jdGlvbiBfZ2V0U3RyaW5naWZpZWRMb2dQcm9wZXJ0aWVzKHByb3BlcnRpZXMpIHtcbiAgICB2YXIgbG9nUHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BlcnRpZXMpO1xuICAgIGRlbGV0ZSBsb2dQcm9wZXJ0aWVzLmVudjtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobG9nUHJvcGVydGllcyk7XG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IEltcHJlc3Npb25VdGlsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9Mb2dNZXNzYWdlVXRpbC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi91dGlscy9Mb2dNZXNzYWdlVXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIERhdGFUeXBlVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRGF0YVR5cGVVdGlsICovIFwiLi9saWIvdXRpbHMvRGF0YVR5cGVVdGlsLmpzXCIpO1xuXG52YXIgbmFyZ3MgPSAvXFx7KFswLTlhLXpBLVpfXSspXFx9L2c7XG52YXIgTG9nTWVzc2FnZVV0aWwgPSB7XG4gIC8qKlxuICAgKiBUb29rIHJlZmVyZW5jZSBmcm9tOiBzdHJpbmctdGVtcGxhdGVcbiAgICpcbiAgICogTmFtZTogc3RyaW5nLXRlbXBsYXRlXG4gICAqIFB1Ymxpc2hlZCBOYW1lOiBzdHJpbmctdGVtcGxhdGVcbiAgICogVVJMOiBodHRwczovL2dpdGh1Yi5jb20vTWF0dC1Fc2NoL3N0cmluZy10ZW1wbGF0ZVxuICAgKiBEZXNjcmlwdGlvbjogQSBsaWdodHdlaWdodCBzdHJpbmcgcmVwbGFjZSBlbmdpbmUgZm9yIHRleHQtYmFzZWQgdGVtcGxhdGVzXG4gICAqIEF1dGhvcjogTWF0dC1Fc2NoIChodHRwczovL2dpdGh1Yi5jb20vTWF0dC1Fc2NoKVxuICAgKiBMaWNlbnNlOiBNSVQgTGljZW5zZVxuICAgKiBMb2NhbCBNb2RpZmljYXRpb25zOiBUaGlzIGxpYnJhcnkgaXMgbm90IHVzZWQgYXMgYSBkZXBlbmRlbmN5LlxuICAgKiAgICAgICBTb3VyY2UgY29kZSB3YXMgcmVmZXJlbmNlZCBhbmQgaXMgbW9kaWZpZWQgYXMgcGVyIHJlcXVpcmVtZW50cy5cbiAgICovXG4gIGJ1aWxkOiBmdW5jdGlvbiBidWlsZCh0ZW1wbGF0ZSwgZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShuYXJncywgZnVuY3Rpb24gKG1hdGNoLCBrZXksIGluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciBpc0tleTtcblxuICAgICAgICBpZiAodGVtcGxhdGVbaW5kZXggLSAxXSA9PT0gJ3snICYmIHRlbXBsYXRlW2luZGV4ICsgbWF0Y2gubGVuZ3RoXSA9PT0gJ30nKSB7XG4gICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpc0tleSA9IGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KTtcblxuICAgICAgICAgIGlmIChpc0tleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xuXG4gICAgICAgICAgICBpZiAoRGF0YVR5cGVVdGlsLmlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gZGF0YVtrZXldKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IExvZ01lc3NhZ2VVdGlsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9PYmplY3RVdGlsLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvdXRpbHMvT2JqZWN0VXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTktMjAyMiBXaW5naWZ5IFNvZnR3YXJlIFB2dC4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgT2JqZWN0VXRpbCA9IHtcbiAgYXJlT2JqZWN0S2V5czogZnVuY3Rpb24gYXJlT2JqZWN0S2V5cygpIHtcbiAgICB2YXIgb2JqID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7XG4gIH0sXG4gIGdldEtleVZhbHVlOiBmdW5jdGlvbiBnZXRLZXlWYWx1ZShvYmopIHtcbiAgICBpZiAoIU9iamVjdFV0aWwuYXJlT2JqZWN0S2V5cyhvYmopKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGtleSA9IE9iamVjdC5rZXlzKG9iailbMF07XG4gICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleToga2V5LFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfTtcbiAgfSxcbiAgb2JqZWN0VmFsdWVzOiBmdW5jdGlvbiBvYmplY3RWYWx1ZXMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICB9KTtcbiAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0VXRpbDtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvdXRpbHMvU2VnbWVudFV0aWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvdXRpbHMvU2VnbWVudFV0aWwuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBEYXRhVHlwZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9EYXRhVHlwZVV0aWwgKi8gXCIuL2xpYi91dGlscy9EYXRhVHlwZVV0aWwuanNcIik7XG5cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL0Z1bmN0aW9uVXRpbCAqLyBcIi4vbGliL3V0aWxzL0Z1bmN0aW9uVXRpbC5qc1wiKSxcbiAgICBtYXRjaFdpdGhSZWdleCA9IF9yZXF1aXJlLm1hdGNoV2l0aFJlZ2V4O1xuXG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvT2JqZWN0VXRpbCAqLyBcIi4vbGliL3V0aWxzL09iamVjdFV0aWwuanNcIiksXG4gICAgZ2V0S2V5VmFsdWUgPSBfcmVxdWlyZTIuZ2V0S2V5VmFsdWU7XG5cbnZhciBTZWdtZW50RW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL3NlZ21lbnQgKi8gXCIuL2xpYi9lbnVtcy9zZWdtZW50L2luZGV4LmpzXCIpO1xuXG52YXIgX1NlZ21lbnRFbnVtJFNlZ21lbnRPID0gU2VnbWVudEVudW0uU2VnbWVudE9wZXJhbmRWYWx1ZVR5cGVSZWdleGVzLFxuICAgIExPV0VSX01BVENIID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPLkxPV0VSX01BVENILFxuICAgIFdJTERDQVJEX01BVENIID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPLldJTERDQVJEX01BVENILFxuICAgIFJFR0VYX01BVENIID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPLlJFR0VYX01BVENILFxuICAgIFNUQVJUSU5HX1NUQVIgPSBfU2VnbWVudEVudW0kU2VnbWVudE8uU1RBUlRJTkdfU1RBUixcbiAgICBFTkRJTkdfU1RBUiA9IF9TZWdtZW50RW51bSRTZWdtZW50Ty5FTkRJTkdfU1RBUjtcbnZhciBfU2VnbWVudEVudW0kU2VnbWVudE8yID0gU2VnbWVudEVudW0uU2VnbWVudE9wZXJhbmRWYWx1ZXMsXG4gICAgTE9XRVJfVkFMVUUgPSBfU2VnbWVudEVudW0kU2VnbWVudE8yLkxPV0VSX1ZBTFVFLFxuICAgIFNUQVJUSU5HX0VORElOR19TVEFSX1ZBTFVFID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPMi5TVEFSVElOR19FTkRJTkdfU1RBUl9WQUxVRSxcbiAgICBTVEFSVElOR19TVEFSX1ZBTFVFID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPMi5TVEFSVElOR19TVEFSX1ZBTFVFLFxuICAgIEVORElOR19TVEFSX1ZBTFVFID0gX1NlZ21lbnRFbnVtJFNlZ21lbnRPMi5FTkRJTkdfU1RBUl9WQUxVRSxcbiAgICBSRUdFWF9WQUxVRSA9IF9TZWdtZW50RW51bSRTZWdtZW50TzIuUkVHRVhfVkFMVUUsXG4gICAgRVFVQUxfVkFMVUUgPSBfU2VnbWVudEVudW0kU2VnbWVudE8yLkVRVUFMX1ZBTFVFO1xuXG5mdW5jdGlvbiBleHRyYWN0T3BlcmFuZFZhbHVlKG9wZXJhbmQsIHJlZ2V4KSB7XG4gIHJldHVybiBtYXRjaFdpdGhSZWdleChvcGVyYW5kLCByZWdleCkgJiYgbWF0Y2hXaXRoUmVnZXgob3BlcmFuZCwgcmVnZXgpWzFdO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzVmFsdWVzKG9wZXJhbmRWYWx1ZSwgdGFnVmFsdWUpIHtcbiAgLy8gdGhpcyBpcyBhdG9taWMsIGVpdGhlciBib3RoIHdpbGwgYmUgcHJvY2Vzc2VkIG9yIG5vbmVcbiAgdmFyIHByb2Nlc3NlZE9wZXJhbmRWYWx1ZSA9IHBhcnNlRmxvYXQob3BlcmFuZFZhbHVlLCAxMCk7XG4gIHZhciBwcm9jZXNzZWRUYWdWYWx1ZSA9IHBhcnNlRmxvYXQodGFnVmFsdWUsIDEwKTtcblxuICBpZiAoIXByb2Nlc3NlZE9wZXJhbmRWYWx1ZSB8fCAhcHJvY2Vzc2VkVGFnVmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3BlcmFuZFZhbHVlOiBvcGVyYW5kVmFsdWUsXG4gICAgICB0YWdWYWx1ZTogdGFnVmFsdWVcbiAgICB9O1xuICB9IC8vIG5vdyB3ZSBoYXZlIHN1cml0eSB0aGF0IGJvdGggYXJlIG51bWJlcnNcbiAgLy8gbm93IHdlIGNhbiBjb252ZXJ0IHRoZW0gaW5kZXBlbmRlbnRseSB0byBpbnQgdHlwZSBpZiB0aGV5XG4gIC8vIGFyZSBpbnQgcmF0aGVyIHRoYW4gZmxvYXRzXG5cblxuICBpZiAocHJvY2Vzc2VkT3BlcmFuZFZhbHVlID09PSBNYXRoLmZsb29yKHByb2Nlc3NlZE9wZXJhbmRWYWx1ZSkpIHtcbiAgICBwcm9jZXNzZWRPcGVyYW5kVmFsdWUgPSBwYXJzZUludChwcm9jZXNzZWRPcGVyYW5kVmFsdWUsIDEwKTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzZWRUYWdWYWx1ZSA9PT0gTWF0aC5mbG9vcihwcm9jZXNzZWRUYWdWYWx1ZSkpIHtcbiAgICBwcm9jZXNzZWRUYWdWYWx1ZSA9IHBhcnNlSW50KHByb2Nlc3NlZFRhZ1ZhbHVlLCAxMCk7XG4gIH0gLy8gY29udmVydCBpdCBiYWNrIHRvIHN0cmluZyBhbmQgcmV0dXJuXG5cblxuICByZXR1cm4ge1xuICAgIG9wZXJhbmRWYWx1ZTogcHJvY2Vzc2VkT3BlcmFuZFZhbHVlLnRvU3RyaW5nKCksXG4gICAgdGFnVmFsdWU6IHByb2Nlc3NlZFRhZ1ZhbHVlLnRvU3RyaW5nKClcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJlUHJvY2Vzc1RhZ1ZhbHVlKHRhZ1ZhbHVlKSB7XG4gIGlmICh0YWdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGFnVmFsdWUgPSAnJztcbiAgfVxuXG4gIGlmIChEYXRhVHlwZVV0aWwuaXNCb29sZWFuKHRhZ1ZhbHVlKSkge1xuICAgIGlmICh0YWdWYWx1ZSkge1xuICAgICAgdGFnVmFsdWUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YWdWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0YWdWYWx1ZSAhPT0gbnVsbCkge1xuICAgIHRhZ1ZhbHVlID0gdGFnVmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHJldHVybiB0YWdWYWx1ZTtcbn1cblxuZnVuY3Rpb24gcHJlUHJvY2Vzc09wZXJhbmRWYWx1ZShvcGVyYW5kKSB7XG4gIHZhciBvcGVyYW5kVHlwZTtcbiAgdmFyIG9wZXJhbmRWYWx1ZTtcbiAgdmFyIHN0YXJ0aW5nU3RhcjtcbiAgdmFyIGVuZGluZ1N0YXI7IC8vIFByZSBwcm9jZXNzIG9wZXJhbmQgdmFsdWVcblxuICBpZiAobWF0Y2hXaXRoUmVnZXgob3BlcmFuZCwgTE9XRVJfTUFUQ0gpKSB7XG4gICAgb3BlcmFuZFR5cGUgPSBMT1dFUl9WQUxVRTtcbiAgICBvcGVyYW5kVmFsdWUgPSBleHRyYWN0T3BlcmFuZFZhbHVlKG9wZXJhbmQsIExPV0VSX01BVENIKTtcbiAgfSBlbHNlIGlmIChtYXRjaFdpdGhSZWdleChvcGVyYW5kLCBXSUxEQ0FSRF9NQVRDSCkpIHtcbiAgICBvcGVyYW5kVmFsdWUgPSBleHRyYWN0T3BlcmFuZFZhbHVlKG9wZXJhbmQsIFdJTERDQVJEX01BVENIKTtcbiAgICBzdGFydGluZ1N0YXIgPSBtYXRjaFdpdGhSZWdleChvcGVyYW5kVmFsdWUsIFNUQVJUSU5HX1NUQVIpO1xuICAgIGVuZGluZ1N0YXIgPSBtYXRjaFdpdGhSZWdleChvcGVyYW5kVmFsdWUsIEVORElOR19TVEFSKTsgLy8gSW4gY2FzZSBvZiB3aWxkY2FyZCwgdGhlIG9wZXJhbmQgdHlwZSBpcyBmdXJ0aGVyIGRpdmlkZWQgaW50byBjb250YWlucywgc3RhcnRzd2l0aCBhbmQgZW5kc3dpdGhcblxuICAgIGlmIChzdGFydGluZ1N0YXIgJiYgZW5kaW5nU3Rhcikge1xuICAgICAgb3BlcmFuZFR5cGUgPSBTVEFSVElOR19FTkRJTkdfU1RBUl9WQUxVRTtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0aW5nU3Rhcikge1xuICAgICAgb3BlcmFuZFR5cGUgPSBTVEFSVElOR19TVEFSX1ZBTFVFO1xuICAgIH0gZWxzZSBpZiAoZW5kaW5nU3Rhcikge1xuICAgICAgb3BlcmFuZFR5cGUgPSBFTkRJTkdfU1RBUl9WQUxVRTtcbiAgICB9XG5cbiAgICBvcGVyYW5kVmFsdWUgPSBvcGVyYW5kVmFsdWUucmVwbGFjZShTVEFSVElOR19TVEFSLCAnJykucmVwbGFjZShFTkRJTkdfU1RBUiwgJycpO1xuICB9IGVsc2UgaWYgKG1hdGNoV2l0aFJlZ2V4KG9wZXJhbmQsIFJFR0VYX01BVENIKSkge1xuICAgIG9wZXJhbmRUeXBlID0gUkVHRVhfVkFMVUU7XG4gICAgb3BlcmFuZFZhbHVlID0gZXh0cmFjdE9wZXJhbmRWYWx1ZShvcGVyYW5kLCBSRUdFWF9NQVRDSCk7XG4gIH0gZWxzZSB7XG4gICAgb3BlcmFuZFR5cGUgPSBFUVVBTF9WQUxVRTtcbiAgICBvcGVyYW5kVmFsdWUgPSBvcGVyYW5kO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvcGVyYW5kVHlwZTogb3BlcmFuZFR5cGUsXG4gICAgb3BlcmFuZFZhbHVlOiBvcGVyYW5kVmFsdWVcbiAgfTtcbn1cblxuZnVuY3Rpb24gb3BlcmFuZEN1c3RvbVZhcmlhYmxlc1BhcnNlcihvcGVyYW5kLCBjdXN0b21WYXJpYWJsZXMpIHtcbiAgLy8gRXh0cmFjdCBjdXN0b21fdmFyaWFibGVfa2V5IGFuZCBjdXN0b21fdmFyaWFibGVfdmFsdWUgZnJvbSBvcGVyYW5kXG4gIHZhciBfZ2V0S2V5VmFsdWUgPSBnZXRLZXlWYWx1ZShvcGVyYW5kKSxcbiAgICAgIGtleSA9IF9nZXRLZXlWYWx1ZS5rZXksXG4gICAgICB2YWx1ZSA9IF9nZXRLZXlWYWx1ZS52YWx1ZTtcblxuICB2YXIgb3BlcmFuZEtleSA9IGtleTtcbiAgb3BlcmFuZCA9IHZhbHVlO1xuXG4gIGlmICghY3VzdG9tVmFyaWFibGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAvLyBGb3IgaGFuZGxpbmcgXCIuKlwiIHJlZ2V4IGNhc2Ugd2hlbiBrZXkgaXMgbm90IHByZXNlbnQgaW4gY3VzdG9tVmFyaWFibGVzIGFuZCBtYXRjaGVzIHJlZ2V4IGlzIHVzZWQuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHRhZ1ZhbHVlID0gY3VzdG9tVmFyaWFibGVzW29wZXJhbmRLZXldOyAvLyBQcmUgcHJvY2VzcyB0YWcgdmFsdWVcblxuICB0YWdWYWx1ZSA9IHByZVByb2Nlc3NUYWdWYWx1ZSh0YWdWYWx1ZSk7XG5cbiAgdmFyIF9wcmVQcm9jZXNzT3BlcmFuZFZhbCA9IHByZVByb2Nlc3NPcGVyYW5kVmFsdWUob3BlcmFuZCksXG4gICAgICBvcGVyYW5kVHlwZSA9IF9wcmVQcm9jZXNzT3BlcmFuZFZhbC5vcGVyYW5kVHlwZSxcbiAgICAgIG9wZXJhbmRWYWx1ZSA9IF9wcmVQcm9jZXNzT3BlcmFuZFZhbC5vcGVyYW5kVmFsdWU7IC8vIFByb2Nlc3MgYm90aCBvcGVyYW5kIGFuZCB0YWcgdmFsdWVzXG5cblxuICB2YXIgcHJvY2Vzc2VkVmFsdWVzID0gcHJvY2Vzc1ZhbHVlcyhvcGVyYW5kVmFsdWUsIHRhZ1ZhbHVlKTtcbiAgdGFnVmFsdWUgPSBwcm9jZXNzZWRWYWx1ZXMudGFnVmFsdWU7XG4gIHJldHVybiBleHRyYWN0UmVzdWx0KG9wZXJhbmRUeXBlLCBwcm9jZXNzZWRWYWx1ZXMub3BlcmFuZFZhbHVlLCB0YWdWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIG9wZXJhbmRVc2VyUGFyc2VyKG9wZXJhbmQsIGN1c3RvbVZhcmlhYmxlcykge1xuICB2YXIgdXNlcnMgPSBvcGVyYW5kLnNwbGl0KCcsJyk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh1c2Vyc1tpXS50cmltKCkgPT09IGN1c3RvbVZhcmlhYmxlcy5fdndvVXNlcklkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RSZXN1bHQob3BlcmFuZFR5cGUsIG9wZXJhbmRWYWx1ZSwgdGFnVmFsdWUpIHtcbiAgdmFyIHJlc3VsdDtcblxuICBzd2l0Y2ggKG9wZXJhbmRUeXBlKSB7XG4gICAgY2FzZSBMT1dFUl9WQUxVRTpcbiAgICAgIGlmICh0YWdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICByZXN1bHQgPSBvcGVyYW5kVmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnVmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFNUQVJUSU5HX0VORElOR19TVEFSX1ZBTFVFOlxuICAgICAgaWYgKHRhZ1ZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIHJlc3VsdCA9IHRhZ1ZhbHVlLmluZGV4T2Yob3BlcmFuZFZhbHVlKSA+IC0xO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgU1RBUlRJTkdfU1RBUl9WQUxVRTpcbiAgICAgIGlmICh0YWdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICByZXN1bHQgPSB0YWdWYWx1ZS5lbmRzV2l0aChvcGVyYW5kVmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgRU5ESU5HX1NUQVJfVkFMVUU6XG4gICAgICBpZiAodGFnVmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgcmVzdWx0ID0gdGFnVmFsdWUuc3RhcnRzV2l0aChvcGVyYW5kVmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgUkVHRVhfVkFMVUU6XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcGF0dGVybiA9IG5ldyBSZWdFeHAob3BlcmFuZFZhbHVlLCAnZycpO1xuICAgICAgICByZXN1bHQgPSAhIXBhdHRlcm4udGVzdCh0YWdWYWx1ZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJlc3VsdCA9IHRhZ1ZhbHVlID09PSBvcGVyYW5kVmFsdWU7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZXh0cmFjdE9wZXJhbmRWYWx1ZTogZXh0cmFjdE9wZXJhbmRWYWx1ZSxcbiAgcHJvY2Vzc1ZhbHVlczogcHJvY2Vzc1ZhbHVlcyxcbiAgcHJlUHJvY2Vzc1RhZ1ZhbHVlOiBwcmVQcm9jZXNzVGFnVmFsdWUsXG4gIHByZVByb2Nlc3NPcGVyYW5kVmFsdWU6IHByZVByb2Nlc3NPcGVyYW5kVmFsdWUsXG4gIG9wZXJhbmRDdXN0b21WYXJpYWJsZXNQYXJzZXI6IG9wZXJhbmRDdXN0b21WYXJpYWJsZXNQYXJzZXIsXG4gIG9wZXJhbmRVc2VyUGFyc2VyOiBvcGVyYW5kVXNlclBhcnNlclxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvdXRpbHMvU2V0dGluZ3NGaWxlVXRpbC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL3V0aWxzL1NldHRpbmdzRmlsZVV0aWwuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE5LTIwMjIgV2luZ2lmeSBTb2Z0d2FyZSBQdnQuIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIENvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvbnN0YW50cyAqLyBcIi4vbGliL2NvbnN0YW50cy9pbmRleC5qc1wiKTtcblxudmFyIFVybEVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9VcmxFbnVtICovIFwiLi9saWIvZW51bXMvVXJsRW51bS5qc1wiKTtcblxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9GdW5jdGlvblV0aWwgKi8gXCIuL2xpYi91dGlscy9GdW5jdGlvblV0aWwuanNcIiksXG4gICAgZ2V0UmFuZG9tTnVtYmVyID0gX3JlcXVpcmUuZ2V0UmFuZG9tTnVtYmVyLFxuICAgIGdldEN1cnJlbnRUaW1lID0gX3JlcXVpcmUuZ2V0Q3VycmVudFRpbWU7XG5cbnZhciBTZXR0aW5nc0ZpbGVVdGlsID0ge1xuICBnZXQ6IGZ1bmN0aW9uIGdldChhY2NvdW50SWQsIHNka0tleSwgdXNlclN0b3JhZ2VTZXJ2aWNlKSB7XG4gICAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG5cbiAgICBpZiAoIWFjY291bnRJZCB8fCAhc2RrS2V5KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBY2NvdW50SWQgYW5kIHNka0tleSBhcmUgcmVxdWlyZWQgZm9yIGZldGNoaW5nIGFjY291bnQgc2V0dGluZ3MuIEFib3J0aW5nIScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBwcm90b2NvbCA9ICdodHRwcyc7XG4gICAgdmFyIHBvcnQ7XG4gICAgdmFyIGhvc3RuYW1lID0gVXJsRW51bS5CQVNFX1VSTDtcbiAgICB2YXIgcGF0aCA9IFVybEVudW0uU0VUVElOR1NfVVJMO1xuXG4gICAgaWYgKGNvbmZpZy5pc1ZpYVdlYmhvb2spIHtcbiAgICAgIHBhdGggPSBVcmxFbnVtLldFQkhPT0tfU0VUVElOR1NfVVJMO1xuICAgIH1cblxuICAgIHBhdGggKz0gXCI/YT1cIi5jb25jYXQoYWNjb3VudElkLCBcIiZcIikgKyBcImk9XCIuY29uY2F0KHNka0tleSwgXCImXCIpICsgXCJyPVwiLmNvbmNhdChnZXRSYW5kb21OdW1iZXIoKSwgXCImXCIpICsgXCJwbGF0Zm9ybT1cIi5jb25jYXQoQ29uc3RhbnRzLlBMQVRGT1JNLCBcIiZcIikgKyBcIlwiLmNvbmNhdChDb25zdGFudHMuU0RLX1FVRVJZX1BBUkFNLCBcIj1cIikuY29uY2F0KENvbnN0YW50cy5TREtfTkFNRSwgXCImXCIpICsgXCJcIi5jb25jYXQoQ29uc3RhbnRzLlNES19WRVJTSU9OX1FVRVJZX1BBUkFNLCBcIj1cIikuY29uY2F0KENvbnN0YW50cy5TREtfVkVSU0lPTik7XG5cbiAgICBpZiAoY29uZmlnLmhvc3RuYW1lICYmIGNvbmZpZy5wYXRoKSB7XG4gICAgICBwcm90b2NvbCA9IGNvbmZpZy5wcm90b2NvbDtcbiAgICAgIHBvcnQgPSBjb25maWcucG9ydDtcbiAgICAgIGhvc3RuYW1lID0gY29uZmlnLmhvc3RuYW1lIHx8IGhvc3RuYW1lO1xuICAgICAgcGF0aCA9IGNvbmZpZy5wYXRoIHx8IHBhdGg7XG4gICAgfVxuXG4gICAgaWYgKHRydWUpIHtcbiAgICAgIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1hoclV0aWwgKi8gXCIuL2xpYi91dGlscy9YaHJVdGlsLmpzXCIpLnNlbmQoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6IFwiXCIuY29uY2F0KHByb3RvY29sLCBcIjovL1wiKS5jb25jYXQoaG9zdG5hbWUpLmNvbmNhdChwYXRoKSxcbiAgICAgICAgdXNlclN0b3JhZ2VTZXJ2aWNlOiB1c2VyU3RvcmFnZVNlcnZpY2VcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7IHZhciBodHRwcywgaHR0cDsgfVxuICB9LFxuICBoYW5kbGVIdHRwUmVxdWVzdDogZnVuY3Rpb24gaGFuZGxlSHR0cFJlcXVlc3QocmVzLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgc3RhdHVzQ29kZSA9IHJlcy5zdGF0dXNDb2RlO1xuICAgIHZhciBjb250ZW50VHlwZSA9IHJlcy5oZWFkZXJzWydjb250ZW50LXR5cGUnXTtcbiAgICB2YXIgZXJyb3I7XG4gICAgdmFyIHJhd0RhdGEgPSAnJztcblxuICAgIGlmICghL15hcHBsaWNhdGlvblxcL2pzb24vLnRlc3QoY29udGVudFR5cGUpKSB7XG4gICAgICBlcnJvciA9IFwiSW52YWxpZCBjb250ZW50LXR5cGUuXFxuRXhwZWN0ZWQgYXBwbGljYXRpb24vanNvbiBidXQgcmVjZWl2ZWQgXCIuY29uY2F0KGNvbnRlbnRUeXBlKTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IubWVzc2FnZSk7IC8vIENvbnN1bWUgcmVzcG9uc2UgZGF0YSB0byBmcmVlIHVwIG1lbW9yeVxuXG4gICAgICByZXMucmVzdW1lKCk7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJlcy5zZXRFbmNvZGluZygndXRmOCcpO1xuICAgIHJlcy5vbignZGF0YScsIGZ1bmN0aW9uIChjaHVuaykge1xuICAgICAgcmF3RGF0YSArPSBjaHVuaztcbiAgICB9KTtcbiAgICByZXMub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIFNldHRpbmdzRmlsZVV0aWwuaGFuZGxlSHR0cFJlc3BvbnNlKHN0YXR1c0NvZGUsIHJhd0RhdGEsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSk7XG4gIH0sXG4gIGhhbmRsZUh0dHBSZXNwb25zZTogZnVuY3Rpb24gaGFuZGxlSHR0cFJlc3BvbnNlKHN0YXR1c0NvZGUsIHJhd0RhdGEsIHJlc29sdmUsIHJlamVjdCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UocmF3RGF0YSk7XG5cbiAgICAgIGlmIChzdGF0dXNDb2RlICE9PSAyMDApIHtcbiAgICAgICAgdmFyIGVycm9yID0gXCJWV08tU0RLIC0gW0VSUk9SXTogXCIuY29uY2F0KGdldEN1cnJlbnRUaW1lKCksIFwiIFJlcXVlc3QgZmFpbGVkIGZvciBmZXRjaGluZyBhY2NvdW50IHNldHRpbmdzLiBHb3QgU3RhdHVzIENvZGU6IFwiKS5jb25jYXQoc3RhdHVzQ29kZSwgXCIgYW5kIG1lc3NhZ2U6IFwiKS5jb25jYXQocmF3RGF0YSk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlc29sdmUocGFyc2VkRGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiVldPLVNESyAtIFtFUlJPUl06IFwiLmNvbmNhdChnZXRDdXJyZW50VGltZSgpLCBcIiBSZXF1ZXN0IGZhaWxlZCBmb3IgZmV0Y2hpbmcgYWNjb3VudCBzZXR0aW5ncyAtIFwiKS5jb25jYXQoZXJyLm1lc3NhZ2UpKTtcbiAgICAgIHJlamVjdChlcnIpO1xuICAgIH1cbiAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gU2V0dGluZ3NGaWxlVXRpbDtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9saWIvdXRpbHMvVXVpZFV0aWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9saWIvdXRpbHMvVXVpZFV0aWwuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciB1dWlkdjUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB1dWlkL3Y1ICovIFwiLi9ub2RlX21vZHVsZXMvdXVpZC92NS5qc1wiKTtcblxudmFyIENvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvbnN0YW50cyAqLyBcIi4vbGliL2NvbnN0YW50cy9pbmRleC5qc1wiKTtcblxudmFyIFZXT19OQU1FU1BBQ0UgPSB1dWlkdjUoQ29uc3RhbnRzLlNFRURfVVJMLCB1dWlkdjUuVVJMKTtcbnZhciBVdWlkVXRpbCA9IHtcbiAgZ2VuZXJhdGVGb3I6IGZ1bmN0aW9uIGdlbmVyYXRlRm9yKHVzZXJJZCwgYWNjb3VudElkKSB7XG4gICAgdXNlcklkID0gXCJcIi5jb25jYXQodXNlcklkKTsgLy8gdHlwZS1jYXN0XG5cbiAgICB2YXIgaGFzaCA9IFwiXCIuY29uY2F0KGFjY291bnRJZCk7XG4gICAgdmFyIHVzZXJJZE5hbWVzcGFjZSA9IFV1aWRVdGlsLmdlbmVyYXRlKGhhc2gsIFZXT19OQU1FU1BBQ0UpO1xuICAgIHZhciB1dWlkRm9yVXNlcklkQWNjb3VudElkID0gVXVpZFV0aWwuZ2VuZXJhdGUodXNlcklkLCB1c2VySWROYW1lc3BhY2UpO1xuICAgIHZhciBkZXNpcmVkVXVpZCA9IHV1aWRGb3JVc2VySWRBY2NvdW50SWQucmVwbGFjZSgvLS9naSwgJycpLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuIGRlc2lyZWRVdWlkO1xuICB9LFxuICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUobmFtZSwgbmFtZXNwYWNlKSB7XG4gICAgaWYgKCFuYW1lIHx8ICFuYW1lc3BhY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gdXVpZHY1KG5hbWUsIG5hbWVzcGFjZSk7XG4gIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IFV1aWRVdGlsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2xpYi91dGlscy9WYWxpZGF0ZVV0aWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbGliL3V0aWxzL1ZhbGlkYXRlVXRpbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIF9BUElNZXRob2RBcmd1bWVudHNWYTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBEYXRhVHlwZVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0RhdGFUeXBlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiKTtcblxudmFyIERhdGFUeXBlRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0RhdGFUeXBlRW51bSAqLyBcIi4vbGliL2VudW1zL0RhdGFUeXBlRW51bS5qc1wiKTtcblxudmFyIEFwaUVudW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9lbnVtcy9BcGlFbnVtICovIFwiLi9saWIvZW51bXMvQXBpRW51bS5qc1wiKTtcblxudmFyIEdvYWxUeXBlRW51bSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2VudW1zL0dvYWxUeXBlRW51bSAqLyBcIi4vbGliL2VudW1zL0dvYWxUeXBlRW51bS5qc1wiKTtcblxudmFyIEFQSU1ldGhvZEFyZ3VtZW50c1ZhbGlkYXRpb25FbnVtID0gKF9BUElNZXRob2RBcmd1bWVudHNWYSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX0FQSU1ldGhvZEFyZ3VtZW50c1ZhLCBBcGlFbnVtLkFDVElWQVRFLCBmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgY2FtcGFpZ25LZXkgPSBfcmVmLmNhbXBhaWduS2V5LFxuICAgICAgdXNlcklkID0gX3JlZi51c2VySWQsXG4gICAgICBfcmVmJGN1c3RvbVZhcmlhYmxlcyA9IF9yZWYuY3VzdG9tVmFyaWFibGVzLFxuICAgICAgY3VzdG9tVmFyaWFibGVzID0gX3JlZiRjdXN0b21WYXJpYWJsZXMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRjdXN0b21WYXJpYWJsZXMsXG4gICAgICBfcmVmJHZhcmlhdGlvblRhcmdldGkgPSBfcmVmLnZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyA9IF9yZWYkdmFyaWF0aW9uVGFyZ2V0aSA9PT0gdm9pZCAwID8ge30gOiBfcmVmJHZhcmlhdGlvblRhcmdldGksXG4gICAgICBfcmVmJHVzZXJTdG9yYWdlRGF0YSA9IF9yZWYudXNlclN0b3JhZ2VEYXRhLFxuICAgICAgdXNlclN0b3JhZ2VEYXRhID0gX3JlZiR1c2VyU3RvcmFnZURhdGEgPT09IHZvaWQgMCA/IHt9IDogX3JlZiR1c2VyU3RvcmFnZURhdGEsXG4gICAgICBfcmVmJHNob3VsZFRyYWNrUmV0dXIgPSBfcmVmLnNob3VsZFRyYWNrUmV0dXJuaW5nVXNlcixcbiAgICAgIHNob3VsZFRyYWNrUmV0dXJuaW5nVXNlciA9IF9yZWYkc2hvdWxkVHJhY2tSZXR1ciA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJHNob3VsZFRyYWNrUmV0dXIsXG4gICAgICBfcmVmJG1ldGFEYXRhID0gX3JlZi5tZXRhRGF0YSxcbiAgICAgIG1ldGFEYXRhID0gX3JlZiRtZXRhRGF0YSA9PT0gdm9pZCAwID8ge30gOiBfcmVmJG1ldGFEYXRhO1xuICByZXR1cm4gW3tcbiAgICBrZXk6ICdjYW1wYWlnbktleScsXG4gICAgdmFsdWU6IGNhbXBhaWduS2V5LFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5TVFJJTkdcbiAgfSwge1xuICAgIGtleTogJ3VzZXJJZCcsXG4gICAgdmFsdWU6IHVzZXJJZCxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uU1RSSU5HXG4gIH0sIHtcbiAgICBrZXk6ICdjdXN0b21WYXJpYWJsZXMnLFxuICAgIHZhbHVlOiBjdXN0b21WYXJpYWJsZXMsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLk9CSkVDVFxuICB9LCB7XG4gICAga2V5OiAndmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzJyxcbiAgICB2YWx1ZTogdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5PQkpFQ1RcbiAgfSwge1xuICAgIGtleTogJ3VzZXJTdG9yYWdlRGF0YScsXG4gICAgdmFsdWU6IHVzZXJTdG9yYWdlRGF0YSxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uT0JKRUNUXG4gIH0sIHtcbiAgICBrZXk6ICdzaG91bGRUcmFja1JldHVybmluZ1VzZXInLFxuICAgIHZhbHVlOiBzaG91bGRUcmFja1JldHVybmluZ1VzZXIsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLkJPT0xFQU5cbiAgfSwge1xuICAgIGtleTogJ21ldGFEYXRhJyxcbiAgICB2YWx1ZTogbWV0YURhdGEsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLk9CSkVDVFxuICB9XTtcbn0pLCBfZGVmaW5lUHJvcGVydHkoX0FQSU1ldGhvZEFyZ3VtZW50c1ZhLCBBcGlFbnVtLlRSQUNLLCBmdW5jdGlvbiAoX3JlZjIpIHtcbiAgdmFyIGNhbXBhaWduS2V5ID0gX3JlZjIuY2FtcGFpZ25LZXksXG4gICAgICB1c2VySWQgPSBfcmVmMi51c2VySWQsXG4gICAgICBnb2FsSWRlbnRpZmllciA9IF9yZWYyLmdvYWxJZGVudGlmaWVyLFxuICAgICAgX3JlZjIkY3VzdG9tVmFyaWFibGVzID0gX3JlZjIuY3VzdG9tVmFyaWFibGVzLFxuICAgICAgY3VzdG9tVmFyaWFibGVzID0gX3JlZjIkY3VzdG9tVmFyaWFibGVzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYyJGN1c3RvbVZhcmlhYmxlcyxcbiAgICAgIF9yZWYyJHZhcmlhdGlvblRhcmdldCA9IF9yZWYyLnZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyA9IF9yZWYyJHZhcmlhdGlvblRhcmdldCA9PT0gdm9pZCAwID8ge30gOiBfcmVmMiR2YXJpYXRpb25UYXJnZXQsXG4gICAgICBfcmVmMiR1c2VyU3RvcmFnZURhdGEgPSBfcmVmMi51c2VyU3RvcmFnZURhdGEsXG4gICAgICB1c2VyU3RvcmFnZURhdGEgPSBfcmVmMiR1c2VyU3RvcmFnZURhdGEgPT09IHZvaWQgMCA/IHt9IDogX3JlZjIkdXNlclN0b3JhZ2VEYXRhLFxuICAgICAgX3JlZjIkZ29hbFR5cGVUb1RyYWNrID0gX3JlZjIuZ29hbFR5cGVUb1RyYWNrLFxuICAgICAgZ29hbFR5cGVUb1RyYWNrID0gX3JlZjIkZ29hbFR5cGVUb1RyYWNrID09PSB2b2lkIDAgPyBHb2FsVHlwZUVudW0uQUxMIDogX3JlZjIkZ29hbFR5cGVUb1RyYWNrLFxuICAgICAgX3JlZjIkc2hvdWxkVHJhY2tSZXR1ID0gX3JlZjIuc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyLFxuICAgICAgc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyID0gX3JlZjIkc2hvdWxkVHJhY2tSZXR1ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJHNob3VsZFRyYWNrUmV0dSxcbiAgICAgIF9yZWYyJG1ldGFEYXRhID0gX3JlZjIubWV0YURhdGEsXG4gICAgICBtZXRhRGF0YSA9IF9yZWYyJG1ldGFEYXRhID09PSB2b2lkIDAgPyB7fSA6IF9yZWYyJG1ldGFEYXRhO1xuICByZXR1cm4gW3tcbiAgICBrZXk6ICdjYW1wYWlnbktleScsXG4gICAgdmFsdWU6IGNhbXBhaWduS2V5LFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5TVFJJTkdfTlVMTF9VTkRFRklORURfQVJSQVlcbiAgfSwge1xuICAgIGtleTogJ3VzZXJJZCcsXG4gICAgdmFsdWU6IHVzZXJJZCxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uU1RSSU5HXG4gIH0sIHtcbiAgICBrZXk6ICdnb2FsSWRlbnRpZmllcicsXG4gICAgdmFsdWU6IGdvYWxJZGVudGlmaWVyLFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5TVFJJTkdcbiAgfSwge1xuICAgIGtleTogJ2N1c3RvbVZhcmlhYmxlcycsXG4gICAgdmFsdWU6IGN1c3RvbVZhcmlhYmxlcyxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uT0JKRUNUXG4gIH0sIHtcbiAgICBrZXk6ICd2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMnLFxuICAgIHZhbHVlOiB2YXJpYXRpb25UYXJnZXRpbmdWYXJpYWJsZXMsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLk9CSkVDVFxuICB9LCB7XG4gICAga2V5OiAndXNlclN0b3JhZ2VEYXRhJyxcbiAgICB2YWx1ZTogdXNlclN0b3JhZ2VEYXRhLFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5PQkpFQ1RcbiAgfSwge1xuICAgIGtleTogJ2dvYWxUeXBlVG9UcmFjaycsXG4gICAgdmFsdWU6IGdvYWxUeXBlVG9UcmFjayxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uU1RSSU5HXG4gIH0sIHtcbiAgICBrZXk6ICdzaG91bGRUcmFja1JldHVybmluZ1VzZXInLFxuICAgIHZhbHVlOiBzaG91bGRUcmFja1JldHVybmluZ1VzZXIsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLkJPT0xFQU5cbiAgfSwge1xuICAgIGtleTogJ21ldGFEYXRhJyxcbiAgICB2YWx1ZTogbWV0YURhdGEsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLk9CSkVDVFxuICB9XTtcbn0pLCBfZGVmaW5lUHJvcGVydHkoX0FQSU1ldGhvZEFyZ3VtZW50c1ZhLCBBcGlFbnVtLklTX0ZFQVRVUkVfRU5BQkxFRCwgZnVuY3Rpb24gKF9yZWYzKSB7XG4gIHZhciBjYW1wYWlnbktleSA9IF9yZWYzLmNhbXBhaWduS2V5LFxuICAgICAgdXNlcklkID0gX3JlZjMudXNlcklkLFxuICAgICAgX3JlZjMkY3VzdG9tVmFyaWFibGVzID0gX3JlZjMuY3VzdG9tVmFyaWFibGVzLFxuICAgICAgY3VzdG9tVmFyaWFibGVzID0gX3JlZjMkY3VzdG9tVmFyaWFibGVzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYzJGN1c3RvbVZhcmlhYmxlcyxcbiAgICAgIF9yZWYzJHZhcmlhdGlvblRhcmdldCA9IF9yZWYzLnZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyA9IF9yZWYzJHZhcmlhdGlvblRhcmdldCA9PT0gdm9pZCAwID8ge30gOiBfcmVmMyR2YXJpYXRpb25UYXJnZXQsXG4gICAgICBfcmVmMyR1c2VyU3RvcmFnZURhdGEgPSBfcmVmMy51c2VyU3RvcmFnZURhdGEsXG4gICAgICB1c2VyU3RvcmFnZURhdGEgPSBfcmVmMyR1c2VyU3RvcmFnZURhdGEgPT09IHZvaWQgMCA/IHt9IDogX3JlZjMkdXNlclN0b3JhZ2VEYXRhLFxuICAgICAgX3JlZjMkc2hvdWxkVHJhY2tSZXR1ID0gX3JlZjMuc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyLFxuICAgICAgc2hvdWxkVHJhY2tSZXR1cm5pbmdVc2VyID0gX3JlZjMkc2hvdWxkVHJhY2tSZXR1ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYzJHNob3VsZFRyYWNrUmV0dSxcbiAgICAgIF9yZWYzJG1ldGFEYXRhID0gX3JlZjMubWV0YURhdGEsXG4gICAgICBtZXRhRGF0YSA9IF9yZWYzJG1ldGFEYXRhID09PSB2b2lkIDAgPyB7fSA6IF9yZWYzJG1ldGFEYXRhO1xuICByZXR1cm4gW3tcbiAgICBrZXk6ICdjYW1wYWlnbktleScsXG4gICAgdmFsdWU6IGNhbXBhaWduS2V5LFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5TVFJJTkdcbiAgfSwge1xuICAgIGtleTogJ3VzZXJJZCcsXG4gICAgdmFsdWU6IHVzZXJJZCxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uU1RSSU5HXG4gIH0sIHtcbiAgICBrZXk6ICdjdXN0b21WYXJpYWJsZXMnLFxuICAgIHZhbHVlOiBjdXN0b21WYXJpYWJsZXMsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLk9CSkVDVFxuICB9LCB7XG4gICAga2V5OiAndmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzJyxcbiAgICB2YWx1ZTogdmFyaWF0aW9uVGFyZ2V0aW5nVmFyaWFibGVzLFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5PQkpFQ1RcbiAgfSwge1xuICAgIGtleTogJ3VzZXJTdG9yYWdlRGF0YScsXG4gICAgdmFsdWU6IHVzZXJTdG9yYWdlRGF0YSxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uT0JKRUNUXG4gIH0sIHtcbiAgICBrZXk6ICdzaG91bGRUcmFja1JldHVybmluZ1VzZXInLFxuICAgIHZhbHVlOiBzaG91bGRUcmFja1JldHVybmluZ1VzZXIsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLkJPT0xFQU5cbiAgfSwge1xuICAgIGtleTogJ21ldGFEYXRhJyxcbiAgICB2YWx1ZTogbWV0YURhdGEsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLk9CSkVDVFxuICB9XTtcbn0pLCBfZGVmaW5lUHJvcGVydHkoX0FQSU1ldGhvZEFyZ3VtZW50c1ZhLCBBcGlFbnVtLkdFVF9GRUFUVVJFX1ZBUklBQkxFX1ZBTFVFLCBmdW5jdGlvbiAoX3JlZjQpIHtcbiAgdmFyIGNhbXBhaWduS2V5ID0gX3JlZjQuY2FtcGFpZ25LZXksXG4gICAgICB2YXJpYWJsZUtleSA9IF9yZWY0LnZhcmlhYmxlS2V5LFxuICAgICAgdXNlcklkID0gX3JlZjQudXNlcklkLFxuICAgICAgX3JlZjQkY3VzdG9tVmFyaWFibGVzID0gX3JlZjQuY3VzdG9tVmFyaWFibGVzLFxuICAgICAgY3VzdG9tVmFyaWFibGVzID0gX3JlZjQkY3VzdG9tVmFyaWFibGVzID09PSB2b2lkIDAgPyB7fSA6IF9yZWY0JGN1c3RvbVZhcmlhYmxlcyxcbiAgICAgIF9yZWY0JHZhcmlhdGlvblRhcmdldCA9IF9yZWY0LnZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICAgIHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyA9IF9yZWY0JHZhcmlhdGlvblRhcmdldCA9PT0gdm9pZCAwID8ge30gOiBfcmVmNCR2YXJpYXRpb25UYXJnZXQsXG4gICAgICBfcmVmNCR1c2VyU3RvcmFnZURhdGEgPSBfcmVmNC51c2VyU3RvcmFnZURhdGEsXG4gICAgICB1c2VyU3RvcmFnZURhdGEgPSBfcmVmNCR1c2VyU3RvcmFnZURhdGEgPT09IHZvaWQgMCA/IHt9IDogX3JlZjQkdXNlclN0b3JhZ2VEYXRhLFxuICAgICAgX3JlZjQkbWV0YURhdGEgPSBfcmVmNC5tZXRhRGF0YSxcbiAgICAgIG1ldGFEYXRhID0gX3JlZjQkbWV0YURhdGEgPT09IHZvaWQgMCA/IHt9IDogX3JlZjQkbWV0YURhdGE7XG4gIHJldHVybiBbe1xuICAgIGtleTogJ2NhbXBhaWduS2V5JyxcbiAgICB2YWx1ZTogY2FtcGFpZ25LZXksXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLlNUUklOR1xuICB9LCB7XG4gICAga2V5OiAndmFyaWFibGVLZXknLFxuICAgIHZhbHVlOiB2YXJpYWJsZUtleSxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uU1RSSU5HXG4gIH0sIHtcbiAgICBrZXk6ICd1c2VySWQnLFxuICAgIHZhbHVlOiB1c2VySWQsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLlNUUklOR1xuICB9LCB7XG4gICAga2V5OiAnY3VzdG9tVmFyaWFibGVzJyxcbiAgICB2YWx1ZTogY3VzdG9tVmFyaWFibGVzLFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5PQkpFQ1RcbiAgfSwge1xuICAgIGtleTogJ3ZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcycsXG4gICAgdmFsdWU6IHZhcmlhdGlvblRhcmdldGluZ1ZhcmlhYmxlcyxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uT0JKRUNUXG4gIH0sIHtcbiAgICBrZXk6ICd1c2VyU3RvcmFnZURhdGEnLFxuICAgIHZhbHVlOiB1c2VyU3RvcmFnZURhdGEsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLk9CSkVDVFxuICB9LCB7XG4gICAga2V5OiAnbWV0YURhdGEnLFxuICAgIHZhbHVlOiBtZXRhRGF0YSxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uT0JKRUNUXG4gIH1dO1xufSksIF9kZWZpbmVQcm9wZXJ0eShfQVBJTWV0aG9kQXJndW1lbnRzVmEsIEFwaUVudW0uUFVTSCwgZnVuY3Rpb24gKF9yZWY1KSB7XG4gIHZhciB0YWdLZXkgPSBfcmVmNS50YWdLZXksXG4gICAgICB0YWdWYWx1ZSA9IF9yZWY1LnRhZ1ZhbHVlLFxuICAgICAgdXNlcklkID0gX3JlZjUudXNlcklkLFxuICAgICAgY3VzdG9tRGltZW5zaW9uTWFwID0gX3JlZjUuY3VzdG9tRGltZW5zaW9uTWFwO1xuICByZXR1cm4gW3tcbiAgICBrZXk6ICd0YWdLZXknLFxuICAgIHZhbHVlOiB0YWdLZXksXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLlNUUklOR1xuICB9LCB7XG4gICAga2V5OiAndGFnVmFsdWUnLFxuICAgIHZhbHVlOiB0YWdWYWx1ZSxcbiAgICB0eXBlOiBEYXRhVHlwZUVudW0uU1RSSU5HXG4gIH0sIHtcbiAgICBrZXk6ICd1c2VySWQnLFxuICAgIHZhbHVlOiB1c2VySWQsXG4gICAgdHlwZTogRGF0YVR5cGVFbnVtLlNUUklOR1xuICB9LCB7XG4gICAga2V5OiAnY3VzdG9tRGltZW5zaW9uTWFwJyxcbiAgICB2YWx1ZTogY3VzdG9tRGltZW5zaW9uTWFwLFxuICAgIHR5cGU6IERhdGFUeXBlRW51bS5PQkpFQ1RcbiAgfV07XG59KSwgX0FQSU1ldGhvZEFyZ3VtZW50c1ZhKTsgLy8gYm90aCBoYXZlIHNhbWVcblxuQVBJTWV0aG9kQXJndW1lbnRzVmFsaWRhdGlvbkVudW1bQXBpRW51bS5HRVRfVkFSSUFUSU9OX05BTUVdID0gQVBJTWV0aG9kQXJndW1lbnRzVmFsaWRhdGlvbkVudW1bQXBpRW51bS5BQ1RJVkFURV07XG52YXIgVmFsaWRhdGVVdGlsID0ge1xuICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiAhISh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlKTtcbiAgfSxcbiAgaXNWYWxpZFN0cmluZzogZnVuY3Rpb24gaXNWYWxpZFN0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiBWYWxpZGF0ZVV0aWwuaXNWYWxpZFZhbHVlKHZhbHVlKSAmJiBEYXRhVHlwZVV0aWwuaXNTdHJpbmcodmFsdWUpO1xuICB9LFxuICBpc1ZhbGlkTnVtYmVyOiBmdW5jdGlvbiBpc1ZhbGlkTnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIFZhbGlkYXRlVXRpbC5pc1ZhbGlkVmFsdWUodmFsdWUpICYmIERhdGFUeXBlVXRpbC5pc051bWJlcih2YWx1ZSk7XG4gIH0sXG4gIGlzVmFsaWRGdW5jdGlvbjogZnVuY3Rpb24gaXNWYWxpZEZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIFZhbGlkYXRlVXRpbC5pc1ZhbGlkVmFsdWUodmFsdWUpICYmIERhdGFUeXBlVXRpbC5pc0Z1bmN0aW9uKHZhbHVlKTtcbiAgfSxcbiAgaXNWYWxpZEJvb2xlYW46IGZ1bmN0aW9uIGlzVmFsaWRCb29sZWFuKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgRGF0YVR5cGVVdGlsLmlzQm9vbGVhbih2YWx1ZSk7XG4gIH0sXG4gIGlzVmFsaWRPYmplY3Q6IGZ1bmN0aW9uIGlzVmFsaWRPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCAmJiBEYXRhVHlwZVV0aWwuaXNPYmplY3QodmFsdWUpO1xuICB9LFxuICBhcmVWYWxpZFBhcmFtc0ZvckFQSU1ldGhvZDogZnVuY3Rpb24gYXJlVmFsaWRQYXJhbXNGb3JBUElNZXRob2QoYXJnc09iaikge1xuICAgIHZhciBpc1ZhbGlkID0gZmFsc2U7XG4gICAgdmFyIGFyZ3MgPSBBUElNZXRob2RBcmd1bWVudHNWYWxpZGF0aW9uRW51bVthcmdzT2JqLm1ldGhvZF0oYXJnc09iaik7XG4gICAgdmFyIHZhbGlkYXRvcnMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGFyZ0NvbmZpZyA9IGFyZ3NbaV07XG4gICAgICB2YXIgYXJnVmFsdWUgPSBhcmdDb25maWcudmFsdWU7XG4gICAgICB2YXIgZGF0YVR5cGUgPSBhcmdDb25maWcudHlwZTsgLy8gbGV0IHZhbHVlO1xuXG4gICAgICBzd2l0Y2ggKGRhdGFUeXBlKSB7XG4gICAgICAgIGNhc2UgRGF0YVR5cGVFbnVtLk5VTUJFUjpcbiAgICAgICAgICB2YWxpZGF0b3JzLnB1c2goVmFsaWRhdGVVdGlsLmlzVmFsaWROdW1iZXIoYXJnVmFsdWUpKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIERhdGFUeXBlRW51bS5TVFJJTkc6XG4gICAgICAgICAgdmFsaWRhdG9ycy5wdXNoKFZhbGlkYXRlVXRpbC5pc1ZhbGlkU3RyaW5nKGFyZ1ZhbHVlKSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBEYXRhVHlwZUVudW0uQk9PTEVBTjpcbiAgICAgICAgICB2YWxpZGF0b3JzLnB1c2goVmFsaWRhdGVVdGlsLmlzVmFsaWRCb29sZWFuKGFyZ1ZhbHVlKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIGNhc2UgRGF0YVR5cGVFbnVtLkZVTkNUSU9OOlxuICAgICAgICAvLyAgIHZhbGlkYXRvcnMucHVzaChWYWxpZGF0ZVV0aWwuaXNWYWxpZEZ1bmN0aW9uKGFyZ1ZhbHVlKSk7XG4gICAgICAgIC8vICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBEYXRhVHlwZUVudW0uT0JKRUNUOlxuICAgICAgICAgIHZhbGlkYXRvcnMucHVzaChWYWxpZGF0ZVV0aWwuaXNWYWxpZE9iamVjdChhcmdWYWx1ZSkpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRGF0YVR5cGVFbnVtLlNUUklOR19OVUxMX1VOREVGSU5FRF9BUlJBWTpcbiAgICAgICAgICB2YXIgdmFsdWUgPSBWYWxpZGF0ZVV0aWwuaXNWYWxpZFN0cmluZyhhcmdWYWx1ZSkgfHwgRGF0YVR5cGVVdGlsLmlzVW5kZWZpbmVkKGFyZ1ZhbHVlKSB8fCBEYXRhVHlwZVV0aWwuaXNOdWxsKGFyZ1ZhbHVlKSB8fCBEYXRhVHlwZVV0aWwuaXNBcnJheShhcmdWYWx1ZSk7XG4gICAgICAgICAgdmFsaWRhdG9ycy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gY2FzZSBEYXRhVHlwZUVudW0uTlVNQkVSX1NUUklORzpcbiAgICAgICAgLy8gICB2YWx1ZSA9IFZhbGlkYXRlVXRpbC5pc1ZhbGlkTnVtYmVyKGFyZ1ZhbHVlKSB8fCBWYWxpZGF0ZVV0aWwuaXNWYWxpZFN0cmluZyhhcmdWYWx1ZSk7XG4gICAgICAgIC8vICAgdmFsaWRhdG9ycy5wdXNoKHZhbHVlKTtcbiAgICAgICAgLy8gICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpc1ZhbGlkID0gdmFsaWRhdG9ycy5ldmVyeShmdW5jdGlvbiAodmFsKSB7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH0pO1xuICAgIHJldHVybiBpc1ZhbGlkO1xuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBWYWxpZGF0ZVV0aWw7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbGliL3V0aWxzL1hoclV0aWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2xpYi91dGlscy9YaHJVdGlsLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOS0yMDIyIFdpbmdpZnkgU29mdHdhcmUgUHZ0LiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRnVuY3Rpb25VdGlsICovIFwiLi9saWIvdXRpbHMvRnVuY3Rpb25VdGlsLmpzXCIpLFxuICAgIGdldEN1cnJlbnRUaW1lID0gX3JlcXVpcmUuZ2V0Q3VycmVudFRpbWU7XG5cbnZhciBfcmVxdWlyZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0RhdGFUeXBlVXRpbCAqLyBcIi4vbGliL3V0aWxzL0RhdGFUeXBlVXRpbC5qc1wiKSxcbiAgICBpc09iamVjdCA9IF9yZXF1aXJlMi5pc09iamVjdCxcbiAgICBpc0Z1bmN0aW9uID0gX3JlcXVpcmUyLmlzRnVuY3Rpb247XG5cbnZhciBYaHJVdGlsID0ge1xuICBfZ2V0U3RvcmVkU2V0dGluZ3M6IGZ1bmN0aW9uIF9nZXRTdG9yZWRTZXR0aW5ncyh1c2VyU3RvcmFnZVNlcnZpY2UpIHtcbiAgICB2YXIgaXNTdG9yZWREYXRhID0gZmFsc2U7XG4gICAgdmFyIHBhcnNlZFNldHRpbmdzO1xuXG4gICAgaWYgKHVzZXJTdG9yYWdlU2VydmljZSAmJiBpc09iamVjdCh1c2VyU3RvcmFnZVNlcnZpY2UpICYmIGlzRnVuY3Rpb24odXNlclN0b3JhZ2VTZXJ2aWNlLmdldFNldHRpbmdzKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHNldHRpbmdzID0gdXNlclN0b3JhZ2VTZXJ2aWNlLmdldFNldHRpbmdzKCk7XG4gICAgICAgIHBhcnNlZFNldHRpbmdzID0gSlNPTi5wYXJzZShzZXR0aW5ncyk7XG5cbiAgICAgICAgaWYgKHBhcnNlZFNldHRpbmdzICYmIGlzT2JqZWN0KHBhcnNlZFNldHRpbmdzKSAmJiBPYmplY3Qua2V5cyhwYXJzZWRTZXR0aW5ncykubGVuZ3RoID4gMykge1xuICAgICAgICAgIHZhciBpbmZvID0gXCJWV08tU0RLIC0gW0lORk9dOiBcIi5jb25jYXQoZ2V0Q3VycmVudFRpbWUoKSwgXCIgVldPIHNldHRpbmdzIGZvdW5kIGluIFN0b3JhZ2UgU2VydmljZS5cIik7XG4gICAgICAgICAgY29uc29sZS5pbmZvKGluZm8pO1xuICAgICAgICAgIGlzU3RvcmVkRGF0YSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocGFyc2VkU2V0dGluZ3MpIHtcbiAgICAgICAgICB2YXIgZXJyb3IgPSBcIlZXTy1TREsgLSBbRVJST1JdOiBcIi5jb25jYXQoZ2V0Q3VycmVudFRpbWUoKSwgXCIgVldPIHNldHRpbmdzIGZvdW5kIGluIFN0b3JhZ2UgU2VydmljZSBpcyBub3QgdmFsaWQuXCIpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB3YXJuaW5nID0gXCJWV08tU0RLIC0gW1dBUk5JTkddOiBcIi5jb25jYXQoZ2V0Q3VycmVudFRpbWUoKSwgXCIgVldPIHNldHRpbmdzIGlzIGVtcHR5IGluIFN0b3JhZ2UgU2VydmljZS5cIik7XG4gICAgICAgICAgY29uc29sZS53YXJuKHdhcm5pbmcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFyIF9lcnJvciA9IFwiVldPLVNESyAtIFtFUlJPUl06IFwiLmNvbmNhdChnZXRDdXJyZW50VGltZSgpLCBcIiBWV08gc2V0dGluZ3MgZm91bmQgaW4gU3RvcmFnZSBTZXJ2aWNlIGlzIG5vdCB2YWxpZC4gXCIpLmNvbmNhdChlcnIpO1xuXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoX2Vycm9yKTtcbiAgICAgICAgaXNTdG9yZWREYXRhID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzU3RvcmVkRGF0YTogaXNTdG9yZWREYXRhLFxuICAgICAgcGFyc2VkU2V0dGluZ3M6IHBhcnNlZFNldHRpbmdzXG4gICAgfTtcbiAgfSxcbiAgc2VuZDogZnVuY3Rpb24gc2VuZCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBtZXRob2QgPSBfcmVmLm1ldGhvZCxcbiAgICAgICAgdXJsID0gX3JlZi51cmwsXG4gICAgICAgIHBheWxvYWQgPSBfcmVmLnBheWxvYWQsXG4gICAgICAgIHVzZXJTdG9yYWdlU2VydmljZSA9IF9yZWYudXNlclN0b3JhZ2VTZXJ2aWNlO1xuXG4gICAgaWYgKCF1cmwgfHwgIW1ldGhvZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgX1hoclV0aWwkX2dldFN0b3JlZFNlID0gWGhyVXRpbC5fZ2V0U3RvcmVkU2V0dGluZ3ModXNlclN0b3JhZ2VTZXJ2aWNlKSxcbiAgICAgICAgICBpc1N0b3JlZERhdGEgPSBfWGhyVXRpbCRfZ2V0U3RvcmVkU2UuaXNTdG9yZWREYXRhLFxuICAgICAgICAgIHBhcnNlZFNldHRpbmdzID0gX1hoclV0aWwkX2dldFN0b3JlZFNlLnBhcnNlZFNldHRpbmdzO1xuXG4gICAgICBpZiAoaXNTdG9yZWREYXRhKSB7XG4gICAgICAgIHJlc29sdmUocGFyc2VkU2V0dGluZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIF90aGlzLnhockhhbmRsZXIoeGhyLCBtZXRob2QsIHVybCwgcGF5bG9hZCwgdXNlclN0b3JhZ2VTZXJ2aWNlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICB4aHJIYW5kbGVyOiBmdW5jdGlvbiB4aHJIYW5kbGVyKHhociwgbWV0aG9kLCB1cmwsIHBheWxvYWQsIHVzZXJTdG9yYWdlU2VydmljZSwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAobWV0aG9kID09PSAnR0VUJykge1xuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLnhock9uTG9hZCh4aHIsIHVzZXJTdG9yYWdlU2VydmljZSwgcmVzb2x2ZSk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLnhock9uRXJyb3IoeGhyLCByZWplY3QpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVqZWN0KCdTb21ldGhpbmcgd2VudCB3cm9uZycpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgIH1cbiAgfSxcbiAgeGhyT25Mb2FkOiBmdW5jdGlvbiB4aHJPbkxvYWQoeGhyLCB1c2VyU3RvcmFnZVNlcnZpY2UsIHJlc29sdmUpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHBhcnNlZFhoclJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xuXG4gICAgICBpZiAodXNlclN0b3JhZ2VTZXJ2aWNlICYmIGlzT2JqZWN0KHVzZXJTdG9yYWdlU2VydmljZSkgJiYgaXNGdW5jdGlvbih1c2VyU3RvcmFnZVNlcnZpY2Uuc2V0U2V0dGluZ3MpKSB7XG4gICAgICAgIHVzZXJTdG9yYWdlU2VydmljZS5zZXRTZXR0aW5ncyh4aHIucmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgICByZXNvbHZlKHBhcnNlZFhoclJlc3BvbnNlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH0sXG4gIHhock9uRXJyb3I6IGZ1bmN0aW9uIHhock9uRXJyb3IoeGhyLCByZWplY3QpIHtcbiAgICB2YXIgZXJyb3IgPSBcIlZXTy1TREsgLSBbRVJST1JdOiBcIi5jb25jYXQoZ2V0Q3VycmVudFRpbWUoKSwgXCIgUmVxdWVzdCBmYWlsZWQgZm9yIGZldGNoaW5nIGFjY291bnQgc2V0dGluZ3MuIEdvdCBTdGF0dXMgQ29kZTogXCIpLmNvbmNhdCh4aHIuc3RhdHVzKTtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICByZWplY3QoZXJyb3IpO1xuICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBYaHJVdGlsO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9tdXJtdXJoYXNoL211cm11cmhhc2guanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbm9kZV9tb2R1bGVzL211cm11cmhhc2gvbXVybXVyaGFzaC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuKGZ1bmN0aW9uKCl7XG4gIHZhciBfZ2xvYmFsID0gdGhpcztcblxuICAvKipcbiAgICogSlMgSW1wbGVtZW50YXRpb24gb2YgTXVybXVySGFzaDJcbiAgICpcbiAgICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOmdhcnkuY291cnRAZ21haWwuY29tXCI+R2FyeSBDb3VydDwvYT5cbiAgICogQHNlZSBodHRwOi8vZ2l0aHViLmNvbS9nYXJ5Y291cnQvbXVybXVyaGFzaC1qc1xuICAgKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86YWFwcGxlYnlAZ21haWwuY29tXCI+QXVzdGluIEFwcGxlYnk8L2E+XG4gICAqIEBzZWUgaHR0cDovL3NpdGVzLmdvb2dsZS5jb20vc2l0ZS9tdXJtdXJoYXNoL1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIEFTQ0lJIG9ubHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlZWQgUG9zaXRpdmUgaW50ZWdlciBvbmx5XG4gICAqIEByZXR1cm4ge251bWJlcn0gMzItYml0IHBvc2l0aXZlIGludGVnZXIgaGFzaFxuICAgKi9cbiAgZnVuY3Rpb24gTXVybXVySGFzaFYyKHN0ciwgc2VlZCkge1xuICAgIHZhclxuICAgICAgbCA9IHN0ci5sZW5ndGgsXG4gICAgICBoID0gc2VlZCBeIGwsXG4gICAgICBpID0gMCxcbiAgICAgIGs7XG5cbiAgICB3aGlsZSAobCA+PSA0KSB7XG4gICAgICBrID1cbiAgICAgICAgKChzdHIuY2hhckNvZGVBdChpKSAmIDB4ZmYpKSB8XG4gICAgICAgICgoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4ZmYpIDw8IDgpIHxcbiAgICAgICAgKChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHhmZikgPDwgMTYpIHxcbiAgICAgICAgKChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHhmZikgPDwgMjQpO1xuXG4gICAgICBrID0gKCgoayAmIDB4ZmZmZikgKiAweDViZDFlOTk1KSArICgoKChrID4+PiAxNikgKiAweDViZDFlOTk1KSAmIDB4ZmZmZikgPDwgMTYpKTtcbiAgICAgIGsgXj0gayA+Pj4gMjQ7XG4gICAgICBrID0gKCgoayAmIDB4ZmZmZikgKiAweDViZDFlOTk1KSArICgoKChrID4+PiAxNikgKiAweDViZDFlOTk1KSAmIDB4ZmZmZikgPDwgMTYpKTtcblxuICAgIGggPSAoKChoICYgMHhmZmZmKSAqIDB4NWJkMWU5OTUpICsgKCgoKGggPj4+IDE2KSAqIDB4NWJkMWU5OTUpICYgMHhmZmZmKSA8PCAxNikpIF4gaztcblxuICAgICAgbCAtPSA0O1xuICAgICAgKytpO1xuICAgIH1cblxuICAgIHN3aXRjaCAobCkge1xuICAgIGNhc2UgMzogaCBePSAoc3RyLmNoYXJDb2RlQXQoaSArIDIpICYgMHhmZikgPDwgMTY7XG4gICAgY2FzZSAyOiBoIF49IChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZmKSA8PCA4O1xuICAgIGNhc2UgMTogaCBePSAoc3RyLmNoYXJDb2RlQXQoaSkgJiAweGZmKTtcbiAgICAgICAgICAgIGggPSAoKChoICYgMHhmZmZmKSAqIDB4NWJkMWU5OTUpICsgKCgoKGggPj4+IDE2KSAqIDB4NWJkMWU5OTUpICYgMHhmZmZmKSA8PCAxNikpO1xuICAgIH1cblxuICAgIGggXj0gaCA+Pj4gMTM7XG4gICAgaCA9ICgoKGggJiAweGZmZmYpICogMHg1YmQxZTk5NSkgKyAoKCgoaCA+Pj4gMTYpICogMHg1YmQxZTk5NSkgJiAweGZmZmYpIDw8IDE2KSk7XG4gICAgaCBePSBoID4+PiAxNTtcblxuICAgIHJldHVybiBoID4+PiAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBKUyBJbXBsZW1lbnRhdGlvbiBvZiBNdXJtdXJIYXNoMyAocjEzNikgKGFzIG9mIE1heSAyMCwgMjAxMSlcbiAgICpcbiAgICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOmdhcnkuY291cnRAZ21haWwuY29tXCI+R2FyeSBDb3VydDwvYT5cbiAgICogQHNlZSBodHRwOi8vZ2l0aHViLmNvbS9nYXJ5Y291cnQvbXVybXVyaGFzaC1qc1xuICAgKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86YWFwcGxlYnlAZ21haWwuY29tXCI+QXVzdGluIEFwcGxlYnk8L2E+XG4gICAqIEBzZWUgaHR0cDovL3NpdGVzLmdvb2dsZS5jb20vc2l0ZS9tdXJtdXJoYXNoL1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEFTQ0lJIG9ubHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlZWQgUG9zaXRpdmUgaW50ZWdlciBvbmx5XG4gICAqIEByZXR1cm4ge251bWJlcn0gMzItYml0IHBvc2l0aXZlIGludGVnZXIgaGFzaFxuICAgKi9cbiAgZnVuY3Rpb24gTXVybXVySGFzaFYzKGtleSwgc2VlZCkge1xuICAgIHZhciByZW1haW5kZXIsIGJ5dGVzLCBoMSwgaDFiLCBjMSwgYzFiLCBjMiwgYzJiLCBrMSwgaTtcblxuICAgIHJlbWFpbmRlciA9IGtleS5sZW5ndGggJiAzOyAvLyBrZXkubGVuZ3RoICUgNFxuICAgIGJ5dGVzID0ga2V5Lmxlbmd0aCAtIHJlbWFpbmRlcjtcbiAgICBoMSA9IHNlZWQ7XG4gICAgYzEgPSAweGNjOWUyZDUxO1xuICAgIGMyID0gMHgxYjg3MzU5MztcbiAgICBpID0gMDtcblxuICAgIHdoaWxlIChpIDwgYnl0ZXMpIHtcbiAgICAgICAgazEgPVxuICAgICAgICAgICgoa2V5LmNoYXJDb2RlQXQoaSkgJiAweGZmKSkgfFxuICAgICAgICAgICgoa2V5LmNoYXJDb2RlQXQoKytpKSAmIDB4ZmYpIDw8IDgpIHxcbiAgICAgICAgICAoKGtleS5jaGFyQ29kZUF0KCsraSkgJiAweGZmKSA8PCAxNikgfFxuICAgICAgICAgICgoa2V5LmNoYXJDb2RlQXQoKytpKSAmIDB4ZmYpIDw8IDI0KTtcbiAgICAgICsraTtcblxuICAgICAgazEgPSAoKCgoazEgJiAweGZmZmYpICogYzEpICsgKCgoKGsxID4+PiAxNikgKiBjMSkgJiAweGZmZmYpIDw8IDE2KSkpICYgMHhmZmZmZmZmZjtcbiAgICAgIGsxID0gKGsxIDw8IDE1KSB8IChrMSA+Pj4gMTcpO1xuICAgICAgazEgPSAoKCgoazEgJiAweGZmZmYpICogYzIpICsgKCgoKGsxID4+PiAxNikgKiBjMikgJiAweGZmZmYpIDw8IDE2KSkpICYgMHhmZmZmZmZmZjtcblxuICAgICAgaDEgXj0gazE7XG4gICAgICAgICAgaDEgPSAoaDEgPDwgMTMpIHwgKGgxID4+PiAxOSk7XG4gICAgICBoMWIgPSAoKCgoaDEgJiAweGZmZmYpICogNSkgKyAoKCgoaDEgPj4+IDE2KSAqIDUpICYgMHhmZmZmKSA8PCAxNikpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICBoMSA9ICgoKGgxYiAmIDB4ZmZmZikgKyAweDZiNjQpICsgKCgoKGgxYiA+Pj4gMTYpICsgMHhlNjU0KSAmIDB4ZmZmZikgPDwgMTYpKTtcbiAgICB9XG5cbiAgICBrMSA9IDA7XG5cbiAgICBzd2l0Y2ggKHJlbWFpbmRlcikge1xuICAgICAgY2FzZSAzOiBrMSBePSAoa2V5LmNoYXJDb2RlQXQoaSArIDIpICYgMHhmZikgPDwgMTY7XG4gICAgICBjYXNlIDI6IGsxIF49IChrZXkuY2hhckNvZGVBdChpICsgMSkgJiAweGZmKSA8PCA4O1xuICAgICAgY2FzZSAxOiBrMSBePSAoa2V5LmNoYXJDb2RlQXQoaSkgJiAweGZmKTtcblxuICAgICAgazEgPSAoKChrMSAmIDB4ZmZmZikgKiBjMSkgKyAoKCgoazEgPj4+IDE2KSAqIGMxKSAmIDB4ZmZmZikgPDwgMTYpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICBrMSA9IChrMSA8PCAxNSkgfCAoazEgPj4+IDE3KTtcbiAgICAgIGsxID0gKCgoazEgJiAweGZmZmYpICogYzIpICsgKCgoKGsxID4+PiAxNikgKiBjMikgJiAweGZmZmYpIDw8IDE2KSkgJiAweGZmZmZmZmZmO1xuICAgICAgaDEgXj0gazE7XG4gICAgfVxuXG4gICAgaDEgXj0ga2V5Lmxlbmd0aDtcblxuICAgIGgxIF49IGgxID4+PiAxNjtcbiAgICBoMSA9ICgoKGgxICYgMHhmZmZmKSAqIDB4ODVlYmNhNmIpICsgKCgoKGgxID4+PiAxNikgKiAweDg1ZWJjYTZiKSAmIDB4ZmZmZikgPDwgMTYpKSAmIDB4ZmZmZmZmZmY7XG4gICAgaDEgXj0gaDEgPj4+IDEzO1xuICAgIGgxID0gKCgoKGgxICYgMHhmZmZmKSAqIDB4YzJiMmFlMzUpICsgKCgoKGgxID4+PiAxNikgKiAweGMyYjJhZTM1KSAmIDB4ZmZmZikgPDwgMTYpKSkgJiAweGZmZmZmZmZmO1xuICAgIGgxIF49IGgxID4+PiAxNjtcblxuICAgIHJldHVybiBoMSA+Pj4gMDtcbiAgfVxuXG4gIHZhciBtdXJtdXIgPSBNdXJtdXJIYXNoVjM7XG4gIG11cm11ci52MiA9IE11cm11ckhhc2hWMjtcbiAgbXVybXVyLnYzID0gTXVybXVySGFzaFYzO1xuXG4gIGlmICh0cnVlKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBtdXJtdXI7XG4gIH0gZWxzZSB7IHZhciBfcHJldmlvdXNSb290OyB9XG59KCkpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL3N1cGVyc3RydWN0L2xpYi9pbmRleC5lcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvc3VwZXJzdHJ1Y3QvbGliL2luZGV4LmVzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBTdHJ1Y3QsIFN0cnVjdEVycm9yLCBhbnksIGFycmF5LCBhc3NlcnQsIGJvb2xlYW4sIGNvZXJjZSwgY29lcmNpb24sIGRhdGUsIGRlZmF1bHRlZCwgZHluYW1pYywgZW1wdHksIGVudW1zLCBmdW5jLCBpbnN0YW5jZSwgaW50ZXJzZWN0aW9uLCBpcywgbGF6eSwgbGVuZ3RoLCBsaXRlcmFsLCBtYXAsIG1hc2tlZCwgbmV2ZXIsIG51bGxhYmxlLCBudW1iZXIsIG9iamVjdCwgb3B0aW9uYWwsIHBhcnRpYWwsIHBhdHRlcm4sIHJlY29yZCwgcmVmaW5lbWVudCwgc2V0LCBzdHJpbmcsIHN0cnVjdCwgdHVwbGUsIHR5cGUsIHVuaW9uLCB2YWxpZGF0ZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJTdHJ1Y3RcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdHJ1Y3Q7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIlN0cnVjdEVycm9yXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3RydWN0RXJyb3I7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFueVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFueTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYXJyYXlcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBhcnJheTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYXNzZXJ0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXNzZXJ0OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJib29sZWFuXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYm9vbGVhbjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY29lcmNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY29lcmNlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjb2VyY2lvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNvZXJjaW9uOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkYXRlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGF0ZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZGVmYXVsdGVkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVmYXVsdGVkOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkeW5hbWljXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZHluYW1pYzsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZW1wdHlcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBlbXB0eTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZW51bXNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBlbnVtczsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZnVuY1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZ1bmM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImluc3RhbmNlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW5zdGFuY2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImludGVyc2VjdGlvblwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGludGVyc2VjdGlvbjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaXNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpczsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwibGF6eVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGxhenk7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImxlbmd0aFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGxlbmd0aDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwibGl0ZXJhbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGxpdGVyYWw7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIm1hcFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG1hcDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwibWFza2VkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWFza2VkOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJuZXZlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldmVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJudWxsYWJsZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG51bGxhYmxlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJudW1iZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBudW1iZXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIm9iamVjdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG9iamVjdDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwib3B0aW9uYWxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBvcHRpb25hbDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicGFydGlhbFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHBhcnRpYWw7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInBhdHRlcm5cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwYXR0ZXJuOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZWNvcmRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZWNvcmQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlZmluZW1lbnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZWZpbmVtZW50OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzZXRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzZXQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInN0cmluZ1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN0cmluZzsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwic3RydWN0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3RydWN0OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJ0dXBsZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHR1cGxlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJ0eXBlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdHlwZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwidW5pb25cIiwgZnVuY3Rpb24oKSB7IHJldHVybiB1bmlvbjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwidmFsaWRhdGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiB2YWxpZGF0ZTsgfSk7XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgIH0pO1xuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgIGlmIChpICUgMikge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuXG4gIHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTtcblxuICB2YXIga2V5LCBpO1xuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSB2YWxpZGF0aW9uIHJlc3VsdCB0byBhbiBpdGVyYWJsZSBvZiBmYWlsdXJlcy5cbiAqL1xuZnVuY3Rpb24qIHRvRmFpbHVyZXMocmVzdWx0LCBjb250ZXh0KSB7XG4gIGlmIChyZXN1bHQgPT09IHRydWUpIDsgZWxzZSBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgIHlpZWxkIGNvbnRleHQuZmFpbCgpO1xuICB9IGVsc2Uge1xuICAgIHlpZWxkKiByZXN1bHQ7XG4gIH1cbn1cbi8qKlxuICogU2hpZnRzIChyZW1vdmVzIGFuZCByZXR1cm5zKSB0aGUgZmlyc3QgdmFsdWUgZnJvbSB0aGUgYGlucHV0YCBpdGVyYXRvci5cbiAqIExpa2UgYEFycmF5LnByb3RvdHlwZS5zaGlmdCgpYCBidXQgZm9yIGFuIGBJdGVyYXRvcmAuXG4gKi9cblxuZnVuY3Rpb24gaXRlcmF0b3JTaGlmdChpbnB1dCkge1xuICBjb25zdCB7XG4gICAgZG9uZSxcbiAgICB2YWx1ZVxuICB9ID0gaW5wdXQubmV4dCgpO1xuICByZXR1cm4gZG9uZSA/IHVuZGVmaW5lZCA6IHZhbHVlO1xufVxuXG4vKipcbiAqIGBTdHJ1Y3RgIG9iamVjdHMgZW5jYXBzdWxhdGUgdGhlIHNjaGVtYSBmb3IgYSBzcGVjaWZpYyBkYXRhIHR5cGUgKHdpdGhcbiAqIG9wdGlvbmFsIGNvZXJjaW9uKS4gWW91IGNhbiB0aGVuIHVzZSB0aGUgYGFzc2VydGAsIGBpc2Agb3IgYHZhbGlkYXRlYCBoZWxwZXJzXG4gKiB0byB2YWxpZGF0ZSB1bmtub3duIGRhdGEgYWdhaW5zdCBhIHN0cnVjdC5cbiAqL1xuXG5jbGFzcyBTdHJ1Y3Qge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIGNvbnN0IHtcbiAgICAgIHR5cGUsXG4gICAgICBzY2hlbWEsXG4gICAgICBjb2VyY2VyID0gdmFsdWUgPT4gdmFsdWUsXG4gICAgICB2YWxpZGF0b3IgPSAoKSA9PiBbXSxcbiAgICAgIHJlZmluZXIgPSAoKSA9PiBbXVxuICAgIH0gPSBwcm9wcztcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgIHRoaXMuY29lcmNlciA9IGNvZXJjZXI7XG4gICAgdGhpcy52YWxpZGF0b3IgPSB2YWxpZGF0b3I7XG4gICAgdGhpcy5yZWZpbmVyID0gcmVmaW5lcjtcbiAgfVxuXG59XG4vKipcbiAqIGBTdHJ1Y3RFcnJvcmAgb2JqZWN0cyBhcmUgdGhyb3duIChvciByZXR1cm5lZCkgYnkgU3VwZXJzdHJ1Y3Qgd2hlbiBpdHNcbiAqIHZhbGlkYXRpb24gZmFpbHMuIFRoZSBlcnJvciByZXByZXNlbnRzIHRoZSBmaXJzdCBlcnJvciBlbmNvdW50ZXJlZCBkdXJpbmdcbiAqIHZhbGlkYXRpb24uIEJ1dCB0aGV5IGFsc28gaGF2ZSBhbiBgZXJyb3IuZmFpbHVyZXNgIHByb3BlcnR5IHRoYXQgaG9sZHNcbiAqIGluZm9ybWF0aW9uIGZvciBhbGwgb2YgdGhlIGZhaWx1cmVzIGVuY291bnRlcmVkLlxuICovXG5cbmNsYXNzIFN0cnVjdEVycm9yIGV4dGVuZHMgVHlwZUVycm9yIHtcbiAgY29uc3RydWN0b3IoZmFpbHVyZSwgbW9yZUZhaWx1cmVzKSB7XG4gICAgY29uc3Qge1xuICAgICAgcGF0aCxcbiAgICAgIHZhbHVlLFxuICAgICAgdHlwZSxcbiAgICAgIGJyYW5jaFxuICAgIH0gPSBmYWlsdXJlLFxuICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoZmFpbHVyZSwgW1wicGF0aFwiLCBcInZhbHVlXCIsIFwidHlwZVwiLCBcImJyYW5jaFwiXSk7XG5cbiAgICBjb25zdCBtZXNzYWdlID0gYEV4cGVjdGVkIGEgdmFsdWUgb2YgdHlwZSBcXGAke3R5cGV9XFxgJHtwYXRoLmxlbmd0aCA/IGAgZm9yIFxcYCR7cGF0aC5qb2luKCcuJyl9XFxgYCA6ICcnfSBidXQgcmVjZWl2ZWQgXFxgJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9XFxgLmA7XG4gICAgbGV0IGZhaWx1cmVzUmVzdWx0O1xuXG4gICAgZnVuY3Rpb24gZmFpbHVyZXMoKSB7XG4gICAgICBpZiAoIWZhaWx1cmVzUmVzdWx0KSB7XG4gICAgICAgIGZhaWx1cmVzUmVzdWx0ID0gW2ZhaWx1cmUsIC4uLm1vcmVGYWlsdXJlc107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWlsdXJlc1Jlc3VsdDtcbiAgICB9XG5cbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCByZXN0KTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgdGhpcy5icmFuY2ggPSBicmFuY2g7XG4gICAgdGhpcy5mYWlsdXJlcyA9IGZhaWx1cmVzO1xuICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICB0aGlzLl9fcHJvdG9fXyA9IFN0cnVjdEVycm9yLnByb3RvdHlwZTtcbiAgfVxuXG59XG4vKipcbiAqIEFzc2VydCB0aGF0IGEgdmFsdWUgcGFzc2VzIGEgYFN0cnVjdGAsIHRocm93aW5nIGlmIGl0IGRvZXNuJ3QuXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0KHZhbHVlLCBzdHJ1Y3QpIHtcbiAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUodmFsdWUsIHN0cnVjdCk7XG5cbiAgaWYgKHJlc3VsdFswXSkge1xuICAgIHRocm93IHJlc3VsdFswXTtcbiAgfVxufVxuLyoqXG4gKiBDb2VyY2UgYSB2YWx1ZSB3aXRoIHRoZSBjb2VyY2lvbiBsb2dpYyBvZiBgU3RydWN0YCBhbmQgdmFsaWRhdGUgaXQuXG4gKi9cblxuZnVuY3Rpb24gY29lcmNlKHZhbHVlLCBzdHJ1Y3QpIHtcbiAgY29uc3QgcmV0ID0gc3RydWN0LmNvZXJjZXIodmFsdWUpO1xuICBhc3NlcnQocmV0LCBzdHJ1Y3QpO1xuICByZXR1cm4gcmV0O1xufVxuLyoqXG4gKiBDaGVjayBpZiBhIHZhbHVlIHBhc3NlcyBhIGBTdHJ1Y3RgLlxuICovXG5cbmZ1bmN0aW9uIGlzKHZhbHVlLCBzdHJ1Y3QpIHtcbiAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUodmFsdWUsIHN0cnVjdCk7XG4gIHJldHVybiAhcmVzdWx0WzBdO1xufVxuLyoqXG4gKiBWYWxpZGF0ZSBhIHZhbHVlIGFnYWluc3QgYSBgU3RydWN0YCwgcmV0dXJuaW5nIGFuIGVycm9yIGlmIGludmFsaWQuXG4gKi9cblxuZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUsIHN0cnVjdCwgY29lcmNpbmcgPSBmYWxzZSkge1xuICBpZiAoY29lcmNpbmcpIHtcbiAgICB2YWx1ZSA9IHN0cnVjdC5jb2VyY2VyKHZhbHVlKTtcbiAgfVxuXG4gIGNvbnN0IGZhaWx1cmVzID0gY2hlY2sodmFsdWUsIHN0cnVjdCk7XG4gIGNvbnN0IGZhaWx1cmUgPSBpdGVyYXRvclNoaWZ0KGZhaWx1cmVzKTtcblxuICBpZiAoZmFpbHVyZSkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFN0cnVjdEVycm9yKGZhaWx1cmUsIGZhaWx1cmVzKTtcbiAgICByZXR1cm4gW2Vycm9yLCB1bmRlZmluZWRdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbdW5kZWZpbmVkLCB2YWx1ZV07XG4gIH1cbn1cbi8qKlxuICogQ2hlY2sgYSB2YWx1ZSBhZ2FpbnN0IGEgYFN0cnVjdGAsIHJldHVybmluZyBhbiBpdGVyYWJsZSBvZiBmYWlsdXJlcy5cbiAqL1xuXG5mdW5jdGlvbiogY2hlY2sodmFsdWUsIHN0cnVjdCwgcGF0aCA9IFtdLCBicmFuY2ggPSBbXSkge1xuICBjb25zdCB7XG4gICAgdHlwZVxuICB9ID0gc3RydWN0O1xuICBjb25zdCBjdHggPSB7XG4gICAgdmFsdWUsXG4gICAgdHlwZSxcbiAgICBicmFuY2gsXG4gICAgcGF0aCxcblxuICAgIGZhaWwocHJvcHMgPSB7fSkge1xuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIGJyYW5jaDogWy4uLmJyYW5jaCwgdmFsdWVdXG4gICAgICB9LCBwcm9wcyk7XG4gICAgfSxcblxuICAgIGNoZWNrKHYsIHMsIHBhcmVudCwga2V5KSB7XG4gICAgICBjb25zdCBwID0gcGFyZW50ICE9PSB1bmRlZmluZWQgPyBbLi4ucGF0aCwga2V5XSA6IHBhdGg7XG4gICAgICBjb25zdCBiID0gcGFyZW50ICE9PSB1bmRlZmluZWQgPyBbLi4uYnJhbmNoLCBwYXJlbnRdIDogYnJhbmNoO1xuICAgICAgcmV0dXJuIGNoZWNrKHYsIHMsIHAsIGIpO1xuICAgIH1cblxuICB9O1xuICBjb25zdCBmYWlsdXJlcyA9IHRvRmFpbHVyZXMoc3RydWN0LnZhbGlkYXRvcih2YWx1ZSwgY3R4KSwgY3R4KTtcbiAgY29uc3QgZmFpbHVyZSA9IGl0ZXJhdG9yU2hpZnQoZmFpbHVyZXMpO1xuXG4gIGlmIChmYWlsdXJlKSB7XG4gICAgeWllbGQgZmFpbHVyZTtcbiAgICB5aWVsZCogZmFpbHVyZXM7XG4gIH0gZWxzZSB7XG4gICAgeWllbGQqIHRvRmFpbHVyZXMoc3RydWN0LnJlZmluZXIodmFsdWUsIGN0eCksIGN0eCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdWdtZW50IGEgYFN0cnVjdGAgdG8gYWRkIGFuIGFkZGl0aW9uYWwgY29lcmNpb24gc3RlcCB0byBpdHMgaW5wdXQuXG4gKi9cblxuZnVuY3Rpb24gY29lcmNpb24oc3RydWN0LCBjb2VyY2VyKSB7XG4gIGNvbnN0IGZuID0gc3RydWN0LmNvZXJjZXI7XG4gIHJldHVybiBuZXcgU3RydWN0KF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBzdHJ1Y3QpLCB7fSwge1xuICAgIGNvZXJjZXI6IHZhbHVlID0+IHtcbiAgICAgIHJldHVybiBmbihjb2VyY2VyKHZhbHVlKSk7XG4gICAgfVxuICB9KSk7XG59XG4vKipcbiAqIEF1Z21lbnQgYSBzdHJ1Y3QgdG8gY29lcmNlIGEgZGVmYXVsdCB2YWx1ZSBmb3IgbWlzc2luZyB2YWx1ZXMuXG4gKlxuICogTm90ZTogWW91IG11c3QgdXNlIGBjb2VyY2UodmFsdWUsIFN0cnVjdClgIG9uIHRoZSB2YWx1ZSBiZWZvcmUgdmFsaWRhdGluZyBpdFxuICogdG8gaGF2ZSB0aGUgdmFsdWUgZGVmYXVsdGVkIVxuICovXG5cbmZ1bmN0aW9uIGRlZmF1bHRlZChTLCBmYWxsYmFjaywgc3RyaWN0KSB7XG4gIHJldHVybiBjb2VyY2lvbihTLCB4ID0+IHtcbiAgICBjb25zdCBmID0gdHlwZW9mIGZhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gZmFsbGJhY2soKSA6IGZhbGxiYWNrO1xuXG4gICAgaWYgKHggPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGY7XG4gICAgfVxuXG4gICAgaWYgKHN0cmljdCAhPT0gdHJ1ZSAmJiBpc1BsYWluT2JqZWN0KHgpICYmIGlzUGxhaW5PYmplY3QoZikpIHtcbiAgICAgIGNvbnN0IHJldCA9IF9vYmplY3RTcHJlYWQyKHt9LCB4KTtcblxuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gZikge1xuICAgICAgICBpZiAocmV0W2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldFtrZXldID0gZltrZXldO1xuICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHg7XG4gIH0pO1xufVxuLyoqXG4gKiBDb2VyY2UgYSB2YWx1ZSB0byBtYXNrIGl0cyBwcm9wZXJ0aWVzIHRvIG9ubHkgdGhhdCBkZWZpbmVkIGluIHRoZSBzdHJ1Y3QuXG4gKi9cblxuZnVuY3Rpb24gbWFza2VkKFMpIHtcbiAgcmV0dXJuIGNvZXJjaW9uKFMsIHggPT4ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdCh4KSkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfVxuXG4gICAgY29uc3QgcmV0ID0ge307XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBTLnNjaGVtYSkge1xuICAgICAgcmV0W2tleV0gPSB4W2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG59XG4vKipcbiAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYSBwbGFpbiBvYmplY3QuXG4gKi9cblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICByZXR1cm4gcHJvdG90eXBlID09PSBudWxsIHx8IHByb3RvdHlwZSA9PT0gT2JqZWN0LnByb3RvdHlwZTtcbn1cblxuLyoqXG4gKiBBdWdtZW50IGEgc3RyaW5nIG9yIGFycmF5IHN0cnVjdCB0byBjb25zdHJhaW4gaXRzIGxlbmd0aCB0byB6ZXJvLlxuICovXG5cbmZ1bmN0aW9uIGVtcHR5KFMpIHtcbiAgcmV0dXJuIHJlZmluZW1lbnQoUywgYCR7Uy50eXBlfSAmIEVtcHR5YCwgdmFsdWUgPT4ge1xuICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDA7XG4gIH0pO1xufVxuLyoqXG4gKiBBdWdtZW50IGEgc3RyaW5nIG9yIGFycmF5IHN0cnVjdCB0byBjb25zdHJhaW4gaXRzIGxlbmd0aCB0byBiZWluZyBiZXR3ZWVuIGFcbiAqIG1pbmltdW0gYW5kIG1heGltdW0gc2l6ZS5cbiAqL1xuXG5mdW5jdGlvbiBsZW5ndGgoUywgbWluLCBtYXgpIHtcbiAgcmV0dXJuIHJlZmluZW1lbnQoUywgYCR7Uy50eXBlfSAmIExlbmd0aDwke21pbn0sJHttYXh9PmAsIHZhbHVlID0+IHtcbiAgICByZXR1cm4gbWluIDwgdmFsdWUubGVuZ3RoICYmIHZhbHVlLmxlbmd0aCA8IG1heDtcbiAgfSk7XG59XG4vKipcbiAqIFJlZmluZSBhIHN0cmluZyBzdHJ1Y3QgdG8gbWF0Y2ggYSBzcGVjaWZpYyByZWdleHAgcGF0dGVybi5cbiAqL1xuXG5mdW5jdGlvbiBwYXR0ZXJuKFMsIHJlZ2V4cCkge1xuICByZXR1cm4gcmVmaW5lbWVudChTLCBgJHtTLnR5cGV9ICYgUGF0dGVybjwke3JlZ2V4cC5zb3VyY2V9PmAsIHZhbHVlID0+IHtcbiAgICByZXR1cm4gcmVnZXhwLnRlc3QodmFsdWUpO1xuICB9KTtcbn1cbi8qKlxuICogQXVnbWVudCBhIGBTdHJ1Y3RgIHRvIGFkZCBhbiBhZGRpdGlvbmFsIHJlZmluZW1lbnQgdG8gdGhlIHZhbGlkYXRpb24uXG4gKi9cblxuZnVuY3Rpb24gcmVmaW5lbWVudChzdHJ1Y3QsIHR5cGUsIHJlZmluZXIpIHtcbiAgY29uc3QgZm4gPSBzdHJ1Y3QucmVmaW5lcjtcbiAgcmV0dXJuIG5ldyBTdHJ1Y3QoX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIHN0cnVjdCksIHt9LCB7XG4gICAgdHlwZSxcblxuICAgICpyZWZpbmVyKHZhbHVlLCBmYWlsKSB7XG4gICAgICB5aWVsZCogdG9GYWlsdXJlcyhmbih2YWx1ZSwgZmFpbCksIGZhaWwpO1xuICAgICAgeWllbGQqIHRvRmFpbHVyZXMocmVmaW5lcih2YWx1ZSwgZmFpbCksIGZhaWwpO1xuICAgIH1cblxuICB9KSk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgYW55IHZhbHVlLlxuICovXG5cbmZ1bmN0aW9uIGFueSgpIHtcbiAgcmV0dXJuIHN0cnVjdCgnYW55JywgKCkgPT4gdHJ1ZSk7XG59XG5mdW5jdGlvbiBhcnJheShFbGVtZW50KSB7XG4gIHJldHVybiBuZXcgU3RydWN0KHtcbiAgICB0eXBlOiBgQXJyYXk8JHtFbGVtZW50ID8gRWxlbWVudC50eXBlIDogJ3Vua25vd24nfT5gLFxuICAgIHNjaGVtYTogRWxlbWVudCxcbiAgICBjb2VyY2VyOiB2YWx1ZSA9PiB7XG4gICAgICByZXR1cm4gRWxlbWVudCAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh2ID0+IGNvZXJjZSh2LCBFbGVtZW50KSkgOiB2YWx1ZTtcbiAgICB9LFxuXG4gICAgKnZhbGlkYXRvcih2YWx1ZSwgY3R4KSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHlpZWxkIGN0eC5mYWlsKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKEVsZW1lbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaSwgdl0gb2YgdmFsdWUuZW50cmllcygpKSB7XG4gICAgICAgICAgeWllbGQqIGN0eC5jaGVjayh2LCBFbGVtZW50LCB2YWx1ZSwgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfSk7XG59XG4vKipcbiAqIFZhbGlkYXRlIHRoYXQgYm9vbGVhbiB2YWx1ZXMuXG4gKi9cblxuZnVuY3Rpb24gYm9vbGVhbigpIHtcbiAgcmV0dXJuIHN0cnVjdCgnYm9vbGVhbicsIHZhbHVlID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XG4gIH0pO1xufVxuLyoqXG4gKiBWYWxpZGF0ZSB0aGF0IGBEYXRlYCB2YWx1ZXMuXG4gKlxuICogTm90ZTogdGhpcyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgdmFsdWUgaXMgKm5vdCogYW4gaW52YWxpZCBgRGF0ZWAgb2JqZWN0LFxuICogd2hpY2ggY2FuIG9jY3VyIHdoZW4gcGFyc2luZyBhIGRhdGUgZmFpbHMgYnV0IHN0aWxsIHJldHVybnMgYSBgRGF0ZWAuXG4gKi9cblxuZnVuY3Rpb24gZGF0ZSgpIHtcbiAgcmV0dXJuIHN0cnVjdCgnRGF0ZScsIHZhbHVlID0+IHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTih2YWx1ZS5nZXRUaW1lKCkpO1xuICB9KTtcbn1cbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIHZhbHVlIGR5bmFtaWNhbGx5LCBkZXRlcm1pbmcgd2hpY2ggc3RydWN0IHRvIHVzZSBhdCBydW50aW1lLlxuICovXG5cbmZ1bmN0aW9uIGR5bmFtaWMoZm4pIHtcbiAgcmV0dXJuIHN0cnVjdCgnRHluYW1pYzwuLi4+JywgKHZhbHVlLCBjdHgpID0+IHtcbiAgICByZXR1cm4gY3R4LmNoZWNrKHZhbHVlLCBmbih2YWx1ZSwgY3R4KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZW51bXModmFsdWVzKSB7XG4gIHJldHVybiBzdHJ1Y3QoYEVudW08JHt2YWx1ZXMubWFwKHRvTGl0ZXJhbFN0cmluZyl9PmAsIHZhbHVlID0+IHtcbiAgICByZXR1cm4gdmFsdWVzLmluY2x1ZGVzKHZhbHVlKTtcbiAgfSk7XG59XG4vKipcbiAqIFZhbGlkYXRlIHRoYXQgYSB2YWx1ZSBpcyBhIGZ1bmN0aW9uLlxuICovXG5cbmZ1bmN0aW9uIGZ1bmMoKSB7XG4gIHJldHVybiBzdHJ1Y3QoJ0Z1bmN0aW9uJywgdmFsdWUgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG4gIH0pO1xufVxuLyoqXG4gKiBWYWxpZGF0ZSB0aGF0IGEgdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgYSBjbGFzcy5cbiAqL1xuXG5mdW5jdGlvbiBpbnN0YW5jZShDbGFzcykge1xuICByZXR1cm4gc3RydWN0KGBJbnN0YW5jZU9mPCR7Q2xhc3MubmFtZX0+YCwgdmFsdWUgPT4ge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIENsYXNzO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGludGVyc2VjdGlvbihTdHJ1Y3RzKSB7XG4gIHJldHVybiBzdHJ1Y3QoU3RydWN0cy5tYXAocyA9PiBzLnR5cGUpLmpvaW4oJyAmICcpLCBmdW5jdGlvbiogKHZhbHVlLCBjdHgpIHtcbiAgICBmb3IgKGNvbnN0IFMgb2YgU3RydWN0cykge1xuICAgICAgeWllbGQqIGN0eC5jaGVjayh2YWx1ZSwgUyk7XG4gICAgfVxuICB9KTtcbn1cbi8qKlxuICogVmFsaWRhdGUgYSB2YWx1ZSBsYXppbHksIGJ5IGNvbnN0cnVjdGluZyB0aGUgc3RydWN0IHJpZ2h0IGJlZm9yZSB0aGUgZmlyc3RcbiAqIHZhbGlkYXRpb24uIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3Ugd2FudCB0byBoYXZlIHNlbGYtcmVmZXJlbnRpYWxcbiAqIHN0cnVjdHMgZm9yIG5lc3RlZCBkYXRhIHN0cnVjdHVyZXMuXG4gKi9cblxuZnVuY3Rpb24gbGF6eShmbikge1xuICBsZXQgUztcbiAgcmV0dXJuIHN0cnVjdCgnTGF6eTwuLi4+JywgKHZhbHVlLCBjdHgpID0+IHtcbiAgICBpZiAoIVMpIHtcbiAgICAgIFMgPSBmbigpO1xuICAgIH1cblxuICAgIHJldHVybiBjdHguY2hlY2sodmFsdWUsIFMpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGxpdGVyYWwoY29uc3RhbnQpIHtcbiAgcmV0dXJuIHN0cnVjdChgTGl0ZXJhbDwke3RvTGl0ZXJhbFN0cmluZyhjb25zdGFudCl9PmAsIHZhbHVlID0+IHtcbiAgICByZXR1cm4gdmFsdWUgPT09IGNvbnN0YW50O1xuICB9KTtcbn1cbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIHZhbHVlIGlzIGEgbWFwIHdpdGggc3BlY2lmaWMga2V5IGFuZCB2YWx1ZSBlbnRyaWVzLlxuICovXG5cbmZ1bmN0aW9uIG1hcChLZXksIFZhbHVlKSB7XG4gIHJldHVybiBzdHJ1Y3QoYE1hcDwke0tleS50eXBlfSwke1ZhbHVlLnR5cGV9PmAsIGZ1bmN0aW9uKiAodmFsdWUsIGN0eCkge1xuICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgTWFwKSkge1xuICAgICAgeWllbGQgY3R4LmZhaWwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiB2YWx1ZS5lbnRyaWVzKCkpIHtcbiAgICAgIHlpZWxkKiBjdHguY2hlY2soaywgS2V5LCB2YWx1ZSwgayk7XG4gICAgICB5aWVsZCogY3R4LmNoZWNrKHYsIFZhbHVlLCB2YWx1ZSwgayk7XG4gICAgfVxuICB9KTtcbn1cbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIHZhbHVlIGFsd2F5cyBmYWlscy5cbiAqL1xuXG5mdW5jdGlvbiBuZXZlcigpIHtcbiAgcmV0dXJuIHN0cnVjdCgnbmV2ZXInLCAoKSA9PiBmYWxzZSk7XG59XG4vKipcbiAqIEF1Z21lbnQgYSBzdHJ1Y3QgdG8gbWFrZSBpdCBhY2NlcHQgYG51bGxgIHZhbHVlcy5cbiAqL1xuXG5mdW5jdGlvbiBudWxsYWJsZShTKSB7XG4gIHJldHVybiBuZXcgU3RydWN0KHtcbiAgICB0eXBlOiBgJHtTLnR5cGV9IHwgbnVsbGAsXG4gICAgc2NoZW1hOiBTLnNjaGVtYSxcbiAgICB2YWxpZGF0b3I6ICh2YWx1ZSwgY3R4KSA9PiB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgY3R4LmNoZWNrKHZhbHVlLCBTKTtcbiAgICB9XG4gIH0pO1xufVxuLyoqXG4gKiBWYWxpZGF0ZSB0aGF0IGEgdmFsdWUgaXMgYSBudW1iZXIuXG4gKi9cblxuZnVuY3Rpb24gbnVtYmVyKCkge1xuICByZXR1cm4gc3RydWN0KGBudW1iZXJgLCB2YWx1ZSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBvYmplY3QoU3RydWN0cykge1xuICBjb25zdCBrbm93bnMgPSBTdHJ1Y3RzID8gT2JqZWN0LmtleXMoU3RydWN0cykgOiBbXTtcbiAgY29uc3QgTmV2ZXIgPSBuZXZlcigpO1xuICByZXR1cm4gbmV3IFN0cnVjdCh7XG4gICAgdHlwZTogU3RydWN0cyA/IGBPYmplY3Q8eyR7a25vd25zLmpvaW4oJywnKX19PmAgOiAnT2JqZWN0JyxcbiAgICBzY2hlbWE6IFN0cnVjdHMgPyBTdHJ1Y3RzIDogbnVsbCxcbiAgICBjb2VyY2VyOiBTdHJ1Y3RzID8gY3JlYXRlT2JqZWN0Q29lcmNlcihTdHJ1Y3RzKSA6IHggPT4geCxcblxuICAgICp2YWxpZGF0b3IodmFsdWUsIGN0eCkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT0gbnVsbCkge1xuICAgICAgICB5aWVsZCBjdHguZmFpbCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChTdHJ1Y3RzKSB7XG4gICAgICAgIGNvbnN0IHVua25vd25zID0gbmV3IFNldChPYmplY3Qua2V5cyh2YWx1ZSkpO1xuXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtub3ducykge1xuICAgICAgICAgIHVua25vd25zLmRlbGV0ZShrZXkpO1xuICAgICAgICAgIGNvbnN0IFZhbHVlID0gU3RydWN0c1trZXldO1xuICAgICAgICAgIGNvbnN0IHYgPSB2YWx1ZVtrZXldO1xuICAgICAgICAgIHlpZWxkKiBjdHguY2hlY2sodiwgVmFsdWUsIHZhbHVlLCBrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdW5rbm93bnMpIHtcbiAgICAgICAgICBjb25zdCB2ID0gdmFsdWVba2V5XTtcbiAgICAgICAgICB5aWVsZCogY3R4LmNoZWNrKHYsIE5ldmVyLCB2YWx1ZSwga2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICB9KTtcbn1cbi8qKlxuICogQXVnbWVudCBhIHN0cnVjdCB0byBtYWtlIGl0IG9wdGlvbmFsbHkgYWNjZXB0IGB1bmRlZmluZWRgIHZhbHVlcy5cbiAqL1xuXG5mdW5jdGlvbiBvcHRpb25hbChTKSB7XG4gIHJldHVybiBuZXcgU3RydWN0KHtcbiAgICB0eXBlOiBgJHtTLnR5cGV9P2AsXG4gICAgc2NoZW1hOiBTLnNjaGVtYSxcbiAgICB2YWxpZGF0b3I6ICh2YWx1ZSwgY3R4KSA9PiB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCBjdHguY2hlY2sodmFsdWUsIFMpO1xuICAgIH1cbiAgfSk7XG59XG4vKipcbiAqIFZhbGlkYXRlIHRoYXQgYSBwYXJ0aWFsIG9iamVjdCB3aXRoIHNwZWNpZmljIGVudHJ5IHZhbHVlcy5cbiAqL1xuXG5mdW5jdGlvbiBwYXJ0aWFsKFN0cnVjdHMpIHtcbiAgaWYgKFN0cnVjdHMgaW5zdGFuY2VvZiBTdHJ1Y3QpIHtcbiAgICBTdHJ1Y3RzID0gU3RydWN0cy5zY2hlbWE7XG4gIH1cblxuICBjb25zdCBrbm93bnMgPSBPYmplY3Qua2V5cyhTdHJ1Y3RzKTtcbiAgY29uc3QgTmV2ZXIgPSBuZXZlcigpO1xuICByZXR1cm4gbmV3IFN0cnVjdCh7XG4gICAgdHlwZTogYFBhcnRpYWw8eyR7a25vd25zLmpvaW4oJywnKX19PmAsXG4gICAgc2NoZW1hOiBTdHJ1Y3RzLFxuICAgIGNvZXJjZXI6IGNyZWF0ZU9iamVjdENvZXJjZXIoU3RydWN0cyksXG5cbiAgICAqdmFsaWRhdG9yKHZhbHVlLCBjdHgpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgeWllbGQgY3R4LmZhaWwoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1bmtub3ducyA9IG5ldyBTZXQoT2JqZWN0LmtleXModmFsdWUpKTtcblxuICAgICAgZm9yIChjb25zdCBrZXkgb2Yga25vd25zKSB7XG4gICAgICAgIHVua25vd25zLmRlbGV0ZShrZXkpO1xuXG4gICAgICAgIGlmICghKGtleSBpbiB2YWx1ZSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFZhbHVlID0gU3RydWN0c1trZXldO1xuICAgICAgICBjb25zdCB2ID0gdmFsdWVba2V5XTtcbiAgICAgICAgeWllbGQqIGN0eC5jaGVjayh2LCBWYWx1ZSwgdmFsdWUsIGtleSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIHVua25vd25zKSB7XG4gICAgICAgIGNvbnN0IHYgPSB2YWx1ZVtrZXldO1xuICAgICAgICB5aWVsZCogY3R4LmNoZWNrKHYsIE5ldmVyLCB2YWx1ZSwga2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfSk7XG59XG4vKipcbiAqIFZhbGlkYXRlIHRoYXQgYSB2YWx1ZSBpcyBhIHJlY29yZCB3aXRoIHNwZWNpZmljIGtleSBhbmRcbiAqIHZhbHVlIGVudHJpZXMuXG4gKi9cblxuZnVuY3Rpb24gcmVjb3JkKEtleSwgVmFsdWUpIHtcbiAgcmV0dXJuIHN0cnVjdChgUmVjb3JkPCR7S2V5LnR5cGV9LCR7VmFsdWUudHlwZX0+YCwgZnVuY3Rpb24qICh2YWx1ZSwgY3R4KSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT0gbnVsbCkge1xuICAgICAgeWllbGQgY3R4LmZhaWwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgIGNvbnN0IHYgPSB2YWx1ZVtrXTtcbiAgICAgIHlpZWxkKiBjdHguY2hlY2soaywgS2V5LCB2YWx1ZSwgayk7XG4gICAgICB5aWVsZCogY3R4LmNoZWNrKHYsIFZhbHVlLCB2YWx1ZSwgayk7XG4gICAgfVxuICB9KTtcbn1cbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIHNldCBvZiB2YWx1ZXMgbWF0Y2hlcyBhIHNwZWNpZmljIHR5cGUuXG4gKi9cblxuZnVuY3Rpb24gc2V0KEVsZW1lbnQpIHtcbiAgcmV0dXJuIHN0cnVjdChgU2V0PCR7RWxlbWVudC50eXBlfT5gLCAodmFsdWUsIGN0eCkgPT4ge1xuICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgU2V0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgdmFsIG9mIHZhbHVlKSB7XG4gICAgICBjb25zdCBbZmFpbHVyZV0gPSBjdHguY2hlY2sodmFsLCBFbGVtZW50KTtcblxuICAgICAgaWYgKGZhaWx1cmUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbn1cbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIHZhbHVlIGlzIGEgc3RyaW5nLlxuICovXG5cbmZ1bmN0aW9uIHN0cmluZygpIHtcbiAgcmV0dXJuIHN0cnVjdCgnc3RyaW5nJywgdmFsdWUgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xuICB9KTtcbn1cbi8qKlxuICogRGVmaW5lIGEgYFN0cnVjdGAgaW5zdGFuY2Ugd2l0aCBhIHR5cGUgYW5kIHZhbGlkYXRpb24gZnVuY3Rpb24uXG4gKi9cblxuZnVuY3Rpb24gc3RydWN0KG5hbWUsIHZhbGlkYXRvcikge1xuICByZXR1cm4gbmV3IFN0cnVjdCh7XG4gICAgdHlwZTogbmFtZSxcbiAgICB2YWxpZGF0b3IsXG4gICAgc2NoZW1hOiBudWxsXG4gIH0pO1xufVxuZnVuY3Rpb24gdHVwbGUoRWxlbWVudHMpIHtcbiAgY29uc3QgTmV2ZXIgPSBuZXZlcigpO1xuICByZXR1cm4gc3RydWN0KGBbJHtFbGVtZW50cy5tYXAocyA9PiBzLnR5cGUpLmpvaW4oJywnKX1dYCwgZnVuY3Rpb24qICh2YWx1ZSwgY3R4KSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgeWllbGQgY3R4LmZhaWwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtpbmRleCwgRWxlbWVudF0gb2YgRWxlbWVudHMuZW50cmllcygpKSB7XG4gICAgICBjb25zdCB2ID0gdmFsdWVbaW5kZXhdO1xuICAgICAgeWllbGQqIGN0eC5jaGVjayh2LCBFbGVtZW50LCB2YWx1ZSwgaW5kZXgpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZS5sZW5ndGggPiBFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gRWxlbWVudHMubGVuZ3RoO1xuICAgICAgY29uc3QgdiA9IHZhbHVlW2luZGV4XTtcbiAgICAgIHlpZWxkKiBjdHguY2hlY2sodiwgTmV2ZXIsIHZhbHVlLCBpbmRleCk7XG4gICAgfVxuICB9KTtcbn1cbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIHZhbHVlIG1hdGNoZXMgYSBzcGVjaWZpYyBzdHJ1dHVyYWwgaW50ZXJmYWNlLCBsaWtlIHRoZVxuICogc3RydWN0dXJhbCB0eXBpbmcgdGhhdCBUeXBlU2NyaXB0IHVzZXMuXG4gKi9cblxuZnVuY3Rpb24gdHlwZShTdHJ1Y3RzKSB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhTdHJ1Y3RzKTtcbiAgcmV0dXJuIHN0cnVjdChgVHlwZTx7JHtrZXlzLmpvaW4oJywnKX19PmAsIGZ1bmN0aW9uKiAodmFsdWUsIGN0eCkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgIHlpZWxkIGN0eC5mYWlsKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgY29uc3QgVmFsdWUgPSBTdHJ1Y3RzW2tleV07XG4gICAgICBjb25zdCB2ID0gdmFsdWVba2V5XTtcbiAgICAgIHlpZWxkKiBjdHguY2hlY2sodiwgVmFsdWUsIHZhbHVlLCBrZXkpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiB1bmlvbihTdHJ1Y3RzKSB7XG4gIHJldHVybiBzdHJ1Y3QoYCR7U3RydWN0cy5tYXAocyA9PiBzLnR5cGUpLmpvaW4oJyB8ICcpfWAsIGZ1bmN0aW9uKiAodmFsdWUsIGN0eCkge1xuICAgIGZvciAoY29uc3QgUyBvZiBTdHJ1Y3RzKSB7XG4gICAgICBjb25zdCBbLi4uZmFpbHVyZXNdID0gY3R4LmNoZWNrKHZhbHVlLCBTKTtcblxuICAgICAgaWYgKGZhaWx1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgeWllbGQgY3R4LmZhaWwoKTtcbiAgfSk7XG59XG4vKipcbiAqIENvbnZlcnQgYSB2YWx1ZSB0byBhIGxpdGVyYWwgc3RyaW5nLlxuICovXG5cbmZ1bmN0aW9uIHRvTGl0ZXJhbFN0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IGBcIiR7dmFsdWUucmVwbGFjZSgvXCIvZywgJ1wiJyl9XCJgIDogYCR7dmFsdWV9YDtcbn1cbi8qKlxuICogQ29lcmNlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0LWxpa2Ugc3RydWN0LlxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlT2JqZWN0Q29lcmNlcihTdHJ1Y3RzKSB7XG4gIGNvbnN0IGtub3ducyA9IE9iamVjdC5rZXlzKFN0cnVjdHMpO1xuICByZXR1cm4gdmFsdWUgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBjb25zdCB1bmtub3ducyA9IG5ldyBTZXQoT2JqZWN0LmtleXModmFsdWUpKTtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtub3ducykge1xuICAgICAgdW5rbm93bnMuZGVsZXRlKGtleSk7XG4gICAgICBjb25zdCBWYWx1ZSA9IFN0cnVjdHNba2V5XTtcbiAgICAgIGNvbnN0IHYgPSB2YWx1ZVtrZXldO1xuICAgICAgcmV0W2tleV0gPSBjb2VyY2UodiwgVmFsdWUpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5IG9mIHVua25vd25zKSB7XG4gICAgICByZXRba2V5XSA9IHZhbHVlW2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbn1cblxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDtcbiAgLy8gam9pbiB1c2VkIHRvIGZpeCBtZW1vcnkgaXNzdWUgY2F1c2VkIGJ5IGNvbmNhdGVuYXRpb246IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxNzUjYzRcbiAgcmV0dXJuIChbYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXV0pLmpvaW4oJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJ5dGVzVG9VdWlkO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL3NoYTEtYnJvd3Nlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvc2hhMS1icm93c2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8vIEFkYXB0ZWQgZnJvbSBDaHJpcyBWZW5lc3MnIFNIQTEgY29kZSBhdFxuLy8gaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9zaGExLmh0bWxcblxuXG5mdW5jdGlvbiBmKHMsIHgsIHksIHopIHtcbiAgc3dpdGNoIChzKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gKHggJiB5KSBeICh+eCAmIHopO1xuICAgIGNhc2UgMTogcmV0dXJuIHggXiB5IF4gejtcbiAgICBjYXNlIDI6IHJldHVybiAoeCAmIHkpIF4gKHggJiB6KSBeICh5ICYgeik7XG4gICAgY2FzZSAzOiByZXR1cm4geCBeIHkgXiB6O1xuICB9XG59XG5cbmZ1bmN0aW9uIFJPVEwoeCwgbikge1xuICByZXR1cm4gKHggPDwgbikgfCAoeD4+PiAoMzIgLSBuKSk7XG59XG5cbmZ1bmN0aW9uIHNoYTEoYnl0ZXMpIHtcbiAgdmFyIEsgPSBbMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYywgMHhjYTYyYzFkNl07XG4gIHZhciBIID0gWzB4Njc0NTIzMDEsIDB4ZWZjZGFiODksIDB4OThiYWRjZmUsIDB4MTAzMjU0NzYsIDB4YzNkMmUxZjBdO1xuXG4gIGlmICh0eXBlb2YoYnl0ZXMpID09ICdzdHJpbmcnKSB7XG4gICAgdmFyIG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuICAgIGJ5dGVzID0gbmV3IEFycmF5KG1zZy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKSBieXRlc1tpXSA9IG1zZy5jaGFyQ29kZUF0KGkpO1xuICB9XG5cbiAgYnl0ZXMucHVzaCgweDgwKTtcblxuICB2YXIgbCA9IGJ5dGVzLmxlbmd0aC80ICsgMjtcbiAgdmFyIE4gPSBNYXRoLmNlaWwobC8xNik7XG4gIHZhciBNID0gbmV3IEFycmF5KE4pO1xuXG4gIGZvciAodmFyIGk9MDsgaTxOOyBpKyspIHtcbiAgICBNW2ldID0gbmV3IEFycmF5KDE2KTtcbiAgICBmb3IgKHZhciBqPTA7IGo8MTY7IGorKykge1xuICAgICAgTVtpXVtqXSA9XG4gICAgICAgIGJ5dGVzW2kgKiA2NCArIGogKiA0XSA8PCAyNCB8XG4gICAgICAgIGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgMV0gPDwgMTYgfFxuICAgICAgICBieXRlc1tpICogNjQgKyBqICogNCArIDJdIDw8IDggfFxuICAgICAgICBieXRlc1tpICogNjQgKyBqICogNCArIDNdO1xuICAgIH1cbiAgfVxuXG4gIE1bTiAtIDFdWzE0XSA9ICgoYnl0ZXMubGVuZ3RoIC0gMSkgKiA4KSAvXG4gICAgTWF0aC5wb3coMiwgMzIpOyBNW04gLSAxXVsxNF0gPSBNYXRoLmZsb29yKE1bTiAtIDFdWzE0XSk7XG4gIE1bTiAtIDFdWzE1XSA9ICgoYnl0ZXMubGVuZ3RoIC0gMSkgKiA4KSAmIDB4ZmZmZmZmZmY7XG5cbiAgZm9yICh2YXIgaT0wOyBpPE47IGkrKykge1xuICAgIHZhciBXID0gbmV3IEFycmF5KDgwKTtcblxuICAgIGZvciAodmFyIHQ9MDsgdDwxNjsgdCsrKSBXW3RdID0gTVtpXVt0XTtcbiAgICBmb3IgKHZhciB0PTE2OyB0PDgwOyB0KyspIHtcbiAgICAgIFdbdF0gPSBST1RMKFdbdCAtIDNdIF4gV1t0IC0gOF0gXiBXW3QgLSAxNF0gXiBXW3QgLSAxNl0sIDEpO1xuICAgIH1cblxuICAgIHZhciBhID0gSFswXTtcbiAgICB2YXIgYiA9IEhbMV07XG4gICAgdmFyIGMgPSBIWzJdO1xuICAgIHZhciBkID0gSFszXTtcbiAgICB2YXIgZSA9IEhbNF07XG5cbiAgICBmb3IgKHZhciB0PTA7IHQ8ODA7IHQrKykge1xuICAgICAgdmFyIHMgPSBNYXRoLmZsb29yKHQvMjApO1xuICAgICAgdmFyIFQgPSBST1RMKGEsIDUpICsgZihzLCBiLCBjLCBkKSArIGUgKyBLW3NdICsgV1t0XSA+Pj4gMDtcbiAgICAgIGUgPSBkO1xuICAgICAgZCA9IGM7XG4gICAgICBjID0gUk9UTChiLCAzMCkgPj4+IDA7XG4gICAgICBiID0gYTtcbiAgICAgIGEgPSBUO1xuICAgIH1cblxuICAgIEhbMF0gPSAoSFswXSArIGEpID4+PiAwO1xuICAgIEhbMV0gPSAoSFsxXSArIGIpID4+PiAwO1xuICAgIEhbMl0gPSAoSFsyXSArIGMpID4+PiAwO1xuICAgIEhbM10gPSAoSFszXSArIGQpID4+PiAwO1xuICAgIEhbNF0gPSAoSFs0XSArIGUpID4+PiAwO1xuICB9XG5cbiAgcmV0dXJuIFtcbiAgICBIWzBdID4+IDI0ICYgMHhmZiwgSFswXSA+PiAxNiAmIDB4ZmYsIEhbMF0gPj4gOCAmIDB4ZmYsIEhbMF0gJiAweGZmLFxuICAgIEhbMV0gPj4gMjQgJiAweGZmLCBIWzFdID4+IDE2ICYgMHhmZiwgSFsxXSA+PiA4ICYgMHhmZiwgSFsxXSAmIDB4ZmYsXG4gICAgSFsyXSA+PiAyNCAmIDB4ZmYsIEhbMl0gPj4gMTYgJiAweGZmLCBIWzJdID4+IDggJiAweGZmLCBIWzJdICYgMHhmZixcbiAgICBIWzNdID4+IDI0ICYgMHhmZiwgSFszXSA+PiAxNiAmIDB4ZmYsIEhbM10gPj4gOCAmIDB4ZmYsIEhbM10gJiAweGZmLFxuICAgIEhbNF0gPj4gMjQgJiAweGZmLCBIWzRdID4+IDE2ICYgMHhmZiwgSFs0XSA+PiA4ICYgMHhmZiwgSFs0XSAmIDB4ZmZcbiAgXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaGExO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL3YzNS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvdjM1LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgYnl0ZXNUb1V1aWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2J5dGVzVG9VdWlkICovIFwiLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvYnl0ZXNUb1V1aWQuanNcIik7XG5cbmZ1bmN0aW9uIHV1aWRUb0J5dGVzKHV1aWQpIHtcbiAgLy8gTm90ZTogV2UgYXNzdW1lIHdlJ3JlIGJlaW5nIHBhc3NlZCBhIHZhbGlkIHV1aWQgc3RyaW5nXG4gIHZhciBieXRlcyA9IFtdO1xuICB1dWlkLnJlcGxhY2UoL1thLWZBLUYwLTldezJ9L2csIGZ1bmN0aW9uKGhleCkge1xuICAgIGJ5dGVzLnB1c2gocGFyc2VJbnQoaGV4LCAxNikpO1xuICB9KTtcblxuICByZXR1cm4gYnl0ZXM7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXMoc3RyKSB7XG4gIHN0ciA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKTsgLy8gVVRGOCBlc2NhcGVcbiAgdmFyIGJ5dGVzID0gbmV3IEFycmF5KHN0ci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGJ5dGVzW2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUsIHZlcnNpb24sIGhhc2hmdW5jKSB7XG4gIHZhciBnZW5lcmF0ZVVVSUQgPSBmdW5jdGlvbih2YWx1ZSwgbmFtZXNwYWNlLCBidWYsIG9mZnNldCkge1xuICAgIHZhciBvZmYgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG5cbiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PSAnc3RyaW5nJykgdmFsdWUgPSBzdHJpbmdUb0J5dGVzKHZhbHVlKTtcbiAgICBpZiAodHlwZW9mKG5hbWVzcGFjZSkgPT0gJ3N0cmluZycpIG5hbWVzcGFjZSA9IHV1aWRUb0J5dGVzKG5hbWVzcGFjZSk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB0aHJvdyBUeXBlRXJyb3IoJ3ZhbHVlIG11c3QgYmUgYW4gYXJyYXkgb2YgYnl0ZXMnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobmFtZXNwYWNlKSB8fCBuYW1lc3BhY2UubGVuZ3RoICE9PSAxNikgdGhyb3cgVHlwZUVycm9yKCduYW1lc3BhY2UgbXVzdCBiZSB1dWlkIHN0cmluZyBvciBhbiBBcnJheSBvZiAxNiBieXRlIHZhbHVlcycpO1xuXG4gICAgLy8gUGVyIDQuM1xuICAgIHZhciBieXRlcyA9IGhhc2hmdW5jKG5hbWVzcGFjZS5jb25jYXQodmFsdWUpKTtcbiAgICBieXRlc1s2XSA9IChieXRlc1s2XSAmIDB4MGYpIHwgdmVyc2lvbjtcbiAgICBieXRlc1s4XSA9IChieXRlc1s4XSAmIDB4M2YpIHwgMHg4MDtcblxuICAgIGlmIChidWYpIHtcbiAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IDE2OyArK2lkeCkge1xuICAgICAgICBidWZbb2ZmK2lkeF0gPSBieXRlc1tpZHhdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBidWYgfHwgYnl0ZXNUb1V1aWQoYnl0ZXMpO1xuICB9O1xuXG4gIC8vIEZ1bmN0aW9uI25hbWUgaXMgbm90IHNldHRhYmxlIG9uIHNvbWUgcGxhdGZvcm1zICgjMjcwKVxuICB0cnkge1xuICAgIGdlbmVyYXRlVVVJRC5uYW1lID0gbmFtZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gIH1cblxuICAvLyBQcmUtZGVmaW5lZCBuYW1lc3BhY2VzLCBwZXIgQXBwZW5kaXggQ1xuICBnZW5lcmF0ZVVVSUQuRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG4gIGdlbmVyYXRlVVVJRC5VUkwgPSAnNmJhN2I4MTEtOWRhZC0xMWQxLTgwYjQtMDBjMDRmZDQzMGM4JztcblxuICByZXR1cm4gZ2VuZXJhdGVVVUlEO1xufTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy91dWlkL3Y1LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvdXVpZC92NS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciB2MzUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xpYi92MzUuanMgKi8gXCIuL25vZGVfbW9kdWxlcy91dWlkL2xpYi92MzUuanNcIik7XG52YXIgc2hhMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbGliL3NoYTEgKi8gXCIuL25vZGVfbW9kdWxlcy91dWlkL2xpYi9zaGExLWJyb3dzZXIuanNcIik7XG5tb2R1bGUuZXhwb3J0cyA9IHYzNSgndjUnLCAweDUwLCBzaGExKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy92d28tc2RrLWxvZy1tZXNzYWdlcy9zcmMvZGVidWctbWVzc2FnZXMuanNvblwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL25vZGVfbW9kdWxlcy92d28tc2RrLWxvZy1tZXNzYWdlcy9zcmMvZGVidWctbWVzc2FnZXMuanNvbiAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBDT05GSUdfQkFUQ0hfRVZFTlRfTElNSVRfRVhDRUVERUQsIENPTkZJR19MT0dfTEVWRUxfU0VULCBDT05GSUdfQ1VTVE9NX0xPR0dFUl9VU0VELCBDT05GSUdfREVWRUxPUE1FTlRfTU9ERV9TVEFUVVMsIFBPTExJTkdfU0VUVElOR1NfRklMRV9SRUdJU1RFUkVELCBTRVRUSU5HU19GSUxFX1BST0NFU1NFRCwgSU1QUkVTU0lPTl9GT1JfVFJBQ0tfVVNFUiwgSU1QUkVTU0lPTl9GT1JfVFJBQ0tfR09BTCwgSU1QUkVTU0lPTl9GT1JfUFVTSCwgSU1QUkVTU0lPTl9GT1JfRVZFTlRfQVJDSF9UUkFDS19VU0VSLCBJTVBSRVNTSU9OX0ZPUl9FVkVOVF9BUkNIX1RSQUNLX0dPQUwsIElNUFJFU1NJT05fRk9SX0VWRU5UX0FSQ0hfUFVTSCwgRVZFTlRfQkFUQ0hfQkVGT1JFX0ZMVVNISU5HLCBFVkVOVF9CQVRDSF9GTFVTSCwgVVNFUl9TVE9SQUdFX1NFUlZJQ0VfTk9UX0NPTkZJR1VSRUQsIFVTRVJfU1RPUkFHRV9TRVJWSUNFX05PX1NUT1JFRF9EQVRBLCBWQVJJQVRJT05fUkFOR0VfQUxMT0NBVElPTiwgTUVHX0VMSUdJQkxFX0NBTVBBSUdOUywgU0VHTUVOVEFUSU9OX1NLSVBQRUQsIFNFR01FTlRBVElPTl9TVEFUVVMsIFdISVRFTElTVElOR19TS0lQUEVELCBVU0VSX1VVSUQsIFVTRVJfSEFTSF9CVUNLRVRfVkFMVUUsIFVTRVJfQ0FNUEFJR05fQlVDS0VUX1ZBTFVFUywgZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSkge1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoXCJ7XFxcIkNPTkZJR19CQVRDSF9FVkVOVF9MSU1JVF9FWENFRURFRFxcXCI6XFxcIih7ZmlsZX0pOiBJbXByZXNzaW9uIGV2ZW50IC0ge2VuZFBvaW50fSBmYWlsZWQgZHVlIHRvIGV4Y2VlZGluZyBwYXlsb2FkIHNpemUuIFBhcmFtZXRlciBldmVudHNQZXJSZXF1ZXN0IGluIGJhdGNoRXZlbnRzIGNvbmZpZyBpbiBsYXVuY2ggQVBJIGhhcyB2YWx1ZTp7ZXZlbnRzUGVyUmVxdWVzdH0gZm9yIGFjY291bnQgSUQ6e2FjY291bnRJZH0uIFBsZWFzZSByZWFkIHRoZSBvZmZpY2lhbCBkb2N1bWVudGF0aW9uIGZvciBrbm93aW5nIHRoZSBzaXplIGxpbWl0c1xcXCIsXFxcIkNPTkZJR19MT0dfTEVWRUxfU0VUXFxcIjpcXFwiKHtmaWxlfSk6IExvZyBsZXZlbCBzZXQgdG8ge2xldmVsfVxcXCIsXFxcIkNPTkZJR19DVVNUT01fTE9HR0VSX1VTRURcXFwiOlxcXCIoe2ZpbGV9KTogQ3VzdG9tIGxvZ2dlciB1c2VkXFxcIixcXFwiQ09ORklHX0RFVkVMT1BNRU5UX01PREVfU1RBVFVTXFxcIjpcXFwiKHtmaWxlfSk6IERFVkVMT1BNRU5UIG1vZGUgaXMgT04uIE5vIHRyYWNraW5nIGNhbGwgd2lsbCBiZSBtYWRlIHRvIFZXTyBTZXJ2ZXJcXFwiLFxcXCJQT0xMSU5HX1NFVFRJTkdTX0ZJTEVfUkVHSVNURVJFRFxcXCI6XFxcIih7ZmlsZX0pOiBQb2xsaW5nIG9mIHNldHRpbmdzLWZpbGUgaXMgcmVnaXN0ZXJlZCB3aXRoIGEgcGVyaW9kaWMgaW50ZXJ2YWwgb2Yge3BvbGxpbmdJbnRlcnZhbH0gbXNcXFwiLFxcXCJTRVRUSU5HU19GSUxFX1BST0NFU1NFRFxcXCI6XFxcIih7ZmlsZX0pOiBzZXR0aW5ncy1maWxlIG1hdGNoZXMgdGhlIHNjaGVtYSwgdmFsaWRhdGVkIGFuZCBwcm9wZXJseSBwcm9jZXNzZWQgZm9yIHRoZSBBY2NvdW50IElEOnthY2NvdW50SWR9XFxcIixcXFwiSU1QUkVTU0lPTl9GT1JfVFJBQ0tfVVNFUlxcXCI6XFxcIih7ZmlsZX0pOiBJbXByZXNzaW9uIGJ1aWx0IGZvciB0cmFja2luZyB1c2VyIC0ge3Byb3BlcnRpZXN9XFxcIixcXFwiSU1QUkVTU0lPTl9GT1JfVFJBQ0tfR09BTFxcXCI6XFxcIih7ZmlsZX0pOiBJbXByZXNzaW9uIGJ1aWx0IGZvciB0cmFja2luZyBnb2FsIC0ge3Byb3BlcnRpZXN9XFxcIixcXFwiSU1QUkVTU0lPTl9GT1JfUFVTSFxcXCI6XFxcIih7ZmlsZX0pOiBJbXByZXNzaW9uIGJ1aWx0IGZvciBwdXNoaW5nIGN1c3RvbSBkaW1lbnNpb24gLSB7cHJvcGVydGllc31cXFwiLFxcXCJJTVBSRVNTSU9OX0ZPUl9FVkVOVF9BUkNIX1RSQUNLX1VTRVJcXFwiOlxcXCIoe2ZpbGV9KTogSW1wcmVzc2lvbiBidWlsdCBmb3IgdndvX3ZhcmlhdGlvblNob3duIGV2ZW50IGZvciBBY2NvdW50IElEOnthY2NvdW50SWR9LCBVc2VyIElEOnt1c2VySWR9LCBhbmQgQ2FtcGFpZ24gSUQ6e2NhbXBhaWduSWR9XFxcIixcXFwiSU1QUkVTU0lPTl9GT1JfRVZFTlRfQVJDSF9UUkFDS19HT0FMXFxcIjpcXFwiKHtmaWxlfSk6IEltcHJlc3Npb24gYnVpbHQgZm9yIHtnb2FsTmFtZX0gZXZlbnQgZm9yIEFjY291bnQgSUQ6e2FjY291bnRJZH0sIFVzZXIgSUQ6e3VzZXJJZH0sIGFuZCBDYW1wYWlnbiBJRDp7Y2FtcGFpZ25JZH1cXFwiLFxcXCJJTVBSRVNTSU9OX0ZPUl9FVkVOVF9BUkNIX1BVU0hcXFwiOlxcXCIoe2ZpbGV9KTogSW1wcmVzc2lvbiBidWlsdCBmb3IgdmlzaXRvci1wcm9wZXJ0eTp7cHJvcGVydHl9IGZvciBBY2NvdW50IElEOnthY2NvdW50SWR9IGFuZCBVc2VyIElEOnt1c2VySWR9XFxcIixcXFwiRVZFTlRfQkFUQ0hfQkVGT1JFX0ZMVVNISU5HXFxcIjpcXFwiKHtmaWxlfSk6IGZsdXNoaW5nIGV2ZW50IHF1ZXVlIHttYW51YWxseX0gaGF2aW5nIHtsZW5ndGh9IGV2ZW50cyBmb3IgQWNjb3VudCBJRDp7YWNjb3VudElkfS4ge3RpbWVyfVxcXCIsXFxcIkVWRU5UX0JBVENIX0ZMVVNIXFxcIjpcXFwie3tmaWxlfX06IE1hbnVhbGx5IGZsdXNoaW5nIGJhdGNoIGV2ZW50cyBmb3IgQWNjb3VudCBJRDp7YWNjb3VudElkfSBoYXZpbmcge3F1ZXVlTGVuZ3RofSBldmVudHNcXFwiLFxcXCJVU0VSX1NUT1JBR0VfU0VSVklDRV9OT1RfQ09ORklHVVJFRFxcXCI6XFxcIih7ZmlsZX0pOiBVc2VyIFN0b3JhZ2UgU2VydmljZSBpcyBub3QgY29uZmlndXJlZCB0byBnZXQvc2V0IHRoZSBkYXRhXFxcIixcXFwiVVNFUl9TVE9SQUdFX1NFUlZJQ0VfTk9fU1RPUkVEX0RBVEFcXFwiOlxcXCIoe2ZpbGV9KTogTm8gc3RvcmVkIHZhcmlhdGlvbiBmb3IgVXNlciBJRDp7dXNlcklkfSBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBmb3VuZCBpbiBVc2VyIFN0b3JhZ2UgU2VydmljZVxcXCIsXFxcIlZBUklBVElPTl9SQU5HRV9BTExPQ0FUSU9OXFxcIjpcXFwiKHtmaWxlfSk6IFZhcmlhdGlvbjp7dmFyaWF0aW9uTmFtZX0gb2YgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBoYXZpbmcgd2VpZ2h0Ont2YXJpYXRpb25XZWlnaHR9IGdvdCBidWNrZXRpbmcgcmFuZ2U6ICgge3N0YXJ0fSAtIHtlbmR9IClcXFwiLFxcXCJNRUdfRUxJR0lCTEVfQ0FNUEFJR05TXFxcIjpcXFwiKHtmaWxlfSk6IENhbXBhaWduczoge2VsaWdpYmxlQ2FtcGFpZ25LZXlzfSBhcmUgZWxpZ2libGUsIHtpbkVsaWdpYmxlVGV4dH0gYXJlIGluZWxpZ2libGUgZnJvbSB0aGUgR3JvdXA6e2dyb3VwTmFtZX0gZm9yIHRoZSBVc2VyIElEOnt1c2VySWR9XFxcIixcXFwiU0VHTUVOVEFUSU9OX1NLSVBQRURcXFwiOlxcXCIoe2ZpbGV9KTogU2VnbWVudGF0aW9uIGlzIG5vdCB1c2VkIGZvciBDYW1wYWlnbjp7Y2FtcGFpZ25LZXl9LCBoZW5jZSBza2lwcGluZyBldmFsdWF0aW5nIHNlZ21lbnRhdGlvbnt2YXJpYXRpb259IGZvciBVc2VyIElEOnt1c2VySWR9XFxcIixcXFwiU0VHTUVOVEFUSU9OX1NUQVRVU1xcXCI6XFxcIih7ZmlsZX0pOiBVc2VyIElEOnt1c2VySWR9IGZvciBDYW1wYWlnbjp7Y2FtcGFpZ25LZXl9IHdpdGggdmFyaWFibGVzOntjdXN0b21WYXJpYWJsZXN9IHtzdGF0dXN9IHtzZWdtZW50YXRpb25UeXBlfSB7dmFyaWF0aW9ufVxcXCIsXFxcIldISVRFTElTVElOR19TS0lQUEVEXFxcIjpcXFwiKHtmaWxlfSk6IFdoaXRlbGlzdGluZyBpcyBub3QgdXNlZCBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSwgaGVuY2Ugc2tpcHBpbmcgZXZhbHVhdGluZyB3aGl0ZWxpc3RpbmcgZm9yIFVzZXIgSUQ6e3VzZXJJZH1cXFwiLFxcXCJVU0VSX1VVSURcXFwiOlxcXCIoe2ZpbGV9KTogVldPIFVVSUQgZ2VuZXJhdGVkIGZvciBBY2NvdW50IElkOnthY2NvdW50SWR9IGFuZCBVc2VyIElEOnt1c2VySWR9IGlzIHt1dWlkfVxcXCIsXFxcIlVTRVJfSEFTSF9CVUNLRVRfVkFMVUVcXFwiOlxcXCIoe2ZpbGV9KTogVXNlciBJRDp7dXNlcklkfSBoYXZpbmcgaGFzaDp7aGFzaFZhbHVlfSBnb3QgYnVja2V0VmFsdWU6e2J1Y2tldFZhbHVlfVxcXCIsXFxcIlVTRVJfQ0FNUEFJR05fQlVDS0VUX1ZBTFVFU1xcXCI6XFxcIih7ZmlsZX0pOiBVc2VyIElEOnt1c2VySWR9IGZvciBDYW1wYWlnbjp7Y2FtcGFpZ25LZXl9IGhhdmluZyBwZXJjZW50LXRyYWZmaWM6e3BlcmNlbnRUcmFmZmljfSBnb3QgaGFzaC12YWx1ZTp7aGFzaFZhbHVlfSBhbmQgYnVja2V0LXZhbHVlOntidWNrZXRWYWx1ZX1cXFwifVwiKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvdndvLXNkay1sb2ctbWVzc2FnZXMvc3JjL2Vycm9yLW1lc3NhZ2VzLmpzb25cIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvdndvLXNkay1sb2ctbWVzc2FnZXMvc3JjL2Vycm9yLW1lc3NhZ2VzLmpzb24gKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogQ09ORklHX1BBUkFNRVRFUl9JTlZBTElELCBDT05GSUdfUE9MTElOR19TREtfS0VZX05PVF9QUk9WSVZFRCwgQ09ORklHX0NPUlJVUFRFRCwgU0VUVElOR1NfRklMRV9JTlZBTElELCBTRVRUSU5HU19GSUxFX0NPUlJVUFRFRCwgQkFUQ0hfUVVFVUVfRU1QVFksIEFQSV9IQVNfQ09SUlVQVEVEX1NFVFRJTkdTX0ZJTEUsIEFQSV9CQURfUEFSQU1FVEVSUywgQVBJX05PVF9BUFBMSUNBQkxFLCBVU0VSX0lEX0lOVkFMSUQsIENBTVBBSUdOX05PVF9GT1VORF9GT1JfR09BTCwgUE9MTElOR19GQUlMRUQsIFNFR01FTlRBVElPTl9SRUdFWF9DUkVBVElPTl9GQUlMRUQsIFNFR01FTlRBVElPTl9FUlJPUiwgVVNFUl9TVE9SQUdFX1NFUlZJQ0VfR0VUX0ZBSUxFRCwgVVNFUl9TVE9SQUdFX1NFUlZJQ0VfU0VUX0ZBSUxFRCwgSU1QUkVTU0lPTl9GQUlMRUQsIFRBR19LRVlfTEVOR1RIX0VYQ0VFREVELCBUQUdfVkFMVUVfTEVOR1RIX0VYQ0VFREVELCBUUkFDS19BUElfR09BTF9OT1RfRk9VTkQsIFRSQUNLX0FQSV9SRVZFTlVFX05PVF9QQVNTRURfRk9SX1JFVkVOVUVfR09BTCwgVU5BQkxFX1RPX0NBU1RfVkFMVUUsIFZBUklBQkxFX05PVF9GT1VORCwgZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSkge1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpTT04ucGFyc2UoXCJ7XFxcIkNPTkZJR19QQVJBTUVURVJfSU5WQUxJRFxcXCI6XFxcIih7ZmlsZX0pOiB7cGFyYW1ldGVyfSBwYWFzZWQgaW4ge2FwaX0gQVBJIGlzIG5vdCBjb3JyZWN0LiBJdCBzaG91bGQgYmUgb2YgdHlwZTp7dHlwZX1cXFwiLFxcXCJDT05GSUdfUE9MTElOR19TREtfS0VZX05PVF9QUk9WSVZFRFxcXCI6XFxcIih7ZmlsZX0pOiBTREsgS2V5IGlzIHJlcXVpcmVkIGFsb25nIHdpdGggcG9sbGluZ0ludGVydmFsIHRvIHBvbGwgdGhlIHNldHRpbmdzLWZpbGVcXFwiLFxcXCJDT05GSUdfQ09SUlVQVEVEXFxcIjpcXFwiKHtmaWxlfSk6IENvbmZpZyBwYXNzZWQgdG8ge2FwaX0gQVBJIGlzIGludmFsaWQuIFBsZWFzZSByZWZlciBkZXZlbG9wZXIgZG9jc1xcXCIsXFxcIlNFVFRJTkdTX0ZJTEVfSU5WQUxJRFxcXCI6XFxcIih7ZmlsZX0pOiBTZXR0aW5ncyBmaWxlIHBhc3NlZCB3aGlsZSBpbnN0YW50aWF0aW5nIFNESyBpbnN0YW5jZSBpcyBpbnZhbGlkXFxcIixcXFwiU0VUVElOR1NfRklMRV9DT1JSVVBURURcXFwiOlxcXCIoe2ZpbGV9KTogRmV0Y2hlZCBzZXR0aW5ncy1maWxlIGRvZXNuJ3QgbWF0Y2ggdGhlIGRlc2lyZWQgc2NoZW1hLiBQbGVhc2UgY29udGFjdCBWV08gU3VwcG9ydCBmb3IgaGVscFxcXCIsXFxcIkJBVENIX1FVRVVFX0VNUFRZXFxcIjpcXFwie3tmaWxlfX06IE5vIGJhdGNoIHF1ZXVlIHByZXNlbnQgZm9yIGFjY291bnQ6e2FjY291bnRJZH0gd2hlbiBjYWxsaW5nIGZsdXNoRXZlbnRzIEFQSS4gQ2hlY2sgYmF0Y2hFdmVudHMgY29uZmlnIGluIGxhdW5jaCBBUElcXFwiLFxcXCJBUElfSEFTX0NPUlJVUFRFRF9TRVRUSU5HU19GSUxFXFxcIjpcXFwiKHtmaWxlfSk6IHthcGl9IEFQSSBoYXMgY29ycnVwdGVkIHNldHRpbmdzLWZpbGUuIFBsZWFzZSBjaGVjayBvciByZWFjaCBvdXQgdG8gVldPIHN1cHBvcnRcXFwiLFxcXCJBUElfQkFEX1BBUkFNRVRFUlNcXFwiOlxcXCIoe2ZpbGV9KToge2FwaX0gQVBJIGdvdCBiYWQgcGFyYW1ldGVycy4gUmVmZXIgdGhlIGRldmVsb3BlciBkb2NzXFxcIixcXFwiQVBJX05PVF9BUFBMSUNBQkxFXFxcIjpcXFwiKHtmaWxlfSk6IHthcGl9IEFQSSBpcyBub3QgdmFsaWQgZm9yIENhbXBhaWduOntjYW1wYWlnbktleX0gaGF2aW5nIHR5cGU6e2NhbXBhaWduVHlwZX0gZm9yIFVzZXIgSUQ6e3VzZXJJZH1cXFwiLFxcXCJVU0VSX0lEX0lOVkFMSURcXFwiOlxcXCIoe2ZpbGV9KTogSW52YWxpZCBVc2VyIElkOnt1c2VySWR9IHBhc3NlZCB0byB0aGUgQVBJXFxcIixcXFwiQ0FNUEFJR05fTk9UX0ZPVU5EX0ZPUl9HT0FMXFxcIjpcXFwiKHtmaWxlfSk6IE5vIHN1Y2ggY2FtcGFpZ24gZm91bmQgY29ycmVzcG9uZGluZyB0byBnb2FsSWRlbnRpZmllcjp7Z29hbElkZW50aWZpZXJ9LiBQbGVhc2UgdmVyaWZ5IGZyb20gVldPIGFwcFxcXCIsXFxcIlBPTExJTkdfRkFJTEVEXFxcIjpcXFwiKHtmaWxlfSk6IEZldGNoaW5nIG9mIHNldHRpbmdzLWZpbGUgZmFpbGVkIHZpYSBwb2xsaW5nIGZvciB0aGUgYWNjb3VudElkOnthY2NvdW50SWR9XFxcIixcXFwiU0VHTUVOVEFUSU9OX1JFR0VYX0NSRUFUSU9OX0ZBSUxFRFxcXCI6XFxcIih7ZmlsZX0pOiBSZWd1bGFyIGV4cHJlc3Npb246e3JlZ2V4fSB1c2VkIGZvciB0YXJnZXRpbmcgY291bmQgbm90IGJlIGV2YWx1YXRlZFxcXCIsXFxcIlNFR01FTlRBVElPTl9FUlJPUlxcXCI6XFxcIih7ZmlsZX0pOiBDb3VsZCBub3Qgc2VnbWVudCB0aGUgVXNlciBJRDp7dXNlcklkfSBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fXt2YXJpYXRpb259IHdpdGggY3VzdG9tVmFyaWFibGVzOntjdXN0b21WYXJpYWJsZXN9LiBFcnJvciBtZXNzYWdlOiB7ZXJyfVxcXCIsXFxcIlVTRVJfU1RPUkFHRV9TRVJWSUNFX0dFVF9GQUlMRURcXFwiOlxcXCIoe2ZpbGV9KTogR2V0dGluZyBkYXRhIGZyb20gVXNlciBTdG9yYWdlIFNlcnZpY2UgZmFpbGVkIGZvciBVc2VyIElEOnt1c2VySWR9LiBFcnJvcjoge2Vycm9yfVxcXCIsXFxcIlVTRVJfU1RPUkFHRV9TRVJWSUNFX1NFVF9GQUlMRURcXFwiOlxcXCIoe2ZpbGV9KTogU2F2aW5nIGRhdGEgaW50byBVc2VyIFN0b3JhZ2UgU2VydmljZSBmYWlsZWQgZm9yIFVzZXIgSUQ6e3VzZXJJZH0uIEVycm9yOiB7ZXJyb3J9XFxcIixcXFwiSU1QUkVTU0lPTl9GQUlMRURcXFwiOlxcXCIoe2ZpbGV9KTogSW1wcmVzc2lvbiBldmVudCBjb3VsZCBub3QgYmUgc2VudCB0byBWV08gLSB7ZW5kUG9pbnR9LiBSZWFzb246IHtlcnJ9XFxcIixcXFwiVEFHX0tFWV9MRU5HVEhfRVhDRUVERURcXFwiOlxcXCIoe2ZpbGV9KTogTGVuZ3RoIG9mIGN1c3RvbSBkaW1lbnNpb24ga2V5Ont0YWdLZXl9IGZvciBVc2VyIElkOnt1c2VySWR9IGNhbiBub3QgYmUgZ3JlYXRlciB0aGFuIDI1NVxcXCIsXFxcIlRBR19WQUxVRV9MRU5HVEhfRVhDRUVERURcXFwiOlxcXCIoe2ZpbGV9KTogTGVuZ3RoIG9mIGN1c3RvbSBkaW1lbnNpb24gdmFsdWU6e3RhZ1ZhbHVlfSBvZiB0YWdLZXk6e3RhZ0tleX0gZm9yIFVzZXIgSWQ6e3VzZXJJZH0gY2FuIG5vdCBiZSBncmVhdGVyIHRoYW4gMjU1XFxcIixcXFwiVFJBQ0tfQVBJX0dPQUxfTk9UX0ZPVU5EXFxcIjpcXFwiKHtmaWxlfSk6IEdvYWw6e2dvYWxJZGVudGlmaWVyfSBub3QgZm91bmQgZm9yIENhbXBhaWduOntjYW1wYWlnbktleX0gYW5kIFVzZXIgSWQ6e3VzZXJJZH1cXFwiLFxcXCJUUkFDS19BUElfUkVWRU5VRV9OT1RfUEFTU0VEX0ZPUl9SRVZFTlVFX0dPQUxcXFwiOlxcXCIoe2ZpbGV9KTogUmV2ZW51ZSB2YWx1ZSBzaG91bGQgYmUgcGFzc2VkIGZvciByZXZlbnVlIGdvYWw6e2dvYWxJZGVudGlmaWVyfSBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBhbmQgVXNlciBJZDp7dXNlcklkfVxcXCIsXFxcIlVOQUJMRV9UT19DQVNUX1ZBTFVFXFxcIjpcXFwiKHtmaWxlfSk6IFVuYWJsZSB0byBjYXN0IHZhbHVlOnt2YXJpYWJsZVZhbHVlfSB0byB0eXBlOnt2YXJpYWJsZVR5cGV9LCByZXR1cm5pbmcgbnVsbFxcXCIsXFxcIlZBUklBQkxFX05PVF9GT1VORFxcXCI6XFxcIih7ZmlsZX0pOiBWYXJpYWJsZTp7dmFyaWFibGVLZXl9IGZvciBVc2VyIElEOnt1c2VySWR9IGlzIG5vdCBmb3VuZCBpbiBzZXR0aW5ncy1maWxlLCByZXR1cm5pbmcgbnVsbFxcXCJ9XCIpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy92d28tc2RrLWxvZy1tZXNzYWdlcy9zcmMvaW5mby1tZXNzYWdlcy5qc29uXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvdndvLXNkay1sb2ctbWVzc2FnZXMvc3JjL2luZm8tbWVzc2FnZXMuanNvbiAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IENPTkZJR19WQUxJRCwgQ09ORklHX1BBUkFNRVRFUl9VU0VELCBDT05GSUdfUkVUVVJOX1BST01JU0UsIFNES19JTklUSUFMSVpFRCwgUE9MTElOR19TVUNDRVNTLCBQT0xMSU5HX1NFVFRJTkdTX0ZJTEVfVVBEQVRFRCwgUE9MTElOR19TRVRUSU5HU19GSUxFX05PVF9VUERBVEVELCBERUNJU0lPTl9OT19WQVJJQVRJT05fQUxMT1RFRCwgRVZFTlRfQkFUQ0hfREVGQVVMVFMsIEVWRU5UX1FVRVVFLCBFVkVOVF9CQVRDSF9BZnRlcl9GTFVTSElORywgQ0FNUEFJR05fTk9UX0FDVElWQVRFRCwgQ0FNUEFJR05fVVNFUl9BTFJFQURZX1RSQUNLRUQsIENBTVBBSUdOX0dPQUxfQUxSRUFEWV9UUkFDS0VELCBHT1RfU1RPUkVEX1ZBUklBVElPTiwgR0VUVElOR19EQVRBX1VTRVJfU1RPUkFHRV9TRVJWSUNFLCBTRVRUSU5HX0RBVEFfVVNFUl9TVE9SQUdFX1NFUlZJQ0UsIElNUFJFU1NJT05fU1VDQ0VTUywgSU1QUkVTU0lPTl9TVUNDRVNTX0ZPUl9FVkVOVF9BUkNILCBJTVBSRVNTSU9OX0JBVENIX1NVQ0NFU1MsIElNUFJFU1NJT05fQkFUQ0hfRkFJTEVELCBNRUdfRUxJR0lCTEVfQ0FNUEFJR05TLCBPVEhFUl9DQU1QQUlHTl9TQVRJU0ZJRVNfV0hJVEVMSVNUSU5HX1NUT1JBR0UsIFNFR01FTlRBVElPTl9TVEFUVVMsIE1FR19DQUxMRURfQ0FNUEFJR05fTk9UX1dJTk5FUiwgTUVHX0dPVF9XSU5ORVJfQ0FNUEFJR04sIEZFQVRVUkVfU1RBVFVTLCBGRUFUVVJFX1ZBUklBQkxFX1ZBTFVFLCBGRUFUVVJFX1ZBUklBQkxFX0RFRkFVTFRfVkFMVUUsIFVTRVJfTk9UX1BBUlRfT0ZfQ0FNUEFJR04sIFVTRVJfVkFSSUFUSU9OX1NUQVRVUywgVVNFUl9DQU1QQUlHTl9FTElHSUJJTElUWSwgVVNFUl9WQVJJQVRJT05fQUxMT0NBVElPTl9TVEFUVVMsIE9QVF9PVVRfQVBJX0NBTExFRCwgQVBJX05PVF9FTkFCTEVELCBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gSlNPTi5wYXJzZShcIntcXFwiQ09ORklHX1ZBTElEXFxcIjpcXFwiKHtmaWxlfSk6IFNESyBjb25maWd1cmF0aW9uIGFuZCBhY2NvdW50IHNldHRpbmdzLWZpbGUgYXJlIHZhbGlkXFxcIixcXFwiQ09ORklHX1BBUkFNRVRFUl9VU0VEXFxcIjpcXFwiKHtmaWxlfSk6IHtwYXJhbWV0ZXJ9IHBhYXNlZCBpbiBsYXVuY2ggQVBJIGhhdmluZyB0eXBlOnt0eXBlfVxcXCIsXFxcIkNPTkZJR19SRVRVUk5fUFJPTUlTRVxcXCI6XFxcIih7ZmlsZX0pOiB7bWV0aG9kfSBBUEkgcmV0dXJucyBhIHByb21pc2UgYXMgcmV0dXJuUHJvbWlzZUZvciBpcyBzZXQgdG8gdHJ1ZSBmb3IgdGhpcyBBUElcXFwiLFxcXCJTREtfSU5JVElBTElaRURcXFwiOlxcXCIoe2ZpbGV9KTogU0RLIGlzIHByb3Blcmx5IGluaXRpYWx6ZWQgd2l0aCB0aGUgcGFzc2VkIGNvbmZpZ3VyYXRpb25cXFwiLFxcXCJQT0xMSU5HX1NVQ0NFU1NcXFwiOlxcXCIoe2ZpbGV9KTogc2V0dGluZ3MtZmlsZSBmZXRjaGVkIHN1Y2Nlc3NmdWxseSB2aWEgcG9sbGluZyBmb3IgdGhlIGFjY291bnRJZDp7YWNjb3VudElkfVxcXCIsXFxcIlBPTExJTkdfU0VUVElOR1NfRklMRV9VUERBVEVEXFxcIjpcXFwiKHtmaWxlfSk6IFNESyBpbnN0YW5jZSBpcyB1cGRhdGVkIHdpdGggdGhlIGxhdGVzdCBzZXR0aW5ncy1maWxlIGZvciB0aGUgYWNjb3VudElkOnthY2NvdW50SWR9XFxcIixcXFwiUE9MTElOR19TRVRUSU5HU19GSUxFX05PVF9VUERBVEVEXFxcIjpcXFwie3tmaWxlfX06IHNldHRpbmdzLWZpbGUgZmV0Y2hlZCB2aWEgcG9sbGluZyBpcyBzYW1lIGFzIGVhcmxpZXIgZmV0Y2hlZCBzZXR0aW5nc1xcXCIsXFxcIkRFQ0lTSU9OX05PX1ZBUklBVElPTl9BTExPVEVEXFxcIjpcXFwiKHtmaWxlfSk6IFZhcmlhdGlvbiB3YXMgbm90IGFzc2lnbmVkIHRvIHRoZSBVc2VyIElEOnt1c2VySWR9IGZvciBDYW1wYWlnbjp7Y2FtcGFpZ25LZXl9XFxcIixcXFwiRVZFTlRfQkFUQ0hfREVGQVVMVFNcXFwiOlxcXCIoe2ZpbGV9KToge3BhcmFtZXRlcn0gbm90IHBhc3NlZCBpbiBTREsgY29uZmlndXJhdGlvbiwgc2V0dGluZyBpdCBkZWZhdWx0IHRvIHtkZWZhdWx0VmFsdWV9XFxcIixcXFwiRVZFTlRfUVVFVUVcXFwiOlxcXCIoe2ZpbGV9KTogRXZlbnQgd2l0aCBwYXlsb2FkOntldmVudH0gcHVzaGVkIHRvIHRoZSB7cXVldWVUeXBlfSBxdWV1ZVxcXCIsXFxcIkVWRU5UX0JBVENIX0FmdGVyX0ZMVVNISU5HXFxcIjpcXFwiKHtmaWxlfSk6IEV2ZW50IHF1ZXVlIGhhdmluZyB7bGVuZ3RofSBldmVudHMgaGFzIGJlZW4gZmx1c2hlZCB7bWFudWFsbHl9XFxcIixcXFwiQ0FNUEFJR05fTk9UX0FDVElWQVRFRFxcXCI6XFxcIih7ZmlsZX0pOiBBY3RpdmF0ZSB0aGUgY2FtcGFpZ246e2NhbXBhaWduS2V5fSBmaXJzdCBmb3IgVXNlciBJRDp7dXNlcklkfSB0byB7cmVhc29ufVxcXCIsXFxcIkNBTVBBSUdOX1VTRVJfQUxSRUFEWV9UUkFDS0VEXFxcIjpcXFwiKHtmaWxlfSk6IFVzZXIgSUQ6e3VzZXJJZH0gZm9yIENhbXBhaWduOntjYW1wYWlnbktleX0gaGFzIGFscmVhZHkgYmVlbiB0cmFja2VkIGVhcmxpZXIgZm9yIFxcXFxcXFwie2FwaX1cXFxcXFxcIiBBUEkuIE5vIHRyYWNraW5nIGNhbGwgaXMgbWFkZSB0byBWV08gc2VydmVyXFxcIixcXFwiQ0FNUEFJR05fR09BTF9BTFJFQURZX1RSQUNLRURcXFwiOlxcXCIoe2ZpbGV9KTogR29hbDp7Z29hbElkZW50aWZpZXJ9IG9mIENhbXBhaWduOntjYW1wYWlnbktleX0gZm9yIFVzZXIgSUQ6e3VzZXJJZH0gaGFzIGFscmVhZHkgYmVlbiB0cmFja2VkIGVhcmxpZXIuIE5vIHRyYWNraW5nIGNhbGwgaXMgbWFkZSB0byBWV08gc2VydmVyXFxcIixcXFwiR09UX1NUT1JFRF9WQVJJQVRJT05cXFwiOlxcXCIoe2ZpbGV9KTogR290IHN0b3JlZCB2YXJpYXRpb24gZnJvbSBVc2VyIFN0b3JhZ2UgU2VydmljZSBmb3IgVXNlciBJRDp7dXNlcklkfSBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBhcyBWYXJpYXRpb246e3ZhcmlhdGlvbk5hbWV9XFxcIixcXFwiR0VUVElOR19EQVRBX1VTRVJfU1RPUkFHRV9TRVJWSUNFXFxcIjpcXFwiKHtmaWxlfSk6IFJlYWQgZGF0YSBmcm9tIFVzZXIgU3RvcmFnZSBTZXJ2aWNlIGZvciBVc2VyIElEOnt1c2VySWR9IGFuZCBDYW1wYWlnbjp7Y2FtcGFpZ25LZXl9XFxcIixcXFwiU0VUVElOR19EQVRBX1VTRVJfU1RPUkFHRV9TRVJWSUNFXFxcIjpcXFwiKHtmaWxlfSk6IFNldCBkYXRhIGludG8gVXNlciBTdG9yYWdlIFNlcnZpY2UgZm9yIFVzZXIgSUQ6e3VzZXJJZH0gYW5kIENhbXBhaWduOntjYW1wYWlnbktleX1cXFwiLFxcXCJJTVBSRVNTSU9OX1NVQ0NFU1NcXFwiOlxcXCIoe2ZpbGV9KTogSW1wcmVzc2lvbiBldmVudCAtIHtlbmRQb2ludH0gd2FzIHN1Y2Nlc3NmdWxseSByZWNlaXZlZCBieSBWV08gaGF2aW5nIG1haW4ga2V5czogQWNjb3VudCBJRDp7YWNjb3VudElkfSwge21haW5LZXlzfVxcXCIsXFxcIklNUFJFU1NJT05fU1VDQ0VTU19GT1JfRVZFTlRfQVJDSFxcXCI6XFxcIih7ZmlsZX0pOiBJbXByZXNzaW9uIGZvciB7ZXZlbnR9IC0ge2VuZFBvaW50fSB3YXMgc3VjY2Vzc2Z1bGx5IHJlY2VpdmVkIGJ5IFZXTyBmb3IgQWNjb3VudCBJRDp7YWNjb3VudElkfVxcXCIsXFxcIklNUFJFU1NJT05fQkFUQ0hfU1VDQ0VTU1xcXCI6XFxcIih7ZmlsZX0pOiBJbXByZXNzaW9uIGV2ZW50IC0ge2VuZFBvaW50fSB3YXMgc3VjY2Vzc2Z1bGx5IHJlY2VpdmVkIGJ5IFZXTyBoYXZpbmcgQWNjb3VudCBJRDp7YWNjb3VudElkfVxcXCIsXFxcIklNUFJFU1NJT05fQkFUQ0hfRkFJTEVEXFxcIjpcXFwiKHtmaWxlfSk6IEJhdGNoIGV2ZW50cyBjb3VsZG5cXFxcXFxcInQgYmUgcmVjZWl2ZWQgYnkgVldPLiBDYWxsaW5nIEZsdXNoIENhbGxiYWNrIHdpdGggZXJyb3IgYW5kIGRhdGFcXFwiLFxcXCJNRUdfRUxJR0lCTEVfQ0FNUEFJR05TXFxcIjpcXFwiKHtmaWxlfSk6IEdvdCB7bm9PZkVsaWdpYmxlQ2FtcGFpZ25zfSBlbGlnaWJsZSB3aW5uZXJzIG91dCBvZiB7bm9PZkdyb3VwQ2FtcGFpZ25zfSBjYW1wYWlnbnMgZnJvbSB0aGUgR3JvdXA6e2dyb3VwTmFtZX0gYW5kIGZvciBVc2VyIElEOnt1c2VySWR9XFxcIixcXFwiT1RIRVJfQ0FNUEFJR05fU0FUSVNGSUVTX1dISVRFTElTVElOR19TVE9SQUdFXFxcIjpcXFwiKHtmaWxlfSk6IENhbXBhaWduOntjYW1wYWlnbktleX0gb2YgR3JvdXA6e2dyb3VwTmFtZX0gc2F0aXNmaWVzIHt0eXBlfSBmb3IgVXNlciBJRDp7dXNlcklkfVxcXCIsXFxcIlNFR01FTlRBVElPTl9TVEFUVVNcXFwiOlxcXCIoe2ZpbGV9KTogVXNlciBJRDp7dXNlcklkfSBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSB3aXRoIHZhcmlhYmxlczp7Y3VzdG9tVmFyaWFibGVzfSB7c3RhdHVzfSB7c2VnbWVudGF0aW9uVHlwZX0ge3ZhcmlhdGlvbn1cXFwiLFxcXCJNRUdfQ0FMTEVEX0NBTVBBSUdOX05PVF9XSU5ORVJcXFwiOlxcXCIoe2ZpbGV9KTogQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBkb2VzIG5vdCBxdWFsaWZ5IGZyb20gdGhlIG11dHVhbGx5IGV4Y2x1c2l2ZSBncm91cDp7Z3JvdXBOYW1lfSBmb3IgVXNlciBJRDp7dXNlcklkfVxcXCIsXFxcIk1FR19HT1RfV0lOTkVSX0NBTVBBSUdOXFxcIjpcXFwiKHtmaWxlfSk6IENhbXBhaWduOntjYW1wYWlnbktleX0gaXMgc2VsZWN0ZWQgZnJvbSB0aGUgbXV0dWFsbHkgZXhjbHVzaXZlIGdyb3VwOntncm91cE5hbWV9IGZvciB0aGUgVXNlciBJRDp7dXNlcklkfVxcXCIsXFxcIkZFQVRVUkVfU1RBVFVTXFxcIjpcXFwiKHtmaWxlfSk6IENhbXBhaWduOntjYW1wYWlnbktleX0gaXMge3N0YXR1c30gZm9yIHVzZXIgSUQ6e3VzZXJJZH1cXFwiLFxcXCJGRUFUVVJFX1ZBUklBQkxFX1ZBTFVFXFxcIjpcXFwiKHtmaWxlfSk6IEZvciBVc2VyIElEOnt1c2VySWR9LCB2YWx1ZSBmb3IgdmFyaWFibGU6e3ZhcmlhYmxlS2V5fSBvZiBmZWF0dXJlOntjYW1wYWlnbktleX0gaXM6e3ZhcmlhYmxlVmFsdWV9XFxcIixcXFwiRkVBVFVSRV9WQVJJQUJMRV9ERUZBVUxUX1ZBTFVFXFxcIjpcXFwiKHtmaWxlfSk6IEZlYXR1cmUgaXMgbm90IGVuYWJsZWQgZm9yIHZhcmlhdGlvbjp7dmFyaWF0aW9uTmFtZX0uIFJldHVybmluZyBkZWZhdWx0IHZhbHVlIGZvciB0aGUgdmFyaWFibGU6e3ZhcmlhYmxlS2V5fVxcXCIsXFxcIlVTRVJfTk9UX1BBUlRfT0ZfQ0FNUEFJR05cXFwiOlxcXCIoe2ZpbGV9KTogVXNlciBJRDp7dXNlcklkfSBkaWQgbm90IHF1YWxpZnkgZm9yIENhbXBhaWduOntjYW1wYWlnbktleX1cXFwiLFxcXCJVU0VSX1ZBUklBVElPTl9TVEFUVVNcXFwiOlxcXCIoe2ZpbGV9KTogVXNlciBJRDp7dXNlcklkfSBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSB7c3RhdHVzfVxcXCIsXFxcIlVTRVJfQ0FNUEFJR05fRUxJR0lCSUxJVFlcXFwiOlxcXCIoe2ZpbGV9KTogVXNlciBJRDp7dXNlcklkfSBmb3IgQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBpcyB7c3RhdHVzfSB0byBiZWNvbWUgcGFydCBvZiBjYW1wYWlnblxcXCIsXFxcIlVTRVJfVkFSSUFUSU9OX0FMTE9DQVRJT05fU1RBVFVTXFxcIjpcXFwiKHtmaWxlfSk6IFVzZXIgSUQ6e3VzZXJJZH0gZm9yIENhbXBhaWduOntjYW1wYWlnbktleX0ge3N0YXR1c31cXFwiLFxcXCJPUFRfT1VUX0FQSV9DQUxMRURcXFwiOlxcXCIoe2ZpbGV9KTogWW91IGhhdmUgb3B0ZWQgb3V0IGZvciBub3QgdHJhY2tpbmcgaS5lLiBhbGwgQVBJIGNhbGxzIHdpbGwgc3RvcCBmdW5jdGlvbmluZyBhbmQgd2lsbCBzaW1wbHkgZWFybHkgcmV0dXJuXFxcIixcXFwiQVBJX05PVF9FTkFCTEVEXFxcIjpcXFwiKHtmaWxlfSk6IHthcGl9IEFQSSBpcyBkaXNhYmxlZCBhcyB5b3Ugb3B0ZWQgb3V0IGZvciB0cmFja2luZy4gUmVpbml0aWFsaXplIHRoZSBTREsgdG8gZW5hYmxlIHRoZSBub3JtYWwgZnVuY3Rpb25pbmcgb2YgYWxsIEFQSXMuXFxcIn1cIik7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL3Z3by1zZGstbG9nLW1lc3NhZ2VzL3NyYy93YXJuaW5nLW1lc3NhZ2VzLmpzb25cIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL25vZGVfbW9kdWxlcy92d28tc2RrLWxvZy1tZXNzYWdlcy9zcmMvd2FybmluZy1tZXNzYWdlcy5qc29uICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogQ0FNUEFJR05fTk9UX1JVTk5JTkcsIENBTVBBSUdOX05PVF9BQ1RJVkFURUQsIGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBKU09OLnBhcnNlKFwie1xcXCJDQU1QQUlHTl9OT1RfUlVOTklOR1xcXCI6XFxcIih7ZmlsZX0pOiB7YXBpfSBBUEkgY2FsbGVkIHdpdGggQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBidXQgdGhlIGNhbXBhaWduIGlzIG5vdCBSVU5OSU5HLiBQbGVhc2UgdmVyaWZ5IGZyb20gVldPIEFwcFxcXCIsXFxcIkNBTVBBSUdOX05PVF9BQ1RJVkFURURcXFwiOlxcXCIoe2ZpbGV9KTogQ2FtcGFpZ246e2NhbXBhaWduS2V5fSBmb3IgVXNlciBJRDp7dXNlcklkfSBpcyBub3QgeWV0IGFjdGl2YXRlZCBmb3IgQVBJOnthcGl9LiBVc2UgYWN0aXZhdGUgQVBJIHRvIGFjdGl2YXRlIEEvQiB0ZXN0IG9yIGlzRmVhdHVyZUVuYWJsZWQgQVBJIHRvIGFjdGl2YXRlIEZlYXR1cmUgVGVzdFxcXCJ9XCIpO1xuXG4vKioqLyB9KVxuXG4vKioqKioqLyB9KTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dndvLWphdmFzY3JpcHQtc2RrLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/vwo-node-sdk/dist/vwo-javascript-sdk.js\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["pages/_app","main"], function() { return __webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2Fhome%2Frunner%2Fvwo-node-nextjs-breaking-ssr%2Fpages%2Findex.js&page=%2F!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);